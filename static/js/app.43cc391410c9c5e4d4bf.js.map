{"version":3,"sources":["webpack:///static/js/app.43cc391410c9c5e4d4bf.js","webpack:///./examples/pages/demo-background.vue?f601","webpack:///./examples/components/demo-block.vue?1794","webpack:///./examples/App.vue?3771","webpack:///./src/model-obj.vue","webpack:///./src/util.js","webpack:///./examples/pages/demo-background.vue","webpack:///./examples/pages/demo-basic.vue","webpack:///./examples/pages/demo-collada.vue","webpack:///./examples/pages/demo-event.vue","webpack:///./examples/pages/demo-gltf.vue","webpack:///./examples/pages/demo-json.vue","webpack:///./examples/pages/demo-obj-mtl.vue","webpack:///./examples/pages/demo-obj.vue","webpack:///./examples/pages/demo-ply.vue","webpack:///./examples/pages/demo-rotate.vue","webpack:///./examples/pages/demo-stl.vue","webpack:///./src/model-gltf.vue","webpack:///./src/model-ply.vue","webpack:///./src/model-stl.vue","webpack:///./src/model-three.vue","webpack:///./examples/pages/demo-json.vue?5534","webpack:///./examples/pages/demo-stl.vue?ec03","webpack:///./examples/pages/demo-obj.vue?36e0","webpack:///./examples/pages/demo-basic.vue?1bd2","webpack:///./examples/pages/demo-background.vue?486b","webpack:///./examples/pages/demo-obj-mtl.vue?ed5c","webpack:///./examples/components/demo-block.vue?b978","webpack:///./examples/pages/demo-collada.vue?eca3","webpack:///./examples/pages/demo-gltf.vue?0f3e","webpack:///./examples/pages/demo-ply.vue?d0e3","webpack:///./examples/pages/demo-rotate.vue?ee2b","webpack:///./examples/App.vue?3f0c","webpack:///./src/model-mixin.vue?997a","webpack:///./examples/pages/demo-event.vue?853b","webpack:///./examples/pages/demo-background.vue?7dd8","webpack:///./examples/components/demo-block.vue?c641","webpack:///./examples/App.vue?d22b","webpack:///./examples/components/demo-block.vue","webpack:///./src/model-collada.vue","webpack:///./examples/router/index.js","webpack:///./examples/App.vue","webpack:///./examples/index.js","webpack:///./examples/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-background.vue","webpack:///demo-basic.vue","webpack:///demo-collada.vue","webpack:///demo-event.vue","webpack:///demo-gltf.vue","webpack:///demo-json.vue","webpack:///demo-obj-mtl.vue","webpack:///demo-obj.vue","webpack:///demo-ply.vue","webpack:///demo-rotate.vue","webpack:///demo-stl.vue","webpack:///model-collada.vue","webpack:///model-gltf.vue","webpack:///model-mixin.vue","webpack:///model-obj.vue","webpack:///model-ply.vue","webpack:///model-stl.vue","webpack:///model-three.vue","webpack:///./src/controls/OrbitControls.js","webpack:///./src/loaders/ColladaLoader.js","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/loaders/GLTFLoader.js","webpack:///./src/loaders/LoaderUtils.js","webpack:///./src/loaders/MTLLoader.js","webpack:///./src/loaders/OBJLoader.js","webpack:///./src/loaders/PLYLoader.js","webpack:///./src/loaders/STLLoader.js","webpack:///./src/model-mixin.vue"],"names":["webpackJsonp","120","module","exports","__webpack_require__","undefined","push","i","121","122","123","13","Component","14","__webpack_exports__","getSize","object","box","setFromObject","getCenter","toIndexed","bufferGeometry","exists","v","vertices","length","equals","raw_uvs","raw_positions","getAttribute","array","hasUV","raw_normals","hasNormal","face","face_normalss","face_uvs","tmp_indices","indices","normals","uvs","v0","__WEBPACK_IMPORTED_MODULE_0_three__","v1","v2","n0","n1","n2","uv0","uv1","uv2","x","y","z","forEach","id","clone","positionBuffer","Float32Array","normalBuffer","uvBuffer","i2","i3","addAttribute","setIndex","Uint32Array","d","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","render","_vm","this","_h","$createElement","_c","_self","attrs","vue-code","code","html-code","htmlCode","slot","backgroundAlpha","src","on","on-load","onLoad","_v","directives","name","rawName","value","expression","staticClass","staticRenderFns","318","319","320","321","click","$event","bgColor","bgAlpha","backgroundColor","322","mtl","323","_t","ref","_s","_f","vueCode","324","rotation","325","326","327","328","_m","to","href","329","staticStyle","width","height","margin","border","padding","color","330","on-mousemove","onMouseMove","332","content","locals","333","334","4","49","50","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","path","component","redirect","51","52","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","h","a","53","pages","__WEBPACK_IMPORTED_MODULE_0__demo_basic__","__WEBPACK_IMPORTED_MODULE_0__demo_basic___default","__WEBPACK_IMPORTED_MODULE_1__demo_event__","__WEBPACK_IMPORTED_MODULE_1__demo_event___default","__WEBPACK_IMPORTED_MODULE_2__demo_background__","__WEBPACK_IMPORTED_MODULE_2__demo_background___default","__WEBPACK_IMPORTED_MODULE_3__demo_rotate__","__WEBPACK_IMPORTED_MODULE_3__demo_rotate___default","__WEBPACK_IMPORTED_MODULE_4__demo_obj__","__WEBPACK_IMPORTED_MODULE_4__demo_obj___default","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default","__WEBPACK_IMPORTED_MODULE_6__demo_gltf__","__WEBPACK_IMPORTED_MODULE_6__demo_gltf___default","__WEBPACK_IMPORTED_MODULE_7__demo_stl__","__WEBPACK_IMPORTED_MODULE_7__demo_stl___default","__WEBPACK_IMPORTED_MODULE_8__demo_collada__","__WEBPACK_IMPORTED_MODULE_8__demo_collada___default","__WEBPACK_IMPORTED_MODULE_9__demo_json__","__WEBPACK_IMPORTED_MODULE_9__demo_json___default","__WEBPACK_IMPORTED_MODULE_10__demo_ply__","__WEBPACK_IMPORTED_MODULE_10__demo_ply___default","54","55","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","type","default","mounted","highlightBlock","$refs","data","filters","val","components","56","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default","loading","methods","setBackground","alpha","ModelObj","DemoBlock","57","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default","ModelThree","58","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default","Math","PI","ModelCollada","59","intersected","event","console","log","material","setStyle","60","__WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue___default","ModelGltf","61","62","63","64","__WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue___default","ModelPly","65","rotate","requestAnimationFrame","66","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default","ModelStl","67","__WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default","mixins","lights","Array","position","skyColor","groundColor","intensity","smoothing","Boolean","loader","getObject","collada","scene","68","__WEBPACK_IMPORTED_MODULE_0__loaders_GLTFLoader__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default","load","_this","wrapper","remove","addObject","$emit","xhr","err","69","__WEBPACK_IMPORTED_MODULE_1__util__","__WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__","suportWebGL","canvas","document","createElement","window","WebGLRenderingContext","getContext","e","Number","scale","cameraPosition","cameraRotation","cameraUp","cameraLookAt","controllable","size","raycaster","mouse","camera","renderer","controls","allLights","clock","performance","Date","computed","hasListener","events","_events","result","created","addEventListener","onResize","$el","offsetWidth","offsetHeight","antialias","shadowMap","enabled","add","update","onMouseDown","onMouseUp","onClick","animate","beforeDestroy","removeEventListener","watch","deep","handler","set","oldVal","updateLights","updateCamera","updateRenderer","updateControls","$nextTick","pick","clientX","clientY","rect","getBoundingClientRect","left","top","setFromCamera","intersects","intersectObject","updateModel","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","aspect","updateProjectionMatrix","up","lookAt","distance","_this2","apply","item","toLowerCase","light","_color","_intensity","decay","copy","_color2","_intensity2","target","_intensity3","dispose","_this3","arguments","process","center","negate","70","__WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__","__WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__","__WEBPACK_IMPORTED_MODULE_2__util__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default","mtlPath","mtlLoader","traverse","child","geometry","computeVertexNormals","onProgress","onError","mtlSrc","exec","setPath","materials","preload","setMaterials","71","__WEBPACK_IMPORTED_MODULE_0__loaders_PLYLoader__","__WEBPACK_IMPORTED_MODULE_2_three__","72","__WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__","73","74","OrbitControls","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_1_three__","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","pow","zoomSpeed","rotateLeft","angle","sphericalDelta","theta","rotateUp","phi","dollyIn","dollyScale","zoom","max","minZoom","min","maxZoom","zoomChanged","warn","enableZoom","dollyOut","handleMouseDownRotate","rotateStart","handleMouseDownDolly","dollyStart","handleMouseDownPan","panStart","handleMouseMoveRotate","rotateEnd","rotateDelta","subVectors","element","body","clientWidth","rotateSpeed","clientHeight","handleMouseMoveDolly","dollyEnd","dollyDelta","handleMouseMovePan","panEnd","panDelta","pan","handleMouseUp","handleMouseWheel","deltaY","handleKeyDown","keyCode","keys","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","mouseButtons","ORBIT","enableRotate","state","STATE","ROTATE","ZOOM","DOLLY","PAN","enablePan","NONE","dispatchEvent","startEvent","endEvent","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onTouchStart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","Infinity","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","MIDDLE","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","reset","changeEvent","offset","quat","setFromUnitVectors","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","makeSafe","radius","panOffset","setFromSpherical","distanceToSquared","EPS","dot","quaternion","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","deltaX","targetDistance","tan","fov","matrix","right","bottom","prototype","constructor","75","ColladaLoader","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","manager","crossOrigin","url","extractUrlBase","text","parse","options","convertUpAxis","setCrossOrigin","getElementsByTagName","xml","childNodes","l","nodeName","parseStrings","parts","trim","split","parseFloats","parseFloat","parseInts","parseInt","parseId","substring","isEmpty","parseAssetUnit","parseAssetUpAxis","textContent","parseLibrary","libraryName","parser","library","elements","buildLibrary","builder","build","getBuild","parseAnimation","sources","samplers","channels","nodeType","parseSource","parseAnimationSampler","parseAnimationChannel","animations","inputs","semantic","shift","sid","arraySyntax","indexOf","memberSyntax","member","sampler","buildAnimation","tracks","hasOwnProperty","channel","inputId","INPUT","outputId","OUTPUT","inputSource","outputSource","animation","buildAnimationChannel","createKeyframeTracks","getAnimation","time","stride","il","j","jl","node","nodes","object3D","getNode","transform","transforms","defaultMatrix","transpose","index","keyframes","prepareAnimationData","uuid","ascending","b","sort","transformAnimationData","times","positionData","quaternionData","scaleData","keyframe","fromArray","decompose","w","property","defaultValue","empty","createMissingKeyframes","prev","next","getPrev","getNext","interpolate","key","parseAnimationClip","start","end","clips","buildAnimationClip","duration","animationTracks","getAnimationClip","parseController","skin","parseSkin","controllers","bindShapeMatrix","joints","parseJoints","vertexWeights","parseVertexWeights","vcount","buildController","geometries","buildSkin","skinIndices","skinWeights","weights","descending","weight","jointOffset","JOINT","weightOffset","WEIGHT","jointSource","inverseSource","INV_BIND_MATRIX","jointCount","vertexSkinData","skinIndex","weightId","skinWeight","bindMatrix","boneInverse","getController","parseImage","init_from","images","buildImage","getImage","parseEffect","profile","parseEffectProfileCOMMON","effects","surfaces","parseEffectNewparam","technique","parseEffectTechnique","parseEffectSurface","parseEffectSampler","source","parameters","parseEffectParameters","parseEffectParameter","extra","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","toUpperCase","buildEffect","getEffect","parseMaterial","buildMaterial","getTexture","textureObject","effect","surface","texture","textureLoader","wrapS","wrapU","wrapT","wrapV","offsetU","offsetV","repeat","repeatU","repeatV","error","parameter","specular","specularMap","float","shininess","emissive","transparent","opacity","getMaterial","parseCamera","optics","parseCameraOptics","cameras","parseCameraTechnique","parseCameraParameters","buildCamera","yfov","aspect_ratio","znear","zfar","ymag","xmag","aspectRatio","getCamera","parseLight","parseLightTechnique","parseLightParameters","falloffAngle","f","buildLight","getLight","parseGeometry","primitives","mesh","parseGeometryVertices","parseGeometryPrimitive","accessor","primitive","count","p","groupPrimitives","buildGeometry","groupedPrimitives","buildGeometryType","normal","uv","materialKeys","triangleCount","addGroup","input","buildGeometryData","pushVector","sourceStride","sourceArray","maxcount","c","getGeometry","parseKinematicsModel","links","parseKinematicsTechniqueCommon","kinematicsModels","buildKinematicsModel","getKinematicsModel","parseKinematicsJoint","parseKinematicsLink","parseKinematicsJointParameter","axis","limits","static","zeroPosition","middlePosition","attachments","parseKinematicsAttachment","parseKinematicsTransform","joint","pop","obj","degToRad","parseKinematicsScene","bindJointAxis","parseKinematicsBindJointAxis","kinematicsScenes","param","tmpJointIndex","jointIndex","substr","buildKinematicsScene","getKinematicsScene","buildTransformList","querySelector","vector","parseNode","instanceCameras","instanceControllers","instanceLights","instanceGeometries","instanceNodes","hasAttribute","parseNodeInstance","multiply","makeTranslation","makeRotationAxis","skeletons","instances","instance","symbol","buildSkeleton","boneData","sortedBoneData","buildBoneHierarchy","bone","processed","bones","boneInverses","root","isBone","buildNode","objects","controller","newObjects","buildObjects","skeleton","isSkinnedMesh","bind","normalizeSkinWeights","resolveMaterialBinding","instanceMaterials","skinning","attributes","parseVisualScene","children","visualScenes","buildVisualScene","group","getVisualScene","DOMParser","parseFromString","timeEnd","version","asset","unit","upAxis","kinematics","kinematicsModelId","kinematicsSceneId","visualSceneId","kinematicsModel","kinematicsScene","visualScene","jointMap","targetElement","parentVisualElement","parentElement","visualElement","visualElementName","m0","getJointValue","jointData","setJointValue","identity","76","DDSLoader","_parser","buffer","loadMipmaps","fourCCToInt32","charCodeAt","dds","mipmaps","format","mipmapCount","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","header","Int32Array","blockBytes","fourCC","isRGBAUncompressed","fromCharCode","caps2","isCubemap","dataOffset","faces","byteArray","dataLength","srcBuffer","Uint8Array","dst","g","r","mipmap","77","GLTFLoader","GLTFRegistry","get","removeAll","GLTFLightsExtension","json","EXTENSIONS","KHR_LIGHTS","extension","extensions","lightId","lightNode","constantAttenuation","linearAttenuation","quadraticAttenuation","fallOffAngle","fallOffExponent","GLTFMaterialsCommonExtension","KHR_MATERIALS_COMMON","GLTFBinaryExtension","KHR_BINARY_GLTF","headerView","DataView","BINARY_EXTENSION_HEADER_LENGTH","magic","__WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__","decodeText","slice","getUint32","BINARY_EXTENSION_HEADER_MAGIC","Error","chunkView","chunkIndex","byteLength","chunkLength","chunkType","BINARY_EXTENSION_CHUNK_TYPES","JSON","contentArray","BIN","byteOffset","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","specularGlossinessParams","getMaterialType","extendParams","params","pbrSpecularGlossiness","shader","uniforms","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","fragmentShader","roughness","metalness","roughnessMap","metalnessMap","setHex","glossiness","glossinessMap","vertexShader","defines","STANDARD","pending","isArray","diffuseFactor","diffuseTexture","assignTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossIndex","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","all","createMaterial","fog","isGLTFSpecularGlossinessMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","derivatives","cloneMaterial","refreshUniforms","diffuse","uvScaleMap","isWebGLRenderTarget","matrixAutoUpdate","setUvTransform","uvTransform","offsetRepeat","flipEnvMap","isCubeTexture","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","resolveURL","test","createDefaultMaterial","depthTest","side","addMorphTargets","meshDef","primitiveDef","accessors","targets","morphAttributes","morphTargets","positionAttribute","normalAttribute","attributeName","POSITION","setXYZ","getX","getY","getZ","NORMAL","morphNormals","updateMorphTargets","morphTargetInfluences","isPrimitiveEqual","attribA","attribB","keysA","keysB","getCachedGeometry","cache","newPrimitive","cached","GLTFParser","primitiveCache","fileLoader","setResponseType","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__","extensionsUsed","scenes","materialParams","khrMaterial","materialValues","specularTexture","shininessFactor","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","WEBGL_COMPONENT_TYPES","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TEXTURE_FORMATS","6406","6407","6408","6409","6410","WEBGL_TEXTURE_DATATYPES","32819","32820","33635","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","PATH_PROPERTIES","translation","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","markDefs","getMultiDependencies","then","dependencies","catch","nodeDefs","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinLength","nodeIndex","nodeLength","nodeDef","getDependency","cacheKey","dependency","charAt","getDependencies","defs","def","types","results","pendings","loadBuffer","bufferIndex","bufferDef","buffers","uri","resolve","reject","loadBufferView","bufferViewIndex","bufferViewDef","bufferViews","loadAccessor","accessorIndex","accessorDef","pendingBufferViews","bufferView","sparse","values","bufferAttribute","itemSize","TypedArray","componentType","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","normalized","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","loadTexture","textureIndex","URL","webkitURL","textureDef","textures","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","Handlers","revokeObjectURL","flipY","internalFormat","magFilter","minFilter","textureName","loadMaterial","materialIndex","materialType","materialDef","materialExtensions","khcExtension","sgExtension","pbrMetallicRoughness","metallicRoughness","baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","extras","userData","loadGeometries","attributeId","attributeEntry","loadMesh","meshIndex","useVertexColors","useFlatShading","useSkinning","useMorphTargets","specGlossExtension","vertexColors","needsUpdate","flatShading","mode","drawMode","onBeforeRender","loadCamera","cameraIndex","cameraDef","xfov","radToDeg","loadSkin","skinDef","skinEntry","inverseBindMatrices","loadAnimation","animationIndex","animationDef","output","inputAccessor","outputAccessor","updateMatrix","TypedKeyframeTrack","targetName","interpolation","outputAccessorValues","getW","targetNames","isMesh","arraySlice","loadNode","isGroup","sanitizeNodeName","applyMatrix","loadScene","buildNodeHierachy","nodeId","parentObject","allNodes","jointId","jointNode","mat","matrixWorld","sceneIndex","sceneDef","nodeIds","78","LoaderUtils","TextDecoder","decode","s","79","MTLLoader","__WEBPACK_IMPORTED_MODULE_1__DDSLoader__","LoaderHandlers","setTexturePath","texturePath","setBaseUrl","setMaterialOptions","materialOptions","lines","info","delimiter_pattern","materialsInfo","line","pos","ss","materialCreator","MaterialCreator","setManager","baseUrl","materialsArray","nameLookup","wrap","convert","converted","mn","covmat","prop","save","lprop","normalizeRGB","ignoreZeroRGBs","create","getIndex","materialName","getAsArray","createMaterial_","setMapForType","mapType","texParams","getTextureParams","matParams","items","splice","mapping","80","ParserState","colors","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","groupStart","groupEnd","cloned","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseNormalIndex","parseUVIndex","addVertex","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ic","uvLen","nLen","addLineGeometry","vi","uvi","OBJLoader","object_pattern","material_library_pattern","material_use_pattern","lineFirstChar","trimLeft","lineData","vertexData","faceVertices","vertex","vertexParts","v3","lineParts","lineVertices","lineUVs","li","llen","container","concat","isLine","buffergeometry","createdMaterials","miLen","sourceMaterial","materialLine","81","PLYLoader","propertyNameMapping","setPropertyNameMapping","parseHeader","patternHeader","headerText","headerLength","currentElement","lineType","lineValues","comments","properties","propertValues","countType","itemType","parseASCIINumber","parseASCIIElement","list","parseASCII","patternBody","currentElementCount","handleElement","postProcess","computeBoundingSphere","elementName","nx","ny","nz","t","red","green","blue","vertex_indices","vertex_index","binaryRead","dataview","at","little_endian","getInt8","getUint8","getInt16","getUint16","getInt32","getFloat32","getFloat64","binaryReadElement","read","ArrayBuffer","buf","array_buffer","str","loc","82","STLLoader","binData","ensureBinary","face_size","n_faces","reader","solid","parseBinary","ensureString","defaultR","defaultG","defaultB","hasColors","normalX","normalY","normalZ","packedColor","vertexstart","patternFace","patternNormal","patternVertex","strArray","9"],"mappings":"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","file":"static/js/app.43cc391410c9c5e4d4bf.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 120:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(28)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 121:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(28)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 122:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(28)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 123:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getCenter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return toIndexed; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_46\" /* Box3 */]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ }),\n\n/***/ 302:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(332)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(56),\n  /* template */\n  __webpack_require__(321),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 303:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(57),\n  /* template */\n  __webpack_require__(320),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 304:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(58),\n  /* template */\n  __webpack_require__(324),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(59),\n  /* template */\n  __webpack_require__(330),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 306:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(60),\n  /* template */\n  __webpack_require__(325),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 307:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(61),\n  /* template */\n  __webpack_require__(317),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 308:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(62),\n  /* template */\n  __webpack_require__(322),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(63),\n  /* template */\n  __webpack_require__(319),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(64),\n  /* template */\n  __webpack_require__(326),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(65),\n  /* template */\n  __webpack_require__(327),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(318),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(71),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(72),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 323:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 324:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 325:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-gltf', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/gltf/Duck/glTF/Duck.gltf\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 326:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-ply', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/ply/binary/Lucy100k.ply\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 328:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-ply\"\n    }\n  }, [_vm._v(\"PLY Model (.ply)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-gltf\"\n    }\n  }, [_vm._v(\"glTF Model (.gltf)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n/***/ }),\n\n/***/ 329:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 330:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(120);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(29)(\"cae0e19c\", content, true);\n\n/***/ }),\n\n/***/ 333:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(121);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(29)(\"4f0853e4\", content, true);\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(122);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(29)(\"3781cf10\", content, true);\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(333)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(55),\n  /* template */\n  __webpack_require__(323),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(331);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(53);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n\n    var name = page.name;\n\n    return {\n        path: '/' + name,\n        name: name,\n        component: page\n    };\n});\n\nroutes.push({\n    path: '*',\n    redirect: '/demo-basic'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(334)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(54),\n  /* template */\n  __webpack_require__(328),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(50);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic__ = __webpack_require__(303);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_basic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event__ = __webpack_require__(305);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_event__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background__ = __webpack_require__(302);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_background__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate__ = __webpack_require__(311);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_rotate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj__ = __webpack_require__(309);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__demo_obj__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__ = __webpack_require__(308);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_gltf__ = __webpack_require__(306);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_gltf___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__demo_gltf__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_stl__ = __webpack_require__(312);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_stl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__demo_stl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_collada__ = __webpack_require__(304);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_collada___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__demo_collada__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__demo_json__ = __webpack_require__(307);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__demo_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__demo_json__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__demo_ply__ = __webpack_require__(310);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__demo_ply___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10__demo_ply__);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_basic___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_event___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_background___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default.a, __WEBPACK_IMPORTED_MODULE_4__demo_obj___default.a, __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default.a, __WEBPACK_IMPORTED_MODULE_7__demo_stl___default.a, __WEBPACK_IMPORTED_MODULE_8__demo_collada___default.a, __WEBPACK_IMPORTED_MODULE_9__demo_json___default.a, __WEBPACK_IMPORTED_MODULE_10__demo_ply___default.a, __WEBPACK_IMPORTED_MODULE_6__demo_gltf___default.a];\n\n\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n\n/***/ 55:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(123);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-3d-model.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n\n/***/ 56:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <p class=\"background-text\">\\n        Vue<br>3D<br>Model<br>Background\\n    </p>\\n    <div class=\"background-buttons\">\\n        <p>Color</p>\\n        <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n        <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n        <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n        <p>Alpha</p>\\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\\n        <button @click=\"bgAlpha = 1\">1</button>\\n        <button @click=\"bgAlpha = 0\">0</button>\\n    </div>\\n    <model-obj\\n        :backgroundAlpha=\"bgAlpha\"\\n        :backgroundColor=\"bgColor\"\\n        src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <p class=\"background-text\">\\n            Vue<br>3D<br>Model<br>Background\\n        </p>\\n        <div class=\"background-buttons\">\\n            <p>Color</p>\\n            <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n            <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n            <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n            <p>Alpha</p>\\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\\n            <button @click=\"bgAlpha = 1\">1</button>\\n            <button @click=\"bgAlpha = 0\">0</button>\\n        </div>\\n        <model-obj\\n            :backgroundAlpha=\"bgAlpha\"\\n            :backgroundColor=\"bgColor\"\\n            src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-background',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            bgColor: '#ff0',\n            bgAlpha: 0.5\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        setBackground: function setBackground(color, alpha) {}\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 57:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__ = __webpack_require__(316);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-three src=\"static/models/json/scene.json\"></model-three>\\n</template>\\n\\n<script>\\n    import { ModelThree } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelThree\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-three src=\"static/models/json/scene.json\"></model-three>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-basic',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelThree: __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-collada',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: -Math.PI / 2,\n                y: 0,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/tree.obj\"\\n        @on-mousemove=\"onMouseMove\">\\n    </model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                intersected: null\\n            }\\n        },\\n        methods: {\\n            onMouseMove ( event ) {\\n\\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                if ( !event ) {\\n\\n                    if ( this.intersected ) {\\n                        this.intersected.material.color.setStyle( \\'#fff\\' );\\n                    }\\n\\n                    this.intersected = null;\\n                    return;\\n                }\\n\\n                this.intersected = event.object;\\n                this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/tree.obj\"\\n            @on-mousemove=\"onMouseMove\">\\n        </model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                intersected: null\\n            },\\n            methods: {\\n                onMouseMove ( event ) {\\n\\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                    if ( !event ) {\\n\\n                        if ( this.intersected ) {\\n                            this.intersected.material.color.setStyle( \\'#fff\\' );\\n                        }\\n\\n                        this.intersected = null;\\n                        return;\\n                    }\\n\\n                    this.intersected = event.object;\\n                    this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-event',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            intersected: null\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            console.log(event);\n\n            if (!event) {\n\n                if (this.intersected) {\n                    this.intersected.material.color.setStyle('#fff');\n                }\n\n                this.intersected = null;\n                return;\n            }\n\n            this.intersected = event.object;\n            this.intersected.material.color.setStyle('#13ce66');\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue__ = __webpack_require__(313);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue__);\n\n\n\n\n\nvar code = '\\n\\n<template>\\n    <model-gltf src=\"static/models/gltf/Duck/glTF/Duck.gltf\"></model-gltf>\\n</template>\\n\\n<script>\\n    import { ModelGltf } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelGltf\\n        }\\n    }\\n</script>\\n\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-gltf \\n            src=\"static/models/gltf/Duck/glTF/Duck.gltf\"\\n            @on-mousemove=\"onMouseMove\">\\n        </model-gltf>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-gltf',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelGltf: __WEBPACK_IMPORTED_MODULE_1__src_model_gltf_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-json',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/male02/male02.obj\"\\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/male02/male02.obj\"\\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj-mtl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue__ = __webpack_require__(314);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-ply src=\"static/models/ply/slotted_disk.ply\"></model-ply>\\n</template>\\n\\n<script>\\n    import { ModelPly } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelPly\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-ply src=\"static/models/ply/slotted_disk.ply\" :rotation=\"rotation\"></model-ply>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-ply',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: 0,\n                y: Math.PI,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelPly: __WEBPACK_IMPORTED_MODULE_1__src_model_ply_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada\\n        :rotation=\"rotation\"\\n        @on-load=\"onLoad\"\\n        src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data: {\\n            rotation: {\\n                x: -Math.PI / 2,\\n                y: 0,\\n                z: 0\\n            }\\n        },\\n        methods: {\\n            onLoad () {\\n                this.rotate();\\n            },\\n            rotate () {\\n                this.rotation.z += 0.01;\\n                requestAnimationFrame( this.rotate );\\n            }\\n        },\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada\\n            :rotation=\"rotation\"\\n            @on-load=\"onLoad\"\\n            src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                rotation: {\\n                    x: -Math.PI / 2,\\n                    y: 0,\\n                    z: 0\\n                }\\n            },\\n            methods: {\\n                onLoad () {\\n                    this.rotate();\\n                },\\n                rotate () {\\n                    this.rotation.z += 0.01;\\n                    requestAnimationFrame( this.rotate );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-rotate',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: -Math.PI / 2,\n                y: 0,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n            this.rotate();\n        },\n        rotate: function rotate() {\n            requestAnimationFrame(this.rotate);\n            this.rotation.z += 0.01;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__ = __webpack_require__(315);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n</template>\\n\\n<script>\\n    import { ModelStl } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelStl\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-stl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelStl: __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_three__ = __webpack_require__(1);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-collada',\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data: function data() {\n\n        var loader = new __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__[\"a\" /* ColladaLoader */]();\n\n        return {\n            loader: loader\n        };\n    },\n\n    methods: {\n        getObject: function getObject(collada) {\n            return collada.scene;\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_GLTFLoader__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-gltf',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'AmbientLight',\n                    color: 0xaaaaaa\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_GLTFLoader__[\"a\" /* GLTFLoader */]()\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.wrapper.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (data) {\n\n                _this.addObject(data.scene);\n\n                _this.$emit('on-load');\n            }, function (xhr) {\n\n                _this.$emit('on-progress', xhr);\n            }, function (err) {\n\n                console.log(err);\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__ = __webpack_require__(74);\n\n\n\n\n\n\nvar suportWebGL = function () {\n\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n        return false;\n    }\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        src: {\n            type: String\n        },\n        width: {\n            type: Number\n        },\n        height: {\n            type: Number\n        },\n        position: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        rotation: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        scale: {\n            type: Object,\n            default: function _default() {\n                return { x: 1, y: 1, z: 1 };\n            }\n        },\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [];\n            }\n        },\n        cameraPosition: {\n            type: Object\n        },\n        cameraRotation: {\n            type: Object\n        },\n        cameraUp: {\n            type: Object\n        },\n        cameraLookAt: {\n            type: Object\n        },\n        backgroundColor: {\n            default: 0xffffff\n        },\n        backgroundAlpha: {\n            type: Number,\n            default: 1\n        },\n        controllable: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data: function data() {\n        return {\n            suportWebGL: suportWebGL,\n            size: {\n                width: this.width,\n                height: this.height\n            },\n            object: null,\n            raycaster: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_43\" /* Raycaster */](),\n            mouse: new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */](),\n            camera: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_30\" /* PerspectiveCamera */](45, 1, 0.01, 100000),\n            scene: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_42\" /* Scene */](),\n            wrapper: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_39\" /* Object3D */](),\n            renderer: null,\n            controls: null,\n            allLights: [],\n            clock: typeof performance === 'undefined' ? Date : performance\n        };\n    },\n\n    computed: {\n        hasListener: function hasListener() {\n            var events = this._events;\n            var result = {};\n\n            ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click'].forEach(function (name) {\n                result[name] = !!events[name] && events[name].length > 0;\n            });\n\n            return result;\n        }\n    },\n    created: function created() {\n        window.addEventListener('resize', this.onResize, false);\n    },\n    mounted: function mounted() {\n\n        if (this.width === undefined || this.height === undefined) {\n            this.size = {\n                width: this.$el.offsetWidth,\n                height: this.$el.offsetHeight\n            };\n        }\n\n        this.renderer = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_44\" /* WebGLRenderer */]({ antialias: true, alpha: true, canvas: this.$refs.canvas });\n        this.renderer.shadowMap.enabled = true;\n\n        this.scene.add(this.wrapper);\n\n        this.load();\n        this.update();\n\n        this.$el.addEventListener('mousedown', this.onMouseDown, false);\n        this.$el.addEventListener('mousemove', this.onMouseMove, false);\n        this.$el.addEventListener('mouseup', this.onMouseUp, false);\n        this.$el.addEventListener('click', this.onClick, false);\n\n        this.animate();\n    },\n    beforeDestroy: function beforeDestroy() {\n\n        this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n        this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n        this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n        this.$el.removeEventListener('click', this.onClick, false);\n    },\n\n    watch: {\n        src: function src() {\n            this.load();\n        },\n\n        rotation: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.rotation.set(val.x, val.y, val.z);\n            }\n        },\n        position: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.position.set(val.x, val.y, val.z);\n            }\n        },\n        scale: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.scale.set(val.x, val.y, val.z);\n            }\n        },\n        lights: {\n            deep: true,\n            handler: function handler(val, oldVal) {\n                this.updateLights();\n            }\n        },\n        size: {\n            deep: true,\n            handler: function handler(val) {\n                this.updateCamera();\n                this.updateRenderer();\n            }\n        },\n        controllable: function controllable() {\n            this.updateControls();\n        },\n        backgroundAlpha: function backgroundAlpha() {\n            this.updateRenderer();\n        },\n        backgroundColor: function backgroundColor() {\n            this.updateRenderer();\n        }\n    },\n    methods: {\n        onResize: function onResize() {\n            var _this = this;\n\n            if (this.width === undefined || this.height === undefined) {\n\n                this.$nextTick(function () {\n                    _this.size = {\n                        width: _this.$el.offsetWidth,\n                        height: _this.$el.offsetHeight\n                    };\n                });\n            }\n        },\n        onMouseDown: function onMouseDown(event) {\n\n            if (!this.hasListener['on-mousedown']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousedown', intersected);\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            if (!this.hasListener['on-mousemove']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousemove', intersected);\n        },\n        onMouseUp: function onMouseUp(event) {\n\n            if (!this.hasListener['on-mouseup']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mouseup', intersected);\n        },\n        onClick: function onClick(event) {\n\n            if (!this.hasListener['on-click']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-click', intersected);\n        },\n        pick: function pick(x, y) {\n\n            if (!this.object) return;\n\n            var rect = this.$el.getBoundingClientRect();\n\n            x -= rect.left;\n            y -= rect.top;\n\n            this.mouse.x = x / this.size.width * 2 - 1;\n            this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n            this.raycaster.setFromCamera(this.mouse, this.camera);\n\n            var intersects = this.raycaster.intersectObject(this.object, true);\n\n            return (intersects && intersects.length) > 0 ? intersects[0] : null;\n        },\n        update: function update() {\n\n            this.updateRenderer();\n            this.updateCamera();\n            this.updateLights();\n            this.updateControls();\n        },\n        updateModel: function updateModel() {\n\n            var object = this.object;\n\n            if (!object) return;\n\n            var position = this.position;\n            var rotation = this.rotation;\n            var scale = this.scale;\n\n            object.position.set(position.x, position.y, position.z);\n            object.rotation.set(rotation.x, rotation.y, rotation.z);\n            object.scale.set(scale.x, scale.y, scale.z);\n        },\n        updateRenderer: function updateRenderer() {\n\n            var renderer = this.renderer;\n\n            renderer.setSize(this.size.width, this.size.height);\n            renderer.setPixelRatio(window.devicePixelRatio || 1);\n            renderer.setClearColor(new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Color */](this.backgroundColor).getHex());\n            renderer.setClearAlpha(this.backgroundAlpha);\n        },\n        updateCamera: function updateCamera() {\n\n            var camera = this.camera;\n            var object = this.object;\n\n            camera.aspect = this.size.width / this.size.height;\n            camera.updateProjectionMatrix();\n\n            if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n\n                if (!object) return;\n\n                var distance = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* getSize */])(object).length();\n\n                camera.position.set(0, 0, 0);\n                camera.position.z = distance;\n                camera.lookAt(new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]());\n            } else {\n\n                camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n                camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n                camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n\n                camera.lookAt(new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */](this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n            }\n        },\n        updateLights: function updateLights() {\n            var _this2 = this;\n\n            this.scene.remove.apply(this.scene, this.allLights);\n\n            this.allLights = [];\n\n            this.lights.forEach(function (item) {\n\n                if (!item.type) return;\n\n                var type = item.type.toLowerCase();\n\n                var light = null;\n\n                if (type === 'ambient' || type === 'ambientlight') {\n\n                    var color = item.color || 0x404040;\n                    var intensity = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* AmbientLight */](color, intensity);\n                } else if (type === 'point' || type === 'pointlight') {\n\n                    var _color = item.color || 0xffffff;\n                    var _intensity = item.intensity || 1;\n                    var distance = item.distance || 0;\n                    var decay = item.decay || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"e\" /* PointLight */](_color, _intensity, distance, decay);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                } else if (type === 'directional' || type === 'directionallight') {\n\n                    var _color2 = item.color || 0xffffff;\n                    var _intensity2 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* DirectionalLight */](_color2, _intensity2);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n\n                    if (item.target) {\n                        light.target.copy(item.target);\n                    }\n                } else if (type === 'hemisphere' || type === 'hemispherelight') {\n\n                    var skyColor = item.skyColor || 0xffffff;\n                    var groundColor = item.groundColor || 0xffffff;\n                    var _intensity3 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_45\" /* HemisphereLight */](skyColor, groundColor, _intensity3);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                }\n\n                _this2.allLights.push(light);\n                _this2.scene.add(light);\n            });\n        },\n        updateControls: function updateControls() {\n\n            if (this.controllable && this.controls) return;\n\n            if (this.controllable) {\n\n                if (this.controls) return;\n\n                this.controls = new __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__[\"a\" /* OrbitControls */](this.camera, this.$el);\n                this.controls.type = 'orbit';\n            } else {\n\n                if (this.controls) {\n\n                    this.controls.dispose();\n                    this.controls = null;\n                }\n            }\n        },\n        load: function load() {\n            var _this3 = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n\n                this.wrapper.remove(this.object);\n            }\n\n            this.loader.load(this.src, function () {\n\n                var object = _this3.getObject.apply(_this3, arguments);\n\n                if (_this3.process) {\n                    _this3.process(object);\n                }\n\n                _this3.addObject(object);\n\n                _this3.$emit('on-load');\n            }, function (xhr) {\n\n                _this3.$emit('on-progress', xhr);\n            }, function (err) {\n\n                _this3.$emit('on-error', err);\n            });\n        },\n        getObject: function getObject(object) {\n\n            return object;\n        },\n        addObject: function addObject(object) {\n\n            var center = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* getCenter */])(object);\n\n            this.wrapper.position.copy(center.negate());\n\n            this.object = object;\n            this.wrapper.add(object);\n\n            this.updateCamera();\n            this.updateModel();\n        },\n        animate: function animate() {\n            requestAnimationFrame(this.animate);\n            this.render();\n        },\n        render: function render() {\n\n            this.renderer.render(this.scene, this.camera);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_three__ = __webpack_require__(1);\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-obj',\n    mixins: [__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        },\n        mtlPath: {\n            type: String\n        },\n        mtl: {\n            type: String\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__[\"a\" /* OBJLoader */](),\n            mtlLoader: new __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__[\"a\" /* MTLLoader */]()\n        };\n    },\n\n    watch: {\n        mtl: function mtl() {\n            this.load();\n        }\n    },\n    methods: {\n        process: function process(object) {\n            if (this.smoothing) {\n                object.traverse(function (child) {\n                    if (child.geometry) {\n                        child.geometry = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__[\"c\" /* toIndexed */])(child.geometry);\n                        child.geometry.computeVertexNormals();\n                    }\n                });\n            }\n        },\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.wrapper.remove(this.object);\n            }\n\n            var onLoad = function onLoad(object) {\n\n                if (_this.process) {\n                    _this.process(object);\n                }\n\n                _this.addObject(object);\n\n                _this.$emit('on-load');\n            };\n\n            var onProgress = function onProgress(xhr) {\n\n                _this.$emit('on-progress', xhr);\n            };\n\n            var onError = function onError(err) {\n\n                _this.$emit('on-error', err);\n            };\n\n            if (this.mtl) {\n\n                var mtlPath = this.mtlPath;\n                var mtlSrc = this.mtl;\n\n                if (!this.mtlPath) {\n\n                    var result = /^(.*\\/)([^/]*)$/.exec(this.mtl);\n\n                    if (result) {\n                        mtlPath = result[1];\n                        mtlSrc = result[2];\n                    }\n                }\n\n                if (mtlPath) {\n                    this.mtlLoader.setPath(mtlPath);\n                }\n\n                this.mtlLoader.load(mtlSrc, function (materials) {\n\n                    materials.preload();\n\n                    _this.loader.setMaterials(materials);\n\n                    _this.loader.load(_this.src, onLoad, onProgress, onError);\n                }, function () {}, onError);\n            } else {\n\n                this.loader.load(this.src, onLoad, onProgress, onError);\n            }\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_PLYLoader__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-ply',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_PLYLoader__[\"a\" /* PLYLoader */]()\n        };\n    },\n\n    methods: {\n        getObject: function getObject(geometry) {\n\n            geometry.computeVertexNormals();\n\n            return new __WEBPACK_IMPORTED_MODULE_2_three__[\"_23\" /* Mesh */](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"_11\" /* MeshStandardMaterial */]());\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-stl',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__[\"a\" /* STLLoader */]()\n        };\n    },\n\n    methods: {\n        getObject: function getObject(geometry) {\n\n            return new __WEBPACK_IMPORTED_MODULE_2_three__[\"_23\" /* Mesh */](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"h\" /* MeshPhongMaterial */]());\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-three',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_58\" /* ObjectLoader */]()\n        };\n    }\n});\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OrbitControls; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar OrbitControls = function OrbitControls(object, domElement) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\t\tthis.enabled = true;\n\n\t\tthis.target = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\tthis.minPolarAngle = 0;\n\t\tthis.maxPolarAngle = Math.PI;\n\t\tthis.minAzimuthAngle = -Infinity;\n\t\tthis.maxAzimuthAngle = Infinity;\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0;\n\t\tthis.enableKeys = true;\n\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_1_three__[\"_47\" /* MOUSE */].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_1_three__[\"_47\" /* MOUSE */].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_1_three__[\"_47\" /* MOUSE */].RIGHT };\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\t\treturn spherical.phi;\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\t\treturn spherical.theta;\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\t\tscope.target0.copy(scope.target);\n\t\t\t\tscope.position0.copy(scope.object.position);\n\t\t\t\tscope.zoom0 = scope.object.zoom;\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\t\tscope.target.copy(scope.target0);\n\t\t\t\tscope.object.position.copy(scope.position0);\n\t\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tstate = STATE.NONE;\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\tvar quat = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_48\" /* Quaternion */]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */](0, 1, 0));\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\t\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\t\t\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_48\" /* Quaternion */]();\n\n\t\t\t\treturn function update() {\n\n\t\t\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\t\t\t\toffset.applyQuaternion(quat);\n\n\t\t\t\t\t\tspherical.setFromVector3(offset);\n\n\t\t\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\t\t\t\tspherical.makeSafe();\n\n\t\t\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\t\t\t\tscope.target.add(panOffset);\n\n\t\t\t\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\t\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\t\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\t\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\t\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscale = 1;\n\t\t\t\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\t\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\t\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\t\t};\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar spherical = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_49\" /* Spherical */]();\n\t\tvar sphericalDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_49\" /* Spherical */]();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\n\t\tvar panStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\n\t\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\t\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* Vector2 */]();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t}\n\n\t\tfunction rotateLeft(angle) {\n\n\t\t\t\tsphericalDelta.theta -= angle;\n\t\t}\n\n\t\tfunction rotateUp(angle) {\n\n\t\t\t\tsphericalDelta.phi -= angle;\n\t\t}\n\n\t\tvar panLeft = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0);\n\t\t\t\t\t\tv.multiplyScalar(-distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar panUp = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1);\n\t\t\t\t\t\tv.multiplyScalar(distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar pan = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_30\" /* PerspectiveCamera */]) {\n\t\t\t\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\t\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_32\" /* OrthographicCamera */]) {\n\t\t\t\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t}();\n\n\t\tfunction dollyIn(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_30\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale /= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_32\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction dollyOut(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_30\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale *= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"_32\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleMouseDownRotate(event) {\n\n\t\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownDolly(event) {\n\n\t\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownPan(event) {\n\n\t\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMoveDolly(event) {\n\n\t\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseUp(event) {}\n\n\t\tfunction handleMouseWheel(event) {\n\n\t\t\t\tif (event.deltaY < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (event.deltaY > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleKeyDown(event) {\n\n\t\t\t\tswitch (event.keyCode) {\n\n\t\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartRotate(event) {\n\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchStartDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyStart.set(0, distance);\n\t\t}\n\n\t\tfunction handleTouchStartPan(event) {\n\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMoveDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyEnd.set(0, distance);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchEnd(event) {}\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (event.button) {\n\n\t\t\t\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (state) {\n\n\t\t\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleMouseUp(event);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onMouseWheel(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\thandleMouseWheel(event);\n\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t}\n\n\t\tfunction onKeyDown(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\t\t\thandleKeyDown(event);\n\t\t}\n\n\t\tfunction onTouchStart(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\t\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchEnd(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleTouchEnd(event);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onContextMenu(event) {\n\n\t\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\t\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\t\twindow.addEventListener('keydown', onKeyDown, false);\n\n\t\tthis.update();\n};\n\nOrbitControls.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"_50\" /* EventDispatcher */].prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ColladaLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar ColladaLoader = function ColladaLoader(manager) {\n\n\t\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_1_three__[\"a\" /* DefaultLoadingManager */];\n};\n\nColladaLoader.prototype = {\n\n\t\t\tconstructor: ColladaLoader,\n\n\t\t\tcrossOrigin: 'Anonymous',\n\n\t\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\tvar path = __WEBPACK_IMPORTED_MODULE_1_three__[\"_16\" /* Loader */].prototype.extractUrlBase(url);\n\n\t\t\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* FileLoader */](scope.manager);\n\t\t\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\t\t\t\tonLoad(scope.parse(text, path));\n\t\t\t\t\t\t}, onProgress, onError);\n\t\t\t},\n\n\t\t\toptions: {\n\n\t\t\t\t\t\tset convertUpAxis(value) {\n\n\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.');\n\t\t\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\t\t\t\t\tthis.crossOrigin = value;\n\t\t\t},\n\n\t\t\tparse: function parse(text, path) {\n\n\t\t\t\t\t\tfunction getElementsByTagName(xml, name) {\n\n\t\t\t\t\t\t\t\t\tvar array = [];\n\t\t\t\t\t\t\t\t\tvar childNodes = xml.childNodes;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeName === name) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarray.push(child);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn array;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseStrings(text) {\n\n\t\t\t\t\t\t\t\t\tif (text.length === 0) return [];\n\n\t\t\t\t\t\t\t\t\tvar parts = text.trim().split(/\\s+/);\n\t\t\t\t\t\t\t\t\tvar array = new Array(parts.length);\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tarray[i] = parts[i];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn array;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseFloats(text) {\n\n\t\t\t\t\t\t\t\t\tif (text.length === 0) return [];\n\n\t\t\t\t\t\t\t\t\tvar parts = text.trim().split(/\\s+/);\n\t\t\t\t\t\t\t\t\tvar array = new Array(parts.length);\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tarray[i] = parseFloat(parts[i]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn array;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseInts(text) {\n\n\t\t\t\t\t\t\t\t\tif (text.length === 0) return [];\n\n\t\t\t\t\t\t\t\t\tvar parts = text.trim().split(/\\s+/);\n\t\t\t\t\t\t\t\t\tvar array = new Array(parts.length);\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = parts.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tarray[i] = parseInt(parts[i]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn array;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseId(text) {\n\n\t\t\t\t\t\t\t\t\treturn text.substring(1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction isEmpty(object) {\n\n\t\t\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(object).length === 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAsset(xml) {\n\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tunit: parseAssetUnit(getElementsByTagName(xml, 'unit')[0]),\n\t\t\t\t\t\t\t\t\t\t\t\tupAxis: parseAssetUpAxis(getElementsByTagName(xml, 'up_axis')[0])\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAssetUnit(xml) {\n\n\t\t\t\t\t\t\t\t\treturn xml !== undefined ? parseFloat(xml.getAttribute('meter')) : 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAssetUpAxis(xml) {\n\n\t\t\t\t\t\t\t\t\treturn xml !== undefined ? xml.textContent : 'Y_UP';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseLibrary(xml, libraryName, nodeName, parser) {\n\n\t\t\t\t\t\t\t\t\tvar library = getElementsByTagName(xml, libraryName)[0];\n\n\t\t\t\t\t\t\t\t\tif (library !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar elements = getElementsByTagName(library, nodeName);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elements.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparser(elements[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildLibrary(data, builder) {\n\n\t\t\t\t\t\t\t\t\tfor (var name in data) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar object = data[name];\n\t\t\t\t\t\t\t\t\t\t\t\tobject.build = builder(data[name]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getBuild(data, builder) {\n\n\t\t\t\t\t\t\t\t\tif (data.build !== undefined) return data.build;\n\n\t\t\t\t\t\t\t\t\tdata.build = builder(data);\n\n\t\t\t\t\t\t\t\t\treturn data.build;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAnimation(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tsources: {},\n\t\t\t\t\t\t\t\t\t\t\t\tsamplers: {},\n\t\t\t\t\t\t\t\t\t\t\t\tchannels: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar id;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'source':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = child.getAttribute('id');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.sources[id] = parseSource(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'sampler':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = child.getAttribute('id');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.samplers[id] = parseAnimationSampler(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'channel':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = child.getAttribute('target');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.channels[id] = parseAnimationChannel(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.animations[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAnimationSampler(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tinputs: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'input':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar semantic = child.getAttribute('semantic');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.inputs[semantic] = id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAnimationChannel(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tvar target = xml.getAttribute('target');\n\n\t\t\t\t\t\t\t\t\tvar parts = target.split('/');\n\n\t\t\t\t\t\t\t\t\tvar id = parts.shift();\n\t\t\t\t\t\t\t\t\tvar sid = parts.shift();\n\n\t\t\t\t\t\t\t\t\tvar arraySyntax = sid.indexOf('(') !== -1;\n\t\t\t\t\t\t\t\t\tvar memberSyntax = sid.indexOf('.') !== -1;\n\n\t\t\t\t\t\t\t\t\tif (memberSyntax) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tparts = sid.split('.');\n\t\t\t\t\t\t\t\t\t\t\t\tsid = parts.shift();\n\t\t\t\t\t\t\t\t\t\t\t\tdata.member = parts.shift();\n\t\t\t\t\t\t\t\t\t} else if (arraySyntax) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar indices = sid.split('(');\n\t\t\t\t\t\t\t\t\t\t\t\tsid = indices.shift();\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < indices.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindices[i] = parseInt(indices[i].replace(/\\)/, ''));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata.indices = indices;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdata.id = id;\n\t\t\t\t\t\t\t\t\tdata.sid = sid;\n\n\t\t\t\t\t\t\t\t\tdata.arraySyntax = arraySyntax;\n\t\t\t\t\t\t\t\t\tdata.memberSyntax = memberSyntax;\n\n\t\t\t\t\t\t\t\t\tdata.sampler = parseId(xml.getAttribute('source'));\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildAnimation(data) {\n\n\t\t\t\t\t\t\t\t\tvar tracks = [];\n\n\t\t\t\t\t\t\t\t\tvar channels = data.channels;\n\t\t\t\t\t\t\t\t\tvar samplers = data.samplers;\n\t\t\t\t\t\t\t\t\tvar sources = data.sources;\n\n\t\t\t\t\t\t\t\t\tfor (var target in channels) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (channels.hasOwnProperty(target)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar channel = channels[target];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sampler = samplers[channel.sampler];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar inputId = sampler.inputs.INPUT;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar outputId = sampler.inputs.OUTPUT;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar inputSource = sources[inputId];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar outputSource = sources[outputId];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar animation = buildAnimationChannel(channel, inputSource, outputSource);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateKeyframeTracks(animation, tracks);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn tracks;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getAnimation(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.animations[id], buildAnimation);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildAnimationChannel(channel, inputSource, outputSource) {\n\n\t\t\t\t\t\t\t\t\tvar node = library.nodes[channel.id];\n\t\t\t\t\t\t\t\t\tvar object3D = getNode(node.id);\n\n\t\t\t\t\t\t\t\t\tvar transform = node.transforms[channel.sid];\n\t\t\t\t\t\t\t\t\tvar defaultMatrix = node.matrix.clone().transpose();\n\n\t\t\t\t\t\t\t\t\tvar time, stride;\n\t\t\t\t\t\t\t\t\tvar i, il, j, jl;\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tswitch (transform) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (i = 0, il = inputSource.array.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttime = inputSource.array[i];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstride = i * outputSource.stride;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data[time] === undefined) data[time] = {};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (channel.arraySyntax === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = outputSource.array[stride];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = channel.indices[0] + 4 * channel.indices[1];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[time][index] = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (j = 0, jl = outputSource.stride; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[time][j] = outputSource.array[stride + j];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar keyframes = prepareAnimationData(data, defaultMatrix);\n\n\t\t\t\t\t\t\t\t\tvar animation = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: object3D.uuid,\n\t\t\t\t\t\t\t\t\t\t\t\tkeyframes: keyframes\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\treturn animation;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction prepareAnimationData(data, defaultMatrix) {\n\n\t\t\t\t\t\t\t\t\tvar keyframes = [];\n\n\t\t\t\t\t\t\t\t\tfor (var time in data) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tkeyframes.push({ time: parseFloat(time), value: data[time] });\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tkeyframes.sort(ascending);\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < 16; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\ttransformAnimationData(keyframes, i, defaultMatrix.elements[i]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn keyframes;\n\n\t\t\t\t\t\t\t\t\tfunction ascending(a, b) {\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn a.time - b.time;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar position = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\t\t\t\t\tvar scale = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\t\t\t\t\tvar quaternion = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_48\" /* Quaternion */]();\n\n\t\t\t\t\t\tfunction createKeyframeTracks(animation, tracks) {\n\n\t\t\t\t\t\t\t\t\tvar keyframes = animation.keyframes;\n\t\t\t\t\t\t\t\t\tvar name = animation.name;\n\n\t\t\t\t\t\t\t\t\tvar times = [];\n\t\t\t\t\t\t\t\t\tvar positionData = [];\n\t\t\t\t\t\t\t\t\tvar quaternionData = [];\n\t\t\t\t\t\t\t\t\tvar scaleData = [];\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = keyframes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar keyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar time = keyframe.time;\n\t\t\t\t\t\t\t\t\t\t\t\tvar value = keyframe.value;\n\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.fromArray(value).transpose();\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.decompose(position, quaternion, scale);\n\n\t\t\t\t\t\t\t\t\t\t\t\ttimes.push(time);\n\t\t\t\t\t\t\t\t\t\t\t\tpositionData.push(position.x, position.y, position.z);\n\t\t\t\t\t\t\t\t\t\t\t\tquaternionData.push(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n\t\t\t\t\t\t\t\t\t\t\t\tscaleData.push(scale.x, scale.y, scale.z);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (positionData.length > 0) tracks.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"_35\" /* VectorKeyframeTrack */](name + '.position', times, positionData));\n\t\t\t\t\t\t\t\t\tif (quaternionData.length > 0) tracks.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"_34\" /* QuaternionKeyframeTrack */](name + '.quaternion', times, quaternionData));\n\t\t\t\t\t\t\t\t\tif (scaleData.length > 0) tracks.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"_35\" /* VectorKeyframeTrack */](name + '.scale', times, scaleData));\n\n\t\t\t\t\t\t\t\t\treturn tracks;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction transformAnimationData(keyframes, property, defaultValue) {\n\n\t\t\t\t\t\t\t\t\tvar keyframe;\n\n\t\t\t\t\t\t\t\t\tvar empty = true;\n\t\t\t\t\t\t\t\t\tvar i, l;\n\n\t\t\t\t\t\t\t\t\tfor (i = 0, l = keyframes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tkeyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (keyframe.value[property] === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeyframe.value[property] = null;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tempty = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (empty === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (i = 0, l = keyframes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeyframe.value[property] = defaultValue;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcreateMissingKeyframes(keyframes, property);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction createMissingKeyframes(keyframes, property) {\n\n\t\t\t\t\t\t\t\t\tvar prev, next;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = keyframes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar keyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (keyframe.value[property] === null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprev = getPrev(keyframes, i, property);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext = getNext(keyframes, i, property);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prev === null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeyframe.value[property] = next.value[property];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (next === null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeyframe.value[property] = prev.value[property];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinterpolate(keyframe, prev, next, property);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getPrev(keyframes, i, property) {\n\n\t\t\t\t\t\t\t\t\twhile (i >= 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar keyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (keyframe.value[property] !== null) return keyframe;\n\n\t\t\t\t\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getNext(keyframes, i, property) {\n\n\t\t\t\t\t\t\t\t\twhile (i < keyframes.length) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar keyframe = keyframes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (keyframe.value[property] !== null) return keyframe;\n\n\t\t\t\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction interpolate(key, prev, next, property) {\n\n\t\t\t\t\t\t\t\t\tif (next.time - prev.time === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.value[property] = prev.value[property];\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tkey.value[property] = (key.time - prev.time) * (next.value[property] - prev.value[property]) / (next.time - prev.time) + prev.value[property];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseAnimationClip(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('id') || 'default',\n\t\t\t\t\t\t\t\t\t\t\t\tstart: parseFloat(xml.getAttribute('start') || 0),\n\t\t\t\t\t\t\t\t\t\t\t\tend: parseFloat(xml.getAttribute('end') || 0),\n\t\t\t\t\t\t\t\t\t\t\t\tanimations: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_animation':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.animations.push(parseId(child.getAttribute('url')));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.clips[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildAnimationClip(data) {\n\n\t\t\t\t\t\t\t\t\tvar tracks = [];\n\n\t\t\t\t\t\t\t\t\tvar name = data.name;\n\t\t\t\t\t\t\t\t\tvar duration = data.end - data.start || -1;\n\t\t\t\t\t\t\t\t\tvar animations = data.animations;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, il = animations.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar animationTracks = getAnimation(animations[i]);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = animationTracks.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttracks.push(animationTracks[j]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"_37\" /* AnimationClip */](name, duration, tracks);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getAnimationClip(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.clips[id], buildAnimationClip);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseController(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'skin':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.skin = parseSkin(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'morph':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Morph target animation not supported yet.');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.controllers[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseSkin(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tsources: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'bind_shape_matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.bindShapeMatrix = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'source':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = child.getAttribute('id');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.sources[id] = parseSource(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'joints':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.joints = parseJoints(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vertex_weights':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.vertexWeights = parseVertexWeights(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseJoints(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tinputs: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'input':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar semantic = child.getAttribute('semantic');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.inputs[semantic] = id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseVertexWeights(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tinputs: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'input':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar semantic = child.getAttribute('semantic');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offset = parseInt(child.getAttribute('offset'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.inputs[semantic] = { id: id, offset: offset };\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vcount':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.vcount = parseInts(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.v = parseInts(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildController(data) {\n\n\t\t\t\t\t\t\t\t\tvar build = {\n\t\t\t\t\t\t\t\t\t\t\t\tid: data.id\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar geometry = library.geometries[build.id];\n\n\t\t\t\t\t\t\t\t\tif (data.skin !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuild.skin = buildSkin(data.skin);\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.sources.skinIndices = build.skin.indices;\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.sources.skinWeights = build.skin.weights;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn build;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildSkin(data) {\n\n\t\t\t\t\t\t\t\t\tvar BONE_LIMIT = 4;\n\n\t\t\t\t\t\t\t\t\tvar build = {\n\t\t\t\t\t\t\t\t\t\t\t\tjoints: [],\n\t\t\t\t\t\t\t\t\t\t\t\tindices: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarray: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstride: BONE_LIMIT\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tweights: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarray: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstride: BONE_LIMIT\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar sources = data.sources;\n\t\t\t\t\t\t\t\t\tvar vertexWeights = data.vertexWeights;\n\n\t\t\t\t\t\t\t\t\tvar vcount = vertexWeights.vcount;\n\t\t\t\t\t\t\t\t\tvar v = vertexWeights.v;\n\t\t\t\t\t\t\t\t\tvar jointOffset = vertexWeights.inputs.JOINT.offset;\n\t\t\t\t\t\t\t\t\tvar weightOffset = vertexWeights.inputs.WEIGHT.offset;\n\n\t\t\t\t\t\t\t\t\tvar jointSource = data.sources[data.joints.inputs.JOINT];\n\t\t\t\t\t\t\t\t\tvar inverseSource = data.sources[data.joints.inputs.INV_BIND_MATRIX];\n\n\t\t\t\t\t\t\t\t\tvar weights = sources[vertexWeights.inputs.WEIGHT.id].array;\n\t\t\t\t\t\t\t\t\tvar stride = 0;\n\n\t\t\t\t\t\t\t\t\tvar i, j, l;\n\n\t\t\t\t\t\t\t\t\tfor (i = 0, l = vcount.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar jointCount = vcount[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar vertexSkinData = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < jointCount; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar skinIndex = v[stride + jointOffset];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar weightId = v[stride + weightOffset];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar skinWeight = weights[weightId];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvertexSkinData.push({ index: skinIndex, weight: skinWeight });\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstride += 2;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvertexSkinData.sort(descending);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < BONE_LIMIT; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar d = vertexSkinData[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuild.indices.array.push(d.index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuild.weights.array.push(d.weight);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuild.indices.array.push(0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuild.weights.array.push(0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tbuild.bindMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]().fromArray(data.bindShapeMatrix).transpose();\n\n\t\t\t\t\t\t\t\t\tfor (i = 0, l = jointSource.array.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar name = jointSource.array[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar boneInverse = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]().fromArray(inverseSource.array, i * inverseSource.stride).transpose();\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuild.joints.push({ name: name, boneInverse: boneInverse });\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn build;\n\n\t\t\t\t\t\t\t\t\tfunction descending(a, b) {\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn b.weight - a.weight;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getController(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.controllers[id], buildController);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseImage(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tinit_from: getElementsByTagName(xml, 'init_from')[0].textContent\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlibrary.images[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildImage(data) {\n\n\t\t\t\t\t\t\t\t\tif (data.build !== undefined) return data.build;\n\n\t\t\t\t\t\t\t\t\treturn data.init_from;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getImage(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.images[id], buildImage);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffect(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'profile_COMMON':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.profile = parseEffectProfileCOMMON(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.effects[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectProfileCOMMON(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tsurfaces: {},\n\t\t\t\t\t\t\t\t\t\t\t\tsamplers: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'newparam':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseEffectNewparam(child, data);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique = parseEffectTechnique(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectNewparam(xml, data) {\n\n\t\t\t\t\t\t\t\t\tvar sid = xml.getAttribute('sid');\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'surface':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.surfaces[sid] = parseEffectSurface(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'sampler2D':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.samplers[sid] = parseEffectSampler(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectSurface(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'init_from':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.init_from = child.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectSampler(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'source':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.source = child.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectTechnique(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'constant':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'blinn':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'phong':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parameters = parseEffectParameters(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectParameters(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'transparent':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[child.nodeName] = parseEffectParameter(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectParameter(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[child.nodeName] = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'float':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[child.nodeName] = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'texture':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[child.nodeName] = { id: child.getAttribute('texture'), extra: parseEffectParameterTexture(child) };\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectParameterTexture(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\ttechnique: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseEffectParameterTextureExtra(child, data);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectParameterTextureExtra(xml, data) {\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseEffectParameterTextureExtraTechnique(child, data);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseEffectParameterTextureExtraTechnique(xml, data) {\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'repeatU':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'repeatV':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'offsetU':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'offsetV':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique[child.nodeName] = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'wrapU':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (child.textContent.toUpperCase() === 'TRUE') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique[child.nodeName] = 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (child.textContent.toUpperCase() === 'FALSE') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique[child.nodeName] = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique[child.nodeName] = parseInt(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildEffect(data) {\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getEffect(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.effects[id], buildEffect);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseMaterial(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name')\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_effect':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.url = parseId(child.getAttribute('url'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.materials[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildMaterial(data) {\n\n\t\t\t\t\t\t\t\t\tvar effect = getEffect(data.url);\n\t\t\t\t\t\t\t\t\tvar technique = effect.profile.technique;\n\n\t\t\t\t\t\t\t\t\tvar material;\n\n\t\t\t\t\t\t\t\t\tswitch (technique.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'phong':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'blinn':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* MeshPhongMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* MeshLambertMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* MeshBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tmaterial.name = data.name;\n\n\t\t\t\t\t\t\t\t\tfunction getTexture(textureObject) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar sampler = effect.profile.samplers[textureObject.id];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (sampler !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar surface = effect.profile.surfaces[sampler.source];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar texture = textureLoader.load(getImage(surface.init_from));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar extra = textureObject.extra;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (extra !== undefined && extra.technique !== undefined && isEmpty(extra.technique) === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar technique = extra.technique;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = technique.wrapU ? __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"z\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = technique.wrapV ? __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"z\" /* ClampToEdgeWrapping */];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.offset.set(technique.offsetU || 0, technique.offsetV || 0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.repeat.set(technique.repeatU || 1, technique.repeatV || 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn texture;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('ColladaLoader: Undefined sampler', textureObject.id);\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar parameters = technique.parameters;\n\n\t\t\t\t\t\t\t\t\tfor (var key in parameters) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar parameter = parameters[key];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (key) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.color) material.color.fromArray(parameter.color);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.texture) material.map = getTexture(parameter.texture);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.color && material.specular) material.specular.fromArray(parameter.color);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.texture) material.specularMap = getTexture(parameter.texture);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.float && material.shininess) material.shininess = parameter.float;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.color && material.emissive) material.emissive.fromArray(parameter.color);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'transparent':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.transparent = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parameter.float !== undefined) material.opacity = parameter.float;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.transparent = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn material;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getMaterial(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.materials[id], buildMaterial);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseCamera(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name')\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'optics':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.optics = parseCameraOptics(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.cameras[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseCameraOptics(xml) {\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn parseCameraTechnique(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseCameraTechnique(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'perspective':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'orthographic':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parameters = parseCameraParameters(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseCameraParameters(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[child.nodeName] = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildCamera(data) {\n\n\t\t\t\t\t\t\t\t\tvar camera;\n\n\t\t\t\t\t\t\t\t\tswitch (data.optics.technique) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'perspective':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcamera = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_30\" /* PerspectiveCamera */](data.optics.parameters.yfov, data.optics.parameters.aspect_ratio, data.optics.parameters.znear, data.optics.parameters.zfar);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'orthographic':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ymag = data.optics.parameters.ymag;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar xmag = data.optics.parameters.xmag;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar aspectRatio = data.optics.parameters.aspect_ratio;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmag = xmag === undefined ? ymag * aspectRatio : xmag;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tymag = ymag === undefined ? xmag / aspectRatio : ymag;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmag *= 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tymag *= 0.5;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcamera = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_32\" /* OrthographicCamera */](-xmag, xmag, ymag, -ymag, data.optics.parameters.znear, data.optics.parameters.zfar);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcamera = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_30\" /* PerspectiveCamera */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcamera.name = data.name;\n\n\t\t\t\t\t\t\t\t\treturn camera;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getCamera(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.cameras[id], buildCamera);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseLight(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata = parseLightTechnique(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.lights[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseLightTechnique(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'directional':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'point':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'spot':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.technique = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parameters = parseLightParameters(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseLightParameters(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'color':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Color */]().fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'falloff_angle':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.falloffAngle = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar f = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.distance = f ? Math.sqrt(1 / f) : 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildLight(data) {\n\n\t\t\t\t\t\t\t\t\tvar light;\n\n\t\t\t\t\t\t\t\t\tswitch (data.technique) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'directional':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* DirectionalLight */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'point':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* PointLight */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'spot':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"f\" /* SpotLight */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ambient':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"g\" /* AmbientLight */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (data.parameters.color) light.color.copy(data.parameters.color);\n\t\t\t\t\t\t\t\t\tif (data.parameters.distance) light.distance = data.parameters.distance;\n\n\t\t\t\t\t\t\t\t\treturn light;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getLight(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.lights[id], buildLight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseGeometry(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name'),\n\t\t\t\t\t\t\t\t\t\t\t\tsources: {},\n\t\t\t\t\t\t\t\t\t\t\t\tvertices: {},\n\t\t\t\t\t\t\t\t\t\t\t\tprimitives: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar mesh = getElementsByTagName(xml, 'mesh')[0];\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < mesh.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = mesh.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar id = child.getAttribute('id');\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'source':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.sources[id] = parseSource(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vertices':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.vertices = parseGeometryVertices(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'polygons':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Unsupported primitive type: ', child.nodeName);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'lines':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'linestrips':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'polylist':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'triangles':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.primitives.push(parseGeometryPrimitive(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.geometries[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseSource(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tarray: [],\n\t\t\t\t\t\t\t\t\t\t\t\tstride: 3\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'float_array':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Name_array':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.array = parseStrings(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar accessor = getElementsByTagName(child, 'accessor')[0];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (accessor !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.stride = parseInt(accessor.getAttribute('stride'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseGeometryVertices(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata[child.getAttribute('semantic')] = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseGeometryPrimitive(xml) {\n\n\t\t\t\t\t\t\t\t\tvar primitive = {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: xml.nodeName,\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial: xml.getAttribute('material'),\n\t\t\t\t\t\t\t\t\t\t\t\tcount: parseInt(xml.getAttribute('count')),\n\t\t\t\t\t\t\t\t\t\t\t\tinputs: {},\n\t\t\t\t\t\t\t\t\t\t\t\tstride: 0\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = xml.childNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'input':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = parseId(child.getAttribute('source'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar semantic = child.getAttribute('semantic');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar offset = parseInt(child.getAttribute('offset'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimitive.inputs[semantic] = { id: id, offset: offset };\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimitive.stride = Math.max(primitive.stride, offset + 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vcount':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimitive.vcount = parseInts(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'p':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimitive.p = parseInts(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn primitive;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction groupPrimitives(primitives) {\n\n\t\t\t\t\t\t\t\t\tvar build = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < primitives.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar primitive = primitives[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (build[primitive.type] === undefined) build[primitive.type] = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuild[primitive.type].push(primitive);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn build;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildGeometry(data) {\n\n\t\t\t\t\t\t\t\t\tvar build = {};\n\n\t\t\t\t\t\t\t\t\tvar sources = data.sources;\n\t\t\t\t\t\t\t\t\tvar vertices = data.vertices;\n\t\t\t\t\t\t\t\t\tvar primitives = data.primitives;\n\n\t\t\t\t\t\t\t\t\tif (primitives.length === 0) return {};\n\n\t\t\t\t\t\t\t\t\tvar groupedPrimitives = groupPrimitives(primitives);\n\n\t\t\t\t\t\t\t\t\tfor (var type in groupedPrimitives) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuild[type] = buildGeometryType(groupedPrimitives[type], sources, vertices);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn build;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildGeometryType(primitives, sources, vertices) {\n\n\t\t\t\t\t\t\t\t\tvar build = {};\n\n\t\t\t\t\t\t\t\t\tvar position = { array: [], stride: 0 };\n\t\t\t\t\t\t\t\t\tvar normal = { array: [], stride: 0 };\n\t\t\t\t\t\t\t\t\tvar uv = { array: [], stride: 0 };\n\t\t\t\t\t\t\t\t\tvar color = { array: [], stride: 0 };\n\n\t\t\t\t\t\t\t\t\tvar skinIndex = { array: [], stride: 4 };\n\t\t\t\t\t\t\t\t\tvar skinWeight = { array: [], stride: 4 };\n\n\t\t\t\t\t\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_19\" /* BufferGeometry */]();\n\n\t\t\t\t\t\t\t\t\tvar materialKeys = [];\n\n\t\t\t\t\t\t\t\t\tvar start = 0,\n\t\t\t\t\t\t\t\t\t    count = 0;\n\n\t\t\t\t\t\t\t\t\tfor (var p = 0; p < primitives.length; p++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar primitive = primitives[p];\n\t\t\t\t\t\t\t\t\t\t\t\tvar inputs = primitive.inputs;\n\t\t\t\t\t\t\t\t\t\t\t\tvar triangleCount = 1;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (primitive.vcount && primitive.vcount[0] === 4) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriangleCount = 2;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (primitive.type === 'lines' || primitive.type === 'linestrips') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcount = primitive.count * 2;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcount = primitive.count * 3 * triangleCount;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.addGroup(start, count, p);\n\t\t\t\t\t\t\t\t\t\t\t\tstart += count;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (primitive.material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterialKeys.push(primitive.material);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var name in inputs) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar input = inputs[name];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (name) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'VERTEX':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var key in vertices) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id = vertices[key];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (key) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'POSITION':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[id], input.offset, position.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition.stride = sources[id].stride;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sources.skinWeights && sources.skinIndices) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources.skinIndices, input.offset, skinIndex.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources.skinWeights, input.offset, skinWeight.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'NORMAL':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[id], input.offset, normal.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnormal.stride = sources[id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'COLOR':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[id], input.offset, color.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor.stride = sources[id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[id], input.offset, uv.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuv.stride = sources[id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'NORMAL':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[input.id], input.offset, normal.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnormal.stride = sources[input.id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'COLOR':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[input.id], input.offset, color.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor.stride = sources[input.id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData(primitive, sources[input.id], input.offset, uv.array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuv.stride = sources[input.id].stride;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (position.array.length > 0) geometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](position.array, position.stride));\n\t\t\t\t\t\t\t\t\tif (normal.array.length > 0) geometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](normal.array, normal.stride));\n\t\t\t\t\t\t\t\t\tif (color.array.length > 0) geometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](color.array, color.stride));\n\t\t\t\t\t\t\t\t\tif (uv.array.length > 0) geometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](uv.array, uv.stride));\n\n\t\t\t\t\t\t\t\t\tif (skinIndex.array.length > 0) geometry.addAttribute('skinIndex', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](skinIndex.array, skinIndex.stride));\n\t\t\t\t\t\t\t\t\tif (skinWeight.array.length > 0) geometry.addAttribute('skinWeight', new __WEBPACK_IMPORTED_MODULE_1_three__[\"_51\" /* Float32BufferAttribute */](skinWeight.array, skinWeight.stride));\n\n\t\t\t\t\t\t\t\t\tbuild.data = geometry;\n\t\t\t\t\t\t\t\t\tbuild.type = primitives[0].type;\n\t\t\t\t\t\t\t\t\tbuild.materialKeys = materialKeys;\n\n\t\t\t\t\t\t\t\t\treturn build;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildGeometryData(primitive, source, offset, array) {\n\n\t\t\t\t\t\t\t\t\tvar indices = primitive.p;\n\t\t\t\t\t\t\t\t\tvar stride = primitive.stride;\n\t\t\t\t\t\t\t\t\tvar vcount = primitive.vcount;\n\n\t\t\t\t\t\t\t\t\tfunction pushVector(i) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar index = indices[i + offset] * sourceStride;\n\t\t\t\t\t\t\t\t\t\t\t\tvar length = index + sourceStride;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (; index < length; index++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarray.push(sourceArray[index]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar maxcount = 0;\n\n\t\t\t\t\t\t\t\t\tvar sourceArray = source.array;\n\t\t\t\t\t\t\t\t\tvar sourceStride = source.stride;\n\n\t\t\t\t\t\t\t\t\tif (primitive.vcount !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar index = 0;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0, l = vcount.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar count = vcount[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (count === 4) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar a = index + stride * 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar b = index + stride * 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar c = index + stride * 2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar d = index + stride * 3;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpushVector(a);pushVector(b);pushVector(d);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpushVector(b);pushVector(c);pushVector(d);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (count === 3) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar a = index + stride * 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar b = index + stride * 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar c = index + stride * 2;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpushVector(a);pushVector(b);pushVector(c);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxcount = Math.max(maxcount, count);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex += stride * count;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (maxcount > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: Geometry has faces with more than 4 vertices.');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0, l = indices.length; i < l; i += stride) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpushVector(i);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getGeometry(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.geometries[id], buildGeometry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsModel(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name') || '',\n\t\t\t\t\t\t\t\t\t\t\t\tjoints: {},\n\t\t\t\t\t\t\t\t\t\t\t\tlinks: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'technique_common':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseKinematicsTechniqueCommon(child, data);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.kinematicsModels[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildKinematicsModel(data) {\n\n\t\t\t\t\t\t\t\t\tif (data.build !== undefined) return data.build;\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getKinematicsModel(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.kinematicsModels[id], buildKinematicsModel);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsTechniqueCommon(xml, data) {\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'joint':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.joints[child.getAttribute('sid')] = parseKinematicsJoint(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.links.push(parseKinematicsLink(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsJoint(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'revolute':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata = parseKinematicsJointParameter(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsJointParameter(xml, data) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tsid: xml.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name') || '',\n\t\t\t\t\t\t\t\t\t\t\t\taxis: new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */](),\n\t\t\t\t\t\t\t\t\t\t\t\tlimits: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax: 0\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\ttype: xml.nodeName,\n\t\t\t\t\t\t\t\t\t\t\t\tstatic: false,\n\t\t\t\t\t\t\t\t\t\t\t\tzeroPosition: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tmiddlePosition: 0\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'axis':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.axis.fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'limits':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar max = child.getElementsByTagName('max')[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar min = child.getElementsByTagName('min')[0];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.limits.max = parseFloat(max.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.limits.min = parseFloat(min.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (data.limits.min >= data.limits.max) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata.static = true;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdata.middlePosition = (data.limits.min + data.limits.max) / 2.0;\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsLink(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tsid: xml.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name') || '',\n\t\t\t\t\t\t\t\t\t\t\t\tattachments: [],\n\t\t\t\t\t\t\t\t\t\t\t\ttransforms: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'attachment_full':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.attachments.push(parseKinematicsAttachment(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms.push(parseKinematicsTransform(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsAttachment(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tjoint: xml.getAttribute('joint').split('/').pop(),\n\t\t\t\t\t\t\t\t\t\t\t\ttransforms: [],\n\t\t\t\t\t\t\t\t\t\t\t\tlinks: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.links.push(parseKinematicsLink(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms.push(parseKinematicsTransform(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsTransform(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: xml.nodeName\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar array = parseFloats(xml.textContent);\n\n\t\t\t\t\t\t\t\t\tswitch (data.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj.fromArray(array).transpose();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj.fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.obj.fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"_31\" /* Math */].degToRad(array[3]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsScene(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tbindJointAxis: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'bind_joint_axis':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.bindJointAxis.push(parseKinematicsBindJointAxis(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.kinematicsScenes[parseId(xml.getAttribute('url'))] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseKinematicsBindJointAxis(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\ttarget: xml.getAttribute('target').split('/').pop()\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'axis':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar param = child.getElementsByTagName('param')[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.axis = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar tmpJointIndex = data.axis.split('inst_').pop().split('axis')[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.jointIndex = tmpJointIndex.substr(0, tmpJointIndex.length - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildKinematicsScene(data) {\n\n\t\t\t\t\t\t\t\t\tif (data.build !== undefined) return data.build;\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getKinematicsScene(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.kinematicsScenes[id], buildKinematicsScene);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction setupKinematics() {\n\n\t\t\t\t\t\t\t\t\tvar kinematicsModelId = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(library.kinematicsModels)[0];\n\t\t\t\t\t\t\t\t\tvar kinematicsSceneId = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(library.kinematicsScenes)[0];\n\t\t\t\t\t\t\t\t\tvar visualSceneId = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(library.visualScenes)[0];\n\n\t\t\t\t\t\t\t\t\tif (kinematicsModelId === undefined || kinematicsSceneId === undefined) return;\n\n\t\t\t\t\t\t\t\t\tvar kinematicsModel = getKinematicsModel(kinematicsModelId);\n\t\t\t\t\t\t\t\t\tvar kinematicsScene = getKinematicsScene(kinematicsSceneId);\n\t\t\t\t\t\t\t\t\tvar visualScene = getVisualScene(visualSceneId);\n\n\t\t\t\t\t\t\t\t\tvar bindJointAxis = kinematicsScene.bindJointAxis;\n\t\t\t\t\t\t\t\t\tvar jointMap = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = bindJointAxis.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar axis = bindJointAxis[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar targetElement = collada.querySelector('[sid=\"' + axis.target + '\"]');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (targetElement) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parentVisualElement = targetElement.parentElement;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconnect(axis.jointIndex, parentVisualElement);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfunction connect(jointIndex, visualElement) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar visualElementName = visualElement.getAttribute('name');\n\t\t\t\t\t\t\t\t\t\t\t\tvar joint = kinematicsModel.joints[jointIndex];\n\n\t\t\t\t\t\t\t\t\t\t\t\tvisualScene.traverse(function (object) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (object.name === visualElementName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex] = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject: object,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransforms: buildTransformList(visualElement),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar m0 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]();\n\n\t\t\t\t\t\t\t\t\tkinematics = {\n\n\t\t\t\t\t\t\t\t\t\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\t\t\t\t\t\t\t\t\t\tgetJointValue: function getJointValue(jointIndex) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn jointData.position;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tsetJointValue: function setJointValue(jointIndex, value) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value > joint.limits.max || value < joint.limits.min) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (joint.static) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Joint ' + jointIndex + ' is static.');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar object = jointData.object;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.identity();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < transforms.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar transform = transforms[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (transform.sid && transform.sid.indexOf(jointIndex) !== -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (joint.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'revolute':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m0.makeRotationAxis(axis, __WEBPACK_IMPORTED_MODULE_1_three__[\"_31\" /* Math */].degToRad(value)));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m0.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('ColladaLoader: Unknown joint type: ' + joint.type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (transform.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(transform.obj);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m0.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.scale(transform.obj);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m0.makeRotationAxis(transform.obj, transform.angle));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.matrix.copy(matrix);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.matrix.decompose(object.position, object.quaternion, object.scale);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex].position = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: ' + jointIndex + ' does not exist.');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildTransformList(node) {\n\n\t\t\t\t\t\t\t\t\tvar transforms = [];\n\n\t\t\t\t\t\t\t\t\tvar xml = collada.querySelector('[id=\"' + node.id + '\"]');\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]().fromArray(array).transpose();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransforms.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsid: child.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj: matrix\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vector = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]().fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransforms.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsid: child.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj: vector\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vector = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]().fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"_31\" /* Math */].degToRad(array[3]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransforms.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsid: child.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: child.nodeName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj: vector,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tangle: angle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn transforms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]();\n\t\t\t\t\t\tvar vector = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\t\t\tfunction parseNode(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name'),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: xml.getAttribute('type'),\n\t\t\t\t\t\t\t\t\t\t\t\tid: xml.getAttribute('id'),\n\t\t\t\t\t\t\t\t\t\t\t\tsid: xml.getAttribute('sid'),\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix: new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */](),\n\t\t\t\t\t\t\t\t\t\t\t\tnodes: [],\n\t\t\t\t\t\t\t\t\t\t\t\tinstanceCameras: [],\n\t\t\t\t\t\t\t\t\t\t\t\tinstanceControllers: [],\n\t\t\t\t\t\t\t\t\t\t\t\tinstanceLights: [],\n\t\t\t\t\t\t\t\t\t\t\t\tinstanceGeometries: [],\n\t\t\t\t\t\t\t\t\t\t\t\tinstanceNodes: [],\n\t\t\t\t\t\t\t\t\t\t\t\ttransforms: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'node':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (child.hasAttribute('id')) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.nodes.push(child.getAttribute('id'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseNode(child);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_camera':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.instanceCameras.push(parseId(child.getAttribute('url')));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_controller':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.instanceControllers.push(parseNodeInstance(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_light':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.instanceLights.push(parseId(child.getAttribute('url')));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_geometry':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.instanceGeometries.push(parseNodeInstance(child));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'instance_node':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.instanceNodes.push(parseId(child.getAttribute('url')));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.matrix.multiply(matrix.fromArray(array).transpose());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms[child.getAttribute('sid')] = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvector.fromArray(array);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.matrix.multiply(matrix.makeTranslation(vector.x, vector.y, vector.z));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms[child.getAttribute('sid')] = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"_31\" /* Math */].degToRad(array[3]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.matrix.multiply(matrix.makeRotationAxis(vector.fromArray(array), angle));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms[child.getAttribute('sid')] = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar array = parseFloats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.matrix.scale(vector.fromArray(array));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.transforms[child.getAttribute('sid')] = child.nodeName;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(child);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (xml.hasAttribute('id')) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tlibrary.nodes[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseNodeInstance(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tid: parseId(xml.getAttribute('url')),\n\t\t\t\t\t\t\t\t\t\t\t\tmaterials: {},\n\t\t\t\t\t\t\t\t\t\t\t\tskeletons: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < xml.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = xml.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'bind_material':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar instances = child.getElementsByTagName('instance_material');\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar symbol = instance.getAttribute('symbol');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar target = instance.getAttribute('target');\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.materials[symbol] = parseId(target);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'skeleton':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.skeletons.push(parseId(child.textContent));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildSkeleton(skeletons, joints) {\n\n\t\t\t\t\t\t\t\t\tvar boneData = [];\n\t\t\t\t\t\t\t\t\tvar sortedBoneData = [];\n\n\t\t\t\t\t\t\t\t\tvar i, j, data;\n\n\t\t\t\t\t\t\t\t\tfor (i = 0; i < skeletons.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar skeleton = skeletons[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar root = getNode(skeleton);\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuildBoneHierarchy(root, joints, boneData);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (i = 0; i < joints.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < boneData.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata = boneData[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.bone.name === joints[i].name) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsortedBoneData[i] = data;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.processed = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (i = 0; i < boneData.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata = boneData[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (data.processed === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsortedBoneData.push(data);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.processed = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\t\t\t\tfor (i = 0; i < sortedBoneData.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata = sortedBoneData[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tbones.push(data.bone);\n\t\t\t\t\t\t\t\t\t\t\t\tboneInverses.push(data.boneInverse);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"_41\" /* Skeleton */](bones, boneInverses);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildBoneHierarchy(root, joints, boneData) {\n\n\t\t\t\t\t\t\t\t\troot.traverse(function (object) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (object.isBone === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar boneInverse;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < joints.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar joint = joints[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (joint.name === object.name) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboneInverse = joint.boneInverse;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (boneInverse === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboneInverse = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboneData.push({ bone: object, boneInverse: boneInverse, processed: false });\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildNode(data) {\n\n\t\t\t\t\t\t\t\t\tvar objects = [];\n\n\t\t\t\t\t\t\t\t\tvar matrix = data.matrix;\n\t\t\t\t\t\t\t\t\tvar nodes = data.nodes;\n\t\t\t\t\t\t\t\t\tvar type = data.type;\n\t\t\t\t\t\t\t\t\tvar instanceCameras = data.instanceCameras;\n\t\t\t\t\t\t\t\t\tvar instanceControllers = data.instanceControllers;\n\t\t\t\t\t\t\t\t\tvar instanceLights = data.instanceLights;\n\t\t\t\t\t\t\t\t\tvar instanceGeometries = data.instanceGeometries;\n\t\t\t\t\t\t\t\t\tvar instanceNodes = data.instanceNodes;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = nodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(getNode(nodes[i]));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = instanceCameras.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(getCamera(instanceCameras[i]).clone());\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = instanceControllers.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance = instanceControllers[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar controller = getController(instance.id);\n\t\t\t\t\t\t\t\t\t\t\t\tvar geometries = getGeometry(controller.id);\n\t\t\t\t\t\t\t\t\t\t\t\tvar newObjects = buildObjects(geometries, instance.materials);\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar skeletons = instance.skeletons;\n\t\t\t\t\t\t\t\t\t\t\t\tvar joints = controller.skin.joints;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar skeleton = buildSkeleton(skeletons, joints);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = newObjects.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar object = newObjects[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (object.isSkinnedMesh) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.bind(skeleton, controller.skin.bindMatrix);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.normalizeSkinWeights();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(object);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = instanceLights.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(getLight(instanceLights[i]).clone());\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = instanceGeometries.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance = instanceGeometries[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar geometries = getGeometry(instance.id);\n\t\t\t\t\t\t\t\t\t\t\t\tvar newObjects = buildObjects(geometries, instance.materials);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = newObjects.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(newObjects[j]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = instanceNodes.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(getNode(instanceNodes[i]).clone());\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar object;\n\n\t\t\t\t\t\t\t\t\tif (nodes.length === 0 && objects.length === 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobject = objects[0];\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tobject = type === 'JOINT' ? new __WEBPACK_IMPORTED_MODULE_1_three__[\"_38\" /* Bone */]() : new __WEBPACK_IMPORTED_MODULE_1_three__[\"_20\" /* Group */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < objects.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.add(objects[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tobject.name = type === 'JOINT' ? data.sid : data.name;\n\t\t\t\t\t\t\t\t\tobject.matrix.copy(matrix);\n\t\t\t\t\t\t\t\t\tobject.matrix.decompose(object.position, object.quaternion, object.scale);\n\n\t\t\t\t\t\t\t\t\treturn object;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction resolveMaterialBinding(keys, instanceMaterials) {\n\n\t\t\t\t\t\t\t\t\tvar materials = [];\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar id = instanceMaterials[keys[i]];\n\t\t\t\t\t\t\t\t\t\t\t\tmaterials.push(getMaterial(id));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn materials;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildObjects(geometries, instanceMaterials) {\n\n\t\t\t\t\t\t\t\t\tvar objects = [];\n\n\t\t\t\t\t\t\t\t\tfor (var type in geometries) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar geometry = geometries[type];\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar materials = resolveMaterialBinding(geometry.materialKeys, instanceMaterials);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (materials.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type === 'lines' || type === 'linestrips') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterials.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"_57\" /* LineBasicMaterial */]());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterials.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* MeshPhongMaterial */]());\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar skinning = geometry.data.attributes.skinIndex !== undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (skinning) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0, l = materials.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterials[i].skinning = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar material = materials.length === 1 ? materials[0] : materials;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar object;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'lines':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_26\" /* LineSegments */](geometry.data, material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'linestrips':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_27\" /* Line */](geometry.data, material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'triangles':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'polylist':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (skinning) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_22\" /* SkinnedMesh */](geometry.data, material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_23\" /* Mesh */](geometry.data, material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tobjects.push(object);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn objects;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getNode(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.nodes[id], buildNode);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseVisualScene(xml) {\n\n\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: xml.getAttribute('name'),\n\t\t\t\t\t\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar elements = getElementsByTagName(xml, 'node');\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elements.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata.children.push(parseNode(elements[i]));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlibrary.visualScenes[xml.getAttribute('id')] = data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction buildVisualScene(data) {\n\n\t\t\t\t\t\t\t\t\tvar group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_20\" /* Group */]();\n\t\t\t\t\t\t\t\t\tgroup.name = data.name;\n\n\t\t\t\t\t\t\t\t\tvar children = data.children;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = children[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.id === null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroup.add(buildNode(child));\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroup.add(getNode(child.id));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn group;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getVisualScene(id) {\n\n\t\t\t\t\t\t\t\t\treturn getBuild(library.visualScenes[id], buildVisualScene);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseScene(xml) {\n\n\t\t\t\t\t\t\t\t\tvar instance = getElementsByTagName(xml, 'instance_visual_scene')[0];\n\t\t\t\t\t\t\t\t\treturn getVisualScene(parseId(instance.getAttribute('url')));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction setupAnimations() {\n\n\t\t\t\t\t\t\t\t\tvar clips = library.clips;\n\n\t\t\t\t\t\t\t\t\tif (isEmpty(clips) === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (isEmpty(library.animations) === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar tracks = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var id in library.animations) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar animationTracks = getAnimation(id);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0, l = animationTracks.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttracks.push(animationTracks[i]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimations.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"_37\" /* AnimationClip */]('default', -1, tracks));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var id in clips) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimations.push(getAnimationClip(id));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.time('ColladaLoader');\n\n\t\t\t\t\t\tif (text.length === 0) {\n\n\t\t\t\t\t\t\t\t\treturn { scene: new __WEBPACK_IMPORTED_MODULE_1_three__[\"_42\" /* Scene */]() };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.time('ColladaLoader: DOMParser');\n\n\t\t\t\t\t\tvar xml = new DOMParser().parseFromString(text, 'application/xml');\n\n\t\t\t\t\t\tconsole.timeEnd('ColladaLoader: DOMParser');\n\n\t\t\t\t\t\tvar collada = getElementsByTagName(xml, 'COLLADA')[0];\n\n\t\t\t\t\t\tvar version = collada.getAttribute('version');\n\t\t\t\t\t\tconsole.log('ColladaLoader: File version', version);\n\n\t\t\t\t\t\tvar asset = parseAsset(getElementsByTagName(collada, 'asset')[0]);\n\t\t\t\t\t\tvar textureLoader = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_12\" /* TextureLoader */](this.manager);\n\t\t\t\t\t\ttextureLoader.setPath(path).setCrossOrigin(this.crossOrigin);\n\n\t\t\t\t\t\tvar animations = [];\n\t\t\t\t\t\tvar kinematics = {};\n\n\t\t\t\t\t\tvar library = {\n\t\t\t\t\t\t\t\t\tanimations: {},\n\t\t\t\t\t\t\t\t\tclips: {},\n\t\t\t\t\t\t\t\t\tcontrollers: {},\n\t\t\t\t\t\t\t\t\timages: {},\n\t\t\t\t\t\t\t\t\teffects: {},\n\t\t\t\t\t\t\t\t\tmaterials: {},\n\t\t\t\t\t\t\t\t\tcameras: {},\n\t\t\t\t\t\t\t\t\tlights: {},\n\t\t\t\t\t\t\t\t\tgeometries: {},\n\t\t\t\t\t\t\t\t\tnodes: {},\n\t\t\t\t\t\t\t\t\tvisualScenes: {},\n\t\t\t\t\t\t\t\t\tkinematicsModels: {},\n\t\t\t\t\t\t\t\t\tkinematicsScenes: {}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconsole.time('ColladaLoader: Parse');\n\n\t\t\t\t\t\tparseLibrary(collada, 'library_animations', 'animation', parseAnimation);\n\t\t\t\t\t\tparseLibrary(collada, 'library_animation_clips', 'animation_clip', parseAnimationClip);\n\t\t\t\t\t\tparseLibrary(collada, 'library_controllers', 'controller', parseController);\n\t\t\t\t\t\tparseLibrary(collada, 'library_images', 'image', parseImage);\n\t\t\t\t\t\tparseLibrary(collada, 'library_effects', 'effect', parseEffect);\n\t\t\t\t\t\tparseLibrary(collada, 'library_materials', 'material', parseMaterial);\n\t\t\t\t\t\tparseLibrary(collada, 'library_cameras', 'camera', parseCamera);\n\t\t\t\t\t\tparseLibrary(collada, 'library_lights', 'light', parseLight);\n\t\t\t\t\t\tparseLibrary(collada, 'library_geometries', 'geometry', parseGeometry);\n\t\t\t\t\t\tparseLibrary(collada, 'library_nodes', 'node', parseNode);\n\t\t\t\t\t\tparseLibrary(collada, 'library_visual_scenes', 'visual_scene', parseVisualScene);\n\t\t\t\t\t\tparseLibrary(collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel);\n\t\t\t\t\t\tparseLibrary(collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene);\n\n\t\t\t\t\t\tconsole.timeEnd('ColladaLoader: Parse');\n\n\t\t\t\t\t\tconsole.time('ColladaLoader: Build');\n\n\t\t\t\t\t\tbuildLibrary(library.animations, buildAnimation);\n\t\t\t\t\t\tbuildLibrary(library.clips, buildAnimationClip);\n\t\t\t\t\t\tbuildLibrary(library.controllers, buildController);\n\t\t\t\t\t\tbuildLibrary(library.images, buildImage);\n\t\t\t\t\t\tbuildLibrary(library.effects, buildEffect);\n\t\t\t\t\t\tbuildLibrary(library.materials, buildMaterial);\n\t\t\t\t\t\tbuildLibrary(library.cameras, buildCamera);\n\t\t\t\t\t\tbuildLibrary(library.lights, buildLight);\n\t\t\t\t\t\tbuildLibrary(library.geometries, buildGeometry);\n\t\t\t\t\t\tbuildLibrary(library.visualScenes, buildVisualScene);\n\n\t\t\t\t\t\tconsole.timeEnd('ColladaLoader: Build');\n\n\t\t\t\t\t\tsetupAnimations();\n\t\t\t\t\t\tsetupKinematics();\n\n\t\t\t\t\t\tvar scene = parseScene(getElementsByTagName(collada, 'scene')[0]);\n\n\t\t\t\t\t\tif (asset.upAxis === 'Z_UP') {\n\n\t\t\t\t\t\t\t\t\tscene.rotation.x = -Math.PI / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscene.scale.multiplyScalar(asset.unit);\n\n\t\t\t\t\t\tconsole.timeEnd('ColladaLoader');\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tanimations: animations,\n\t\t\t\t\t\t\t\t\tkinematics: kinematics,\n\t\t\t\t\t\t\t\t\tlibrary: library,\n\t\t\t\t\t\t\t\t\tscene: scene\n\t\t\t\t\t\t};\n\t\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DDSLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar DDSLoader = function DDSLoader() {\n\n\tthis._parser = DDSLoader.parse;\n};\n\nDDSLoader.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"_52\" /* CompressedTextureLoader */].prototype);\nDDSLoader.prototype.constructor = DDSLoader;\n\nDDSLoader.parse = function (buffer, loadMipmaps) {\n\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\tvar DDS_MAGIC = 0x20534444;\n\n\tvar DDSD_CAPS = 0x1,\n\t    DDSD_HEIGHT = 0x2,\n\t    DDSD_WIDTH = 0x4,\n\t    DDSD_PITCH = 0x8,\n\t    DDSD_PIXELFORMAT = 0x1000,\n\t    DDSD_MIPMAPCOUNT = 0x20000,\n\t    DDSD_LINEARSIZE = 0x80000,\n\t    DDSD_DEPTH = 0x800000;\n\n\tvar DDSCAPS_COMPLEX = 0x8,\n\t    DDSCAPS_MIPMAP = 0x400000,\n\t    DDSCAPS_TEXTURE = 0x1000;\n\n\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t    DDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t    DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t    DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t    DDSCAPS2_VOLUME = 0x200000;\n\n\tvar DDPF_ALPHAPIXELS = 0x1,\n\t    DDPF_ALPHA = 0x2,\n\t    DDPF_FOURCC = 0x4,\n\t    DDPF_RGB = 0x40,\n\t    DDPF_YUV = 0x200,\n\t    DDPF_LUMINANCE = 0x20000;\n\n\tfunction fourCCToInt32(value) {\n\n\t\treturn value.charCodeAt(0) + (value.charCodeAt(1) << 8) + (value.charCodeAt(2) << 16) + (value.charCodeAt(3) << 24);\n\t}\n\n\tfunction int32ToFourCC(value) {\n\n\t\treturn String.fromCharCode(value & 0xff, value >> 8 & 0xff, value >> 16 & 0xff, value >> 24 & 0xff);\n\t}\n\n\tfunction loadARGBMip(buffer, dataOffset, width, height) {\n\n\t\tvar dataLength = width * height * 4;\n\t\tvar srcBuffer = new Uint8Array(buffer, dataOffset, dataLength);\n\t\tvar byteArray = new Uint8Array(dataLength);\n\t\tvar dst = 0;\n\t\tvar src = 0;\n\t\tfor (var y = 0; y < height; y++) {\n\n\t\t\tfor (var x = 0; x < width; x++) {\n\n\t\t\t\tvar b = srcBuffer[src];src++;\n\t\t\t\tvar g = srcBuffer[src];src++;\n\t\t\t\tvar r = srcBuffer[src];src++;\n\t\t\t\tvar a = srcBuffer[src];src++;\n\t\t\t\tbyteArray[dst] = r;dst++;\n\t\t\t\tbyteArray[dst] = g;dst++;\n\t\t\t\tbyteArray[dst] = b;dst++;\n\t\t\t\tbyteArray[dst] = a;dst++;\n\t\t\t}\n\t\t}\n\t\treturn byteArray;\n\t}\n\n\tvar FOURCC_DXT1 = fourCCToInt32(\"DXT1\");\n\tvar FOURCC_DXT3 = fourCCToInt32(\"DXT3\");\n\tvar FOURCC_DXT5 = fourCCToInt32(\"DXT5\");\n\tvar FOURCC_ETC1 = fourCCToInt32(\"ETC1\");\n\n\tvar headerLengthInt = 31;\n\n\tvar off_magic = 0;\n\n\tvar off_size = 1;\n\tvar off_flags = 2;\n\tvar off_height = 3;\n\tvar off_width = 4;\n\n\tvar off_mipmapCount = 7;\n\n\tvar off_pfFlags = 20;\n\tvar off_pfFourCC = 21;\n\tvar off_RGBBitCount = 22;\n\tvar off_RBitMask = 23;\n\tvar off_GBitMask = 24;\n\tvar off_BBitMask = 25;\n\tvar off_ABitMask = 26;\n\n\tvar off_caps = 27;\n\tvar off_caps2 = 28;\n\tvar off_caps3 = 29;\n\tvar off_caps4 = 30;\n\n\tvar header = new Int32Array(buffer, 0, headerLengthInt);\n\n\tif (header[off_magic] !== DDS_MAGIC) {\n\n\t\tconsole.error('DDSLoader.parse: Invalid magic number in DDS header.');\n\t\treturn dds;\n\t}\n\n\tif (!header[off_pfFlags] & DDPF_FOURCC) {\n\n\t\tconsole.error('DDSLoader.parse: Unsupported format, must contain a FourCC code.');\n\t\treturn dds;\n\t}\n\n\tvar blockBytes;\n\n\tvar fourCC = header[off_pfFourCC];\n\n\tvar isRGBAUncompressed = false;\n\n\tswitch (fourCC) {\n\n\t\tcase FOURCC_DXT1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"_53\" /* RGB_S3TC_DXT1_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT3:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"_54\" /* RGBA_S3TC_DXT3_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT5:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"_55\" /* RGBA_S3TC_DXT5_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_ETC1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"_56\" /* RGB_ETC1_Format */];\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tif (header[off_RGBBitCount] === 32 && header[off_RBitMask] & 0xff0000 && header[off_GBitMask] & 0xff00 && header[off_BBitMask] & 0xff && header[off_ABitMask] & 0xff000000) {\n\n\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\tblockBytes = 64;\n\t\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"E\" /* RGBAFormat */];\n\t\t\t} else {\n\n\t\t\t\tconsole.error('DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC(fourCC));\n\t\t\t\treturn dds;\n\t\t\t}\n\t}\n\n\tdds.mipmapCount = 1;\n\n\tif (header[off_flags] & DDSD_MIPMAPCOUNT && loadMipmaps !== false) {\n\n\t\tdds.mipmapCount = Math.max(1, header[off_mipmapCount]);\n\t}\n\n\tvar caps2 = header[off_caps2];\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\tif (dds.isCubemap && (!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ))) {\n\n\t\tconsole.error('DDSLoader.parse: Incomplete cubemap faces');\n\t\treturn dds;\n\t}\n\n\tdds.width = header[off_width];\n\tdds.height = header[off_height];\n\n\tvar dataOffset = header[off_size] + 4;\n\n\tvar faces = dds.isCubemap ? 6 : 1;\n\n\tfor (var face = 0; face < faces; face++) {\n\n\t\tvar width = dds.width;\n\t\tvar height = dds.height;\n\n\t\tfor (var i = 0; i < dds.mipmapCount; i++) {\n\n\t\t\tif (isRGBAUncompressed) {\n\n\t\t\t\tvar byteArray = loadARGBMip(buffer, dataOffset, width, height);\n\t\t\t\tvar dataLength = byteArray.length;\n\t\t\t} else {\n\n\t\t\t\tvar dataLength = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockBytes;\n\t\t\t\tvar byteArray = new Uint8Array(buffer, dataOffset, dataLength);\n\t\t\t}\n\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\tdds.mipmaps.push(mipmap);\n\n\t\t\tdataOffset += dataLength;\n\n\t\t\twidth = Math.max(width >> 1, 1);\n\t\t\theight = Math.max(height >> 1, 1);\n\t\t}\n\t}\n\n\treturn dds;\n};\n\n\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return GLTFLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__ = __webpack_require__(78);\n\n\n\n\n\nfunction GLTFLoader(manager) {\n\n\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_2_three__[\"a\" /* DefaultLoadingManager */];\n}\n\nGLTFLoader.prototype = {\n\n\tconstructor: GLTFLoader,\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\tvar scope = this;\n\n\t\tvar path = this.path !== undefined ? this.path : __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__[\"a\" /* LoaderUtils */].extractUrlBase(url);\n\n\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_2_three__[\"b\" /* FileLoader */](scope.manager);\n\n\t\tloader.setResponseType('arraybuffer');\n\n\t\tloader.load(url, function (data) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse(data, path, onLoad, onError);\n\t\t\t} catch (e) {\n\n\t\t\t\tif (onError !== undefined) {\n\n\t\t\t\t\tonError(e);\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}, onProgress, onError);\n\t},\n\n\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\t},\n\n\tsetPath: function setPath(value) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\t},\n\n\tparse: function parse(data, path, onLoad, onError) {\n\n\t\tvar content;\n\t\tvar extensions = {};\n\n\t\tif (typeof data === 'string') {\n\n\t\t\tcontent = data;\n\t\t} else {\n\n\t\t\tvar magic = __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__[\"a\" /* LoaderUtils */].decodeText(new Uint8Array(data, 0, 4));\n\n\t\t\tif (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n\t\t\t\t} catch (error) {\n\n\t\t\t\t\tif (onError) onError(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n\t\t\t} else {\n\n\t\t\t\tcontent = __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__[\"a\" /* LoaderUtils */].decodeText(new Uint8Array(data));\n\t\t\t}\n\t\t}\n\n\t\tvar json = JSON.parse(content);\n\n\t\tif (json.asset === undefined || json.asset.version[0] < 2) {\n\n\t\t\tif (onError) onError(new Error('GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (json.extensionsUsed) {\n\n\t\t\tif (json.extensionsUsed.indexOf(EXTENSIONS.KHR_LIGHTS) >= 0) {\n\n\t\t\t\textensions[EXTENSIONS.KHR_LIGHTS] = new GLTFLightsExtension(json);\n\t\t\t}\n\n\t\t\tif (json.extensionsUsed.indexOf(EXTENSIONS.KHR_MATERIALS_COMMON) >= 0) {\n\n\t\t\t\textensions[EXTENSIONS.KHR_MATERIALS_COMMON] = new GLTFMaterialsCommonExtension(json);\n\t\t\t}\n\n\t\t\tif (json.extensionsUsed.indexOf(EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS) >= 0) {\n\n\t\t\t\textensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t}\n\t\t}\n\n\t\tconsole.time('GLTFLoader');\n\n\t\tvar parser = new GLTFParser(json, extensions, {\n\n\t\t\tpath: path || this.path || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\tmanager: this.manager\n\n\t\t});\n\n\t\tparser.parse(function (scene, scenes, cameras, animations, asset) {\n\n\t\t\tconsole.timeEnd('GLTFLoader');\n\n\t\t\tvar glTF = {\n\t\t\t\tscene: scene,\n\t\t\t\tscenes: scenes,\n\t\t\t\tcameras: cameras,\n\t\t\t\tanimations: animations,\n\t\t\t\tasset: asset\n\t\t\t};\n\n\t\t\tonLoad(glTF);\n\t\t}, onError);\n\t}\n\n};\n\nfunction GLTFRegistry() {\n\n\tvar objects = {};\n\n\treturn {\n\n\t\tget: function get(key) {\n\n\t\t\treturn objects[key];\n\t\t},\n\n\t\tadd: function add(key, object) {\n\n\t\t\tobjects[key] = object;\n\t\t},\n\n\t\tremove: function remove(key) {\n\n\t\t\tdelete objects[key];\n\t\t},\n\n\t\tremoveAll: function removeAll() {\n\n\t\t\tobjects = {};\n\t\t}\n\n\t};\n}\n\nvar EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_LIGHTS: 'KHR_lights',\n\tKHR_MATERIALS_COMMON: 'KHR_materials_common',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness'\n};\n\nfunction GLTFLightsExtension(json) {\n\n\tthis.name = EXTENSIONS.KHR_LIGHTS;\n\n\tthis.lights = {};\n\n\tvar extension = json.extensions && json.extensions[EXTENSIONS.KHR_LIGHTS] || {};\n\tvar lights = extension.lights || {};\n\n\tfor (var lightId in lights) {\n\n\t\tvar light = lights[lightId];\n\t\tvar lightNode;\n\n\t\tvar color = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().fromArray(light.color);\n\n\t\tswitch (light.type) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"d\" /* DirectionalLight */](color);\n\t\t\t\tlightNode.position.set(0, 0, 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"e\" /* PointLight */](color);\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"f\" /* SpotLight */](color);\n\t\t\t\tlightNode.position.set(0, 0, 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ambient':\n\t\t\t\tlightNode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"g\" /* AmbientLight */](color);\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (lightNode) {\n\n\t\t\tif (light.constantAttenuation !== undefined) {\n\n\t\t\t\tlightNode.intensity = light.constantAttenuation;\n\t\t\t}\n\n\t\t\tif (light.linearAttenuation !== undefined) {\n\n\t\t\t\tlightNode.distance = 1 / light.linearAttenuation;\n\t\t\t}\n\n\t\t\tif (light.quadraticAttenuation !== undefined) {\n\n\t\t\t\tlightNode.decay = light.quadraticAttenuation;\n\t\t\t}\n\n\t\t\tif (light.fallOffAngle !== undefined) {\n\n\t\t\t\tlightNode.angle = light.fallOffAngle;\n\t\t\t}\n\n\t\t\tif (light.fallOffExponent !== undefined) {\n\n\t\t\t\tconsole.warn('GLTFLoader:: light.fallOffExponent not currently supported.');\n\t\t\t}\n\n\t\t\tlightNode.name = light.name || 'light_' + lightId;\n\t\t\tthis.lights[lightId] = lightNode;\n\t\t}\n\t}\n}\n\nfunction GLTFMaterialsCommonExtension(json) {\n\n\tthis.name = EXTENSIONS.KHR_MATERIALS_COMMON;\n}\n\nGLTFMaterialsCommonExtension.prototype.getMaterialType = function (material) {\n\n\tvar khrMaterial = material.extensions[this.name];\n\n\tswitch (khrMaterial.type) {\n\n\t\tcase 'commonBlinn':\n\t\tcase 'commonPhong':\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_2_three__[\"h\" /* MeshPhongMaterial */];\n\n\t\tcase 'commonLambert':\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_2_three__[\"i\" /* MeshLambertMaterial */];\n\n\t\tcase 'commonConstant':\n\t\tdefault:\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_2_three__[\"j\" /* MeshBasicMaterial */];\n\n\t}\n};\n\nGLTFMaterialsCommonExtension.prototype.extendParams = function (materialParams, material, parser) {\n\n\tvar khrMaterial = material.extensions[this.name];\n\n\tvar pending = [];\n\n\tvar keys = [];\n\n\tswitch (khrMaterial.type) {\n\n\t\tcase 'commonBlinn':\n\t\tcase 'commonPhong':\n\t\t\tkeys.push('diffuseFactor', 'diffuseTexture', 'specularFactor', 'specularTexture', 'shininessFactor');\n\t\t\tbreak;\n\n\t\tcase 'commonLambert':\n\t\t\tkeys.push('diffuseFactor', 'diffuseTexture');\n\t\t\tbreak;\n\n\t\tcase 'commonConstant':\n\t\tdefault:\n\t\t\tbreak;\n\n\t}\n\n\tvar materialValues = {};\n\n\tkeys.forEach(function (v) {\n\n\t\tif (khrMaterial[v] !== undefined) materialValues[v] = khrMaterial[v];\n\t});\n\n\tif (materialValues.diffuseFactor !== undefined) {\n\n\t\tmaterialParams.color = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().fromArray(materialValues.diffuseFactor);\n\t\tmaterialParams.opacity = materialValues.diffuseFactor[3];\n\t}\n\n\tif (materialValues.diffuseTexture !== undefined) {\n\n\t\tpending.push(parser.assignTexture(materialParams, 'map', materialValues.diffuseTexture.index));\n\t}\n\n\tif (materialValues.specularFactor !== undefined) {\n\n\t\tmaterialParams.specular = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().fromArray(materialValues.specularFactor);\n\t}\n\n\tif (materialValues.specularTexture !== undefined) {\n\n\t\tpending.push(parser.assignTexture(materialParams, 'specularMap', materialValues.specularTexture.index));\n\t}\n\n\tif (materialValues.shininessFactor !== undefined) {\n\n\t\tmaterialParams.shininess = materialValues.shininessFactor;\n\t}\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(pending);\n};\n\nvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nfunction GLTFBinaryExtension(data) {\n\n\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\tthis.content = null;\n\tthis.body = null;\n\n\tvar headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n\n\tthis.header = {\n\t\tmagic: __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__[\"a\" /* LoaderUtils */].decodeText(new Uint8Array(data.slice(0, 4))),\n\t\tversion: headerView.getUint32(4, true),\n\t\tlength: headerView.getUint32(8, true)\n\t};\n\n\tif (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n\n\t\tthrow new Error('GLTFLoader: Unsupported glTF-Binary header.');\n\t} else if (this.header.version < 2.0) {\n\n\t\tthrow new Error('GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.');\n\t}\n\n\tvar chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n\tvar chunkIndex = 0;\n\n\twhile (chunkIndex < chunkView.byteLength) {\n\n\t\tvar chunkLength = chunkView.getUint32(chunkIndex, true);\n\t\tchunkIndex += 4;\n\n\t\tvar chunkType = chunkView.getUint32(chunkIndex, true);\n\t\tchunkIndex += 4;\n\n\t\tif (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n\n\t\t\tvar contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n\t\t\tthis.content = __WEBPACK_IMPORTED_MODULE_3__LoaderUtils_js__[\"a\" /* LoaderUtils */].decodeText(contentArray);\n\t\t} else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n\n\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\tthis.body = data.slice(byteOffset, byteOffset + chunkLength);\n\t\t}\n\n\t\tchunkIndex += chunkLength;\n\t}\n\n\tif (this.content === null) {\n\n\t\tthrow new Error('addEnvMap: false: JSON content not found.');\n\t}\n}\n\nfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\treturn {\n\n\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\tspecularGlossinessParams: ['color', 'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity', 'emissive', 'emissiveIntensity', 'emissiveMap', 'bumpMap', 'bumpScale', 'normalMap', 'displacementMap', 'displacementScale', 'displacementBias', 'specularMap', 'specular', 'glossinessMap', 'glossiness', 'alphaMap', 'envMap', 'envMapIntensity', 'refractionRatio'],\n\n\t\tgetMaterialType: function getMaterialType() {\n\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_2_three__[\"k\" /* ShaderMaterial */];\n\t\t},\n\n\t\textendParams: function extendParams(params, material, parser) {\n\n\t\t\tvar pbrSpecularGlossiness = material.extensions[this.name];\n\n\t\t\tvar shader = __WEBPACK_IMPORTED_MODULE_2_three__[\"l\" /* ShaderLib */]['standard'];\n\n\t\t\tvar uniforms = __WEBPACK_IMPORTED_MODULE_2_three__[\"m\" /* UniformsUtils */].clone(shader.uniforms);\n\n\t\t\tvar specularMapParsFragmentChunk = ['#ifdef USE_SPECULARMAP', '\tuniform sampler2D specularMap;', '#endif'].join('\\n');\n\n\t\t\tvar glossinessMapParsFragmentChunk = ['#ifdef USE_GLOSSINESSMAP', '\tuniform sampler2D glossinessMap;', '#endif'].join('\\n');\n\n\t\t\tvar specularMapFragmentChunk = ['vec3 specularFactor = specular;', '#ifdef USE_SPECULARMAP', '\tvec4 texelSpecular = texture2D( specularMap, vUv );', '\ttexelSpecular = sRGBToLinear( texelSpecular );', '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tspecularFactor *= texelSpecular.rgb;', '#endif'].join('\\n');\n\n\t\t\tvar glossinessMapFragmentChunk = ['float glossinessFactor = glossiness;', '#ifdef USE_GLOSSINESSMAP', '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );', '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tglossinessFactor *= texelGlossiness.a;', '#endif'].join('\\n');\n\n\t\t\tvar lightPhysicalFragmentChunk = ['PhysicalMaterial material;', 'material.diffuseColor = diffuseColor.rgb;', 'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );', 'material.specularColor = specularFactor.rgb;'].join('\\n');\n\n\t\t\tvar fragmentShader = shader.fragmentShader.replace('#include <specularmap_fragment>', '').replace('uniform float roughness;', 'uniform vec3 specular;').replace('uniform float metalness;', 'uniform float glossiness;').replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk).replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk).replace('#include <roughnessmap_fragment>', specularMapFragmentChunk).replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk).replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n\n\t\t\tdelete uniforms.roughness;\n\t\t\tdelete uniforms.metalness;\n\t\t\tdelete uniforms.roughnessMap;\n\t\t\tdelete uniforms.metalnessMap;\n\n\t\t\tuniforms.specular = { value: new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().setHex(0x111111) };\n\t\t\tuniforms.glossiness = { value: 0.5 };\n\t\t\tuniforms.specularMap = { value: null };\n\t\t\tuniforms.glossinessMap = { value: null };\n\n\t\t\tparams.vertexShader = shader.vertexShader;\n\t\t\tparams.fragmentShader = fragmentShader;\n\t\t\tparams.uniforms = uniforms;\n\t\t\tparams.defines = { 'STANDARD': '' };\n\n\t\t\tparams.color = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */](1.0, 1.0, 1.0);\n\t\t\tparams.opacity = 1.0;\n\n\t\t\tvar pending = [];\n\n\t\t\tif (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n\n\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\tparams.color.fromArray(array);\n\t\t\t\tparams.opacity = array[3];\n\t\t\t}\n\n\t\t\tif (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n\n\t\t\t\tpending.push(parser.assignTexture(params, 'map', pbrSpecularGlossiness.diffuseTexture.index));\n\t\t\t}\n\n\t\t\tparams.emissive = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */](0.0, 0.0, 0.0);\n\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\tparams.specular = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */](1.0, 1.0, 1.0);\n\n\t\t\tif (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n\n\t\t\t\tparams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n\t\t\t}\n\n\t\t\tif (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n\n\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\n\t\t\t\tpending.push(parser.assignTexture(params, 'glossinessMap', specGlossIndex));\n\t\t\t\tpending.push(parser.assignTexture(params, 'specularMap', specGlossIndex));\n\t\t\t}\n\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(pending);\n\t\t},\n\n\t\tcreateMaterial: function createMaterial(params) {\n\n\t\t\tvar material = new __WEBPACK_IMPORTED_MODULE_2_three__[\"k\" /* ShaderMaterial */]({\n\t\t\t\tdefines: params.defines,\n\t\t\t\tvertexShader: params.vertexShader,\n\t\t\t\tfragmentShader: params.fragmentShader,\n\t\t\t\tuniforms: params.uniforms,\n\t\t\t\tfog: true,\n\t\t\t\tlights: true,\n\t\t\t\topacity: params.opacity,\n\t\t\t\ttransparent: params.transparent\n\t\t\t});\n\n\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\tmaterial.color = params.color;\n\n\t\t\tmaterial.map = params.map === undefined ? null : params.map;\n\n\t\t\tmaterial.lightMap = null;\n\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\n\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\tmaterial.emissive = params.emissive;\n\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\n\n\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\n\t\t\tmaterial.bumpScale = 1;\n\n\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\n\t\t\tif (params.normalScale) material.normalScale = params.normalScale;\n\n\t\t\tmaterial.displacementMap = null;\n\t\t\tmaterial.displacementScale = 1;\n\t\t\tmaterial.displacementBias = 0;\n\n\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\n\t\t\tmaterial.specular = params.specular;\n\n\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\n\t\t\tmaterial.glossiness = params.glossiness;\n\n\t\t\tmaterial.alphaMap = null;\n\n\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\n\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\tmaterial.extensions.derivatives = true;\n\n\t\t\treturn material;\n\t\t},\n\n\t\tcloneMaterial: function cloneMaterial(source) {\n\n\t\t\tvar target = source.clone();\n\n\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\tvar params = this.specularGlossinessParams;\n\n\t\t\tfor (var i = 0, il = params.length; i < il; i++) {\n\n\t\t\t\ttarget[params[i]] = source[params[i]];\n\t\t\t}\n\n\t\t\treturn target;\n\t\t},\n\n\t\trefreshUniforms: function refreshUniforms(renderer, scene, camera, geometry, material, group) {\n\n\t\t\tvar uniforms = material.uniforms;\n\t\t\tvar defines = material.defines;\n\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t\tuniforms.diffuse.value.copy(material.color);\n\t\t\tuniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n\n\t\t\tuniforms.map.value = material.map;\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\tvar uvScaleMap;\n\n\t\t\tif (material.map) {\n\n\t\t\t\tuvScaleMap = material.map;\n\t\t\t} else if (material.specularMap) {\n\n\t\t\t\tuvScaleMap = material.specularMap;\n\t\t\t} else if (material.displacementMap) {\n\n\t\t\t\tuvScaleMap = material.displacementMap;\n\t\t\t} else if (material.normalMap) {\n\n\t\t\t\tuvScaleMap = material.normalMap;\n\t\t\t} else if (material.bumpMap) {\n\n\t\t\t\tuvScaleMap = material.bumpMap;\n\t\t\t} else if (material.glossinessMap) {\n\n\t\t\t\tuvScaleMap = material.glossinessMap;\n\t\t\t} else if (material.alphaMap) {\n\n\t\t\t\tuvScaleMap = material.alphaMap;\n\t\t\t} else if (material.emissiveMap) {\n\n\t\t\t\tuvScaleMap = material.emissiveMap;\n\t\t\t}\n\n\t\t\tif (uvScaleMap !== undefined) {\n\t\t\t\tif (uvScaleMap.isWebGLRenderTarget) {\n\n\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\t\t\t\t}\n\n\t\t\t\tvar offset;\n\t\t\t\tvar repeat;\n\n\t\t\t\tif (uvScaleMap.matrix !== undefined) {\n\n\t\t\t\t\tif (uvScaleMap.matrixAutoUpdate === true) {\n\n\t\t\t\t\t\toffset = uvScaleMap.offset;\n\t\t\t\t\t\trepeat = uvScaleMap.repeat;\n\t\t\t\t\t\tvar rotation = uvScaleMap.rotation;\n\t\t\t\t\t\tvar center = uvScaleMap.center;\n\n\t\t\t\t\t\tuvScaleMap.matrix.setUvTransform(offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y);\n\t\t\t\t\t}\n\n\t\t\t\t\tuniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = uvScaleMap.offset;\n\t\t\t\t\trepeat = uvScaleMap.repeat;\n\n\t\t\t\t\tuniforms.offsetRepeat.value.set(offset.x, offset.y, repeat.x, repeat.y);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\t\t\tuniforms.flipEnvMap.value = material.envMap && material.envMap.isCubeTexture ? -1 : 1;\n\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.specular.value.copy(material.specular);\n\t\t\tuniforms.glossiness.value = material.glossiness;\n\n\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\tif (uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined) {\n\n\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\n\n\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\n\t\t\t}\n\n\t\t\tif (uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined) {\n\n\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\n\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\n\t\t\t}\n\t\t}\n\n\t};\n}\n\nvar WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nvar WEBGL_TYPE = {\n\t5126: Number,\n\n\t35675: __WEBPACK_IMPORTED_MODULE_2_three__[\"n\" /* Matrix3 */],\n\t35676: __WEBPACK_IMPORTED_MODULE_2_three__[\"o\" /* Matrix4 */],\n\t35664: __WEBPACK_IMPORTED_MODULE_2_three__[\"p\" /* Vector2 */],\n\t35665: __WEBPACK_IMPORTED_MODULE_2_three__[\"q\" /* Vector3 */],\n\t35666: __WEBPACK_IMPORTED_MODULE_2_three__[\"r\" /* Vector4 */],\n\t35678: __WEBPACK_IMPORTED_MODULE_2_three__[\"s\" /* Texture */]\n};\n\nvar WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nvar WEBGL_FILTERS = {\n\t9728: __WEBPACK_IMPORTED_MODULE_2_three__[\"t\" /* NearestFilter */],\n\t9729: __WEBPACK_IMPORTED_MODULE_2_three__[\"u\" /* LinearFilter */],\n\t9984: __WEBPACK_IMPORTED_MODULE_2_three__[\"v\" /* NearestMipMapNearestFilter */],\n\t9985: __WEBPACK_IMPORTED_MODULE_2_three__[\"w\" /* LinearMipMapNearestFilter */],\n\t9986: __WEBPACK_IMPORTED_MODULE_2_three__[\"x\" /* NearestMipMapLinearFilter */],\n\t9987: __WEBPACK_IMPORTED_MODULE_2_three__[\"y\" /* LinearMipMapLinearFilter */]\n};\n\nvar WEBGL_WRAPPINGS = {\n\t33071: __WEBPACK_IMPORTED_MODULE_2_three__[\"z\" /* ClampToEdgeWrapping */],\n\t33648: __WEBPACK_IMPORTED_MODULE_2_three__[\"A\" /* MirroredRepeatWrapping */],\n\t10497: __WEBPACK_IMPORTED_MODULE_2_three__[\"B\" /* RepeatWrapping */]\n};\n\nvar WEBGL_TEXTURE_FORMATS = {\n\t6406: __WEBPACK_IMPORTED_MODULE_2_three__[\"C\" /* AlphaFormat */],\n\t6407: __WEBPACK_IMPORTED_MODULE_2_three__[\"D\" /* RGBFormat */],\n\t6408: __WEBPACK_IMPORTED_MODULE_2_three__[\"E\" /* RGBAFormat */],\n\t6409: __WEBPACK_IMPORTED_MODULE_2_three__[\"F\" /* LuminanceFormat */],\n\t6410: __WEBPACK_IMPORTED_MODULE_2_three__[\"G\" /* LuminanceAlphaFormat */]\n};\n\nvar WEBGL_TEXTURE_DATATYPES = {\n\t5121: __WEBPACK_IMPORTED_MODULE_2_three__[\"H\" /* UnsignedByteType */],\n\t32819: __WEBPACK_IMPORTED_MODULE_2_three__[\"I\" /* UnsignedShort4444Type */],\n\t32820: __WEBPACK_IMPORTED_MODULE_2_three__[\"J\" /* UnsignedShort5551Type */],\n\t33635: __WEBPACK_IMPORTED_MODULE_2_three__[\"K\" /* UnsignedShort565Type */]\n};\n\nvar WEBGL_SIDES = {\n\t1028: __WEBPACK_IMPORTED_MODULE_2_three__[\"L\" /* BackSide */],\n\t1029: __WEBPACK_IMPORTED_MODULE_2_three__[\"M\" /* FrontSide */] };\n\nvar WEBGL_DEPTH_FUNCS = {\n\t512: __WEBPACK_IMPORTED_MODULE_2_three__[\"N\" /* NeverDepth */],\n\t513: __WEBPACK_IMPORTED_MODULE_2_three__[\"O\" /* LessDepth */],\n\t514: __WEBPACK_IMPORTED_MODULE_2_three__[\"P\" /* EqualDepth */],\n\t515: __WEBPACK_IMPORTED_MODULE_2_three__[\"Q\" /* LessEqualDepth */],\n\t516: __WEBPACK_IMPORTED_MODULE_2_three__[\"R\" /* GreaterEqualDepth */],\n\t517: __WEBPACK_IMPORTED_MODULE_2_three__[\"S\" /* NotEqualDepth */],\n\t518: __WEBPACK_IMPORTED_MODULE_2_three__[\"R\" /* GreaterEqualDepth */],\n\t519: __WEBPACK_IMPORTED_MODULE_2_three__[\"T\" /* AlwaysDepth */]\n};\n\nvar WEBGL_BLEND_EQUATIONS = {\n\t32774: __WEBPACK_IMPORTED_MODULE_2_three__[\"U\" /* AddEquation */],\n\t32778: __WEBPACK_IMPORTED_MODULE_2_three__[\"V\" /* SubtractEquation */],\n\t32779: __WEBPACK_IMPORTED_MODULE_2_three__[\"W\" /* ReverseSubtractEquation */]\n};\n\nvar WEBGL_BLEND_FUNCS = {\n\t0: __WEBPACK_IMPORTED_MODULE_2_three__[\"X\" /* ZeroFactor */],\n\t1: __WEBPACK_IMPORTED_MODULE_2_three__[\"Y\" /* OneFactor */],\n\t768: __WEBPACK_IMPORTED_MODULE_2_three__[\"Z\" /* SrcColorFactor */],\n\t769: __WEBPACK_IMPORTED_MODULE_2_three__[\"_0\" /* OneMinusSrcColorFactor */],\n\t770: __WEBPACK_IMPORTED_MODULE_2_three__[\"_1\" /* SrcAlphaFactor */],\n\t771: __WEBPACK_IMPORTED_MODULE_2_three__[\"_2\" /* OneMinusSrcAlphaFactor */],\n\t772: __WEBPACK_IMPORTED_MODULE_2_three__[\"_3\" /* DstAlphaFactor */],\n\t773: __WEBPACK_IMPORTED_MODULE_2_three__[\"_4\" /* OneMinusDstAlphaFactor */],\n\t774: __WEBPACK_IMPORTED_MODULE_2_three__[\"_5\" /* DstColorFactor */],\n\t775: __WEBPACK_IMPORTED_MODULE_2_three__[\"_6\" /* OneMinusDstColorFactor */],\n\t776: __WEBPACK_IMPORTED_MODULE_2_three__[\"_7\" /* SrcAlphaSaturateFactor */]\n};\n\nvar WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nvar PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nvar INTERPOLATION = {\n\tCUBICSPLINE: __WEBPACK_IMPORTED_MODULE_2_three__[\"_8\" /* InterpolateSmooth */],\n\tLINEAR: __WEBPACK_IMPORTED_MODULE_2_three__[\"_9\" /* InterpolateLinear */],\n\tSTEP: __WEBPACK_IMPORTED_MODULE_2_three__[\"_10\" /* InterpolateDiscrete */]\n};\n\nvar STATES_ENABLES = {\n\t2884: 'CULL_FACE',\n\t2929: 'DEPTH_TEST',\n\t3042: 'BLEND',\n\t3089: 'SCISSOR_TEST',\n\t32823: 'POLYGON_OFFSET_FILL',\n\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\n};\n\nvar ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\nfunction resolveURL(url, path) {\n\tif (typeof url !== 'string' || url === '') return '';\n\n\tif (/^(https?:)?\\/\\//i.test(url)) return url;\n\n\tif (/^data:.*,.*$/i.test(url)) return url;\n\n\tif (/^blob:.*$/i.test(url)) return url;\n\n\treturn path + url;\n}\n\nfunction createDefaultMaterial() {\n\n\treturn new __WEBPACK_IMPORTED_MODULE_2_three__[\"_11\" /* MeshStandardMaterial */]({\n\t\tcolor: 0xFFFFFF,\n\t\temissive: 0x000000,\n\t\tmetalness: 1,\n\t\troughness: 1,\n\t\ttransparent: false,\n\t\tdepthTest: true,\n\t\tside: __WEBPACK_IMPORTED_MODULE_2_three__[\"M\" /* FrontSide */]\n\t});\n}\n\nfunction addMorphTargets(mesh, meshDef, primitiveDef, accessors) {\n\n\tvar geometry = mesh.geometry;\n\tvar material = mesh.material;\n\n\tvar targets = primitiveDef.targets;\n\tvar morphAttributes = geometry.morphAttributes;\n\n\tmorphAttributes.position = [];\n\tmorphAttributes.normal = [];\n\n\tmaterial.morphTargets = true;\n\n\tfor (var i = 0, il = targets.length; i < il; i++) {\n\n\t\tvar target = targets[i];\n\t\tvar attributeName = 'morphTarget' + i;\n\n\t\tvar positionAttribute, normalAttribute;\n\n\t\tif (target.POSITION !== undefined) {\n\n\t\t\tpositionAttribute = accessors[target.POSITION].clone();\n\t\t\tvar position = geometry.attributes.position;\n\n\t\t\tfor (var j = 0, jl = positionAttribute.count; j < jl; j++) {\n\n\t\t\t\tpositionAttribute.setXYZ(j, positionAttribute.getX(j) + position.getX(j), positionAttribute.getY(j) + position.getY(j), positionAttribute.getZ(j) + position.getZ(j));\n\t\t\t}\n\t\t} else if (geometry.attributes.position) {\n\t\t\tpositionAttribute = geometry.attributes.position.clone();\n\t\t}\n\n\t\tif (positionAttribute !== undefined) {\n\n\t\t\tpositionAttribute.name = attributeName;\n\t\t\tmorphAttributes.position.push(positionAttribute);\n\t\t}\n\n\t\tif (target.NORMAL !== undefined) {\n\n\t\t\tmaterial.morphNormals = true;\n\n\t\t\tnormalAttribute = accessors[target.NORMAL].clone();\n\t\t\tvar normal = geometry.attributes.normal;\n\n\t\t\tfor (var j = 0, jl = normalAttribute.count; j < jl; j++) {\n\n\t\t\t\tnormalAttribute.setXYZ(j, normalAttribute.getX(j) + normal.getX(j), normalAttribute.getY(j) + normal.getY(j), normalAttribute.getZ(j) + normal.getZ(j));\n\t\t\t}\n\t\t} else if (geometry.attributes.normal !== undefined) {\n\n\t\t\tnormalAttribute = geometry.attributes.normal.clone();\n\t\t}\n\n\t\tif (normalAttribute !== undefined) {\n\n\t\t\tnormalAttribute.name = attributeName;\n\t\t\tmorphAttributes.normal.push(normalAttribute);\n\t\t}\n\t}\n\n\tmesh.updateMorphTargets();\n\n\tif (meshDef.weights !== undefined) {\n\n\t\tfor (var i = 0, il = meshDef.weights.length; i < il; i++) {\n\n\t\t\tmesh.morphTargetInfluences[i] = meshDef.weights[i];\n\t\t}\n\t}\n}\n\nfunction isPrimitiveEqual(a, b) {\n\n\tif (a.indices !== b.indices) {\n\n\t\treturn false;\n\t}\n\n\tvar attribA = a.attributes || {};\n\tvar attribB = b.attributes || {};\n\tvar keysA = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(attribA);\n\tvar keysB = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(attribB);\n\n\tif (keysA.length !== keysB.length) {\n\n\t\treturn false;\n\t}\n\n\tfor (var i = 0, il = keysA.length; i < il; i++) {\n\n\t\tvar key = keysA[i];\n\n\t\tif (attribA[key] !== attribB[key]) {\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction getCachedGeometry(cache, newPrimitive) {\n\n\tfor (var i = 0, il = cache.length; i < il; i++) {\n\n\t\tvar cached = cache[i];\n\n\t\tif (isPrimitiveEqual(cached.primitive, newPrimitive)) {\n\n\t\t\treturn cached.geometry;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nfunction GLTFParser(json, extensions, options) {\n\n\tthis.json = json || {};\n\tthis.extensions = extensions || {};\n\tthis.options = options || {};\n\n\tthis.cache = new GLTFRegistry();\n\n\tthis.primitiveCache = [];\n\n\tthis.textureLoader = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_12\" /* TextureLoader */](this.options.manager);\n\tthis.textureLoader.setCrossOrigin(this.options.crossOrigin);\n\n\tthis.fileLoader = new __WEBPACK_IMPORTED_MODULE_2_three__[\"b\" /* FileLoader */](this.options.manager);\n\tthis.fileLoader.setResponseType('arraybuffer');\n}\n\nGLTFParser.prototype.parse = function (onLoad, onError) {\n\n\tvar json = this.json;\n\tvar parser = this;\n\n\tthis.cache.removeAll();\n\n\tthis.markDefs();\n\n\tthis.getMultiDependencies(['scene', 'animation', 'camera']).then(function (dependencies) {\n\n\t\tvar scenes = dependencies.scenes || [];\n\t\tvar scene = scenes[json.scene || 0];\n\t\tvar animations = dependencies.animations || [];\n\t\tvar asset = json.asset;\n\t\tvar cameras = dependencies.cameras || [];\n\n\t\tonLoad(scene, scenes, cameras, animations, asset);\n\t}).catch(onError);\n};\n\nGLTFParser.prototype.markDefs = function () {\n\n\tvar nodeDefs = this.json.nodes || [];\n\tvar skinDefs = this.json.skins || [];\n\tvar meshDefs = this.json.meshes || [];\n\n\tvar meshReferences = {};\n\tvar meshUses = {};\n\n\tfor (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n\n\t\tvar joints = skinDefs[skinIndex].joints;\n\n\t\tfor (var i = 0, il = joints.length; i < il; i++) {\n\n\t\t\tnodeDefs[joints[i]].isBone = true;\n\t\t}\n\t}\n\n\tfor (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n\n\t\tvar nodeDef = nodeDefs[nodeIndex];\n\n\t\tif (nodeDef.mesh !== undefined) {\n\n\t\t\tif (meshReferences[nodeDef.mesh] === undefined) {\n\n\t\t\t\tmeshReferences[nodeDef.mesh] = meshUses[nodeDef.mesh] = 0;\n\t\t\t}\n\n\t\t\tmeshReferences[nodeDef.mesh]++;\n\n\t\t\tif (nodeDef.skin !== undefined) {\n\n\t\t\t\tmeshDefs[nodeDef.mesh].isSkinnedMesh = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.json.meshReferences = meshReferences;\n\tthis.json.meshUses = meshUses;\n};\n\nGLTFParser.prototype.getDependency = function (type, index) {\n\n\tvar cacheKey = type + ':' + index;\n\tvar dependency = this.cache.get(cacheKey);\n\n\tif (!dependency) {\n\n\t\tvar fnName = 'load' + type.charAt(0).toUpperCase() + type.slice(1);\n\t\tdependency = this[fnName](index);\n\t\tthis.cache.add(cacheKey, dependency);\n\t}\n\n\treturn dependency;\n};\n\nGLTFParser.prototype.getDependencies = function (type) {\n\n\tvar dependencies = this.cache.get(type);\n\n\tif (!dependencies) {\n\n\t\tvar parser = this;\n\t\tvar defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n\n\t\tdependencies = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(defs.map(function (def, index) {\n\n\t\t\treturn parser.getDependency(type, index);\n\t\t}));\n\n\t\tthis.cache.add(type, dependencies);\n\t}\n\n\treturn dependencies;\n};\n\nGLTFParser.prototype.getMultiDependencies = function (types) {\n\n\tvar results = {};\n\tvar pendings = [];\n\n\tfor (var i = 0, il = types.length; i < il; i++) {\n\n\t\tvar type = types[i];\n\t\tvar value = this.getDependencies(type);\n\n\t\tvalue = value.then(function (key, value) {\n\n\t\t\tresults[key] = value;\n\t\t}.bind(this, type + (type === 'mesh' ? 'es' : 's')));\n\n\t\tpendings.push(value);\n\t}\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(pendings).then(function () {\n\n\t\treturn results;\n\t});\n};\n\nGLTFParser.prototype.loadBuffer = function (bufferIndex) {\n\n\tvar bufferDef = this.json.buffers[bufferIndex];\n\tvar loader = this.fileLoader;\n\n\tif (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n\n\t\tthrow new Error('GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n\t}\n\n\tif (bufferDef.uri === undefined && bufferIndex === 0) {\n\n\t\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n\t}\n\n\tvar options = this.options;\n\n\treturn new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n\n\t\tloader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n\n\t\t\treject(new Error('GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n\t\t});\n\t});\n};\n\nGLTFParser.prototype.loadBufferView = function (bufferViewIndex) {\n\n\tvar bufferViewDef = this.json.bufferViews[bufferViewIndex];\n\n\treturn this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n\n\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t});\n};\n\nGLTFParser.prototype.loadAccessor = function (accessorIndex) {\n\n\tvar json = this.json;\n\n\tvar accessorDef = this.json.accessors[accessorIndex];\n\n\tvar pendingBufferViews = [];\n\n\tif (accessorDef.bufferView !== undefined) {\n\n\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n\t} else {\n\n\t\tpendingBufferViews.push(null);\n\t}\n\n\tif (accessorDef.sparse !== undefined) {\n\n\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n\t}\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(pendingBufferViews).then(function (bufferViews) {\n\n\t\tvar bufferView = bufferViews[0];\n\n\t\tvar itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\tvar itemBytes = elementBytes * itemSize;\n\t\tvar byteStride = json.bufferViews[accessorDef.bufferView].byteStride;\n\t\tvar normalized = accessorDef.normalized === true;\n\t\tvar array, bufferAttribute;\n\n\t\tif (byteStride && byteStride !== itemBytes) {\n\t\t\tarray = new TypedArray(bufferView);\n\n\t\t\tvar ib = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_13\" /* InterleavedBuffer */](array, byteStride / elementBytes);\n\n\t\t\tbufferAttribute = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_14\" /* InterleavedBufferAttribute */](ib, itemSize, accessorDef.byteOffset / elementBytes, normalized);\n\t\t} else {\n\n\t\t\tif (bufferView === null) {\n\n\t\t\t\tarray = new TypedArray(accessorDef.count * itemSize);\n\t\t\t} else {\n\n\t\t\t\tarray = new TypedArray(bufferView, accessorDef.byteOffset, accessorDef.count * itemSize);\n\t\t\t}\n\n\t\t\tbufferAttribute = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_15\" /* BufferAttribute */](array, itemSize, normalized);\n\t\t}\n\n\t\tif (accessorDef.sparse !== undefined) {\n\n\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n\n\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\tvar sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n\t\t\tvar sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n\t\t\tif (bufferView !== null) {\n\t\t\t\tbufferAttribute.setArray(bufferAttribute.array.slice());\n\t\t\t}\n\n\t\t\tfor (var i = 0, il = sparseIndices.length; i < il; i++) {\n\n\t\t\t\tvar index = sparseIndices[i];\n\n\t\t\t\tbufferAttribute.setX(index, sparseValues[i * itemSize]);\n\t\t\t\tif (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n\t\t\t\tif (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n\t\t\t\tif (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n\t\t\t\tif (itemSize >= 5) throw new Error('GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n\t\t\t}\n\t\t}\n\n\t\treturn bufferAttribute;\n\t});\n};\n\nGLTFParser.prototype.loadTexture = function (textureIndex) {\n\n\tvar parser = this;\n\tvar json = this.json;\n\tvar options = this.options;\n\tvar textureLoader = this.textureLoader;\n\n\tvar URL = window.URL || window.webkitURL;\n\n\tvar textureDef = json.textures[textureIndex];\n\tvar source = json.images[textureDef.source];\n\tvar sourceURI = source.uri;\n\tvar isObjectURL = false;\n\n\tif (source.bufferView !== undefined) {\n\n\t\tsourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n\n\t\t\tisObjectURL = true;\n\t\t\tvar blob = new Blob([bufferView], { type: source.mimeType });\n\t\t\tsourceURI = URL.createObjectURL(blob);\n\t\t\treturn sourceURI;\n\t\t});\n\t}\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve(sourceURI).then(function (sourceURI) {\n\n\t\tvar loader = __WEBPACK_IMPORTED_MODULE_2_three__[\"_16\" /* Loader */].Handlers.get(sourceURI) || textureLoader;\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n\n\t\t\tloader.load(resolveURL(sourceURI, options.path), resolve, undefined, reject);\n\t\t});\n\t}).then(function (texture) {\n\n\t\tif (isObjectURL === true) {\n\n\t\t\tURL.revokeObjectURL(sourceURI);\n\t\t}\n\n\t\ttexture.flipY = false;\n\n\t\tif (textureDef.name !== undefined) texture.name = textureDef.name;\n\n\t\ttexture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[textureDef.format] : __WEBPACK_IMPORTED_MODULE_2_three__[\"E\" /* RGBAFormat */];\n\n\t\tif (textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[textureDef.internalFormat]) {\n\n\t\t\tconsole.warn('GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' + 'internalFormat will be forced to be the same value as format.');\n\t\t}\n\n\t\ttexture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[textureDef.type] : __WEBPACK_IMPORTED_MODULE_2_three__[\"H\" /* UnsignedByteType */];\n\n\t\tvar samplers = json.samplers || {};\n\t\tvar sampler = samplers[textureDef.sampler] || {};\n\n\t\ttexture.magFilter = WEBGL_FILTERS[sampler.magFilter] || __WEBPACK_IMPORTED_MODULE_2_three__[\"u\" /* LinearFilter */];\n\t\ttexture.minFilter = WEBGL_FILTERS[sampler.minFilter] || __WEBPACK_IMPORTED_MODULE_2_three__[\"y\" /* LinearMipMapLinearFilter */];\n\t\ttexture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || __WEBPACK_IMPORTED_MODULE_2_three__[\"B\" /* RepeatWrapping */];\n\t\ttexture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || __WEBPACK_IMPORTED_MODULE_2_three__[\"B\" /* RepeatWrapping */];\n\n\t\treturn texture;\n\t});\n};\n\nGLTFParser.prototype.assignTexture = function (materialParams, textureName, textureIndex) {\n\n\treturn this.getDependency('texture', textureIndex).then(function (texture) {\n\n\t\tmaterialParams[textureName] = texture;\n\t});\n};\n\nGLTFParser.prototype.loadMaterial = function (materialIndex) {\n\n\tvar parser = this;\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\tvar materialDef = this.json.materials[materialIndex];\n\n\tvar materialType;\n\tvar materialParams = {};\n\tvar materialExtensions = materialDef.extensions || {};\n\n\tvar pending = [];\n\n\tif (materialExtensions[EXTENSIONS.KHR_MATERIALS_COMMON]) {\n\n\t\tvar khcExtension = extensions[EXTENSIONS.KHR_MATERIALS_COMMON];\n\t\tmaterialType = khcExtension.getMaterialType(materialDef);\n\t\tpending.push(khcExtension.extendParams(materialParams, materialDef, parser));\n\t} else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n\n\t\tvar sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n\t\tmaterialType = sgExtension.getMaterialType(materialDef);\n\t\tpending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n\t} else if (materialDef.pbrMetallicRoughness !== undefined) {\n\n\t\tmaterialType = __WEBPACK_IMPORTED_MODULE_2_three__[\"_11\" /* MeshStandardMaterial */];\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tmaterialParams.color = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */](1.0, 1.0, 1.0);\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tif (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\tmaterialParams.color.fromArray(array);\n\t\t\tmaterialParams.opacity = array[3];\n\t\t}\n\n\t\tif (metallicRoughness.baseColorTexture !== undefined) {\n\n\t\t\tpending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture.index));\n\t\t}\n\n\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\tif (metallicRoughness.metallicRoughnessTexture !== undefined) {\n\n\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\n\t\t\tpending.push(parser.assignTexture(materialParams, 'metalnessMap', textureIndex));\n\t\t\tpending.push(parser.assignTexture(materialParams, 'roughnessMap', textureIndex));\n\t\t}\n\t} else {\n\n\t\tmaterialType = __WEBPACK_IMPORTED_MODULE_2_three__[\"h\" /* MeshPhongMaterial */];\n\t}\n\n\tif (materialDef.doubleSided === true) {\n\n\t\tmaterialParams.side = __WEBPACK_IMPORTED_MODULE_2_three__[\"_17\" /* DoubleSide */];\n\t}\n\n\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\tif (alphaMode === ALPHA_MODES.BLEND) {\n\n\t\tmaterialParams.transparent = true;\n\t} else {\n\n\t\tmaterialParams.transparent = false;\n\n\t\tif (alphaMode === ALPHA_MODES.MASK) {\n\n\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\t\t}\n\t}\n\n\tif (materialDef.normalTexture !== undefined) {\n\n\t\tpending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture.index));\n\n\t\tmaterialParams.normalScale = new __WEBPACK_IMPORTED_MODULE_2_three__[\"p\" /* Vector2 */](1, 1);\n\n\t\tif (materialDef.normalTexture.scale !== undefined) {\n\n\t\t\tmaterialParams.normalScale.set(materialDef.normalTexture.scale, materialDef.normalTexture.scale);\n\t\t}\n\t}\n\n\tif (materialDef.occlusionTexture !== undefined) {\n\n\t\tpending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture.index));\n\n\t\tif (materialDef.occlusionTexture.strength !== undefined) {\n\n\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\t\t}\n\t}\n\n\tif (materialDef.emissiveFactor !== undefined) {\n\n\t\tif (materialType === __WEBPACK_IMPORTED_MODULE_2_three__[\"j\" /* MeshBasicMaterial */]) {\n\n\t\t\tmaterialParams.color = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().fromArray(materialDef.emissiveFactor);\n\t\t} else {\n\n\t\t\tmaterialParams.emissive = new __WEBPACK_IMPORTED_MODULE_2_three__[\"c\" /* Color */]().fromArray(materialDef.emissiveFactor);\n\t\t}\n\t}\n\n\tif (materialDef.emissiveTexture !== undefined) {\n\n\t\tif (materialType === __WEBPACK_IMPORTED_MODULE_2_three__[\"j\" /* MeshBasicMaterial */]) {\n\n\t\t\tpending.push(parser.assignTexture(materialParams, 'map', materialDef.emissiveTexture.index));\n\t\t} else {\n\n\t\t\tpending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture.index));\n\t\t}\n\t}\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(pending).then(function () {\n\n\t\tvar material;\n\n\t\tif (materialType === __WEBPACK_IMPORTED_MODULE_2_three__[\"k\" /* ShaderMaterial */]) {\n\n\t\t\tmaterial = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n\t\t} else {\n\n\t\t\tmaterial = new materialType(materialParams);\n\t\t}\n\n\t\tif (materialDef.name !== undefined) material.name = materialDef.name;\n\n\t\tif (material.normalScale) {\n\n\t\t\tmaterial.normalScale.x = -material.normalScale.x;\n\t\t}\n\n\t\tif (material.map) material.map.encoding = __WEBPACK_IMPORTED_MODULE_2_three__[\"_18\" /* sRGBEncoding */];\n\t\tif (material.emissiveMap) material.emissiveMap.encoding = __WEBPACK_IMPORTED_MODULE_2_three__[\"_18\" /* sRGBEncoding */];\n\n\t\tif (materialDef.extras) material.userData = materialDef.extras;\n\n\t\treturn material;\n\t});\n};\n\nGLTFParser.prototype.loadGeometries = function (primitives) {\n\n\tvar cache = this.primitiveCache;\n\n\treturn this.getDependencies('accessor').then(function (accessors) {\n\n\t\tvar geometries = [];\n\n\t\tfor (var i = 0, il = primitives.length; i < il; i++) {\n\n\t\t\tvar primitive = primitives[i];\n\n\t\t\tvar cached = getCachedGeometry(cache, primitive);\n\n\t\t\tif (cached) {\n\t\t\t\tgeometries.push(cached);\n\t\t\t} else {\n\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_19\" /* BufferGeometry */]();\n\n\t\t\t\tvar attributes = primitive.attributes;\n\n\t\t\t\tfor (var attributeId in attributes) {\n\n\t\t\t\t\tvar attributeEntry = attributes[attributeId];\n\n\t\t\t\t\tvar bufferAttribute = accessors[attributeEntry];\n\n\t\t\t\t\tswitch (attributeId) {\n\n\t\t\t\t\t\tcase 'POSITION':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('position', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('normal', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD_0':\n\t\t\t\t\t\tcase 'TEXCOORD0':\n\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('uv', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD_1':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('uv2', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'COLOR_0':\n\t\t\t\t\t\tcase 'COLOR0':\n\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('color', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'WEIGHTS_0':\n\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('skinWeight', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'JOINTS_0':\n\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\tgeometry.addAttribute('skinIndex', bufferAttribute);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (primitive.indices !== undefined) {\n\n\t\t\t\t\tgeometry.setIndex(accessors[primitive.indices]);\n\t\t\t\t}\n\n\t\t\t\tcache.push({\n\n\t\t\t\t\tprimitive: primitive,\n\t\t\t\t\tgeometry: geometry\n\n\t\t\t\t});\n\n\t\t\t\tgeometries.push(geometry);\n\t\t\t}\n\t\t}\n\n\t\treturn geometries;\n\t});\n};\n\nGLTFParser.prototype.loadMesh = function (meshIndex) {\n\n\tvar scope = this;\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\n\tvar meshDef = this.json.meshes[meshIndex];\n\n\treturn this.getMultiDependencies(['accessor', 'material']).then(function (dependencies) {\n\n\t\tvar group = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_20\" /* Group */]();\n\n\t\tvar primitives = meshDef.primitives;\n\n\t\treturn scope.loadGeometries(primitives).then(function (geometries) {\n\n\t\t\tfor (var i = 0, il = primitives.length; i < il; i++) {\n\n\t\t\t\tvar primitive = primitives[i];\n\t\t\t\tvar geometry = geometries[i];\n\n\t\t\t\tvar material = primitive.material === undefined ? createDefaultMaterial() : dependencies.materials[primitive.material];\n\n\t\t\t\tif (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n\n\t\t\t\t\tconsole.log('GLTFLoader: Duplicating UVs to support aoMap.');\n\t\t\t\t\tgeometry.addAttribute('uv2', new __WEBPACK_IMPORTED_MODULE_2_three__[\"_15\" /* BufferAttribute */](geometry.attributes.uv.array, 2));\n\t\t\t\t}\n\n\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\t\t\tvar useSkinning = meshDef.isSkinnedMesh === true;\n\t\t\t\tvar useMorphTargets = primitive.targets !== undefined;\n\n\t\t\t\tif (useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n\n\t\t\t\t\tif (material.isGLTFSpecularGlossinessMaterial) {\n\n\t\t\t\t\t\tvar specGlossExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n\t\t\t\t\t\tmaterial = specGlossExtension.cloneMaterial(material);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterial = material.clone();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (useVertexColors) {\n\n\t\t\t\t\tmaterial.vertexColors = __WEBPACK_IMPORTED_MODULE_2_three__[\"_21\" /* VertexColors */];\n\t\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t}\n\n\t\t\t\tif (useFlatShading) {\n\n\t\t\t\t\tmaterial.flatShading = true;\n\t\t\t\t}\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tif (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === undefined) {\n\n\t\t\t\t\tif (useSkinning) {\n\n\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_22\" /* SkinnedMesh */](geometry, material);\n\t\t\t\t\t\tmaterial.skinning = true;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_23\" /* Mesh */](geometry, material);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n\n\t\t\t\t\t\tmesh.drawMode = __WEBPACK_IMPORTED_MODULE_2_three__[\"_24\" /* TriangleStripDrawMode */];\n\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n\n\t\t\t\t\t\tmesh.drawMode = __WEBPACK_IMPORTED_MODULE_2_three__[\"_25\" /* TriangleFanDrawMode */];\n\t\t\t\t\t}\n\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_26\" /* LineSegments */](geometry, material);\n\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_27\" /* Line */](geometry, material);\n\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_28\" /* LineLoop */](geometry, material);\n\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_29\" /* Points */](geometry, material);\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error('GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || 'mesh_' + meshIndex;\n\n\t\t\t\tif (useMorphTargets) {\n\n\t\t\t\t\taddMorphTargets(mesh, meshDef, primitive, dependencies.accessors);\n\t\t\t\t}\n\n\t\t\t\tif (meshDef.extras !== undefined) mesh.userData = meshDef.extras;\n\t\t\t\tif (primitive.extras !== undefined) mesh.geometry.userData = primitive.extras;\n\n\t\t\t\tif (material.isGLTFSpecularGlossinessMaterial === true) {\n\n\t\t\t\t\tmesh.onBeforeRender = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms;\n\t\t\t\t}\n\n\t\t\t\tif (primitives.length > 1) {\n\n\t\t\t\t\tmesh.name += '_' + i;\n\n\t\t\t\t\tgroup.add(mesh);\n\t\t\t\t} else {\n\n\t\t\t\t\treturn mesh;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn group;\n\t\t});\n\t});\n};\n\nGLTFParser.prototype.loadCamera = function (cameraIndex) {\n\n\tvar camera;\n\tvar cameraDef = this.json.cameras[cameraIndex];\n\tvar params = cameraDef[cameraDef.type];\n\n\tif (!params) {\n\n\t\tconsole.warn('GLTFLoader: Missing camera parameters.');\n\t\treturn;\n\t}\n\n\tif (cameraDef.type === 'perspective') {\n\n\t\tvar aspectRatio = params.aspectRatio || 1;\n\t\tvar xfov = params.yfov * aspectRatio;\n\n\t\tcamera = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_30\" /* PerspectiveCamera */](__WEBPACK_IMPORTED_MODULE_2_three__[\"_31\" /* Math */].radToDeg(xfov), aspectRatio, params.znear || 1, params.zfar || 2e6);\n\t} else if (cameraDef.type === 'orthographic') {\n\n\t\tcamera = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_32\" /* OrthographicCamera */](params.xmag / -2, params.xmag / 2, params.ymag / 2, params.ymag / -2, params.znear, params.zfar);\n\t}\n\n\tif (cameraDef.name !== undefined) camera.name = cameraDef.name;\n\tif (cameraDef.extras) camera.userData = cameraDef.extras;\n\n\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve(camera);\n};\n\nGLTFParser.prototype.loadSkin = function (skinIndex) {\n\n\tvar skinDef = this.json.skins[skinIndex];\n\n\tvar skinEntry = { joints: skinDef.joints };\n\n\tif (skinDef.inverseBindMatrices === undefined) {\n\n\t\treturn __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve(skinEntry);\n\t}\n\n\treturn this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n\n\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\treturn skinEntry;\n\t});\n};\n\nGLTFParser.prototype.loadAnimation = function (animationIndex) {\n\n\tvar json = this.json;\n\n\tvar animationDef = this.json.animations[animationIndex];\n\n\treturn this.getMultiDependencies(['accessor', 'node']).then(function (dependencies) {\n\n\t\tvar tracks = [];\n\n\t\tfor (var i = 0, il = animationDef.channels.length; i < il; i++) {\n\n\t\t\tvar channel = animationDef.channels[i];\n\t\t\tvar sampler = animationDef.samplers[channel.sampler];\n\n\t\t\tif (sampler) {\n\n\t\t\t\tvar target = channel.target;\n\t\t\t\tvar name = target.node !== undefined ? target.node : target.id;\n\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n\n\t\t\t\tvar inputAccessor = dependencies.accessors[input];\n\t\t\t\tvar outputAccessor = dependencies.accessors[output];\n\n\t\t\t\tvar node = dependencies.nodes[name];\n\n\t\t\t\tif (node) {\n\n\t\t\t\t\tnode.updateMatrix();\n\t\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\t\tswitch (PATH_PROPERTIES[target.path]) {\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = __WEBPACK_IMPORTED_MODULE_2_three__[\"_33\" /* NumberKeyframeTrack */];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = __WEBPACK_IMPORTED_MODULE_2_three__[\"_34\" /* QuaternionKeyframeTrack */];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = __WEBPACK_IMPORTED_MODULE_2_three__[\"_35\" /* VectorKeyframeTrack */];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\t\tif (sampler.interpolation === 'CUBICSPLINE') {\n\n\t\t\t\t\t\tvar itemSize = outputAccessor.itemSize;\n\t\t\t\t\t\tvar TypedArray = outputAccessor.array.constructor;\n\t\t\t\t\t\tvar outputAccessorValues = new TypedArray(outputAccessor.count * itemSize / 3);\n\n\t\t\t\t\t\tfor (var j = 0, jl = outputAccessor.count; j < jl; j += 3) {\n\n\t\t\t\t\t\t\toutputAccessorValues[j * itemSize / 3] = outputAccessor.getX(j + 1);\n\t\t\t\t\t\t\tif (itemSize > 1) outputAccessorValues[j * itemSize / 3 + 1] = outputAccessor.getY(j + 1);\n\t\t\t\t\t\t\tif (itemSize > 2) outputAccessorValues[j * itemSize / 3 + 2] = outputAccessor.getZ(j + 1);\n\t\t\t\t\t\t\tif (itemSize > 3) outputAccessorValues[j * itemSize / 3 + 3] = outputAccessor.getW(j + 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toutputAccessor = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_15\" /* BufferAttribute */](outputAccessorValues, itemSize / 3, outputAccessor.normalized);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : __WEBPACK_IMPORTED_MODULE_2_three__[\"_9\" /* InterpolateLinear */];\n\n\t\t\t\t\tvar targetNames = [];\n\n\t\t\t\t\tif (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n\n\t\t\t\t\t\tnode.traverse(function (object) {\n\n\t\t\t\t\t\t\tif (object.isMesh === true && object.material.morphTargets === true) {\n\n\t\t\t\t\t\t\t\ttargetNames.push(object.name ? object.name : object.uuid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetNames.push(targetName);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var j = 0, jl = targetNames.length; j < jl; j++) {\n\n\t\t\t\t\t\ttracks.push(new TypedKeyframeTrack(targetNames[j] + '.' + PATH_PROPERTIES[target.path], __WEBPACK_IMPORTED_MODULE_2_three__[\"_36\" /* AnimationUtils */].arraySlice(inputAccessor.array, 0), __WEBPACK_IMPORTED_MODULE_2_three__[\"_36\" /* AnimationUtils */].arraySlice(outputAccessor.array, 0), interpolation));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_2_three__[\"_37\" /* AnimationClip */](name, undefined, tracks);\n\t});\n};\n\nGLTFParser.prototype.loadNode = function (nodeIndex) {\n\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\n\tvar meshReferences = this.json.meshReferences;\n\tvar meshUses = this.json.meshUses;\n\n\tvar nodeDef = this.json.nodes[nodeIndex];\n\n\treturn this.getMultiDependencies(['mesh', 'skin', 'camera']).then(function (dependencies) {\n\n\t\tvar node;\n\n\t\tif (nodeDef.isBone === true) {\n\n\t\t\tnode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_38\" /* Bone */]();\n\t\t} else if (nodeDef.mesh !== undefined) {\n\n\t\t\tvar mesh = dependencies.meshes[nodeDef.mesh];\n\n\t\t\tnode = mesh.clone();\n\n\t\t\tif (mesh.isGroup === true) {\n\n\t\t\t\tfor (var i = 0, il = mesh.children.length; i < il; i++) {\n\n\t\t\t\t\tvar child = mesh.children[i];\n\n\t\t\t\t\tif (child.material && child.material.isGLTFSpecularGlossinessMaterial === true) {\n\n\t\t\t\t\t\tnode.children[i].onBeforeRender = child.onBeforeRender;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true) {\n\n\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (meshReferences[nodeDef.mesh] > 1) {\n\n\t\t\t\tnode.name += '_instance_' + meshUses[nodeDef.mesh]++;\n\t\t\t}\n\t\t} else if (nodeDef.camera !== undefined) {\n\n\t\t\tnode = dependencies.cameras[nodeDef.camera];\n\t\t} else if (nodeDef.extensions && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS] && nodeDef.extensions[EXTENSIONS.KHR_LIGHTS].light !== undefined) {\n\n\t\t\tvar lights = extensions[EXTENSIONS.KHR_LIGHTS].lights;\n\t\t\tnode = lights[nodeDef.extensions[EXTENSIONS.KHR_LIGHTS].light];\n\t\t} else {\n\n\t\t\tnode = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_39\" /* Object3D */]();\n\t\t}\n\n\t\tif (nodeDef.name !== undefined) {\n\n\t\t\tnode.name = __WEBPACK_IMPORTED_MODULE_2_three__[\"_40\" /* PropertyBinding */].sanitizeNodeName(nodeDef.name);\n\t\t}\n\n\t\tif (nodeDef.extras) node.userData = nodeDef.extras;\n\n\t\tif (nodeDef.matrix !== undefined) {\n\n\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_2_three__[\"o\" /* Matrix4 */]();\n\t\t\tmatrix.fromArray(nodeDef.matrix);\n\t\t\tnode.applyMatrix(matrix);\n\t\t} else {\n\n\t\t\tif (nodeDef.translation !== undefined) {\n\n\t\t\t\tnode.position.fromArray(nodeDef.translation);\n\t\t\t}\n\n\t\t\tif (nodeDef.rotation !== undefined) {\n\n\t\t\t\tnode.quaternion.fromArray(nodeDef.rotation);\n\t\t\t}\n\n\t\t\tif (nodeDef.scale !== undefined) {\n\n\t\t\t\tnode.scale.fromArray(nodeDef.scale);\n\t\t\t}\n\t\t}\n\n\t\treturn node;\n\t});\n};\n\nGLTFParser.prototype.loadScene = function () {\n\n\tfunction buildNodeHierachy(nodeId, parentObject, json, allNodes, skins) {\n\n\t\tvar node = allNodes[nodeId];\n\t\tvar nodeDef = json.nodes[nodeId];\n\n\t\tif (nodeDef.skin !== undefined) {\n\n\t\t\tvar meshes = node.isGroup === true ? node.children : [node];\n\n\t\t\tfor (var i = 0, il = meshes.length; i < il; i++) {\n\n\t\t\t\tvar mesh = meshes[i];\n\t\t\t\tvar skinEntry = skins[nodeDef.skin];\n\n\t\t\t\tvar bones = [];\n\t\t\t\tvar boneInverses = [];\n\n\t\t\t\tfor (var j = 0, jl = skinEntry.joints.length; j < jl; j++) {\n\n\t\t\t\t\tvar jointId = skinEntry.joints[j];\n\t\t\t\t\tvar jointNode = allNodes[jointId];\n\n\t\t\t\t\tif (jointNode) {\n\n\t\t\t\t\t\tbones.push(jointNode);\n\n\t\t\t\t\t\tvar mat = new __WEBPACK_IMPORTED_MODULE_2_three__[\"o\" /* Matrix4 */]();\n\n\t\t\t\t\t\tif (skinEntry.inverseBindMatrices !== undefined) {\n\n\t\t\t\t\t\t\tmat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push(mat);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('GLTFLoader: Joint \"%s\" could not be found.', jointId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmesh.bind(new __WEBPACK_IMPORTED_MODULE_2_three__[\"_41\" /* Skeleton */](bones, boneInverses), mesh.matrixWorld);\n\t\t\t}\n\t\t}\n\n\t\tparentObject.add(node);\n\n\t\tif (nodeDef.children) {\n\n\t\t\tvar children = nodeDef.children;\n\n\t\t\tfor (var i = 0, il = children.length; i < il; i++) {\n\n\t\t\t\tvar child = children[i];\n\t\t\t\tbuildNodeHierachy(child, node, json, allNodes, skins);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn function loadScene(sceneIndex) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar sceneDef = this.json.scenes[sceneIndex];\n\n\t\treturn this.getMultiDependencies(['node', 'skin']).then(function (dependencies) {\n\n\t\t\tvar scene = new __WEBPACK_IMPORTED_MODULE_2_three__[\"_42\" /* Scene */]();\n\t\t\tif (sceneDef.name !== undefined) scene.name = sceneDef.name;\n\n\t\t\tif (sceneDef.extras) scene.userData = sceneDef.extras;\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tfor (var i = 0, il = nodeIds.length; i < il; i++) {\n\n\t\t\t\tbuildNodeHierachy(nodeIds[i], scene, json, dependencies.nodes, dependencies.skins);\n\t\t\t}\n\n\t\t\tif (sceneDef.extensions && sceneDef.extensions[EXTENSIONS.KHR_LIGHTS] && sceneDef.extensions[EXTENSIONS.KHR_LIGHTS].light !== undefined) {\n\n\t\t\t\tvar lights = extensions[EXTENSIONS.KHR_LIGHTS].lights;\n\t\t\t\tscene.add(lights[sceneDef.extensions[EXTENSIONS.KHR_LIGHTS].light]);\n\t\t\t}\n\n\t\t\treturn scene;\n\t\t});\n\t};\n}();\n\n\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return LoaderUtils; });\n\n\nvar LoaderUtils = {\n\n\t\tdecodeText: function decodeText(array) {\n\n\t\t\t\tif (typeof TextDecoder !== 'undefined') {\n\n\t\t\t\t\t\treturn new TextDecoder().decode(array);\n\t\t\t\t}\n\n\t\t\t\tvar s = '';\n\n\t\t\t\tfor (var i = 0, il = array.length; i < il; i++) {\n\t\t\t\t\t\ts += String.fromCharCode(array[i]);\n\t\t\t\t}\n\n\t\t\t\treturn s;\n\t\t},\n\n\t\textractUrlBase: function extractUrlBase(url) {\n\n\t\t\t\tvar parts = url.split('/');\n\n\t\t\t\tif (parts.length === 1) return './';\n\n\t\t\t\tparts.pop();\n\n\t\t\t\treturn parts.join('/') + '/';\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MTLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__DDSLoader__ = __webpack_require__(76);\n\n\n\nvar LoaderHandlers = __WEBPACK_IMPORTED_MODULE_0_three__[\"_16\" /* Loader */].Handlers;\nLoaderHandlers.add(/\\.dds$/i, new __WEBPACK_IMPORTED_MODULE_1__DDSLoader__[\"a\" /* DDSLoader */]());\n\nvar MTLLoader = function MTLLoader(manager) {\n\n\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* DefaultLoadingManager */];\n};\n\nMTLLoader.prototype = {\n\n\t\tconstructor: MTLLoader,\n\n\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* FileLoader */](this.manager);\n\t\t\t\tloader.setPath(this.path);\n\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t}, onProgress, onError);\n\t\t},\n\n\t\tsetPath: function setPath(path) {\n\n\t\t\t\tthis.path = path;\n\t\t},\n\n\t\tsetTexturePath: function setTexturePath(path) {\n\n\t\t\t\tthis.texturePath = path;\n\t\t},\n\n\t\tsetBaseUrl: function setBaseUrl(path) {\n\n\t\t\t\tconsole.warn('MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.');\n\n\t\t\t\tthis.setTexturePath(path);\n\t\t},\n\n\t\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\t\t\tthis.crossOrigin = value;\n\t\t},\n\n\t\tsetMaterialOptions: function setMaterialOptions(value) {\n\n\t\t\t\tthis.materialOptions = value;\n\t\t},\n\n\t\tparse: function parse(text) {\n\n\t\t\t\tvar lines = text.split('\\n');\n\t\t\t\tvar info = {};\n\t\t\t\tvar delimiter_pattern = /\\s+/;\n\t\t\t\tvar materialsInfo = {};\n\n\t\t\t\tfor (var i = 0; i < lines.length; i++) {\n\n\t\t\t\t\t\tvar line = lines[i];\n\t\t\t\t\t\tline = line.trim();\n\n\t\t\t\t\t\tif (line.length === 0 || line.charAt(0) === '#') {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar pos = line.indexOf(' ');\n\n\t\t\t\t\t\tvar key = pos >= 0 ? line.substring(0, pos) : line;\n\t\t\t\t\t\tkey = key.toLowerCase();\n\n\t\t\t\t\t\tvar value = pos >= 0 ? line.substring(pos + 1) : '';\n\t\t\t\t\t\tvalue = value.trim();\n\n\t\t\t\t\t\tif (key === 'newmtl') {\n\n\t\t\t\t\t\t\t\tinfo = { name: value };\n\t\t\t\t\t\t\t\tmaterialsInfo[value] = info;\n\t\t\t\t\t\t} else if (info) {\n\n\t\t\t\t\t\t\t\tif (key === 'ka' || key === 'kd' || key === 'ks') {\n\n\t\t\t\t\t\t\t\t\t\tvar ss = value.split(delimiter_pattern, 3);\n\t\t\t\t\t\t\t\t\t\tinfo[key] = [parseFloat(ss[0]), parseFloat(ss[1]), parseFloat(ss[2])];\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tinfo[key] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar materialCreator = new MTLLoader.MaterialCreator(this.texturePath || this.path, this.materialOptions);\n\t\t\t\tmaterialCreator.setCrossOrigin(this.crossOrigin);\n\t\t\t\tmaterialCreator.setManager(this.manager);\n\t\t\t\tmaterialCreator.setMaterials(materialsInfo);\n\t\t\t\treturn materialCreator;\n\t\t}\n\n};\n\nMTLLoader.MaterialCreator = function (baseUrl, options) {\n\n\t\tthis.baseUrl = baseUrl || '';\n\t\tthis.options = options;\n\t\tthis.materialsInfo = {};\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t\tthis.side = this.options && this.options.side ? this.options.side : __WEBPACK_IMPORTED_MODULE_0_three__[\"M\" /* FrontSide */];\n\t\tthis.wrap = this.options && this.options.wrap ? this.options.wrap : __WEBPACK_IMPORTED_MODULE_0_three__[\"B\" /* RepeatWrapping */];\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\t\tconstructor: MTLLoader.MaterialCreator,\n\n\t\tcrossOrigin: 'Anonymous',\n\n\t\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\t\t\tthis.crossOrigin = value;\n\t\t},\n\n\t\tsetManager: function setManager(value) {\n\n\t\t\t\tthis.manager = value;\n\t\t},\n\n\t\tsetMaterials: function setMaterials(materialsInfo) {\n\n\t\t\t\tthis.materialsInfo = this.convert(materialsInfo);\n\t\t\t\tthis.materials = {};\n\t\t\t\tthis.materialsArray = [];\n\t\t\t\tthis.nameLookup = {};\n\t\t},\n\n\t\tconvert: function convert(materialsInfo) {\n\n\t\t\t\tif (!this.options) return materialsInfo;\n\n\t\t\t\tvar converted = {};\n\n\t\t\t\tfor (var mn in materialsInfo) {\n\n\t\t\t\t\t\tvar mat = materialsInfo[mn];\n\n\t\t\t\t\t\tvar covmat = {};\n\n\t\t\t\t\t\tconverted[mn] = covmat;\n\n\t\t\t\t\t\tfor (var prop in mat) {\n\n\t\t\t\t\t\t\t\tvar save = true;\n\t\t\t\t\t\t\t\tvar value = mat[prop];\n\t\t\t\t\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\t\t\t\t\tswitch (lprop) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'kd':\n\t\t\t\t\t\t\t\t\t\tcase 'ka':\n\t\t\t\t\t\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.options && this.options.normalizeRGB) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = [value[0] / 255, value[1] / 255, value[2] / 255];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.options && this.options.ignoreZeroRGBs) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value[0] === 0 && value[1] === 0 && value[2] === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (save) {\n\n\t\t\t\t\t\t\t\t\t\tcovmat[lprop] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn converted;\n\t\t},\n\n\t\tpreload: function preload() {\n\n\t\t\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\t\t\t\tthis.create(mn);\n\t\t\t\t}\n\t\t},\n\n\t\tgetIndex: function getIndex(materialName) {\n\n\t\t\t\treturn this.nameLookup[materialName];\n\t\t},\n\n\t\tgetAsArray: function getAsArray() {\n\n\t\t\t\tvar index = 0;\n\n\t\t\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\t\t\t\tthis.materialsArray[index] = this.create(mn);\n\t\t\t\t\t\tthis.nameLookup[mn] = index;\n\t\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\treturn this.materialsArray;\n\t\t},\n\n\t\tcreate: function create(materialName) {\n\n\t\t\t\tif (this.materials[materialName] === undefined) {\n\n\t\t\t\t\t\tthis.createMaterial_(materialName);\n\t\t\t\t}\n\n\t\t\t\treturn this.materials[materialName];\n\t\t},\n\n\t\tcreateMaterial_: function createMaterial_(materialName) {\n\n\t\t\t\tvar scope = this;\n\t\t\t\tvar mat = this.materialsInfo[materialName];\n\t\t\t\tvar params = {\n\n\t\t\t\t\t\tname: materialName,\n\t\t\t\t\t\tside: this.side\n\n\t\t\t\t};\n\n\t\t\t\tfunction resolveURL(baseUrl, url) {\n\n\t\t\t\t\t\tif (typeof url !== 'string' || url === '') return '';\n\n\t\t\t\t\t\tif (/^https?:\\/\\//i.test(url)) return url;\n\n\t\t\t\t\t\treturn baseUrl + url;\n\t\t\t\t}\n\n\t\t\t\tfunction setMapForType(mapType, value) {\n\n\t\t\t\t\t\tif (params[mapType]) return;\n\n\t\t\t\t\t\tvar texParams = scope.getTextureParams(value, params);\n\t\t\t\t\t\tvar map = scope.loadTexture(resolveURL(scope.baseUrl, texParams.url));\n\n\t\t\t\t\t\tmap.repeat.copy(texParams.scale);\n\t\t\t\t\t\tmap.offset.copy(texParams.offset);\n\n\t\t\t\t\t\tmap.wrapS = scope.wrap;\n\t\t\t\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\t\t\t\tparams[mapType] = map;\n\t\t\t\t}\n\n\t\t\t\tfor (var prop in mat) {\n\n\t\t\t\t\t\tvar value = mat[prop];\n\t\t\t\t\t\tvar n;\n\n\t\t\t\t\t\tif (value === '') continue;\n\n\t\t\t\t\t\tswitch (prop.toLowerCase()) {\n\n\t\t\t\t\t\t\t\tcase 'kd':\n\n\t\t\t\t\t\t\t\t\t\tparams.color = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Color */]().fromArray(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ks':\n\t\t\t\t\t\t\t\t\t\tparams.specular = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Color */]().fromArray(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"map\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"specularMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'norm':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"normalMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_bump':\n\t\t\t\t\t\t\t\tcase 'bump':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"bumpMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ns':\n\n\t\t\t\t\t\t\t\t\t\tparams.shininess = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tif (n < 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\t\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'tr':\n\t\t\t\t\t\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tif (n > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\t\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.materials[materialName] = new __WEBPACK_IMPORTED_MODULE_0_three__[\"h\" /* MeshPhongMaterial */](params);\n\t\t\t\treturn this.materials[materialName];\n\t\t},\n\n\t\tgetTextureParams: function getTextureParams(value, matParams) {\n\n\t\t\t\tvar texParams = {\n\n\t\t\t\t\t\tscale: new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */](1, 1),\n\t\t\t\t\t\toffset: new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* Vector2 */](0, 0)\n\n\t\t\t\t};\n\n\t\t\t\tvar items = value.split(/\\s+/);\n\t\t\t\tvar pos;\n\n\t\t\t\tpos = items.indexOf('-bm');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\tmatParams.bumpScale = parseFloat(items[pos + 1]);\n\t\t\t\t\t\titems.splice(pos, 2);\n\t\t\t\t}\n\n\t\t\t\tpos = items.indexOf('-s');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\ttexParams.scale.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\t\t\t\titems.splice(pos, 4);\n\t\t\t\t}\n\n\t\t\t\tpos = items.indexOf('-o');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\ttexParams.offset.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\t\t\t\titems.splice(pos, 4);\n\t\t\t\t}\n\n\t\t\t\ttexParams.url = items.join(' ').trim();\n\t\t\t\treturn texParams;\n\t\t},\n\n\t\tloadTexture: function loadTexture(url, mapping, onLoad, onProgress, onError) {\n\n\t\t\t\tvar texture;\n\t\t\t\tvar loader = LoaderHandlers.get(url);\n\t\t\t\tvar manager = this.manager !== undefined ? this.manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* DefaultLoadingManager */];\n\n\t\t\t\tif (loader === null) {\n\n\t\t\t\t\t\tloader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_12\" /* TextureLoader */](manager);\n\t\t\t\t}\n\n\t\t\t\tif (loader.setCrossOrigin) loader.setCrossOrigin(this.crossOrigin);\n\t\t\t\ttexture = loader.load(url, onLoad, onProgress, onError);\n\n\t\t\t\tif (mapping !== undefined) texture.mapping = mapping;\n\n\t\t\t\treturn texture;\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OBJLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar object_pattern = /^[og]\\s*(.+)?/;\n\nvar material_library_pattern = /^mtllib /;\n\nvar material_use_pattern = /^usemtl /;\n\nfunction ParserState() {\n\n\t\t\tvar state = {\n\t\t\t\t\t\tobjects: [],\n\t\t\t\t\t\tobject: {},\n\n\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\tcolors: [],\n\t\t\t\t\t\tuvs: [],\n\n\t\t\t\t\t\tmaterialLibraries: [],\n\n\t\t\t\t\t\tstartObject: function startObject(name, fromDeclaration) {\n\t\t\t\t\t\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\t\t\t\t\t\t\t\tthis.object.fromDeclaration = fromDeclaration !== false;\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.object = {\n\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\tfromDeclaration: fromDeclaration !== false,\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolors: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvs: []\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tmaterials: [],\n\t\t\t\t\t\t\t\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\t\t\t\t\t\t\t\tstartMaterial: function startMaterial(name, libraries) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar previous = this._finalize(false);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: previous !== undefined ? previous.smooth : this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: previous !== undefined ? previous.groupEnd : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclone: function clone(index) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: typeof index === 'number' ? index : this.index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push(material);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn material;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentMaterial: function currentMaterial() {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\t_finalize: function _finalize(end) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn lastMultiMaterial;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar declared = previousMaterial.clone(0);\n\t\t\t\t\t\t\t\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\t\t\t\t\t\t\t\tthis.object.materials.push(declared);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.objects.push(this.object);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tfinalize: function finalize() {\n\n\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tparseVertexIndex: function parseVertexIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tparseNormalIndex: function parseNormalIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tparseUVIndex: function parseUVIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddVertex: function addVertex(a, b, c) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1], src[a + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[b + 0], src[b + 1], src[b + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[c + 0], src[c + 1], src[c + 2]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddVertexLine: function addVertexLine(a) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1], src[a + 2]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddNormal: function addNormal(a, b, c) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.normals;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1], src[a + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[b + 0], src[b + 1], src[b + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[c + 0], src[c + 1], src[c + 2]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddColor: function addColor(a, b, c) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.colors;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.colors;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1], src[a + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[b + 0], src[b + 1], src[b + 2]);\n\t\t\t\t\t\t\t\t\tdst.push(src[c + 0], src[c + 1], src[c + 2]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddUV: function addUV(a, b, c) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1]);\n\t\t\t\t\t\t\t\t\tdst.push(src[b + 0], src[b + 1]);\n\t\t\t\t\t\t\t\t\tdst.push(src[c + 0], src[c + 1]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddUVLine: function addUVLine(a) {\n\n\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\tdst.push(src[a + 0], src[a + 1]);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddFace: function addFace(a, b, c, ua, ub, uc, na, nb, nc) {\n\n\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\t\t\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\n\t\t\t\t\t\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\n\t\t\t\t\t\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\n\n\t\t\t\t\t\t\t\t\tthis.addVertex(ia, ib, ic);\n\n\t\t\t\t\t\t\t\t\tif (ua !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (na !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n\t\t\t\t\t\t\t\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (this.colors.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.addColor(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\taddLineGeometry: function addLineGeometry(vertices, uvs) {\n\n\t\t\t\t\t\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tstate.startObject('', false);\n\n\t\t\treturn state;\n}\n\nfunction OBJLoader(manager) {\n\n\t\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* DefaultLoadingManager */];\n\n\t\t\tthis.materials = null;\n}\n\nOBJLoader.prototype = {\n\n\t\t\tconstructor: OBJLoader,\n\n\t\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* FileLoader */](scope.manager);\n\t\t\t\t\t\tloader.setPath(this.path);\n\t\t\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t\t\t}, onProgress, onError);\n\t\t\t},\n\n\t\t\tsetPath: function setPath(value) {\n\n\t\t\t\t\t\tthis.path = value;\n\t\t\t},\n\n\t\t\tsetMaterials: function setMaterials(materials) {\n\n\t\t\t\t\t\tthis.materials = materials;\n\n\t\t\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tparse: function parse(text) {\n\n\t\t\t\t\t\tconsole.time('OBJLoader');\n\n\t\t\t\t\t\tvar state = new ParserState();\n\n\t\t\t\t\t\tif (text.indexOf('\\r\\n') !== -1) {\n\t\t\t\t\t\t\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (text.indexOf('\\\\\\n') !== -1) {\n\t\t\t\t\t\t\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar lines = text.split('\\n');\n\t\t\t\t\t\tvar line = '',\n\t\t\t\t\t\t    lineFirstChar = '';\n\t\t\t\t\t\tvar lineLength = 0;\n\t\t\t\t\t\tvar result = [];\n\n\t\t\t\t\t\tvar trimLeft = typeof ''.trimLeft === 'function';\n\n\t\t\t\t\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\tline = lines[i];\n\n\t\t\t\t\t\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\t\t\t\t\t\tlineLength = line.length;\n\n\t\t\t\t\t\t\t\t\tif (lineLength === 0) continue;\n\n\t\t\t\t\t\t\t\t\tlineFirstChar = line.charAt(0);\n\n\t\t\t\t\t\t\t\t\tif (lineFirstChar === '#') continue;\n\n\t\t\t\t\t\t\t\t\tif (lineFirstChar === 'v') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar data = line.split(/\\s+/);\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (data[0]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.vertices.push(parseFloat(data[1]), parseFloat(data[2]), parseFloat(data[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.length === 8) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.colors.push(parseFloat(data[4]), parseFloat(data[5]), parseFloat(data[6]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.normals.push(parseFloat(data[1]), parseFloat(data[2]), parseFloat(data[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.uvs.push(parseFloat(data[1]), parseFloat(data[2]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === 'f') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar lineData = line.substr(1).trim();\n\t\t\t\t\t\t\t\t\t\t\t\tvar vertexData = lineData.split(/\\s+/);\n\t\t\t\t\t\t\t\t\t\t\t\tvar faceVertices = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = vertexData.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vertex = vertexData[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (vertex.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vertexParts = vertex.split('/');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfaceVertices.push(vertexParts);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar v1 = faceVertices[0];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 1, jl = faceVertices.length - 1; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar v2 = faceVertices[j];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar v3 = faceVertices[j + 1];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(v1[0], v2[0], v3[0], v1[1], v2[1], v3[1], v1[2], v2[2], v3[2]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === 'l') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\n\t\t\t\t\t\t\t\t\t\t\t\tvar lineVertices = [],\n\t\t\t\t\t\t\t\t\t\t\t\t    lineUVs = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (line.indexOf(\"/\") === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineVertices = lineParts;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\n\t\t\t\t\t\t\t\t\t} else if ((result = object_pattern.exec(line)) !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n\t\t\t\t\t\t\t\t\t\t\t\tstate.startObject(name);\n\t\t\t\t\t\t\t\t\t} else if (material_use_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\t\t\t\t\t\t\t\t\t} else if (material_library_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\n\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === 's') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tresult = line.split(' ');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (result.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = result[1].trim().toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.smooth = value !== '0' && value !== 'off';\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.smooth = true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\tif (material) material.smooth = state.object.smooth;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tif (line === '\\0') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error('OBJLoader: Unexpected line: \"' + line + '\"');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.finalize();\n\n\t\t\t\t\t\tvar container = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_20\" /* Group */]();\n\t\t\t\t\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\n\n\t\t\t\t\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\tvar object = state.objects[i];\n\t\t\t\t\t\t\t\t\tvar geometry = object.geometry;\n\t\t\t\t\t\t\t\t\tvar materials = object.materials;\n\t\t\t\t\t\t\t\t\tvar isLine = geometry.type === 'Line';\n\n\t\t\t\t\t\t\t\t\tif (geometry.vertices.length === 0) continue;\n\n\t\t\t\t\t\t\t\t\tvar buffergeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_19\" /* BufferGeometry */]();\n\n\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](geometry.vertices, 3));\n\n\t\t\t\t\t\t\t\t\tif (geometry.normals.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](geometry.normals, 3));\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.computeVertexNormals();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (geometry.colors.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](geometry.colors, 3));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (geometry.uvs.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](geometry.uvs, 2));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\tvar material = undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isLine && material && !(material instanceof __WEBPACK_IMPORTED_MODULE_0_three__[\"_57\" /* LineBasicMaterial */])) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar materialLine = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_57\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterialLine.copy(material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = materialLine;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (!material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"h\" /* MeshPhongMaterial */]() : new __WEBPACK_IMPORTED_MODULE_0_three__[\"_57\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcreatedMaterials.push(material);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar mesh;\n\n\t\t\t\t\t\t\t\t\tif (createdMaterials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"_23\" /* Mesh */](buffergeometry, createdMaterials) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"_26\" /* LineSegments */](buffergeometry, createdMaterials);\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"_23\" /* Mesh */](buffergeometry, createdMaterials[0]) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"_26\" /* LineSegments */](buffergeometry, createdMaterials[0]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tmesh.name = object.name;\n\n\t\t\t\t\t\t\t\t\tcontainer.add(mesh);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.timeEnd('OBJLoader');\n\n\t\t\t\t\t\treturn container;\n\t\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PLYLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar PLYLoader = function PLYLoader(manager) {\n\n\t\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* DefaultLoadingManager */];\n\n\t\t\tthis.propertyNameMapping = {};\n};\n\nPLYLoader.prototype = {\n\n\t\t\tconstructor: PLYLoader,\n\n\t\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* FileLoader */](this.manager);\n\t\t\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t\t\t}, onProgress, onError);\n\t\t\t},\n\n\t\t\tsetPropertyNameMapping: function setPropertyNameMapping(mapping) {\n\n\t\t\t\t\t\tthis.propertyNameMapping = mapping;\n\t\t\t},\n\n\t\t\tparse: function parse(data) {\n\n\t\t\t\t\t\tfunction bin2str(buf) {\n\n\t\t\t\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf);\n\n\t\t\t\t\t\t\t\t\tif (window.TextDecoder !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn new TextDecoder().decode(array_buffer);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar str = '';\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0, il = buf.byteLength; i < il; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tstr += String.fromCharCode(array_buffer[i]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn str;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseHeader(data) {\n\n\t\t\t\t\t\t\t\t\tvar patternHeader = /ply([\\s\\S]*)end_header\\s/;\n\t\t\t\t\t\t\t\t\tvar headerText = '';\n\t\t\t\t\t\t\t\t\tvar headerLength = 0;\n\t\t\t\t\t\t\t\t\tvar result = patternHeader.exec(data);\n\n\t\t\t\t\t\t\t\t\tif (result !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\theaderText = result[1];\n\t\t\t\t\t\t\t\t\t\t\t\theaderLength = result[0].length;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar header = {\n\t\t\t\t\t\t\t\t\t\t\t\tcomments: [],\n\t\t\t\t\t\t\t\t\t\t\t\telements: [],\n\t\t\t\t\t\t\t\t\t\t\t\theaderLength: headerLength\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar lines = headerText.split('\\n');\n\t\t\t\t\t\t\t\t\tvar currentElement;\n\t\t\t\t\t\t\t\t\tvar lineType, lineValues;\n\n\t\t\t\t\t\t\t\t\tfunction make_ply_element_property(propertValues, propertyNameMapping) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar property = { type: propertValues[0] };\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (property.type === 'list') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.name = propertValues[3];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.countType = propertValues[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.itemType = propertValues[2];\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.name = propertValues[1];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (property.name in propertyNameMapping) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.name = propertyNameMapping[property.name];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn property;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < lines.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar line = lines[i];\n\t\t\t\t\t\t\t\t\t\t\t\tline = line.trim();\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (line === '') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tlineValues = line.split(/\\s+/);\n\t\t\t\t\t\t\t\t\t\t\t\tlineType = lineValues.shift();\n\t\t\t\t\t\t\t\t\t\t\t\tline = lineValues.join(' ');\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (lineType) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'format':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theader.format = lineValues[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theader.version = lineValues[1];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'comment':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theader.comments.push(line);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'element':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (currentElement !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theader.elements.push(currentElement);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement = {};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement.name = lineValues[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement.count = parseInt(lineValues[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement.properties = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'property':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement.properties.push(make_ply_element_property(lineValues, scope.propertyNameMapping));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('unhandled', lineType, lineValues);\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (currentElement !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\theader.elements.push(currentElement);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn header;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseASCIINumber(n, type) {\n\n\t\t\t\t\t\t\t\t\tswitch (type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'char':case 'uchar':case 'short':case 'ushort':case 'int':case 'uint':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'int8':case 'uint8':case 'int16':case 'uint16':case 'int32':case 'uint32':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn parseInt(n);\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'float':case 'double':case 'float32':case 'float64':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn parseFloat(n);\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseASCIIElement(properties, line) {\n\n\t\t\t\t\t\t\t\t\tvar values = line.split(/\\s+/);\n\n\t\t\t\t\t\t\t\t\tvar element = {};\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < properties.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (properties[i].type === 'list') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar list = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar n = parseASCIINumber(values.shift(), properties[i].countType);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < n; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlist.push(parseASCIINumber(values.shift(), properties[i].itemType));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement[properties[i].name] = list;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement[properties[i].name] = parseASCIINumber(values.shift(), properties[i].type);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn element;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseASCII(data, header) {\n\n\t\t\t\t\t\t\t\t\tvar buffer = {\n\t\t\t\t\t\t\t\t\t\t\t\tindices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\tuvs: [],\n\t\t\t\t\t\t\t\t\t\t\t\tcolors: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar result;\n\n\t\t\t\t\t\t\t\t\tvar patternBody = /end_header\\s([\\s\\S]*)$/;\n\t\t\t\t\t\t\t\t\tvar body = '';\n\t\t\t\t\t\t\t\t\tif ((result = patternBody.exec(data)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbody = result[1];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar lines = body.split('\\n');\n\t\t\t\t\t\t\t\t\tvar currentElement = 0;\n\t\t\t\t\t\t\t\t\tvar currentElementCount = 0;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < lines.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar line = lines[i];\n\t\t\t\t\t\t\t\t\t\t\t\tline = line.trim();\n\t\t\t\t\t\t\t\t\t\t\t\tif (line === '') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (currentElementCount >= header.elements[currentElement].count) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElement++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentElementCount = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar element = parseASCIIElement(header.elements[currentElement].properties, line);\n\n\t\t\t\t\t\t\t\t\t\t\t\thandleElement(buffer, header.elements[currentElement].name, element);\n\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentElementCount++;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn postProcess(buffer);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction postProcess(buffer) {\n\n\t\t\t\t\t\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_19\" /* BufferGeometry */]();\n\n\t\t\t\t\t\t\t\t\tif (buffer.indices.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.setIndex(buffer.indices);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](buffer.vertices, 3));\n\n\t\t\t\t\t\t\t\t\tif (buffer.normals.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](buffer.normals, 3));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (buffer.uvs.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](buffer.uvs, 2));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (buffer.colors.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_51\" /* Float32BufferAttribute */](buffer.colors, 3));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\t\t\t\t\t\t\treturn geometry;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction handleElement(buffer, elementName, element) {\n\n\t\t\t\t\t\t\t\t\tif (elementName === 'vertex') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffer.vertices.push(element.x, element.y, element.z);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ('nx' in element && 'ny' in element && 'nz' in element) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.normals.push(element.nx, element.ny, element.nz);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ('s' in element && 't' in element) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.uvs.push(element.s, element.t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ('red' in element && 'green' in element && 'blue' in element) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.colors.push(element.red / 255.0, element.green / 255.0, element.blue / 255.0);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if (elementName === 'face') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar vertex_indices = element.vertex_indices || element.vertex_index;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (vertex_indices.length === 3) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.indices.push(vertex_indices[0], vertex_indices[1], vertex_indices[2]);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (vertex_indices.length === 4) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.indices.push(vertex_indices[0], vertex_indices[1], vertex_indices[3]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffer.indices.push(vertex_indices[1], vertex_indices[2], vertex_indices[3]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction binaryRead(dataview, at, type, little_endian) {\n\n\t\t\t\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'int8':case 'char':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getInt8(at), 1];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'uint8':case 'uchar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getUint8(at), 1];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'int16':case 'short':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getInt16(at, little_endian), 2];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'uint16':case 'ushort':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getUint16(at, little_endian), 2];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'int32':case 'int':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getInt32(at, little_endian), 4];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'uint32':case 'uint':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getUint32(at, little_endian), 4];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'float32':case 'float':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getFloat32(at, little_endian), 4];\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'float64':case 'double':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [dataview.getFloat64(at, little_endian), 8];\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction binaryReadElement(dataview, at, properties, little_endian) {\n\n\t\t\t\t\t\t\t\t\tvar element = {};\n\t\t\t\t\t\t\t\t\tvar result,\n\t\t\t\t\t\t\t\t\t    read = 0;\n\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < properties.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (properties[i].type === 'list') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar list = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult = binaryRead(dataview, at + read, properties[i].countType, little_endian);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar n = result[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tread += result[1];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < n; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult = binaryRead(dataview, at + read, properties[i].itemType, little_endian);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlist.push(result[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tread += result[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement[properties[i].name] = list;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult = binaryRead(dataview, at + read, properties[i].type, little_endian);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telement[properties[i].name] = result[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tread += result[1];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn [element, read];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction parseBinary(data, header) {\n\n\t\t\t\t\t\t\t\t\tvar buffer = {\n\t\t\t\t\t\t\t\t\t\t\t\tindices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\tuvs: [],\n\t\t\t\t\t\t\t\t\t\t\t\tcolors: []\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tvar little_endian = header.format === 'binary_little_endian';\n\t\t\t\t\t\t\t\t\tvar body = new DataView(data, header.headerLength);\n\t\t\t\t\t\t\t\t\tvar result,\n\t\t\t\t\t\t\t\t\t    loc = 0;\n\n\t\t\t\t\t\t\t\t\tfor (var currentElement = 0; currentElement < header.elements.length; currentElement++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var currentElementCount = 0; currentElementCount < header.elements[currentElement].count; currentElementCount++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult = binaryReadElement(body, loc, header.elements[currentElement].properties, little_endian);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloc += result[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar element = result[0];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleElement(buffer, header.elements[currentElement].name, element);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn postProcess(buffer);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar geometry;\n\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\tif (data instanceof ArrayBuffer) {\n\n\t\t\t\t\t\t\t\t\tvar text = bin2str(data);\n\t\t\t\t\t\t\t\t\tvar header = parseHeader(text);\n\n\t\t\t\t\t\t\t\t\tgeometry = header.format === 'ascii' ? parseASCII(text, header) : parseBinary(data, header);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tgeometry = parseASCII(data, parseHeader(data));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn geometry;\n\t\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 82:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return STLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar STLLoader = function STLLoader(manager) {\n\n\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* DefaultLoadingManager */];\n};\n\nSTLLoader.prototype = {\n\n\t\tconstructor: STLLoader,\n\n\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* FileLoader */](scope.manager);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t}, onProgress, onError);\n\t\t},\n\n\t\tparse: function parse(data) {\n\n\t\t\t\tvar isBinary = function isBinary() {\n\n\t\t\t\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\t\t\t\treader = new DataView(binData);\n\t\t\t\t\t\tface_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t\t\t\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\t\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\t\t\t\tif (expect === reader.byteLength) {\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\t\t\t\tfor (var i = 0; i < 5; i++) {\n\n\t\t\t\t\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\tvar binData = this.ensureBinary(data);\n\n\t\t\t\treturn isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t\t},\n\n\t\tparseBinary: function parseBinary(data) {\n\n\t\t\t\tvar reader = new DataView(data);\n\t\t\t\tvar faces = reader.getUint32(80, true);\n\n\t\t\t\tvar r,\n\t\t\t\t    g,\n\t\t\t\t    b,\n\t\t\t\t    hasColors = false,\n\t\t\t\t    colors;\n\t\t\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t\t\tfor (var index = 0; index < 80 - 10; index++) {\n\n\t\t\t\t\t\tif (reader.getUint32(index, false) == 0x434F4C4F && reader.getUint8(index + 4) == 0x52 && reader.getUint8(index + 5) == 0x3D) {\n\n\t\t\t\t\t\t\t\thasColors = true;\n\t\t\t\t\t\t\t\tcolors = [];\n\n\t\t\t\t\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\t\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\t\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\t\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar dataOffset = 84;\n\t\t\t\tvar faceLength = 12 * 4 + 2;\n\n\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_19\" /* BufferGeometry */]();\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tfor (var face = 0; face < faces; face++) {\n\n\t\t\t\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\t\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\t\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\t\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\t\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\n\t\t\t\t\t\t\t\t\t\tr = (packedColor & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tg = (packedColor >> 5 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tb = (packedColor >> 10 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tr = defaultR;\n\t\t\t\t\t\t\t\t\t\tg = defaultG;\n\t\t\t\t\t\t\t\t\t\tb = defaultB;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 1; i <= 3; i++) {\n\n\t\t\t\t\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\t\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\tgeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Float32Array(colors), 3));\n\t\t\t\t\t\tgeometry.hasColors = true;\n\t\t\t\t\t\tgeometry.alpha = alpha;\n\t\t\t\t}\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tparseASCII: function parseASCII(data) {\n\n\t\t\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\n\t\t\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"_19\" /* BufferGeometry */]();\n\t\t\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tvar normal = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* Vector3 */]();\n\n\t\t\t\twhile ((result = patternFace.exec(data)) !== null) {\n\n\t\t\t\t\t\ttext = result[0];\n\t\t\t\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\t\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\t\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tvertices.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t\t\t\t\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"_15\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tensureString: function ensureString(buf) {\n\n\t\t\t\tif (typeof buf !== \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\t\t\t\tvar strArray = [];\n\t\t\t\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\n\t\t\t\t\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn strArray.join('');\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t},\n\n\t\tensureBinary: function ensureBinary(buf) {\n\n\t\t\t\tif (typeof buf === \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\t\t\t\tfor (var i = 0; i < buf.length; i++) {\n\n\t\t\t\t\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(329),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n},[52]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.43cc391410c9c5e4d4bf.js","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 120\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 121\n// module chunks = 1","exports = module.exports = require(\"../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 122\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-obj.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-obj.vue\n// module id = 13\n// module chunks = 1","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\r\n\r\nlet box = new Box3();\r\n\r\nfunction getSize( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getSize();\r\n}\r\n\r\nfunction getCenter( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getCenter();\r\n}\r\n\r\nfunction lightsDiff( lights, oldLights ) {\r\n\r\n}\r\n\r\nfunction toIndexed ( bufferGeometry ) {\r\n\r\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\r\n\r\n    var raw_uvs;\r\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\r\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\r\n\r\n    var raw_normals;\r\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\r\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\r\n\r\n    var indices = [];\r\n    var vertices = [];\r\n    var normals = [];\r\n    var uvs = [];\r\n\r\n    var face, face_normalss, face_uvs, tmp_indices;\r\n\r\n    var v0 = new Vector3();\r\n    var v1 = new Vector3();\r\n    var v2 = new Vector3();\r\n\r\n    var n0 = new Vector3();\r\n    var n1 = new Vector3();\r\n    var n2 = new Vector3();\r\n\r\n    var uv0 = new Vector2();\r\n    var uv1 = new Vector2();\r\n    var uv2 = new Vector2();\r\n\r\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\r\n\r\n        v0.x = raw_positions[ i ];\r\n        v0.y = raw_positions[ i + 1 ];\r\n        v0.z = raw_positions[ i + 2 ];\r\n\r\n        v1.x = raw_positions[ i + 3 ];\r\n        v1.y = raw_positions[ i + 4 ];\r\n        v1.z = raw_positions[ i + 5 ];\r\n\r\n        v2.x = raw_positions[ i + 6 ];\r\n        v2.y = raw_positions[ i + 7 ];\r\n        v2.z = raw_positions[ i + 8 ];\r\n\r\n        face = [ v0, v1, v2 ];\r\n\r\n        if ( hasNormal ) {\r\n\r\n            n0.x = raw_normals[ i ];\r\n            n0.y = raw_normals[ i + 1 ];\r\n            n0.z = raw_normals[ i + 2 ];\r\n\r\n            n1.x = raw_normals[ i + 3 ];\r\n            n1.y = raw_normals[ i + 4 ];\r\n            n1.z = raw_normals[ i + 5 ];\r\n\r\n            n2.x = raw_normals[ i + 6 ];\r\n            n2.y = raw_normals[ i + 7 ];\r\n            n2.z = raw_normals[ i + 8 ];\r\n\r\n            face_normalss = [ n0, n1, n2 ];\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            uv0.x = raw_uvs[ i ];\r\n            uv0.y = raw_uvs[ i + 1 ];\r\n\r\n            uv1.x = raw_uvs[ i + 2 ];\r\n            uv1.y = raw_uvs[ i + 3 ];\r\n\r\n            uv2.x = raw_uvs[ i + 4 ];\r\n            uv2.y = raw_uvs[ i + 5 ];\r\n\r\n            face_uvs = [ uv0, uv1, uv2 ];\r\n\r\n        }\r\n\r\n        tmp_indices = [];\r\n\r\n        face.forEach( function ( v, i ) {\r\n\r\n            var id = exists( v, vertices );\r\n            if ( id == -1 ) {\r\n\r\n                id = vertices.length;\r\n                vertices.push( v.clone() );\r\n\r\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\r\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\r\n\r\n            }\r\n            tmp_indices.push( id );\r\n\r\n        } );\r\n\r\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\r\n\r\n    }\r\n\r\n    var positionBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\r\n\r\n    var i2 = 0;\r\n    var i3 = 0;\r\n    for ( i = 0; i < vertices.length; i++ ) {\r\n\r\n        i3 = i * 3;\r\n\r\n        positionBuffer[ i3 ] = vertices[ i ].x;\r\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\r\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\r\n\r\n        if ( hasNormal ) {\r\n\r\n            normalBuffer[ i3 ] = normals[ i ].x;\r\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\r\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            i2 = i * 2;\r\n            uvBuffer[ i2 ] = uvs[ i ].x;\r\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\r\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\r\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\r\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\r\n    return bufferGeometry;\r\n\r\n    function exists( v, vertices ) {\r\n        for ( var i = 0; i < vertices.length; i++ ) {\r\n            if ( v.equals( vertices[ i ] ) ) return i;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport { getSize, getCenter, toIndexed }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-background.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-background.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-background.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-background.vue\n// module id = 302\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-basic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-333e0508\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-basic.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-basic.vue\n// module id = 303\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-collada.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-678f988c\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-collada.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-collada.vue\n// module id = 304\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-event.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb36e518\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-event.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-event.vue\n// module id = 305\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-gltf.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-692b4fad\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-gltf.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-gltf.vue\n// module id = 306\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-json.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b02f5fe\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-json.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-json.vue\n// module id = 307\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj-mtl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f64b4ae\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj-mtl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj-mtl.vue\n// module id = 308\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d85b9d1\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj.vue\n// module id = 309\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-ply.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-744fcbd7\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-ply.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-ply.vue\n// module id = 310\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-rotate.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-756fcd71\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-rotate.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-rotate.vue\n// module id = 311\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-stl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ff21105\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-stl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-stl.vue\n// module id = 312\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-gltf.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-gltf.vue\n// module id = 313\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-ply.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-ply.vue\n// module id = 314\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-stl.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-stl.vue\n// module id = 315\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-three.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-three.vue\n// module id = 316\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-0b02f5fe\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-json.vue\n// module id = 317\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-1ff21105\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-stl.vue\n// module id = 318\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-2d85b9d1\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj.vue\n// module id = 319\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-333e0508\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-basic.vue\n// module id = 320\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4d9d1678\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-background.vue\n// module id = 321\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4f64b4ae\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj-mtl.vue\n// module id = 322\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d8f5ef3\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/components/demo-block.vue\n// module id = 323\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-678f988c\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-collada.vue\n// module id = 324\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-gltf', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/gltf/Duck/glTF/Duck.gltf\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-692b4fad\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-gltf.vue\n// module id = 325\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-ply', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/ply/binary/Lucy100k.ply\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-744fcbd7\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-ply.vue\n// module id = 326\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-756fcd71\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-rotate.vue\n// module id = 327\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-ply\"\n    }\n  }, [_vm._v(\"PLY Model (.ply)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-gltf\"\n    }\n  }, [_vm._v(\"glTF Model (.gltf)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7a736b78\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/App.vue\n// module id = 328\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-b82a4cf6\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/model-mixin.vue\n// module id = 329\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    attrs: {\n      \"slot\": \"preview\"\n    },\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-cb36e518\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-event.vue\n// module id = 330\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-background.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"cae0e19c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 332\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"4f0853e4\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 333\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"3781cf10\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.7@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 334\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/components/demo-block.vue\n// module id = 4\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-collada.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-collada.vue\n// module id = 49\n// module chunks = 1","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n// import DemoBasic from '../pages/demo-basic'\r\n// import DemoEvent from '../pages/demo-event'\r\n// import DemoBackground from '../pages/demo-background'\r\n// import DemoRotate from '../pages/demo-rotate'\r\n// import DemoObj from '../pages/demo-obj'\r\n// // import DemoGltf from '../pages/demo-gltf'\r\n// import DemoStl from '../pages/demo-stl'\r\n// import DemoCollada from '../pages/demo-collada'\r\n// // import DemoSea3d from '../pages/demo-sea3d'\r\n// import DemoJson from '../pages/demo-json'\r\n\r\nimport { pages } from '../pages'\r\n\r\nVue.use( Router )\r\n\r\nconst routes = pages.map( page => {\r\n    \r\n    const name = page.name;\r\n\r\n    return {\r\n        path: `/${ name }`,\r\n        name,\r\n        component: page\r\n    }\r\n} )\r\n\r\nroutes.push( {\r\n    path: '*',\r\n    redirect: '/demo-basic'\r\n} )\r\n\r\nexport default new Router( { routes } )\n\n\n// WEBPACK FOOTER //\n// ./examples/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/App.vue\n// module id = 51\n// module chunks = 1","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  render: h => h(App)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/index.js","import DemoBasic from './demo-basic'\r\nimport DemoEvent from './demo-event'\r\nimport DemoBackground from './demo-background'\r\nimport DemoRotate from './demo-rotate'\r\nimport DemoObj from './demo-obj'\r\nimport DemoObjMtl from './demo-obj-mtl'\r\nimport DemoGltf from './demo-gltf'\r\nimport DemoStl from './demo-stl'\r\nimport DemoCollada from './demo-collada'\r\n// import DemoSea3d from './demo-sea3d'\r\nimport DemoJson from './demo-json'\r\nimport DemoPly from './demo-ply'\r\n\r\nconst pages = [\r\n    DemoBasic,\r\n    DemoEvent,\r\n    DemoBackground,\r\n    DemoRotate,\r\n    DemoObj,\r\n    DemoObjMtl,\r\n    DemoStl,\r\n    DemoCollada,\r\n    DemoJson,\r\n    DemoPly,\r\n    DemoGltf\r\n]\r\n\r\nexport { pages };\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/pages/index.js","<template>\r\n    <div class=\"examples\">\r\n        <div class=\"examples-header\">\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"title\">Vue3DModel</a>\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"github\">View on GitHub</a>\r\n        </div>\r\n        <div class=\"examples-content\">\r\n            <ul class=\"examples-menu\">\r\n                <li class=\"examples-menu-title\">Examples</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">basic</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-rotate\">rotate</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-background\">background</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Events</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-event\">mousemove</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Model Formats</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">JSON Model (.json)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-obj\">OBJ Model (.obj)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-obj-mtl\">OBJ + MTL (.obj + .mtl)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-stl\">STL Model (.stl)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-collada\">Collada Model (.dae)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-ply\">PLY Model (.ply)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-gltf\">glTF Model (.gltf)</router-link>\r\n                </li>\r\n            </ul>\r\n            <div class=\"examples-pages\">\r\n                <router-view></router-view>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: 'app'\r\n}\r\n</script>\r\n<style>\r\n* {\r\n    margin: 0;\r\n    border: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\nul, ol, li {\r\n    list-style: none;\r\n}\r\n\r\na {\r\n    color: #657180;\r\n    text-decoration: none;\r\n}\r\n\r\nhtml, body, .examples {\r\n    width: 100%;\r\n    height: 100%;\r\n    color: #657180;\r\n}\r\n\r\nbody {\r\n    background: #eee;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\r\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\r\n                 SimSun, sans-serif;\r\n    background: #fff;\r\n}\r\n\r\n.examples-header {\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    background: #f3f6fb;\r\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\r\n    border-bottom: solid 1px #dfe2e7;\r\n    padding: 15px 15px 15px 30px;\r\n    line-height: 20px;\r\n}\r\n\r\n.examples-header .title {\r\n    font-weight: bold;\r\n    font-size: 18px;\r\n    display: inline-block;\r\n}\r\n\r\n.examples-header .github {\r\n    color: #39f;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    float: right;\r\n}\r\n\r\n.examples-content {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-top: 52px;\r\n    overflow: hidden;\r\n}\r\n\r\n.examples-menu {\r\n    float: left;\r\n    width: 230px;\r\n    height: 100%;\r\n    border-right: solid 1px #dfe2e7;\r\n    padding: 10px 30px;\r\n}\r\n\r\n.examples-menu .examples-menu-item {\r\n    display: block;\r\n    width: 100%;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n\r\n.examples-menu .examples-menu-item > a {\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.examples-menu .examples-menu-title {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 6px 0;\r\n    margin-top: 10px;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n}\r\n\r\n.examples-menu .examples-menu-item:hover > a {\r\n    color: #39f;\r\n}\r\n\r\n.examples-pages {\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n.example-loading {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    text-align: center;\r\n}\r\n.example-loading::before {\r\n    content: '';\r\n    border-radius: 100%;\r\n    margin: 2px;\r\n    border: 3px solid #20a0ff;\r\n    border-bottom-color: transparent;\r\n    height: 36px;\r\n    width: 36px;\r\n    display: inline-block;\r\n    animation: loading-rotate .75s 0s linear infinite;\r\n    vertical-align: middle;\r\n}\r\n\r\n.example-loading::after {\r\n    content: '';\r\n    display: inline-block;\r\n    height: 100%;\r\n    width: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\n@keyframes loading-rotate{\r\n    0% {\r\n        transform: rotate(0) scale(1);\r\n    }\r\n    50% {\r\n        transform: rotate(180deg) scale(.6);\r\n    }\r\n    100% {\r\n        transform: rotate(360deg) scale(1);\r\n    }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// App.vue?52a920e4","<template>\r\n    <div class=\"demo-block\">\r\n        <div class=\"demo-block-preview\">\r\n            <slot name=\"preview\"></slot>\r\n        </div>\r\n        <div class=\"demo-block-code\">\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>Vue Component & Webpack</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>HTML & JS</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport 'highlight.js/styles/github.css';\r\nimport hljs from 'highlight.js'\r\n\r\nconst codeHandler = code => {\r\n    const scripts = `<script src=\"vue.js\"><\\/script>\r\n  <script src=\"vue-3d-model.min.js\"><\\/script>`;\r\n\r\n    return code.replace( /#scripts#/ig, scripts );\r\n}\r\n\r\nexport default {\r\n    name: 'app',\r\n    props: {\r\n        vueCode: String,\r\n        htmlCode: {\r\n            type: String,\r\n            default: '// TODO'\r\n        }\r\n    },\r\n    mounted () {\r\n        hljs.highlightBlock( this.$refs.vueCode );\r\n        hljs.highlightBlock( this.$refs.htmlCode );\r\n    },\r\n    data () {\r\n    \treturn {}\r\n    },\r\n    filters: {\r\n        code ( val ) {\r\n            return codeHandler( val );\r\n        }\r\n    },\r\n    components: {\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    .demo-block {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #fff;\r\n        border-radius: 3px;\r\n    }\r\n\r\n    .demo-block .demo-block-preview {\r\n        width: 50%;\r\n        height: 100%;\r\n        float: left;\r\n        position: relative;\r\n    }\r\n\r\n    .demo-block .demo-block-code {\r\n        width: 50%;\r\n        height: 100%;\r\n        background: #f9fafc;\r\n        border-left: solid 1px #dfe2e7;\r\n        font-size: 13px;\r\n        float: left;\r\n    }\r\n    \r\n\r\n    .demo-block .demo-block-code pre code {\r\n        font: normal 10pt Consolas, Monaco, monospace;\r\n    }\r\n\r\n\r\n    .demo-block .demo-block-code .demo-block-code-box {\r\n        width: 100%;\r\n        height: 50%;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box::after {\r\n        content: '';\r\n        display: block;\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 90%;\r\n        height: 1px;\r\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\r\n    }\r\n\r\n    .demo-block .demo-block-code-box h3 {\r\n        width: 100%;\r\n        padding: 10px 20px;\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n        position: absolute;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box-content {\r\n        position: absolute;\r\n        top: 40px;\r\n        bottom: 10px;\r\n        left: 20px;\r\n        right: 20px;\r\n        overflow: auto;\r\n    }\r\n\r\n    .demo-block .demo-block-code code {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?efc057b8","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <p class=\"background-text\">\r\n                Vue<br>3D<br>Model<br>Background\r\n            </p>\r\n            <div class=\"background-buttons\">\r\n                <p>Color</p>\r\n                <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n                <button @click=\"bgColor = '#f00'\">#f00</button>\r\n                <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n                <p>Alpha</p>\r\n                <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n                <button @click=\"bgAlpha = 1\">1</button>\r\n                <button @click=\"bgAlpha = 0\">0</button>\r\n            </div>\r\n            <model-obj\r\n                class=\"model-box\"\r\n                :backgroundAlpha=\"bgAlpha\"\r\n                :backgroundColor=\"bgColor\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n<style>\r\n    .background-text {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        z-index: 1;\r\n        width: 100%;\r\n        transform: translateY(-50%);\r\n        text-align: center; \r\n        font-size: 60px;\r\n    }\r\n    .background-buttons {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 10px;\r\n        z-index: 3;\r\n    }\r\n\r\n    .background-buttons > p {\r\n        margin-top: 15px;\r\n        color: #000;\r\n    }\r\n\r\n    .background-buttons > button {\r\n        background: #fff;\r\n        padding: 4px 6px;\r\n        margin-top: 5px;\r\n        outline: none;\r\n        border: 1px solid #c4c4c4;\r\n    }\r\n\r\n    .model-box {\r\n        position: relative;\r\n        z-index: 2;\r\n    }\r\n</style>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <p class=\"background-text\">\r\n        Vue<br>3D<br>Model<br>Background\r\n    </p>\r\n    <div class=\"background-buttons\">\r\n        <p>Color</p>\r\n        <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n        <button @click=\"bgColor = '#f00'\">#f00</button>\r\n        <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n        <p>Alpha</p>\r\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n        <button @click=\"bgAlpha = 1\">1</button>\r\n        <button @click=\"bgAlpha = 0\">0</button>\r\n    </div>\r\n    <model-obj\r\n        :backgroundAlpha=\"bgAlpha\"\r\n        :backgroundColor=\"bgColor\"\r\n        src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <p class=\"background-text\">\r\n            Vue<br>3D<br>Model<br>Background\r\n        </p>\r\n        <div class=\"background-buttons\">\r\n            <p>Color</p>\r\n            <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n            <button @click=\"bgColor = '#f00'\">#f00</button>\r\n            <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n            <p>Alpha</p>\r\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n            <button @click=\"bgAlpha = 1\">1</button>\r\n            <button @click=\"bgAlpha = 0\">0</button>\r\n        </div>\r\n        <model-obj\r\n            :backgroundAlpha=\"bgAlpha\"\r\n            :backgroundColor=\"bgColor\"\r\n            src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-background',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            bgColor: '#ff0',\r\n            bgAlpha: 0.5\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        setBackground ( color, alpha ) {\r\n\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-background.vue?1758268a","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-three :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/json/scene.json\"></model-three>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelThree from '../../src/model-three.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-three src=\"static/models/json/scene.json\"></model-three>\r\n</template>\r\n\r\n<script>\r\n    import { ModelThree } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelThree\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-three src=\"static/models/json/scene.json\"></model-three>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-basic',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelThree,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-basic.vue?9b7dffa6","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                :rotation=\"rotation\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-collada',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            rotation: {\r\n                x: -Math.PI / 2,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-collada.vue?cd0ac3ec","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                ref=\"model\"\r\n                @on-load=\"onLoad\"\r\n                @on-mousemove=\"onMouseMove\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n\r\n<template>\r\n    <model-obj \r\n        src=\"static/models/obj/tree.obj\"\r\n        @on-mousemove=\"onMouseMove\">\r\n    </model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                intersected: null\r\n            }\r\n        },\r\n        methods: {\r\n            onMouseMove ( event ) {\r\n\r\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                if ( !event ) {\r\n\r\n                    if ( this.intersected ) {\r\n                        this.intersected.material.color.setStyle( '#fff' );\r\n                    }\r\n\r\n                    this.intersected = null;\r\n                    return;\r\n                }\r\n\r\n                this.intersected = event.object;\r\n                this.intersected.material.color.setStyle( '#13ce66' );\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj \r\n            src=\"static/models/obj/tree.obj\"\r\n            @on-mousemove=\"onMouseMove\">\r\n        </model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                intersected: null\r\n            },\r\n            methods: {\r\n                onMouseMove ( event ) {\r\n\r\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                    if ( !event ) {\r\n\r\n                        if ( this.intersected ) {\r\n                            this.intersected.material.color.setStyle( '#fff' );\r\n                        }\r\n\r\n                        this.intersected = null;\r\n                        return;\r\n                    }\r\n\r\n                    this.intersected = event.object;\r\n                    this.intersected.material.color.setStyle( '#13ce66' );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-event',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            intersected: null\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            console.log( event );\r\n\r\n            if ( !event ) {\r\n\r\n                if ( this.intersected ) {\r\n                    this.intersected.material.color.setStyle( '#fff' );\r\n                }\r\n\r\n                this.intersected = null;\r\n                return;\r\n            }\r\n\r\n            this.intersected = event.object;\r\n            this.intersected.material.color.setStyle( '#13ce66' );\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-event.vue?93b2d36c","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-gltf :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/gltf/Duck/glTF/Duck.gltf\"></model-gltf>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelGltf from '../../src/model-gltf.vue'\r\n\r\nconst code = `\r\n\r\n<template>\r\n    <model-gltf src=\"static/models/gltf/Duck/glTF/Duck.gltf\"></model-gltf>\r\n</template>\r\n\r\n<script>\r\n    import { ModelGltf } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelGltf\r\n        }\r\n    }\r\n<\\/script>\r\n\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-gltf \r\n            src=\"static/models/gltf/Duck/glTF/Duck.gltf\"\r\n            @on-mousemove=\"onMouseMove\">\r\n        </model-gltf>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-gltf',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelGltf,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-gltf.vue?701566d0","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-json',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-json.vue?97d04e9a","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/male02/male02.obj\"\r\n                mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj \r\n        src=\"static/models/obj/male02/male02.obj\"\r\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj \r\n            src=\"static/models/obj/male02/male02.obj\"\r\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj-mtl',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj-mtl.vue?5e4dca07","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj.vue?4b9aebbd","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-ply :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                :rotation=\"rotation\"\r\n                src=\"static/models/ply/binary/Lucy100k.ply\"></model-ply>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelPly from '../../src/model-ply.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-ply src=\"static/models/ply/slotted_disk.ply\"></model-ply>\r\n</template>\r\n\r\n<script>\r\n    import { ModelPly } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelPly\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-ply src=\"static/models/ply/slotted_disk.ply\" :rotation=\"rotation\"></model-ply>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-ply',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            rotation: {\r\n                x: 0,\r\n                y: Math.PI,\r\n                z: 0\r\n            }\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelPly,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-ply.vue?516c3f6e","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada\r\n                ref=\"collada\"\r\n                :rotation=\"rotation\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada\r\n        :rotation=\"rotation\"\r\n        @on-load=\"onLoad\"\r\n        src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data: {\r\n            rotation: {\r\n                x: -Math.PI / 2,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        },\r\n        methods: {\r\n            onLoad () {\r\n                this.rotate();\r\n            },\r\n            rotate () {\r\n                this.rotation.z += 0.01;\r\n                requestAnimationFrame( this.rotate );\r\n            }\r\n        },\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada\r\n            :rotation=\"rotation\"\r\n            @on-load=\"onLoad\"\r\n            src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                rotation: {\r\n                    x: -Math.PI / 2,\r\n                    y: 0,\r\n                    z: 0\r\n                }\r\n            },\r\n            methods: {\r\n                onLoad () {\r\n                    this.rotate();\r\n                },\r\n                rotate () {\r\n                    this.rotation.z += 0.01;\r\n                    requestAnimationFrame( this.rotate );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-rotate',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            rotation: {\r\n                x: -Math.PI / 2,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n            this.rotate();\r\n        },\r\n        rotate () {\r\n            requestAnimationFrame( this.rotate );\r\n            this.rotation.z += 0.01;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-rotate.vue?7fbb3e7d","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-stl :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/stl/gear.stl\"></model-stl>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelStl from '../../src/model-stl.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n</template>\r\n\r\n<script>\r\n    import { ModelStl } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelStl\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-stl',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelStl,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-stl.vue?1f99e73b","<script>\r\nimport { ColladaLoader } from './loaders/ColladaLoader'\r\nimport { toIndexed, getCenter } from './util'\r\nimport mixin from './model-mixin.vue'\r\nimport { Object3D } from 'three'\r\n\r\nexport default {\r\n    name: 'model-collada',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n\r\n        const loader = new ColladaLoader();\r\n\r\n        return {\r\n            loader\r\n        }\r\n    },\r\n    methods: {\r\n        getObject ( collada ) {\r\n            return collada.scene\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-collada.vue?1bbde0e2","<script>\r\nimport { GLTFLoader } from './loaders/GLTFLoader'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-gltf',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'AmbientLight',\r\n                        color: 0xaaaaaa\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new GLTFLoader\r\n        }\r\n    },\r\n    methods: {\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.wrapper.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, data => {\r\n\r\n                this.addObject( data.scene )\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, xhr => {\r\n                \r\n                this.$emit( 'on-progress', xhr );\r\n\r\n            }, err => {\r\n\r\n                console.log( err )\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-gltf.vue?3f2dbf59","<template>\r\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\r\n        <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\r\n        <div v-else>\r\n            <slot>\r\n                Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\r\n            </slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n    Object3D,\r\n    Vector2,\r\n    Vector3,\r\n    Color,\r\n    Scene,\r\n    Raycaster,\r\n    WebGLRenderer,\r\n    PerspectiveCamera,\r\n    AmbientLight,\r\n    PointLight,\r\n    HemisphereLight,\r\n    DirectionalLight\r\n} from 'three'\r\nimport { getSize, getCenter } from './util'\r\nimport { OrbitControls } from './controls/OrbitControls'\r\n\r\nconst suportWebGL = ( () => {\r\n\r\n    try {\r\n        var canvas = document.createElement( 'canvas' ); \r\n        return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n    } catch ( e ) {\r\n        return false;\r\n    }\r\n\r\n} )();\r\n\r\nexport default {\r\n    props: {\r\n        src: {\r\n            type: String\r\n        },\r\n        width: {\r\n            type: Number\r\n        },\r\n        height: {\r\n            type: Number\r\n        },\r\n        position: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        rotation: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        scale: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 1, y: 1, z: 1 }\r\n            }\r\n        },\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [];\r\n            }\r\n        },\r\n        cameraPosition: {\r\n            type: Object\r\n        },\r\n        cameraRotation: {\r\n            type: Object\r\n        },\r\n        cameraUp: {\r\n            type: Object\r\n        },\r\n        cameraLookAt: {\r\n            type: Object\r\n        },\r\n        backgroundColor: {\r\n            default: 0xffffff\r\n        },\r\n        backgroundAlpha: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        controllable: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            suportWebGL,\r\n            size: {\r\n                width: this.width,\r\n                height: this.height\r\n            },\r\n            object: null,\r\n            raycaster: new Raycaster(),\r\n            mouse: new Vector2(),\r\n            camera: new PerspectiveCamera( 45, 1, 0.01, 100000 ),\r\n            scene: new Scene(),\r\n            wrapper: new Object3D(),\r\n            renderer: null,\r\n            controls: null,\r\n            allLights: [],\r\n            clock: typeof performance === 'undefined' ? Date : performance\r\n        }\r\n    },\r\n    computed: {\r\n        hasListener () {\r\n\r\n            // \r\n            const events = this._events;\r\n            let result = {};\r\n\r\n            [ 'on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click' ].forEach( name => {\r\n                result[ name ] = !!events[ name ] && events[ name ].length > 0;\r\n            } )\r\n\r\n            return result;\r\n        }\r\n    },\r\n    created () {\r\n        window.addEventListener( 'resize', this.onResize, false );\r\n    },\r\n    mounted () {\r\n\r\n        if ( this.width === undefined || this.height === undefined ) {\r\n            this.size = {\r\n                width: this.$el.offsetWidth,\r\n                height: this.$el.offsetHeight\r\n            }\r\n        }\r\n\r\n        this.renderer = new WebGLRenderer( { antialias: true, alpha: true, canvas: this.$refs.canvas } )\r\n        this.renderer.shadowMap.enabled = true;\r\n\r\n        this.scene.add( this.wrapper )\r\n\r\n        this.load();\r\n        this.update();\r\n\r\n        this.$el.addEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.addEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.addEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.addEventListener( 'click', this.onClick, false );\r\n\r\n        this.animate();\r\n    },\r\n    beforeDestroy () {\r\n\r\n        this.$el.removeEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.removeEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.removeEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.removeEventListener( 'click', this.onClick, false );\r\n\r\n    },\r\n    watch: {\r\n        src () {\r\n            this.load();\r\n        },\r\n        rotation: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.rotation.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        position: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.position.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        scale: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.scale.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        lights: {\r\n            deep: true,\r\n            handler( val, oldVal ) {\r\n                this.updateLights();\r\n            }\r\n        },\r\n        size: {\r\n            deep: true,\r\n            handler ( val ) {\r\n                this.updateCamera();\r\n                this.updateRenderer();\r\n            }\r\n        },\r\n        controllable () {\r\n            this.updateControls();\r\n        },\r\n        backgroundAlpha () {\r\n            this.updateRenderer();\r\n        },\r\n        backgroundColor () {\r\n            this.updateRenderer();\r\n        }\r\n    },\r\n    methods: {\r\n        onResize () {\r\n\r\n            if ( this.width === undefined || this.height === undefined ) {\r\n\r\n                this.$nextTick( () => {\r\n                    this.size = {\r\n                        width: this.$el.offsetWidth,\r\n                        height: this.$el.offsetHeight\r\n                    }\r\n                } )\r\n                \r\n            }\r\n        },\r\n        onMouseDown ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousedown' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousedown', intersected );\r\n\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousemove' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousemove', intersected );\r\n\r\n        },\r\n        onMouseUp ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mouseup' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mouseup', intersected );\r\n\r\n        },\r\n        onClick ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-click' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-click', intersected );\r\n\r\n        },\r\n        pick ( x, y ) {\r\n\r\n            if ( !this.object ) return;\r\n\r\n            const rect = this.$el.getBoundingClientRect();\r\n\r\n            x -= rect.left;\r\n            y -= rect.top;\r\n\r\n            this.mouse.x = ( x / this.size.width ) * 2 - 1;\r\n            this.mouse.y = - ( y / this.size.height ) * 2 + 1;\r\n\r\n            this.raycaster.setFromCamera( this.mouse, this.camera );\r\n\r\n            const intersects = this.raycaster.intersectObject( this.object, true );\r\n\r\n            return ( intersects && intersects.length ) > 0 ? intersects[ 0 ] : null;\r\n\r\n        },\r\n        update () {\r\n\r\n            this.updateRenderer();\r\n            this.updateCamera();\r\n            this.updateLights();\r\n            this.updateControls();\r\n            \r\n        },\r\n        updateModel () {\r\n\r\n            const object = this.object;\r\n\r\n            if ( !object ) return;\r\n\r\n            const position = this.position;\r\n            const rotation = this.rotation;\r\n            const scale = this.scale;\r\n\r\n            object.position.set( position.x, position.y, position.z );\r\n            object.rotation.set( rotation.x, rotation.y, rotation.z );\r\n            object.scale.set( scale.x, scale.y, scale.z );\r\n\r\n        },\r\n        updateRenderer () {\r\n\r\n            let renderer = this.renderer;\r\n\r\n            renderer.setSize( this.size.width, this.size.height );\r\n            renderer.setPixelRatio( window.devicePixelRatio || 1 );\r\n            renderer.setClearColor( new Color( this.backgroundColor ).getHex() );\r\n            renderer.setClearAlpha( this.backgroundAlpha );\r\n        },\r\n        updateCamera () {\r\n\r\n            const camera = this.camera;\r\n            const object = this.object;\r\n\r\n            camera.aspect = this.size.width / this.size.height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            if ( !this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp ) {\r\n\r\n                if ( !object ) return;\r\n\r\n                const distance = getSize( object ).length();\r\n\r\n                camera.position.set( 0, 0, 0 );\r\n                camera.position.z = distance;\r\n                camera.lookAt( new Vector3() );\r\n\r\n            } else {\r\n                \r\n                camera.position.set( this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z )\r\n                camera.rotation.set( this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z )\r\n                camera.up.set( this.cameraUp.x, this.cameraUp.y, this.cameraUp.z )\r\n\r\n                camera.lookAt( new Vector3( this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z ) )\r\n\r\n            }\r\n\r\n        },\r\n        updateLights () {\r\n\r\n            this.scene.remove.apply( this.scene, this.allLights );\r\n\r\n            this.allLights = [];\r\n\r\n            this.lights.forEach( item => {\r\n\r\n                if ( !item.type ) return;\r\n\r\n                const type = item.type.toLowerCase();\r\n\r\n                let light = null;\r\n\r\n                if ( type === 'ambient' || type === 'ambientlight' ) {\r\n\r\n                    const color = item.color || 0x404040;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new AmbientLight( color, intensity );\r\n\r\n                } else if ( type === 'point' || type === 'pointlight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n                    const distance = item.distance || 0;\r\n                    const decay = item.decay || 1;\r\n\r\n                    light = new PointLight( color, intensity, distance, decay );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                } else if ( type === 'directional' || type === 'directionallight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new DirectionalLight( color, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                    if ( item.target ) {\r\n                        light.target.copy( item.target );\r\n                    }\r\n\r\n                } else if ( type === 'hemisphere' || type === 'hemispherelight' ) {\r\n\r\n                    const skyColor = item.skyColor || 0xffffff;\r\n                    const groundColor = item.groundColor || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new HemisphereLight( skyColor, groundColor, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                }\r\n\r\n                this.allLights.push( light );\r\n                this.scene.add( light );\r\n\r\n            } )\r\n\r\n        },\r\n        updateControls () {\r\n\r\n            if ( this.controllable && this.controls ) return;\r\n\r\n            if ( this.controllable ) {\r\n\r\n                if ( this.controls ) return;\r\n\r\n                this.controls = new OrbitControls( this.camera, this.$el );\r\n                this.controls.type = 'orbit';\r\n\r\n            } else {\r\n\r\n                if ( this.controls ) {\r\n\r\n                    this.controls.dispose();\r\n                    this.controls = null;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n\r\n                this.wrapper.remove( this.object );\r\n\r\n            }\r\n\r\n            this.loader.load( this.src, ( ...args ) => {\r\n\r\n                const object = this.getObject( ...args )\r\n\r\n                if ( this.process ) {\r\n                    this.process ( object );\r\n                }\r\n\r\n                this.addObject( object )\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, xhr => {\r\n                \r\n                this.$emit( 'on-progress', xhr );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        },\r\n        getObject( object ) {\r\n\r\n            return object\r\n\r\n        },\r\n        addObject( object ) {\r\n\r\n            const center = getCenter( object )\r\n\r\n            // correction position\r\n            this.wrapper.position.copy( center.negate() )\r\n            \r\n            this.object = object\r\n            this.wrapper.add( object )\r\n\r\n            this.updateCamera()\r\n            this.updateModel()\r\n            \r\n        },\r\n        animate () {\r\n            requestAnimationFrame( this.animate );\r\n            this.render();\r\n        },\r\n        render () {\r\n\r\n            this.renderer.render( this.scene, this.camera )\r\n\r\n        }\r\n    }\r\n}\r\n\r\n</script>\n\n\n// WEBPACK FOOTER //\n// model-mixin.vue?10bb44a2","<script>\r\nimport { OBJLoader } from './loaders/OBJLoader'\r\nimport { MTLLoader } from './loaders/MTLLoader'\r\nimport { toIndexed } from './util'\r\nimport mixin from './model-mixin.vue'\r\n\r\nimport * as THREE from 'three'\r\nimport { getSize, getCenter } from './util'\r\n\r\nexport default {\r\n    name: 'model-obj',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        mtlPath: {\r\n            type: String\r\n        },\r\n        mtl: {\r\n            type: String\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new OBJLoader(),\r\n            mtlLoader: new MTLLoader()\r\n        }\r\n    },\r\n    watch: {\r\n        mtl () {\r\n            this.load();\r\n        }\r\n    },\r\n    methods: {\r\n        process ( object ) {\r\n            if ( this.smoothing ) {\r\n                object.traverse( child => {\r\n                    if ( child.geometry ) {\r\n                        child.geometry = toIndexed( child.geometry );\r\n                        child.geometry.computeVertexNormals();\r\n                    }\r\n                } )\r\n            }\r\n        },\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.wrapper.remove( this.object );\r\n            }\r\n\r\n            const onLoad = object => {\r\n                \r\n                if ( this.process ) {\r\n                    this.process ( object );\r\n                }\r\n\r\n                this.addObject( object )\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }\r\n\r\n            const onProgress = xhr => {\r\n\r\n                this.$emit( 'on-progress', xhr );\r\n\r\n            }\r\n\r\n            const onError = err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            }\r\n\r\n            if ( this.mtl ) {\r\n\r\n                let mtlPath = this.mtlPath;\r\n                let mtlSrc = this.mtl;\r\n                \r\n                if ( !this.mtlPath ) {\r\n\r\n                    const result = /^(.*\\/)([^/]*)$/.exec( this.mtl );\r\n\r\n                    if ( result ) {\r\n                        mtlPath = result[ 1 ];\r\n                        mtlSrc = result[ 2 ];\r\n                    }\r\n\r\n                }\r\n\r\n                if ( mtlPath ) {\r\n                    this.mtlLoader.setPath( mtlPath )\r\n                }\r\n\r\n                this.mtlLoader.load( mtlSrc, materials => {\r\n\r\n                    materials.preload();\r\n\r\n                    this.loader.setMaterials( materials );\r\n\r\n                    this.loader.load( this.src, onLoad, onProgress, onError );\r\n\r\n                }, () => {}, onError );\r\n\r\n            } else {\r\n    \r\n                this.loader.load( this.src, onLoad, onProgress, onError );\r\n\r\n            }\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-obj.vue?97c8d4ca","<script>\r\nimport { PLYLoader } from './loaders/PLYLoader'\r\nimport mixin from './model-mixin.vue'\r\nimport {\r\n    Mesh,\r\n    MeshStandardMaterial\r\n} from 'three'\r\n\r\nexport default {\r\n    name: 'model-ply',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new PLYLoader()\r\n        }\r\n    },\r\n    methods: {\r\n        getObject( geometry ) {\r\n\r\n            geometry.computeVertexNormals()\r\n\r\n            return new Mesh( geometry, new MeshStandardMaterial() )\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-ply.vue?e6596762","<script>\r\nimport { STLLoader } from './loaders/STLLoader'\r\nimport mixin from './model-mixin.vue'\r\nimport {\r\n    Mesh,\r\n    MeshPhongMaterial\r\n} from 'three'\r\n\r\nexport default {\r\n    name: 'model-stl',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new STLLoader()\r\n        }\r\n    },\r\n    methods: {\r\n        getObject( geometry ) {\r\n\r\n            return new Mesh( geometry, new MeshPhongMaterial() )\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-stl.vue?f1165cde","<script>\r\nimport { ObjectLoader } from 'three'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-three',\r\n    mixins: [ mixin ],\r\n    data () {\r\n        return {\r\n            loader: new ObjectLoader()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-three.vue?de605bf0","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\r\n\r\nconst OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nexport { OrbitControls };\n\n\n// WEBPACK FOOTER //\n// ./src/controls/OrbitControls.js","import * as THREE from 'three'\r\n\r\nconst ColladaLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nColladaLoader.prototype = {\r\n\r\n\tconstructor: ColladaLoader,\r\n\r\n\tcrossOrigin: 'Anonymous',\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar path = THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text, path ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\toptions: {\r\n\r\n\t\tset convertUpAxis( value ) {\r\n\r\n\t\t\tconsole.warn( 'ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( text, path ) {\r\n\r\n\t\tfunction getElementsByTagName( xml, name ) {\r\n\r\n\t\t\t// Non recursive xml.getElementsByTagName() ...\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar childNodes = xml.childNodes;\r\n\r\n\t\t\tfor ( var i = 0, l = childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeName === name ) {\r\n\r\n\t\t\t\t\tarray.push( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseStrings( text ) {\r\n\r\n\t\t\tif ( text.length === 0 ) return [];\r\n\r\n\t\t\tvar parts = text.trim().split( /\\s+/ );\r\n\t\t\tvar array = new Array( parts.length );\r\n\r\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = parts[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseFloats( text ) {\r\n\r\n\t\t\tif ( text.length === 0 ) return [];\r\n\r\n\t\t\tvar parts = text.trim().split( /\\s+/ );\r\n\t\t\tvar array = new Array( parts.length );\r\n\r\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = parseFloat( parts[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseInts( text ) {\r\n\r\n\t\t\tif ( text.length === 0 ) return [];\r\n\r\n\t\t\tvar parts = text.trim().split( /\\s+/ );\r\n\t\t\tvar array = new Array( parts.length );\r\n\r\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = parseInt( parts[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseId( text ) {\r\n\r\n\t\t\treturn text.substring( 1 );\r\n\r\n\t\t}\r\n\r\n\t\tfunction isEmpty( object ) {\r\n\r\n\t\t\treturn Object.keys( object ).length === 0;\r\n\r\n\t\t}\r\n\r\n\t\t// asset\r\n\r\n\t\tfunction parseAsset( xml ) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\r\n\t\t\t\tupAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAssetUnit( xml ) {\r\n\r\n\t\t\treturn xml !== undefined ? parseFloat( xml.getAttribute( 'meter' ) ) : 1;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAssetUpAxis( xml ) {\r\n\r\n\t\t\treturn xml !== undefined ? xml.textContent : 'Y_UP';\r\n\r\n\t\t}\r\n\r\n\t\t// library\r\n\r\n\t\tfunction parseLibrary( xml, libraryName, nodeName, parser ) {\r\n\r\n\t\t\tvar library = getElementsByTagName( xml, libraryName )[ 0 ];\r\n\r\n\t\t\tif ( library !== undefined ) {\r\n\r\n\t\t\t\tvar elements = getElementsByTagName( library, nodeName );\r\n\r\n\t\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\r\n\r\n\t\t\t\t\tparser( elements[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildLibrary( data, builder ) {\r\n\r\n\t\t\tfor ( var name in data ) {\r\n\r\n\t\t\t\tvar object = data[ name ];\r\n\t\t\t\tobject.build = builder( data[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// get\r\n\r\n\t\tfunction getBuild( data, builder ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\r\n\t\t\tdata.build = builder( data );\r\n\r\n\t\t\treturn data.build;\r\n\r\n\t\t}\r\n\r\n\t\t// animation\r\n\r\n\t\tfunction parseAnimation( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsources: {},\r\n\t\t\t\tsamplers: {},\r\n\t\t\t\tchannels: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tvar id;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tid = child.getAttribute( 'id' );\r\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'sampler':\r\n\t\t\t\t\t\tid = child.getAttribute( 'id' );\r\n\t\t\t\t\t\tdata.samplers[ id ] = parseAnimationSampler( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'channel':\r\n\t\t\t\t\t\tid = child.getAttribute( 'target' );\r\n\t\t\t\t\t\tdata.channels[ id ] = parseAnimationChannel( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.animations[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimationSampler( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tinputs: {},\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'input':\r\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\r\n\t\t\t\t\t\tdata.inputs[ semantic ] = id;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimationChannel( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar target = xml.getAttribute( 'target' );\r\n\r\n\t\t\t// parsing SID Addressing Syntax\r\n\r\n\t\t\tvar parts = target.split( '/' );\r\n\r\n\t\t\tvar id = parts.shift();\r\n\t\t\tvar sid = parts.shift();\r\n\r\n\t\t\t// check selection syntax\r\n\r\n\t\t\tvar arraySyntax = ( sid.indexOf( '(' ) !== - 1 );\r\n\t\t\tvar memberSyntax = ( sid.indexOf( '.' ) !== - 1 );\r\n\r\n\t\t\tif ( memberSyntax ) {\r\n\r\n\t\t\t\t//  member selection access\r\n\r\n\t\t\t\tparts = sid.split( '.' );\r\n\t\t\t\tsid = parts.shift();\r\n\t\t\t\tdata.member = parts.shift();\r\n\r\n\t\t\t} else if ( arraySyntax ) {\r\n\r\n\t\t\t\t// array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\r\n\r\n\t\t\t\tvar indices = sid.split( '(' );\r\n\t\t\t\tsid = indices.shift();\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\r\n\r\n\t\t\t\t\tindices[ i ] = parseInt( indices[ i ].replace( /\\)/, '' ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.indices = indices;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.id = id;\r\n\t\t\tdata.sid = sid;\r\n\r\n\t\t\tdata.arraySyntax = arraySyntax;\r\n\t\t\tdata.memberSyntax = memberSyntax;\r\n\r\n\t\t\tdata.sampler = parseId( xml.getAttribute( 'source' ) );\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildAnimation( data ) {\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tvar channels = data.channels;\r\n\t\t\tvar samplers = data.samplers;\r\n\t\t\tvar sources = data.sources;\r\n\r\n\t\t\tfor ( var target in channels ) {\r\n\r\n\t\t\t\tif ( channels.hasOwnProperty( target ) ) {\r\n\r\n\t\t\t\t\tvar channel = channels[ target ];\r\n\t\t\t\t\tvar sampler = samplers[ channel.sampler ];\r\n\r\n\t\t\t\t\tvar inputId = sampler.inputs.INPUT;\r\n\t\t\t\t\tvar outputId = sampler.inputs.OUTPUT;\r\n\r\n\t\t\t\t\tvar inputSource = sources[ inputId ];\r\n\t\t\t\t\tvar outputSource = sources[ outputId ];\r\n\r\n\t\t\t\t\tvar animation = buildAnimationChannel( channel, inputSource, outputSource );\r\n\r\n\t\t\t\t\tcreateKeyframeTracks( animation, tracks );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn tracks;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getAnimation( id ) {\r\n\r\n\t\t\treturn getBuild( library.animations[ id ], buildAnimation );\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildAnimationChannel( channel, inputSource, outputSource ) {\r\n\r\n\t\t\tvar node = library.nodes[ channel.id ];\r\n\t\t\tvar object3D = getNode( node.id );\r\n\r\n\t\t\tvar transform = node.transforms[ channel.sid ];\r\n\t\t\tvar defaultMatrix = node.matrix.clone().transpose();\r\n\r\n\t\t\tvar time, stride;\r\n\t\t\tvar i, il, j, jl;\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\t// the collada spec allows the animation of data in various ways.\r\n\t\t\t// depending on the transform type (matrix, translate, rotate, scale), we execute different logic\r\n\r\n\t\t\tswitch ( transform ) {\r\n\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tfor ( i = 0, il = inputSource.array.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttime = inputSource.array[ i ];\r\n\t\t\t\t\t\tstride = i * outputSource.stride;\r\n\r\n\t\t\t\t\t\tif ( data[ time ] === undefined ) data[ time ] = {};\r\n\r\n\t\t\t\t\t\tif ( channel.arraySyntax === true ) {\r\n\r\n\t\t\t\t\t\t\tvar value = outputSource.array[ stride ];\r\n\t\t\t\t\t\t\tvar index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];\r\n\r\n\t\t\t\t\t\t\tdata[ time ][ index ] = value;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tdata[ time ][ j ] = outputSource.array[ stride + j ];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\t\tconsole.warn( 'ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\t\tconsole.warn( 'ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'scale':\r\n\t\t\t\t\tconsole.warn( 'ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar keyframes = prepareAnimationData( data, defaultMatrix );\r\n\r\n\t\t\tvar animation = {\r\n\t\t\t\tname: object3D.uuid,\r\n\t\t\t\tkeyframes: keyframes\r\n\t\t\t};\r\n\r\n\t\t\treturn animation;\r\n\r\n\t\t}\r\n\r\n\t\tfunction prepareAnimationData( data, defaultMatrix ) {\r\n\r\n\t\t\tvar keyframes = [];\r\n\r\n\t\t\t// transfer data into a sortable array\r\n\r\n\t\t\tfor ( var time in data ) {\r\n\r\n\t\t\t\tkeyframes.push( { time: parseFloat( time ), value: data[ time ] } );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// ensure keyframes are sorted by time\r\n\r\n\t\t\tkeyframes.sort( ascending );\r\n\r\n\t\t\t// now we clean up all animation data, so we can use them for keyframe tracks\r\n\r\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\t\ttransformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn keyframes;\r\n\r\n\t\t\t// array sort function\r\n\r\n\t\t\tfunction ascending( a, b ) {\r\n\r\n\t\t\t\treturn a.time - b.time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\tfunction createKeyframeTracks( animation, tracks ) {\r\n\r\n\t\t\tvar keyframes = animation.keyframes;\r\n\t\t\tvar name = animation.name;\r\n\r\n\t\t\tvar times = [];\r\n\t\t\tvar positionData = [];\r\n\t\t\tvar quaternionData = [];\r\n\t\t\tvar scaleData = [];\r\n\r\n\t\t\tfor ( var i = 0, l = keyframes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar keyframe = keyframes[ i ];\r\n\r\n\t\t\t\tvar time = keyframe.time;\r\n\t\t\t\tvar value = keyframe.value;\r\n\r\n\t\t\t\tmatrix.fromArray( value ).transpose();\r\n\t\t\t\tmatrix.decompose( position, quaternion, scale );\r\n\r\n\t\t\t\ttimes.push( time );\r\n\t\t\t\tpositionData.push( position.x, position.y, position.z );\r\n\t\t\t\tquaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );\r\n\t\t\t\tscaleData.push( scale.x, scale.y, scale.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );\r\n\t\t\tif ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );\r\n\t\t\tif ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );\r\n\r\n\t\t\treturn tracks;\r\n\r\n\t\t}\r\n\r\n\t\tfunction transformAnimationData( keyframes, property, defaultValue ) {\r\n\r\n\t\t\tvar keyframe;\r\n\r\n\t\t\tvar empty = true;\r\n\t\t\tvar i, l;\r\n\r\n\t\t\t// check, if values of a property are missing in our keyframes\r\n\r\n\t\t\tfor ( i = 0, l = keyframes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tkeyframe = keyframes[ i ];\r\n\r\n\t\t\t\tif ( keyframe.value[ property ] === undefined ) {\r\n\r\n\t\t\t\t\tkeyframe.value[ property ] = null; // mark as missing\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tempty = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( empty === true ) {\r\n\r\n\t\t\t\t// no values at all, so we set a default value\r\n\r\n\t\t\t\tfor ( i = 0, l = keyframes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tkeyframe = keyframes[ i ];\r\n\r\n\t\t\t\t\tkeyframe.value[ property ] = defaultValue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// filling gaps\r\n\r\n\t\t\t\tcreateMissingKeyframes( keyframes, property );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction createMissingKeyframes( keyframes, property ) {\r\n\r\n\t\t\tvar prev, next;\r\n\r\n\t\t\tfor ( var i = 0, l = keyframes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar keyframe = keyframes[ i ];\r\n\r\n\t\t\t\tif ( keyframe.value[ property ] === null ) {\r\n\r\n\t\t\t\t\tprev = getPrev( keyframes, i, property );\r\n\t\t\t\t\tnext = getNext( keyframes, i, property );\r\n\r\n\t\t\t\t\tif ( prev === null ) {\r\n\r\n\t\t\t\t\t\tkeyframe.value[ property ] = next.value[ property ];\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( next === null ) {\r\n\r\n\t\t\t\t\t\tkeyframe.value[ property ] = prev.value[ property ];\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinterpolate( keyframe, prev, next, property );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction getPrev( keyframes, i, property ) {\r\n\r\n\t\t\twhile ( i >= 0 ) {\r\n\r\n\t\t\t\tvar keyframe = keyframes[ i ];\r\n\r\n\t\t\t\tif ( keyframe.value[ property ] !== null ) return keyframe;\r\n\r\n\t\t\t\ti --;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNext( keyframes, i, property ) {\r\n\r\n\t\t\twhile ( i < keyframes.length ) {\r\n\r\n\t\t\t\tvar keyframe = keyframes[ i ];\r\n\r\n\t\t\t\tif ( keyframe.value[ property ] !== null ) return keyframe;\r\n\r\n\t\t\t\ti ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction interpolate( key, prev, next, property ) {\r\n\r\n\t\t\tif ( ( next.time - prev.time ) === 0 ) {\r\n\r\n\t\t\t\tkey.value[ property ] = prev.value[ property ];\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tkey.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];\r\n\r\n\t\t}\r\n\r\n\t\t// animation clips\r\n\r\n\t\tfunction parseAnimationClip( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'id' ) || 'default',\r\n\t\t\t\tstart: parseFloat( xml.getAttribute( 'start' ) || 0 ),\r\n\t\t\t\tend: parseFloat( xml.getAttribute( 'end' ) || 0 ),\r\n\t\t\t\tanimations: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'instance_animation':\r\n\t\t\t\t\t\tdata.animations.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.clips[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildAnimationClip( data ) {\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tvar name = data.name;\r\n\t\t\tvar duration = ( data.end - data.start ) || - 1;\r\n\t\t\tvar animations = data.animations;\r\n\r\n\t\t\tfor ( var i = 0, il = animations.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar animationTracks = getAnimation( animations[ i ] );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\ttracks.push( animationTracks[ j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new THREE.AnimationClip( name, duration, tracks );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getAnimationClip( id ) {\r\n\r\n\t\t\treturn getBuild( library.clips[ id ], buildAnimationClip );\r\n\r\n\t\t}\r\n\r\n\t\t// controller\r\n\r\n\t\tfunction parseController( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'skin':\r\n\t\t\t\t\t\t// there is exactly one skin per controller\r\n\t\t\t\t\t\tdata.id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tdata.skin = parseSkin( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'morph':\r\n\t\t\t\t\t\tdata.id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Morph target animation not supported yet.' );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.controllers[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseSkin( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsources: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'bind_shape_matrix':\r\n\t\t\t\t\t\tdata.bindShapeMatrix = parseFloats( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tvar id = child.getAttribute( 'id' );\r\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'joints':\r\n\t\t\t\t\t\tdata.joints = parseJoints( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vertex_weights':\r\n\t\t\t\t\t\tdata.vertexWeights = parseVertexWeights( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseJoints( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tinputs: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'input':\r\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\r\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tdata.inputs[ semantic ] = id;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseVertexWeights( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tinputs: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'input':\r\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\r\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tvar offset = parseInt( child.getAttribute( 'offset' ) );\r\n\t\t\t\t\t\tdata.inputs[ semantic ] = { id: id, offset: offset };\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vcount':\r\n\t\t\t\t\t\tdata.vcount = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\tdata.v = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildController( data ) {\r\n\r\n\t\t\tvar build = {\r\n\t\t\t\tid: data.id\r\n\t\t\t};\r\n\r\n\t\t\tvar geometry = library.geometries[ build.id ];\r\n\r\n\t\t\tif ( data.skin !== undefined ) {\r\n\r\n\t\t\t\tbuild.skin = buildSkin( data.skin );\r\n\r\n\t\t\t\t// we enhance the 'sources' property of the corresponding geometry with our skin data\r\n\r\n\t\t\t\tgeometry.sources.skinIndices = build.skin.indices;\r\n\t\t\t\tgeometry.sources.skinWeights = build.skin.weights;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildSkin( data ) {\r\n\r\n\t\t\tvar BONE_LIMIT = 4;\r\n\r\n\t\t\tvar build = {\r\n\t\t\t\tjoints: [], // this must be an array to preserve the joint order\r\n\t\t\t\tindices: {\r\n\t\t\t\t\tarray: [],\r\n\t\t\t\t\tstride: BONE_LIMIT\r\n\t\t\t\t},\r\n\t\t\t\tweights: {\r\n\t\t\t\t\tarray: [],\r\n\t\t\t\t\tstride: BONE_LIMIT\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar sources = data.sources;\r\n\t\t\tvar vertexWeights = data.vertexWeights;\r\n\r\n\t\t\tvar vcount = vertexWeights.vcount;\r\n\t\t\tvar v = vertexWeights.v;\r\n\t\t\tvar jointOffset = vertexWeights.inputs.JOINT.offset;\r\n\t\t\tvar weightOffset = vertexWeights.inputs.WEIGHT.offset;\r\n\r\n\t\t\tvar jointSource = data.sources[ data.joints.inputs.JOINT ];\r\n\t\t\tvar inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];\r\n\r\n\t\t\tvar weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;\r\n\t\t\tvar stride = 0;\r\n\r\n\t\t\tvar i, j, l;\r\n\r\n\t\t\t// procces skin data for each vertex\r\n\r\n\t\t\tfor ( i = 0, l = vcount.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex\r\n\t\t\t\tvar vertexSkinData = [];\r\n\r\n\t\t\t\tfor ( j = 0; j < jointCount; j ++ ) {\r\n\r\n\t\t\t\t\tvar skinIndex = v[ stride + jointOffset ];\r\n\t\t\t\t\tvar weightId = v[ stride + weightOffset ];\r\n\t\t\t\t\tvar skinWeight = weights[ weightId ];\r\n\r\n\t\t\t\t\tvertexSkinData.push( { index: skinIndex, weight: skinWeight } );\r\n\r\n\t\t\t\t\tstride += 2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we sort the joints in descending order based on the weights.\r\n\t\t\t\t// this ensures, we only procced the most important joints of the vertex\r\n\r\n\t\t\t\tvertexSkinData.sort( descending );\r\n\r\n\t\t\t\t// now we provide for each vertex a set of four index and weight values.\r\n\t\t\t\t// the order of the skin data matches the order of vertices\r\n\r\n\t\t\t\tfor ( j = 0; j < BONE_LIMIT; j ++ ) {\r\n\r\n\t\t\t\t\tvar d = vertexSkinData[ j ];\r\n\r\n\t\t\t\t\tif ( d !== undefined ) {\r\n\r\n\t\t\t\t\t\tbuild.indices.array.push( d.index );\r\n\t\t\t\t\t\tbuild.weights.array.push( d.weight );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tbuild.indices.array.push( 0 );\r\n\t\t\t\t\t\tbuild.weights.array.push( 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// setup bind matrix\r\n\r\n\t\t\tbuild.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();\r\n\r\n\t\t\t// process bones and inverse bind matrix data\r\n\r\n\t\t\tfor ( i = 0, l = jointSource.array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar name = jointSource.array[ i ];\r\n\t\t\t\tvar boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();\r\n\r\n\t\t\t\tbuild.joints.push( { name: name, boneInverse: boneInverse } );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t\t// array sort function\r\n\r\n\t\t\tfunction descending( a, b ) {\r\n\r\n\t\t\t\treturn b.weight - a.weight;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction getController( id ) {\r\n\r\n\t\t\treturn getBuild( library.controllers[ id ], buildController );\r\n\r\n\t\t}\r\n\r\n\t\t// image\r\n\r\n\t\tfunction parseImage( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tinit_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\r\n\t\t\t};\r\n\r\n\t\t\tlibrary.images[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildImage( data ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\r\n\t\t\treturn data.init_from;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getImage( id ) {\r\n\r\n\t\t\treturn getBuild( library.images[ id ], buildImage );\r\n\r\n\t\t}\r\n\r\n\t\t// effect\r\n\r\n\t\tfunction parseEffect( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'profile_COMMON':\r\n\t\t\t\t\t\tdata.profile = parseEffectProfileCOMMON( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.effects[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectProfileCOMMON( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsurfaces: {},\r\n\t\t\t\tsamplers: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'newparam':\r\n\t\t\t\t\t\tparseEffectNewparam( child, data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'technique':\r\n\t\t\t\t\t\tdata.technique = parseEffectTechnique( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectNewparam( xml, data ) {\r\n\r\n\t\t\tvar sid = xml.getAttribute( 'sid' );\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'surface':\r\n\t\t\t\t\t\tdata.surfaces[ sid ] = parseEffectSurface( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'sampler2D':\r\n\t\t\t\t\t\tdata.samplers[ sid ] = parseEffectSampler( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectSurface( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'init_from':\r\n\t\t\t\t\t\tdata.init_from = child.textContent;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectSampler( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tdata.source = child.textContent;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'constant':\r\n\t\t\t\t\tcase 'lambert':\r\n\t\t\t\t\tcase 'blinn':\r\n\t\t\t\t\tcase 'phong':\r\n\t\t\t\t\t\tdata.type = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseEffectParameters( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'emission':\r\n\t\t\t\t\tcase 'diffuse':\r\n\t\t\t\t\tcase 'specular':\r\n\t\t\t\t\tcase 'shininess':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseEffectParameter( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameter( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'color':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloats( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'float':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'texture':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTexture( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\ttechnique: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'extra':\r\n\t\t\t\t\t\tparseEffectParameterTextureExtra( child, data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTextureExtra( xml, data ) {\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique':\r\n\t\t\t\t\t\tparseEffectParameterTextureExtraTechnique( child, data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTextureExtraTechnique( xml, data ) {\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'repeatU':\r\n\t\t\t\t\tcase 'repeatV':\r\n\t\t\t\t\tcase 'offsetU':\r\n\t\t\t\t\tcase 'offsetV':\r\n\t\t\t\t\t\tdata.technique[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'wrapU':\r\n\t\t\t\t\tcase 'wrapV':\r\n\r\n\t\t\t\t\t\t// some files have values for wrapU/wrapV which become NaN via parseInt\r\n\r\n\t\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\r\n\r\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = 1;\r\n\r\n\t\t\t\t\t\t} else if ( child.textContent.toUpperCase() === 'FALSE' ) {\r\n\r\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = 0;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tdata.technique[ child.nodeName ] = parseInt( child.textContent );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildEffect( data ) {\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getEffect( id ) {\r\n\r\n\t\t\treturn getBuild( library.effects[ id ], buildEffect );\r\n\r\n\t\t}\r\n\r\n\t\t// material\r\n\r\n\t\tfunction parseMaterial( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' )\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'instance_effect':\r\n\t\t\t\t\t\tdata.url = parseId( child.getAttribute( 'url' ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.materials[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildMaterial( data ) {\r\n\r\n\t\t\tvar effect = getEffect( data.url );\r\n\t\t\tvar technique = effect.profile.technique;\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tswitch ( technique.type ) {\r\n\r\n\t\t\t\tcase 'phong':\r\n\t\t\t\tcase 'blinn':\r\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'lambert':\r\n\t\t\t\t\tmaterial = new THREE.MeshLambertMaterial();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmaterial = new THREE.MeshBasicMaterial();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.name = data.name;\r\n\r\n\t\t\tfunction getTexture( textureObject ) {\r\n\r\n\t\t\t\tvar sampler = effect.profile.samplers[ textureObject.id ];\r\n\r\n\t\t\t\tif ( sampler !== undefined ) {\r\n\r\n\t\t\t\t\tvar surface = effect.profile.surfaces[ sampler.source ];\r\n\r\n\t\t\t\t\tvar texture = textureLoader.load( getImage( surface.init_from ) );\r\n\r\n\t\t\t\t\tvar extra = textureObject.extra;\r\n\r\n\t\t\t\t\tif ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {\r\n\r\n\t\t\t\t\t\tvar technique = extra.technique;\r\n\r\n\t\t\t\t\t\ttexture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\r\n\t\t\t\t\t\ttexture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\ttexture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );\r\n\t\t\t\t\t\ttexture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttexture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\t\ttexture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn texture;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.error( 'ColladaLoader: Undefined sampler', textureObject.id );\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parameters = technique.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvar parameter = parameters[ key ];\r\n\r\n\t\t\t\tswitch ( key ) {\r\n\r\n\t\t\t\t\tcase 'diffuse':\r\n\t\t\t\t\t\tif ( parameter.color ) material.color.fromArray( parameter.color );\r\n\t\t\t\t\t\tif ( parameter.texture ) material.map = getTexture( parameter.texture );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specular':\r\n\t\t\t\t\t\tif ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );\r\n\t\t\t\t\t\tif ( parameter.texture ) material.specularMap = getTexture( parameter.texture );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shininess':\r\n\t\t\t\t\t\tif ( parameter.float && material.shininess )\r\n\t\t\t\t\t\t\tmaterial.shininess = parameter.float;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'emission':\r\n\t\t\t\t\t\tif ( parameter.color && material.emissive )\r\n\t\t\t\t\t\t\tmaterial.emissive.fromArray( parameter.color );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\t\t// if ( parameter.texture ) material.alphaMap = getTexture( parameter.texture );\r\n\t\t\t\t\t\tmaterial.transparent = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tif ( parameter.float !== undefined ) material.opacity = parameter.float;\r\n\t\t\t\t\t\tmaterial.transparent = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getMaterial( id ) {\r\n\r\n\t\t\treturn getBuild( library.materials[ id ], buildMaterial );\r\n\r\n\t\t}\r\n\r\n\t\t// camera\r\n\r\n\t\tfunction parseCamera( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' )\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'optics':\r\n\t\t\t\t\t\tdata.optics = parseCameraOptics( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.cameras[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraOptics( xml ) {\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\treturn parseCameraTechnique( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {};\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'perspective':\r\n\t\t\t\t\tcase 'orthographic':\r\n\r\n\t\t\t\t\t\tdata.technique = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseCameraParameters( child );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'xfov':\r\n\t\t\t\t\tcase 'yfov':\r\n\t\t\t\t\tcase 'xmag':\r\n\t\t\t\t\tcase 'ymag':\r\n\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildCamera( data ) {\r\n\r\n\t\t\tvar camera;\r\n\r\n\t\t\tswitch ( data.optics.technique ) {\r\n\r\n\t\t\t\tcase 'perspective':\r\n\t\t\t\t\tcamera = new THREE.PerspectiveCamera(\r\n\t\t\t\t\t\tdata.optics.parameters.yfov,\r\n\t\t\t\t\t\tdata.optics.parameters.aspect_ratio,\r\n\t\t\t\t\t\tdata.optics.parameters.znear,\r\n\t\t\t\t\t\tdata.optics.parameters.zfar\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'orthographic':\r\n\t\t\t\t\tvar ymag = data.optics.parameters.ymag;\r\n\t\t\t\t\tvar xmag = data.optics.parameters.xmag;\r\n\t\t\t\t\tvar aspectRatio = data.optics.parameters.aspect_ratio;\r\n\r\n\t\t\t\t\txmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;\r\n\t\t\t\t\tymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;\r\n\r\n\t\t\t\t\txmag *= 0.5;\r\n\t\t\t\t\tymag *= 0.5;\r\n\r\n\t\t\t\t\tcamera = new THREE.OrthographicCamera(\r\n\t\t\t\t\t\t- xmag, xmag, ymag, - ymag, // left, right, top, bottom\r\n\t\t\t\t\t\tdata.optics.parameters.znear,\r\n\t\t\t\t\t\tdata.optics.parameters.zfar\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcamera = new THREE.PerspectiveCamera();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcamera.name = data.name;\r\n\r\n\t\t\treturn camera;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getCamera( id ) {\r\n\r\n\t\t\treturn getBuild( library.cameras[ id ], buildCamera );\r\n\r\n\t\t}\r\n\r\n\t\t// light\r\n\r\n\t\tfunction parseLight( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\tdata = parseLightTechnique( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.lights[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseLightTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'directional':\r\n\t\t\t\t\tcase 'point':\r\n\t\t\t\t\tcase 'spot':\r\n\t\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\t\tdata.technique = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseLightParameters( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseLightParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'color':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.color = new THREE.Color().fromArray( array );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'falloff_angle':\r\n\t\t\t\t\t\tdata.falloffAngle = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'quadratic_attenuation':\r\n\t\t\t\t\t\tvar f = parseFloat( child.textContent );\r\n\t\t\t\t\t\tdata.distance = f ? Math.sqrt( 1 / f ) : 0;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildLight( data ) {\r\n\r\n\t\t\tvar light;\r\n\r\n\t\t\tswitch ( data.technique ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\t\tlight = new THREE.DirectionalLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'point':\r\n\t\t\t\t\tlight = new THREE.PointLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\t\tlight = new THREE.SpotLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\t\tlight = new THREE.AmbientLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.parameters.color ) light.color.copy( data.parameters.color );\r\n\t\t\tif ( data.parameters.distance ) light.distance = data.parameters.distance;\r\n\r\n\t\t\treturn light;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getLight( id ) {\r\n\r\n\t\t\treturn getBuild( library.lights[ id ], buildLight );\r\n\r\n\t\t}\r\n\r\n\t\t// geometry\r\n\r\n\t\tfunction parseGeometry( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\tsources: {},\r\n\t\t\t\tvertices: {},\r\n\t\t\t\tprimitives: []\r\n\t\t\t};\r\n\r\n\t\t\tvar mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\r\n\r\n\t\t\tfor ( var i = 0; i < mesh.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = mesh.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tvar id = child.getAttribute( 'id' );\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tdata.sources[ id ] = parseSource( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vertices':\r\n\t\t\t\t\t\t// data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\r\n\t\t\t\t\t\tdata.vertices = parseGeometryVertices( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'polygons':\r\n\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Unsupported primitive type: ', child.nodeName );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'lines':\r\n\t\t\t\t\tcase 'linestrips':\r\n\t\t\t\t\tcase 'polylist':\r\n\t\t\t\t\tcase 'triangles':\r\n\t\t\t\t\t\tdata.primitives.push( parseGeometryPrimitive( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.geometries[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseSource( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tarray: [],\r\n\t\t\t\tstride: 3\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'float_array':\r\n\t\t\t\t\t\tdata.array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Name_array':\r\n\t\t\t\t\t\tdata.array = parseStrings( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\tvar accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\r\n\r\n\t\t\t\t\t\tif ( accessor !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tdata.stride = parseInt( accessor.getAttribute( 'stride' ) );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseGeometryVertices( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tdata[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseGeometryPrimitive( xml ) {\r\n\r\n\t\t\tvar primitive = {\r\n\t\t\t\ttype: xml.nodeName,\r\n\t\t\t\tmaterial: xml.getAttribute( 'material' ),\r\n\t\t\t\tcount: parseInt( xml.getAttribute( 'count' ) ),\r\n\t\t\t\tinputs: {},\r\n\t\t\t\tstride: 0\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'input':\r\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\r\n\t\t\t\t\t\tvar offset = parseInt( child.getAttribute( 'offset' ) );\r\n\t\t\t\t\t\tprimitive.inputs[ semantic ] = { id: id, offset: offset };\r\n\t\t\t\t\t\tprimitive.stride = Math.max( primitive.stride, offset + 1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vcount':\r\n\t\t\t\t\t\tprimitive.vcount = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\tprimitive.p = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn primitive;\r\n\r\n\t\t}\r\n\r\n\t\tfunction groupPrimitives( primitives ) {\r\n\r\n\t\t\tvar build = {};\r\n\r\n\t\t\tfor ( var i = 0; i < primitives.length; i ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\tif ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];\r\n\r\n\t\t\t\tbuild[ primitive.type ].push( primitive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometry( data ) {\r\n\r\n\t\t\tvar build = {};\r\n\r\n\t\t\tvar sources = data.sources;\r\n\t\t\tvar vertices = data.vertices;\r\n\t\t\tvar primitives = data.primitives;\r\n\r\n\t\t\tif ( primitives.length === 0 ) return {};\r\n\r\n\t\t\t// our goal is to create one buffer geoemtry for a single type of primitives\r\n\t\t\t// first, we group all primitives by their type\r\n\r\n\t\t\tvar groupedPrimitives = groupPrimitives( primitives );\r\n\r\n\t\t\tfor ( var type in groupedPrimitives ) {\r\n\r\n\t\t\t\t// second, we create for each type of primitives (polylist,triangles or lines) a buffer geometry\r\n\r\n\t\t\t\tbuild[ type ] = buildGeometryType( groupedPrimitives[ type ], sources, vertices );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometryType( primitives, sources, vertices ) {\r\n\r\n\t\t\tvar build = {};\r\n\r\n\t\t\tvar position = { array: [], stride: 0 };\r\n\t\t\tvar normal = { array: [], stride: 0 };\r\n\t\t\tvar uv = { array: [], stride: 0 };\r\n\t\t\tvar color = { array: [], stride: 0 };\r\n\r\n\t\t\tvar skinIndex = { array: [], stride: 4 };\r\n\t\t\tvar skinWeight = { array: [], stride: 4 };\r\n\r\n\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tvar materialKeys = [];\r\n\r\n\t\t\tvar start = 0, count = 0;\r\n\r\n\t\t\tfor ( var p = 0; p < primitives.length; p ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ p ];\r\n\t\t\t\tvar inputs = primitive.inputs;\r\n\t\t\t\tvar triangleCount = 1;\r\n\r\n\t\t\t\tif ( primitive.vcount && primitive.vcount[ 0 ] === 4 ) {\r\n\r\n\t\t\t\t\ttriangleCount = 2; // one quad -> two triangles\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// groups\r\n\r\n\t\t\t\tif ( primitive.type === 'lines' || primitive.type === 'linestrips' ) {\r\n\r\n\t\t\t\t\tcount = primitive.count * 2;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcount = primitive.count * 3 * triangleCount;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.addGroup( start, count, p );\r\n\t\t\t\tstart += count;\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tif ( primitive.material ) {\r\n\r\n\t\t\t\t\tmaterialKeys.push( primitive.material );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// geometry data\r\n\r\n\t\t\t\tfor ( var name in inputs ) {\r\n\r\n\t\t\t\t\tvar input = inputs[ name ];\r\n\r\n\t\t\t\t\tswitch ( name )\t{\r\n\r\n\t\t\t\t\t\tcase 'VERTEX':\r\n\t\t\t\t\t\t\tfor ( var key in vertices ) {\r\n\r\n\t\t\t\t\t\t\t\tvar id = vertices[ key ];\r\n\r\n\t\t\t\t\t\t\t\tswitch ( key ) {\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'POSITION':\r\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, position.array );\r\n\t\t\t\t\t\t\t\t\t\tposition.stride = sources[ id ].stride;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( sources.skinWeights && sources.skinIndices ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );\r\n\t\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'NORMAL':\r\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, normal.array );\r\n\t\t\t\t\t\t\t\t\t\tnormal.stride = sources[ id ].stride;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'COLOR':\r\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, color.array );\r\n\t\t\t\t\t\t\t\t\t\tcolor.stride = sources[ id ].stride;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\r\n\t\t\t\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ id ], input.offset, uv.array );\r\n\t\t\t\t\t\t\t\t\t\tuv.stride = sources[ id ].stride;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'NORMAL':\r\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );\r\n\t\t\t\t\t\t\tnormal.stride = sources[ input.id ].stride;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'COLOR':\r\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, color.array );\r\n\t\t\t\t\t\t\tcolor.stride = sources[ input.id ].stride;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'TEXCOORD':\r\n\t\t\t\t\t\t\tbuildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );\r\n\t\t\t\t\t\t\tuv.stride = sources[ input.id ].stride;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build geometry\r\n\r\n\t\t\tif ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );\r\n\t\t\tif ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );\r\n\t\t\tif ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );\r\n\t\t\tif ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );\r\n\r\n\t\t\tif ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );\r\n\t\t\tif ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );\r\n\r\n\t\t\tbuild.data = geometry;\r\n\t\t\tbuild.type = primitives[ 0 ].type;\r\n\t\t\tbuild.materialKeys = materialKeys;\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometryData( primitive, source, offset, array ) {\r\n\r\n\t\t\tvar indices = primitive.p;\r\n\t\t\tvar stride = primitive.stride;\r\n\t\t\tvar vcount = primitive.vcount;\r\n\r\n\t\t\tfunction pushVector( i ) {\r\n\r\n\t\t\t\tvar index = indices[ i + offset ] * sourceStride;\r\n\t\t\t\tvar length = index + sourceStride;\r\n\r\n\t\t\t\tfor ( ; index < length; index ++ ) {\r\n\r\n\t\t\t\t\tarray.push( sourceArray[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxcount = 0;\r\n\r\n\t\t\tvar sourceArray = source.array;\r\n\t\t\tvar sourceStride = source.stride;\r\n\r\n\t\t\tif ( primitive.vcount !== undefined ) {\r\n\r\n\t\t\t\tvar index = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, l = vcount.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar count = vcount[ i ];\r\n\r\n\t\t\t\t\tif ( count === 4 ) {\r\n\r\n\t\t\t\t\t\tvar a = index + stride * 0;\r\n\t\t\t\t\t\tvar b = index + stride * 1;\r\n\t\t\t\t\t\tvar c = index + stride * 2;\r\n\t\t\t\t\t\tvar d = index + stride * 3;\r\n\r\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( d );\r\n\t\t\t\t\t\tpushVector( b ); pushVector( c ); pushVector( d );\r\n\r\n\t\t\t\t\t} else if ( count === 3 ) {\r\n\r\n\t\t\t\t\t\tvar a = index + stride * 0;\r\n\t\t\t\t\t\tvar b = index + stride * 1;\r\n\t\t\t\t\t\tvar c = index + stride * 2;\r\n\r\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( c );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmaxcount = Math.max( maxcount, count );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tindex += stride * count;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( maxcount > 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( 'ColladaLoader: Geometry has faces with more than 4 vertices.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += stride ) {\r\n\r\n\t\t\t\t\tpushVector( i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction getGeometry( id ) {\r\n\r\n\t\t\treturn getBuild( library.geometries[ id ], buildGeometry );\r\n\r\n\t\t}\r\n\r\n\t\t// kinematics\r\n\r\n\t\tfunction parseKinematicsModel( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\r\n\t\t\t\tjoints: {},\r\n\t\t\t\tlinks: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\tparseKinematicsTechniqueCommon( child, data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildKinematicsModel( data ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getKinematicsModel( id ) {\r\n\r\n\t\t\treturn getBuild( library.kinematicsModels[ id ], buildKinematicsModel );\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsTechniqueCommon( xml, data ) {\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'joint':\r\n\t\t\t\t\t\tdata.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'link':\r\n\t\t\t\t\t\tdata.links.push( parseKinematicsLink( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsJoint( xml ) {\r\n\r\n\t\t\tvar data;\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'prismatic':\r\n\t\t\t\t\tcase 'revolute':\r\n\t\t\t\t\t\tdata = parseKinematicsJointParameter( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsJointParameter( xml, data ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\r\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\r\n\t\t\t\taxis: new THREE.Vector3(),\r\n\t\t\t\tlimits: {\r\n\t\t\t\t\tmin: 0,\r\n\t\t\t\t\tmax: 0\r\n\t\t\t\t},\r\n\t\t\t\ttype: xml.nodeName,\r\n\t\t\t\tstatic: false,\r\n\t\t\t\tzeroPosition: 0,\r\n\t\t\t\tmiddlePosition: 0\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'axis':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.axis.fromArray( array );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'limits':\r\n\t\t\t\t\t\tvar max = child.getElementsByTagName( 'max' )[ 0 ];\r\n\t\t\t\t\t\tvar min = child.getElementsByTagName( 'min' )[ 0 ];\r\n\r\n\t\t\t\t\t\tdata.limits.max = parseFloat( max.textContent );\r\n\t\t\t\t\t\tdata.limits.min = parseFloat( min.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// if min is equal to or greater than max, consider the joint static\r\n\r\n\t\t\tif ( data.limits.min >= data.limits.max ) {\r\n\r\n\t\t\t\tdata.static = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// calculate middle position\r\n\r\n\t\t\tdata.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsLink( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\r\n\t\t\t\tname: xml.getAttribute( 'name' ) || '',\r\n\t\t\t\tattachments: [],\r\n\t\t\t\ttransforms: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'attachment_full':\r\n\t\t\t\t\t\tdata.attachments.push( parseKinematicsAttachment( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tdata.transforms.push( parseKinematicsTransform( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsAttachment( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tjoint: xml.getAttribute( 'joint' ).split( '/' ).pop(),\r\n\t\t\t\ttransforms: [],\r\n\t\t\t\tlinks: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'link':\r\n\t\t\t\t\t\tdata.links.push( parseKinematicsLink( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tdata.transforms.push( parseKinematicsTransform( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsTransform( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\ttype: xml.nodeName\r\n\t\t\t};\r\n\r\n\t\t\tvar array = parseFloats( xml.textContent );\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'matrix':\r\n\t\t\t\t\tdata.obj = new THREE.Matrix4();\r\n\t\t\t\t\tdata.obj.fromArray( array ).transpose();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\t\tdata.obj = new THREE.Vector3();\r\n\t\t\t\t\tdata.obj.fromArray( array );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\t\tdata.obj = new THREE.Vector3();\r\n\t\t\t\t\tdata.obj.fromArray( array );\r\n\t\t\t\t\tdata.angle = THREE.Math.degToRad( array[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsScene( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tbindJointAxis: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'bind_joint_axis':\r\n\t\t\t\t\t\tdata.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseKinematicsBindJointAxis( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\ttarget: xml.getAttribute( 'target' ).split( '/' ).pop()\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'axis':\r\n\t\t\t\t\t\tvar param = child.getElementsByTagName( 'param' )[ 0 ];\r\n\t\t\t\t\t\tdata.axis = param.textContent;\r\n\t\t\t\t\t\tvar tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];\r\n\t\t\t\t\t\tdata.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildKinematicsScene( data ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getKinematicsScene( id ) {\r\n\r\n\t\t\treturn getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );\r\n\r\n\t\t}\r\n\r\n\t\tfunction setupKinematics() {\r\n\r\n\t\t\tvar kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];\r\n\t\t\tvar kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];\r\n\t\t\tvar visualSceneId = Object.keys( library.visualScenes )[ 0 ];\r\n\r\n\t\t\tif ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;\r\n\r\n\t\t\tvar kinematicsModel = getKinematicsModel( kinematicsModelId );\r\n\t\t\tvar kinematicsScene = getKinematicsScene( kinematicsSceneId );\r\n\t\t\tvar visualScene = getVisualScene( visualSceneId );\r\n\r\n\t\t\tvar bindJointAxis = kinematicsScene.bindJointAxis;\r\n\t\t\tvar jointMap = {};\r\n\r\n\t\t\tfor ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar axis = bindJointAxis[ i ];\r\n\r\n\t\t\t\t// the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\r\n\r\n\t\t\t\tvar targetElement = collada.querySelector( '[sid=\"' + axis.target + '\"]' );\r\n\r\n\t\t\t\tif ( targetElement ) {\r\n\r\n\t\t\t\t\t// get the parent of the transfrom element\r\n\r\n\t\t\t\t\tvar parentVisualElement = targetElement.parentElement;\r\n\r\n\t\t\t\t\t// connect the joint of the kinematics model with the element in the visual scene\r\n\r\n\t\t\t\t\tconnect( axis.jointIndex, parentVisualElement );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction connect( jointIndex, visualElement ) {\r\n\r\n\t\t\t\tvar visualElementName = visualElement.getAttribute( 'name' );\r\n\t\t\t\tvar joint = kinematicsModel.joints[ jointIndex ];\r\n\r\n\t\t\t\tvisualScene.traverse( function ( object ) {\r\n\r\n\t\t\t\t\tif ( object.name === visualElementName ) {\r\n\r\n\t\t\t\t\t\tjointMap[ jointIndex ] = {\r\n\t\t\t\t\t\t\tobject: object,\r\n\t\t\t\t\t\t\ttransforms: buildTransformList( visualElement ),\r\n\t\t\t\t\t\t\tjoint: joint,\r\n\t\t\t\t\t\t\tposition: joint.zeroPosition\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar m0 = new THREE.Matrix4();\r\n\r\n\t\t\tkinematics = {\r\n\r\n\t\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\r\n\r\n\t\t\t\tgetJointValue: function ( jointIndex ) {\r\n\r\n\t\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\t\treturn jointData.position;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsetJointValue: function ( jointIndex, value ) {\r\n\r\n\t\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\t\tvar joint = jointData.joint;\r\n\r\n\t\t\t\t\t\tif ( value > joint.limits.max || value < joint.limits.min ) {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );\r\n\r\n\t\t\t\t\t\t} else if ( joint.static ) {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Joint ' + jointIndex + ' is static.' );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tvar object = jointData.object;\r\n\t\t\t\t\t\t\tvar axis = joint.axis;\r\n\t\t\t\t\t\t\tvar transforms = jointData.transforms;\r\n\r\n\t\t\t\t\t\t\tmatrix.identity();\r\n\r\n\t\t\t\t\t\t\t// each update, we have to apply all transforms in the correct order\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < transforms.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvar transform = transforms[ i ];\r\n\r\n\t\t\t\t\t\t\t\t// if there is a connection of the transform node with a joint, apply the joint value\r\n\r\n\t\t\t\t\t\t\t\tif ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tswitch ( joint.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'revolute':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeRotationAxis( axis, THREE.Math.degToRad( value ) ) );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Unknown joint type: ' + joint.type );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tswitch ( transform.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( transform.obj );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'scale':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.scale( transform.obj );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tobject.matrix.copy( matrix );\r\n\t\t\t\t\t\t\tobject.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t\t\t\t\tjointMap[ jointIndex ].position = value;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.log( 'ColladaLoader: ' + jointIndex + ' does not exist.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildTransformList( node ) {\r\n\r\n\t\t\tvar transforms = [];\r\n\r\n\t\t\tvar xml = collada.querySelector( '[id=\"' + node.id + '\"]' );\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvar matrix = new THREE.Matrix4().fromArray( array ).transpose();\r\n\t\t\t\t\t\ttransforms.push( {\r\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\r\n\t\t\t\t\t\t\ttype: child.nodeName,\r\n\t\t\t\t\t\t\tobj: matrix\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\tcase 'scale':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvar vector = new THREE.Vector3().fromArray( array );\r\n\t\t\t\t\t\ttransforms.push( {\r\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\r\n\t\t\t\t\t\t\ttype: child.nodeName,\r\n\t\t\t\t\t\t\tobj: vector\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvar vector = new THREE.Vector3().fromArray( array );\r\n\t\t\t\t\t\tvar angle = THREE.Math.degToRad( array[ 3 ] );\r\n\t\t\t\t\t\ttransforms.push( {\r\n\t\t\t\t\t\t\tsid: child.getAttribute( 'sid' ),\r\n\t\t\t\t\t\t\ttype: child.nodeName,\r\n\t\t\t\t\t\t\tobj: vector,\r\n\t\t\t\t\t\t\tangle: angle\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn transforms;\r\n\r\n\t\t}\r\n\r\n\t\t// nodes\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tfunction parseNode( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\ttype: xml.getAttribute( 'type' ),\r\n\t\t\t\tid: xml.getAttribute( 'id' ),\r\n\t\t\t\tsid: xml.getAttribute( 'sid' ),\r\n\t\t\t\tmatrix: new THREE.Matrix4(),\r\n\t\t\t\tnodes: [],\r\n\t\t\t\tinstanceCameras: [],\r\n\t\t\t\tinstanceControllers: [],\r\n\t\t\t\tinstanceLights: [],\r\n\t\t\t\tinstanceGeometries: [],\r\n\t\t\t\tinstanceNodes: [],\r\n\t\t\t\ttransforms: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\t\tif ( child.hasAttribute( 'id' ) ) {\r\n\r\n\t\t\t\t\t\t\tdata.nodes.push( child.getAttribute( 'id' ) );\r\n\t\t\t\t\t\t\tparseNode( child );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_camera':\r\n\t\t\t\t\t\tdata.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_controller':\r\n\t\t\t\t\t\tdata.instanceControllers.push( parseNodeInstance( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_light':\r\n\t\t\t\t\t\tdata.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_geometry':\r\n\t\t\t\t\t\tdata.instanceGeometries.push( parseNodeInstance( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_node':\r\n\t\t\t\t\t\tdata.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.fromArray( array ).transpose() );\r\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvector.fromArray( array );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\r\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvar angle = THREE.Math.degToRad( array[ 3 ] );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\r\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'scale':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.matrix.scale( vector.fromArray( array ) );\r\n\t\t\t\t\t\tdata.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'extra':\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( xml.hasAttribute( 'id' ) ) {\r\n\r\n\t\t\t\tlibrary.nodes[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseNodeInstance( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tid: parseId( xml.getAttribute( 'url' ) ),\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\tskeletons: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'bind_material':\r\n\t\t\t\t\t\tvar instances = child.getElementsByTagName( 'instance_material' );\r\n\r\n\t\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar instance = instances[ j ];\r\n\t\t\t\t\t\t\tvar symbol = instance.getAttribute( 'symbol' );\r\n\t\t\t\t\t\t\tvar target = instance.getAttribute( 'target' );\r\n\r\n\t\t\t\t\t\t\tdata.materials[ symbol ] = parseId( target );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'skeleton':\r\n\t\t\t\t\t\tdata.skeletons.push( parseId( child.textContent ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildSkeleton( skeletons, joints ) {\r\n\r\n\t\t\tvar boneData = [];\r\n\t\t\tvar sortedBoneData = [];\r\n\r\n\t\t\tvar i, j, data;\r\n\r\n\t\t\t// a skeleton can have multiple root bones. collada expresses this\r\n\t\t\t// situtation with multiple \"skeleton\" tags per controller instance\r\n\r\n\t\t\tfor ( i = 0; i < skeletons.length; i ++ ) {\r\n\r\n\t\t\t\tvar skeleton = skeletons[ i ];\r\n\t\t\t\tvar root = getNode( skeleton );\r\n\r\n\t\t\t\t// setup bone data for a single bone hierarchy\r\n\r\n\t\t\t\tbuildBoneHierarchy( root, joints, boneData );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// sort bone data (the order is defined in the corresponding controller)\r\n\r\n\t\t\tfor ( i = 0; i < joints.length; i ++ ) {\r\n\r\n\t\t\t\tfor ( j = 0; j < boneData.length; j ++ ) {\r\n\r\n\t\t\t\t\tdata = boneData[ j ];\r\n\r\n\t\t\t\t\tif ( data.bone.name === joints[ i ].name ) {\r\n\r\n\t\t\t\t\t\tsortedBoneData[ i ] = data;\r\n\t\t\t\t\t\tdata.processed = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// add unprocessed bone data at the end of the list\r\n\r\n\t\t\tfor ( i = 0; i < boneData.length; i ++ ) {\r\n\r\n\t\t\t\tdata = boneData[ i ];\r\n\r\n\t\t\t\tif ( data.processed === false ) {\r\n\r\n\t\t\t\t\tsortedBoneData.push( data );\r\n\t\t\t\t\tdata.processed = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// setup arrays for skeleton creation\r\n\r\n\t\t\tvar bones = [];\r\n\t\t\tvar boneInverses = [];\r\n\r\n\t\t\tfor ( i = 0; i < sortedBoneData.length; i ++ ) {\r\n\r\n\t\t\t\tdata = sortedBoneData[ i ];\r\n\r\n\t\t\t\tbones.push( data.bone );\r\n\t\t\t\tboneInverses.push( data.boneInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new THREE.Skeleton( bones, boneInverses );\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildBoneHierarchy( root, joints, boneData ) {\r\n\r\n\t\t\t// setup bone data from visual scene\r\n\r\n\t\t\troot.traverse( function ( object ) {\r\n\r\n\t\t\t\tif ( object.isBone === true ) {\r\n\r\n\t\t\t\t\tvar boneInverse;\r\n\r\n\t\t\t\t\t// retrieve the boneInverse from the controller data\r\n\r\n\t\t\t\t\tfor ( var i = 0; i < joints.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar joint = joints[ i ];\r\n\r\n\t\t\t\t\t\tif ( joint.name === object.name ) {\r\n\r\n\t\t\t\t\t\t\tboneInverse = joint.boneInverse;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( boneInverse === undefined ) {\r\n\r\n\t\t\t\t\t\t// Unfortunately, there can be joints in the visual scene that are not part of the\r\n\t\t\t\t\t\t// corresponding controller. In this case, we have to create a dummy boneInverse matrix\r\n\t\t\t\t\t\t// for the respective bone. This bone won't affect any vertices, because there are no skin indices\r\n\t\t\t\t\t\t// and weights defined for it. But we still have to add the bone to the sorted bone list in order to\r\n\t\t\t\t\t\t// ensure a correct animation of the model.\r\n\r\n\t\t\t\t\t\t boneInverse = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tboneData.push( { bone: object, boneInverse: boneInverse, processed: false } );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildNode( data ) {\r\n\r\n\t\t\tvar objects = [];\r\n\r\n\t\t\tvar matrix = data.matrix;\r\n\t\t\tvar nodes = data.nodes;\r\n\t\t\tvar type = data.type;\r\n\t\t\tvar instanceCameras = data.instanceCameras;\r\n\t\t\tvar instanceControllers = data.instanceControllers;\r\n\t\t\tvar instanceLights = data.instanceLights;\r\n\t\t\tvar instanceGeometries = data.instanceGeometries;\r\n\t\t\tvar instanceNodes = data.instanceNodes;\r\n\r\n\t\t\t// nodes\r\n\r\n\t\t\tfor ( var i = 0, l = nodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getNode( nodes[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// instance cameras\r\n\r\n\t\t\tfor ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getCamera( instanceCameras[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// instance controllers\r\n\r\n\t\t\tfor ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar instance = instanceControllers[ i ];\r\n\t\t\t\tvar controller = getController( instance.id );\r\n\t\t\t\tvar geometries = getGeometry( controller.id );\r\n\t\t\t\tvar newObjects = buildObjects( geometries, instance.materials );\r\n\r\n\t\t\t\tvar skeletons = instance.skeletons;\r\n\t\t\t\tvar joints = controller.skin.joints;\r\n\r\n\t\t\t\tvar skeleton = buildSkeleton( skeletons, joints );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar object = newObjects[ j ];\r\n\r\n\t\t\t\t\tif ( object.isSkinnedMesh ) {\r\n\r\n\t\t\t\t\t\tobject.bind( skeleton, controller.skin.bindMatrix );\r\n\t\t\t\t\t\tobject.normalizeSkinWeights();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// instance lights\r\n\r\n\t\t\tfor ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getLight( instanceLights[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// instance geometries\r\n\r\n\t\t\tfor ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar instance = instanceGeometries[ i ];\r\n\r\n\t\t\t\t// a single geometry instance in collada can lead to multiple object3Ds.\r\n\t\t\t\t// this is the case when primitives are combined like triangles and lines\r\n\r\n\t\t\t\tvar geometries = getGeometry( instance.id );\r\n\t\t\t\tvar newObjects = buildObjects( geometries, instance.materials );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tobjects.push( newObjects[ j ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// instance nodes\r\n\r\n\t\t\tfor ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getNode( instanceNodes[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tif ( nodes.length === 0 && objects.length === 1 ) {\r\n\r\n\t\t\t\tobject = objects[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();\r\n\r\n\t\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\r\n\r\n\t\t\t\t\tobject.add( objects[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.name = ( type === 'JOINT' ) ? data.sid : data.name;\r\n\t\t\tobject.matrix.copy( matrix );\r\n\t\t\tobject.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t\tfunction resolveMaterialBinding( keys, instanceMaterials ) {\r\n\r\n\t\t\tvar materials = [];\r\n\r\n\t\t\tfor ( var i = 0, l = keys.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar id = instanceMaterials[ keys[ i ] ];\r\n\t\t\t\tmaterials.push( getMaterial( id ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn materials;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildObjects( geometries, instanceMaterials ) {\r\n\r\n\t\t\tvar objects = [];\r\n\r\n\t\t\tfor ( var type in geometries ) {\r\n\r\n\t\t\t\tvar geometry = geometries[ type ];\r\n\r\n\t\t\t\tvar materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );\r\n\r\n\t\t\t\t// handle case if no materials are defined\r\n\r\n\t\t\t\tif ( materials.length === 0 ) {\r\n\r\n\t\t\t\t\tif ( type === 'lines' || type === 'linestrips' ) {\r\n\r\n\t\t\t\t\t\tmaterials.push( new THREE.LineBasicMaterial() );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmaterials.push( new THREE.MeshPhongMaterial() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// regard skinning\r\n\r\n\t\t\t\tvar skinning = ( geometry.data.attributes.skinIndex !== undefined );\r\n\r\n\t\t\t\tif ( skinning ) {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tmaterials[ i ].skinning = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// choose between a single or multi materials (material array)\r\n\r\n\t\t\t\tvar material = ( materials.length === 1 ) ? materials[ 0 ] : materials;\r\n\r\n\t\t\t\t// now create a specific 3D object\r\n\r\n\t\t\t\tvar object;\r\n\r\n\t\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t\tcase 'lines':\r\n\t\t\t\t\t\tobject = new THREE.LineSegments( geometry.data, material );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'linestrips':\r\n\t\t\t\t\t\tobject = new THREE.Line( geometry.data, material );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'triangles':\r\n\t\t\t\t\tcase 'polylist':\r\n\t\t\t\t\t\tif ( skinning ) {\r\n\r\n\t\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry.data, material );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tobject = new THREE.Mesh( geometry.data, material );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn objects;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNode( id ) {\r\n\r\n\t\t\treturn getBuild( library.nodes[ id ], buildNode );\r\n\r\n\t\t}\r\n\r\n\t\t// visual scenes\r\n\r\n\t\tfunction parseVisualScene( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\tchildren: []\r\n\t\t\t};\r\n\r\n\t\t\tvar elements = getElementsByTagName( xml, 'node' );\r\n\r\n\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\r\n\r\n\t\t\t\tdata.children.push( parseNode( elements[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.visualScenes[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildVisualScene( data ) {\r\n\r\n\t\t\tvar group = new THREE.Group();\r\n\t\t\tgroup.name = data.name;\r\n\r\n\t\t\tvar children = data.children;\r\n\r\n\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = children[ i ];\r\n\r\n\t\t\t\tif ( child.id === null ) {\r\n\r\n\t\t\t\t\tgroup.add( buildNode( child ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// if there is an ID, let's try to get the finished build (e.g. joints are already build)\r\n\r\n\t\t\t\t\tgroup.add( getNode( child.id ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn group;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getVisualScene( id ) {\r\n\r\n\t\t\treturn getBuild( library.visualScenes[ id ], buildVisualScene );\r\n\r\n\t\t}\r\n\r\n\t\t// scenes\r\n\r\n\t\tfunction parseScene( xml ) {\r\n\r\n\t\t\tvar instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\r\n\t\t\treturn getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction setupAnimations() {\r\n\r\n\t\t\tvar clips = library.clips;\r\n\r\n\t\t\tif ( isEmpty( clips ) === true ) {\r\n\r\n\t\t\t\tif ( isEmpty( library.animations ) === false ) {\r\n\r\n\t\t\t\t\t// if there are animations but no clips, we create a default clip for playback\r\n\r\n\t\t\t\t\tvar tracks = [];\r\n\r\n\t\t\t\t\tfor ( var id in library.animations ) {\r\n\r\n\t\t\t\t\t\tvar animationTracks = getAnimation( id );\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = animationTracks.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\ttracks.push( animationTracks[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var id in clips ) {\r\n\r\n\t\t\t\t\tanimations.push( getAnimationClip( id ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconsole.time( 'ColladaLoader' );\r\n\r\n\t\tif ( text.length === 0 ) {\r\n\r\n\t\t\treturn { scene: new THREE.Scene() };\r\n\r\n\t\t}\r\n\r\n\t\tconsole.time( 'ColladaLoader: DOMParser' );\r\n\r\n\t\tvar xml = new DOMParser().parseFromString( text, 'application/xml' );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: DOMParser' );\r\n\r\n\t\tvar collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\r\n\r\n\t\t// metadata\r\n\r\n\t\tvar version = collada.getAttribute( 'version' );\r\n\t\tconsole.log( 'ColladaLoader: File version', version );\r\n\r\n\t\tvar asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\r\n\t\tvar textureLoader = new THREE.TextureLoader( this.manager );\r\n\t\ttextureLoader.setPath( path ).setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t//\r\n\r\n\t\tvar animations = [];\r\n\t\tvar kinematics = {};\r\n\r\n\t\t//\r\n\r\n\t\tvar library = {\r\n\t\t\tanimations: {},\r\n\t\t\tclips: {},\r\n\t\t\tcontrollers: {},\r\n\t\t\timages: {},\r\n\t\t\teffects: {},\r\n\t\t\tmaterials: {},\r\n\t\t\tcameras: {},\r\n\t\t\tlights: {},\r\n\t\t\tgeometries: {},\r\n\t\t\tnodes: {},\r\n\t\t\tvisualScenes: {},\r\n\t\t\tkinematicsModels: {},\r\n\t\t\tkinematicsScenes: {}\r\n\t\t};\r\n\r\n\t\tconsole.time( 'ColladaLoader: Parse' );\r\n\r\n\t\tparseLibrary( collada, 'library_animations', 'animation', parseAnimation );\r\n\t\tparseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );\r\n\t\tparseLibrary( collada, 'library_controllers', 'controller', parseController );\r\n\t\tparseLibrary( collada, 'library_images', 'image', parseImage );\r\n\t\tparseLibrary( collada, 'library_effects', 'effect', parseEffect );\r\n\t\tparseLibrary( collada, 'library_materials', 'material', parseMaterial );\r\n\t\tparseLibrary( collada, 'library_cameras', 'camera', parseCamera );\r\n\t\tparseLibrary( collada, 'library_lights', 'light', parseLight );\r\n\t\tparseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\r\n\t\tparseLibrary( collada, 'library_nodes', 'node', parseNode );\r\n\t\tparseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\r\n\t\tparseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );\r\n\t\tparseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: Parse' );\r\n\r\n\t\tconsole.time( 'ColladaLoader: Build' );\r\n\r\n\t\tbuildLibrary( library.animations, buildAnimation );\r\n\t\tbuildLibrary( library.clips, buildAnimationClip );\r\n\t\tbuildLibrary( library.controllers, buildController );\r\n\t\tbuildLibrary( library.images, buildImage );\r\n\t\tbuildLibrary( library.effects, buildEffect );\r\n\t\tbuildLibrary( library.materials, buildMaterial );\r\n\t\tbuildLibrary( library.cameras, buildCamera );\r\n\t\tbuildLibrary( library.lights, buildLight );\r\n\t\tbuildLibrary( library.geometries, buildGeometry );\r\n\t\tbuildLibrary( library.visualScenes, buildVisualScene );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: Build' );\r\n\r\n\t\tsetupAnimations();\r\n\t\tsetupKinematics();\r\n\r\n\t\tvar scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\r\n\r\n\t\tif ( asset.upAxis === 'Z_UP' ) {\r\n\r\n\t\t\tscene.rotation.x = - Math.PI / 2;\r\n\r\n\t\t}\r\n\r\n\t\tscene.scale.multiplyScalar( asset.unit );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader' );\r\n\r\n\t\treturn {\r\n\t\t\tanimations: animations,\r\n\t\t\tkinematics: kinematics,\r\n\t\t\tlibrary: library,\r\n\t\t\tscene: scene\r\n\t\t};\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { ColladaLoader }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ColladaLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\r\n\r\nconst DDSLoader = function () {\r\n\r\n\tthis._parser = DDSLoader.parse;\r\n\r\n};\r\n\r\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\r\nDDSLoader.prototype.constructor = DDSLoader;\r\n\r\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\r\n\r\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\r\n\r\n\t// Adapted from @toji's DDS utils\r\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\r\n\r\n\t// All values and structures referenced from:\r\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\r\n\r\n\tvar DDS_MAGIC = 0x20534444;\r\n\r\n\tvar DDSD_CAPS = 0x1,\r\n\t\tDDSD_HEIGHT = 0x2,\r\n\t\tDDSD_WIDTH = 0x4,\r\n\t\tDDSD_PITCH = 0x8,\r\n\t\tDDSD_PIXELFORMAT = 0x1000,\r\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\r\n\t\tDDSD_LINEARSIZE = 0x80000,\r\n\t\tDDSD_DEPTH = 0x800000;\r\n\r\n\tvar DDSCAPS_COMPLEX = 0x8,\r\n\t\tDDSCAPS_MIPMAP = 0x400000,\r\n\t\tDDSCAPS_TEXTURE = 0x1000;\r\n\r\n\tvar DDSCAPS2_CUBEMAP = 0x200,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\r\n\t\tDDSCAPS2_VOLUME = 0x200000;\r\n\r\n\tvar DDPF_ALPHAPIXELS = 0x1,\r\n\t\tDDPF_ALPHA = 0x2,\r\n\t\tDDPF_FOURCC = 0x4,\r\n\t\tDDPF_RGB = 0x40,\r\n\t\tDDPF_YUV = 0x200,\r\n\t\tDDPF_LUMINANCE = 0x20000;\r\n\r\n\tfunction fourCCToInt32( value ) {\r\n\r\n\t\treturn value.charCodeAt( 0 ) +\r\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\r\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\r\n\t\t\t( value.charCodeAt( 3 ) << 24 );\r\n\r\n\t}\r\n\r\n\tfunction int32ToFourCC( value ) {\r\n\r\n\t\treturn String.fromCharCode(\r\n\t\t\tvalue & 0xff,\r\n\t\t\t( value >> 8 ) & 0xff,\r\n\t\t\t( value >> 16 ) & 0xff,\r\n\t\t\t( value >> 24 ) & 0xff\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\r\n\r\n\t\tvar dataLength = width * height * 4;\r\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\r\n\t\tvar byteArray = new Uint8Array( dataLength );\r\n\t\tvar dst = 0;\r\n\t\tvar src = 0;\r\n\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\r\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\r\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\r\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn byteArray;\r\n\r\n\t}\r\n\r\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\r\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\r\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\r\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\r\n\r\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\r\n\r\n\t// Offsets into the header array\r\n\r\n\tvar off_magic = 0;\r\n\r\n\tvar off_size = 1;\r\n\tvar off_flags = 2;\r\n\tvar off_height = 3;\r\n\tvar off_width = 4;\r\n\r\n\tvar off_mipmapCount = 7;\r\n\r\n\tvar off_pfFlags = 20;\r\n\tvar off_pfFourCC = 21;\r\n\tvar off_RGBBitCount = 22;\r\n\tvar off_RBitMask = 23;\r\n\tvar off_GBitMask = 24;\r\n\tvar off_BBitMask = 25;\r\n\tvar off_ABitMask = 26;\r\n\r\n\tvar off_caps = 27;\r\n\tvar off_caps2 = 28;\r\n\tvar off_caps3 = 29;\r\n\tvar off_caps4 = 30;\r\n\r\n\t// Parse header\r\n\r\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\r\n\r\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Invalid magic number in DDS header.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tvar blockBytes;\r\n\r\n\tvar fourCC = header[ off_pfFourCC ];\r\n\r\n\tvar isRGBAUncompressed = false;\r\n\r\n\tswitch ( fourCC ) {\r\n\r\n\t\tcase FOURCC_DXT1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT3:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT5:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_ETC1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\r\n\t\t\tif ( header[ off_RGBBitCount ] === 32\r\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\r\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\r\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\r\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000  ) {\r\n\r\n\t\t\t\tisRGBAUncompressed = true;\r\n\t\t\t\tblockBytes = 64;\r\n\t\t\t\tdds.format = THREE.RGBAFormat;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\r\n\t\t\t\treturn dds;\r\n\r\n\t\t\t}\r\n\t}\r\n\r\n\tdds.mipmapCount = 1;\r\n\r\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\r\n\r\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\r\n\r\n\t}\r\n\r\n\tvar caps2 = header[ off_caps2 ];\r\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\r\n\tif ( dds.isCubemap && (\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\r\n\t\t) ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Incomplete cubemap faces' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tdds.width = header[ off_width ];\r\n\tdds.height = header[ off_height ];\r\n\r\n\tvar dataOffset = header[ off_size ] + 4;\r\n\r\n\t// Extract mipmaps buffers\r\n\r\n\tvar faces = dds.isCubemap ? 6 : 1;\r\n\r\n\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\tvar width = dds.width;\r\n\t\tvar height = dds.height;\r\n\r\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\r\n\r\n\t\t\tif ( isRGBAUncompressed ) {\r\n\r\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\r\n\t\t\t\tvar dataLength = byteArray.length;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\r\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\r\n\t\t\tdds.mipmaps.push( mipmap );\r\n\r\n\t\t\tdataOffset += dataLength;\r\n\r\n\t\t\twidth = Math.max( width >> 1, 1 );\r\n\t\t\theight = Math.max( height >> 1, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dds;\r\n\r\n};\r\n\r\nexport { DDSLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/DDSLoader.js","import * as THREE from 'three'\nimport { LoaderUtils } from './LoaderUtils.js'\n\n/**\n* @author Rich Tibbett / https://github.com/richtr\n* @author mrdoob / http://mrdoob.com/\n* @author Tony Parisi / http://www.tonyparisi.com/\n* @author Takahiro / https://github.com/takahirox\n* @author Don McCurdy / https://www.donmccurdy.com\n*/\n\n\n\nfunction GLTFLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n}\n\nGLTFLoader.prototype = {\n\n\tconstructor: GLTFLoader,\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = this.path !== undefined ? this.path : LoaderUtils.extractUrlBase( url );\n\n\t\tvar loader = new THREE.FileLoader( scope.manager );\n\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, path, onLoad, onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError !== undefined ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow e;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tparse: function ( data, path, onLoad, onError ) {\n\n\t\tvar content;\n\t\tvar extensions = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tif ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_LIGHTS ) >= 0 ) {\n\n\t\t\t\textensions[ EXTENSIONS.KHR_LIGHTS ] = new GLTFLightsExtension( json );\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_MATERIALS_COMMON ) >= 0 ) {\n\n\t\t\t\textensions[ EXTENSIONS.KHR_MATERIALS_COMMON ] = new GLTFMaterialsCommonExtension( json );\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ) >= 0 ) {\n\n\t\t\t\textensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.time( 'GLTFLoader' );\n\n\t\tvar parser = new GLTFParser( json, extensions, {\n\n\t\t\tpath: path || this.path || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\tmanager: this.manager\n\n\t\t} );\n\n\t\tparser.parse( function ( scene, scenes, cameras, animations, asset ) {\n\n\t\t\tconsole.timeEnd( 'GLTFLoader' );\n\n\t\t\tvar glTF = {\n\t\t\t\tscene: scene,\n\t\t\t\tscenes: scenes,\n\t\t\t\tcameras: cameras,\n\t\t\t\tanimations: animations,\n\t\t\t\tasset: asset\n\t\t\t};\n\n\t\t\tonLoad( glTF );\n\n\t\t}, onError );\n\n\t}\n\n};\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tvar objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nvar EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_LIGHTS: 'KHR_lights',\n\tKHR_MATERIALS_COMMON: 'KHR_materials_common',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness'\n};\n\n/**\n * Lights Extension\n *\n * Specification: PENDING\n */\nfunction GLTFLightsExtension( json ) {\n\n\tthis.name = EXTENSIONS.KHR_LIGHTS;\n\n\tthis.lights = {};\n\n\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};\n\tvar lights = extension.lights || {};\n\n\tfor ( var lightId in lights ) {\n\n\t\tvar light = lights[ lightId ];\n\t\tvar lightNode;\n\n\t\tvar color = new THREE.Color().fromArray( light.color );\n\n\t\tswitch ( light.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new THREE.DirectionalLight( color );\n\t\t\t\tlightNode.position.set( 0, 0, 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new THREE.PointLight( color );\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new THREE.SpotLight( color );\n\t\t\t\tlightNode.position.set( 0, 0, 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ambient':\n\t\t\t\tlightNode = new THREE.AmbientLight( color );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( lightNode ) {\n\n\t\t\tif ( light.constantAttenuation !== undefined ) {\n\n\t\t\t\tlightNode.intensity = light.constantAttenuation;\n\n\t\t\t}\n\n\t\t\tif ( light.linearAttenuation !== undefined ) {\n\n\t\t\t\tlightNode.distance = 1 / light.linearAttenuation;\n\n\t\t\t}\n\n\t\t\tif ( light.quadraticAttenuation !== undefined ) {\n\n\t\t\t\tlightNode.decay = light.quadraticAttenuation;\n\n\t\t\t}\n\n\t\t\tif ( light.fallOffAngle !== undefined ) {\n\n\t\t\t\tlightNode.angle = light.fallOffAngle;\n\n\t\t\t}\n\n\t\t\tif ( light.fallOffExponent !== undefined ) {\n\n\t\t\t\tconsole.warn( 'GLTFLoader:: light.fallOffExponent not currently supported.' );\n\n\t\t\t}\n\n\t\t\tlightNode.name = light.name || ( 'light_' + lightId );\n\t\t\tthis.lights[ lightId ] = lightNode;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Common Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/Khronos/KHR_materials_common\n */\nfunction GLTFMaterialsCommonExtension( json ) {\n\n\tthis.name = EXTENSIONS.KHR_MATERIALS_COMMON;\n\n}\n\nGLTFMaterialsCommonExtension.prototype.getMaterialType = function ( material ) {\n\n\tvar khrMaterial = material.extensions[ this.name ];\n\n\tswitch ( khrMaterial.type ) {\n\n\t\tcase 'commonBlinn' :\n\t\tcase 'commonPhong' :\n\t\t\treturn THREE.MeshPhongMaterial;\n\n\t\tcase 'commonLambert' :\n\t\t\treturn THREE.MeshLambertMaterial;\n\n\t\tcase 'commonConstant' :\n\t\tdefault :\n\t\t\treturn THREE.MeshBasicMaterial;\n\n\t}\n\n};\n\nGLTFMaterialsCommonExtension.prototype.extendParams = function ( materialParams, material, parser ) {\n\n\tvar khrMaterial = material.extensions[ this.name ];\n\n\tvar pending = [];\n\n\tvar keys = [];\n\n\t// TODO: Currently ignored: 'ambientFactor', 'ambientTexture'\n\tswitch ( khrMaterial.type ) {\n\n\t\tcase 'commonBlinn' :\n\t\tcase 'commonPhong' :\n\t\t\tkeys.push( 'diffuseFactor', 'diffuseTexture', 'specularFactor', 'specularTexture', 'shininessFactor' );\n\t\t\tbreak;\n\n\t\tcase 'commonLambert' :\n\t\t\tkeys.push( 'diffuseFactor', 'diffuseTexture' );\n\t\t\tbreak;\n\n\t\tcase 'commonConstant' :\n\t\tdefault :\n\t\t\tbreak;\n\n\t}\n\n\tvar materialValues = {};\n\n\tkeys.forEach( function ( v ) {\n\n\t\tif ( khrMaterial[ v ] !== undefined ) materialValues[ v ] = khrMaterial[ v ];\n\n\t} );\n\n\tif ( materialValues.diffuseFactor !== undefined ) {\n\n\t\tmaterialParams.color = new THREE.Color().fromArray( materialValues.diffuseFactor );\n\t\tmaterialParams.opacity = materialValues.diffuseFactor[ 3 ];\n\n\t}\n\n\tif ( materialValues.diffuseTexture !== undefined ) {\n\n\t\tpending.push( parser.assignTexture( materialParams, 'map', materialValues.diffuseTexture.index ) );\n\n\t}\n\n\tif ( materialValues.specularFactor !== undefined ) {\n\n\t\tmaterialParams.specular = new THREE.Color().fromArray( materialValues.specularFactor );\n\n\t}\n\n\tif ( materialValues.specularTexture !== undefined ) {\n\n\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', materialValues.specularTexture.index ) );\n\n\t}\n\n\tif ( materialValues.shininessFactor !== undefined ) {\n\n\t\tmaterialParams.shininess = materialValues.shininessFactor;\n\n\t}\n\n\treturn Promise.all( pending );\n\n};\n\n/* BINARY EXTENSION */\n\nvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nfunction GLTFBinaryExtension( data ) {\n\n\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\tthis.content = null;\n\tthis.body = null;\n\n\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\tthis.header = {\n\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\tversion: headerView.getUint32( 4, true ),\n\t\tlength: headerView.getUint32( 8, true )\n\t};\n\n\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\tthrow new Error( 'GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t} else if ( this.header.version < 2.0 ) {\n\n\t\tthrow new Error( 'GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\n\n\t}\n\n\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\tvar chunkIndex = 0;\n\n\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\tchunkIndex += 4;\n\n\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\tchunkIndex += 4;\n\n\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t}\n\n\t\t// Clients must ignore chunks with unknown types.\n\n\t\tchunkIndex += chunkLength;\n\n\t}\n\n\tif ( this.content === null ) {\n\n\t\tthrow new Error( 'addEnvMap: false: JSON content not found.' );\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/Khronos/KHR_materials_pbrSpecularGlossiness\n */\nfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\treturn {\n\n\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\tspecularGlossinessParams: [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t],\n\n\t\tgetMaterialType: function () {\n\n\t\t\treturn THREE.ShaderMaterial;\n\n\t\t},\n\n\t\textendParams: function ( params, material, parser ) {\n\n\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\n\n\t\t\tvar shader = THREE.ShaderLib[ 'standard' ];\n\n\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\t\tvar specularMapParsFragmentChunk = [\n\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t\t'#endif'\n\t\t\t].join( '\\n' );\n\n\t\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t\t'#endif'\n\t\t\t].join( '\\n' );\n\n\t\t\tvar specularMapFragmentChunk = [\n\t\t\t\t'vec3 specularFactor = specular;',\n\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t\t'#endif'\n\t\t\t].join( '\\n' );\n\n\t\t\tvar glossinessMapFragmentChunk = [\n\t\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t\t'#endif'\n\t\t\t].join( '\\n' );\n\n\t\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t\t'PhysicalMaterial material;',\n\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\n\t\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t\t].join( '\\n' );\n\n\t\t\tvar fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( '#include <specularmap_fragment>', '' )\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t\tdelete uniforms.roughness;\n\t\t\tdelete uniforms.metalness;\n\t\t\tdelete uniforms.roughnessMap;\n\t\t\tdelete uniforms.metalnessMap;\n\n\t\t\tuniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };\n\t\t\tuniforms.glossiness = { value: 0.5 };\n\t\t\tuniforms.specularMap = { value: null };\n\t\t\tuniforms.glossinessMap = { value: null };\n\n\t\t\tparams.vertexShader = shader.vertexShader;\n\t\t\tparams.fragmentShader = fragmentShader;\n\t\t\tparams.uniforms = uniforms;\n\t\t\tparams.defines = { 'STANDARD': '' };\n\n\t\t\tparams.color = new THREE.Color( 1.0, 1.0, 1.0 );\n\t\t\tparams.opacity = 1.0;\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\tparams.color.fromArray( array );\n\t\t\t\tparams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );\n\n\t\t\t}\n\n\t\t\tparams.emissive = new THREE.Color( 0.0, 0.0, 0.0 );\n\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\tparams.specular = new THREE.Color( 1.0, 1.0, 1.0 );\n\n\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t}\n\n\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\n\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );\n\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending );\n\n\t\t},\n\n\t\tcreateMaterial: function ( params ) {\n\n\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\n\n\t\t\tvar material = new THREE.ShaderMaterial( {\n\t\t\t\tdefines: params.defines,\n\t\t\t\tvertexShader: params.vertexShader,\n\t\t\t\tfragmentShader: params.fragmentShader,\n\t\t\t\tuniforms: params.uniforms,\n\t\t\t\tfog: true,\n\t\t\t\tlights: true,\n\t\t\t\topacity: params.opacity,\n\t\t\t\ttransparent: params.transparent\n\t\t\t} );\n\n\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\tmaterial.color = params.color;\n\n\t\t\tmaterial.map = params.map === undefined ? null : params.map;\n\n\t\t\tmaterial.lightMap = null;\n\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\n\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\tmaterial.emissive = params.emissive;\n\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\n\n\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\n\t\t\tmaterial.bumpScale = 1;\n\n\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\n\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\n\n\t\t\tmaterial.displacementMap = null;\n\t\t\tmaterial.displacementScale = 1;\n\t\t\tmaterial.displacementBias = 0;\n\n\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\n\t\t\tmaterial.specular = params.specular;\n\n\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\n\t\t\tmaterial.glossiness = params.glossiness;\n\n\t\t\tmaterial.alphaMap = null;\n\n\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\n\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\tmaterial.extensions.derivatives = true;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t/**\n\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\n\t\t * copy only properties it knows about or inherits, and misses many properties that would\n\t\t * normally be defined by MeshStandardMaterial.\n\t\t *\n\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\n\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\n\t\t * AND also updating `.onBeforeRender` on the parent mesh.\n\t\t *\n\t\t * @param  {THREE.ShaderMaterial} source\n\t\t * @return {THREE.ShaderMaterial}\n\t\t */\n\t\tcloneMaterial: function ( source ) {\n\n\t\t\tvar target = source.clone();\n\n\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\tvar params = this.specularGlossinessParams;\n\n\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\n\n\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\n\n\t\t\t}\n\n\t\t\treturn target;\n\n\t\t},\n\n\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\n\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\n\n\t\t\tvar uniforms = material.uniforms;\n\t\t\tvar defines = material.defines;\n\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t\tuniforms.map.value = material.map;\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\t// uv repeat and offset setting priorities\n\t\t\t// 1. color map\n\t\t\t// 2. specular map\n\t\t\t// 3. normal map\n\t\t\t// 4. bump map\n\t\t\t// 5. alpha map\n\t\t\t// 6. emissive map\n\n\t\t\tvar uvScaleMap;\n\n\t\t\tif ( material.map ) {\n\n\t\t\t\tuvScaleMap = material.map;\n\n\t\t\t} else if ( material.specularMap ) {\n\n\t\t\t\tuvScaleMap = material.specularMap;\n\n\t\t\t} else if ( material.displacementMap ) {\n\n\t\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t\t} else if ( material.normalMap ) {\n\n\t\t\t\tuvScaleMap = material.normalMap;\n\n\t\t\t} else if ( material.bumpMap ) {\n\n\t\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t\t} else if ( material.glossinessMap ) {\n\n\t\t\t\tuvScaleMap = material.glossinessMap;\n\n\t\t\t} else if ( material.alphaMap ) {\n\n\t\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t\t} else if ( material.emissiveMap ) {\n\n\t\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t\t// backwards compatibility\n\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t\t}\n\n\t\t\t\tvar offset;\n\t\t\t\tvar repeat;\n\n\t\t\t\tif ( uvScaleMap.matrix !== undefined ) {\n\n\t\t\t\t\t// > r88.\n\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\t\t\toffset = uvScaleMap.offset;\n\t\t\t\t\t\trepeat = uvScaleMap.repeat;\n\t\t\t\t\t\tvar rotation = uvScaleMap.rotation;\n\t\t\t\t\t\tvar center = uvScaleMap.center;\n\n\t\t\t\t\t\tuvScaleMap.matrix.setUvTransform( offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// <= r87. Remove when reasonable.\n\n\t\t\t\t\toffset = uvScaleMap.offset;\n\t\t\t\t\trepeat = uvScaleMap.repeat;\n\n\t\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\t\t\tuniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;\n\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.specular.value.copy( material.specular );\n\t\t\tuniforms.glossiness.value = material.glossiness;\n\n\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\n\n\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\n\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\n\n\t\t\t}\n\n\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\n\n\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\n\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nvar WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nvar WEBGL_TYPE = {\n\t5126: Number,\n\t//35674: THREE.Matrix2,\n\t35675: THREE.Matrix3,\n\t35676: THREE.Matrix4,\n\t35664: THREE.Vector2,\n\t35665: THREE.Vector3,\n\t35666: THREE.Vector4,\n\t35678: THREE.Texture\n};\n\nvar WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nvar WEBGL_FILTERS = {\n\t9728: THREE.NearestFilter,\n\t9729: THREE.LinearFilter,\n\t9984: THREE.NearestMipMapNearestFilter,\n\t9985: THREE.LinearMipMapNearestFilter,\n\t9986: THREE.NearestMipMapLinearFilter,\n\t9987: THREE.LinearMipMapLinearFilter\n};\n\nvar WEBGL_WRAPPINGS = {\n\t33071: THREE.ClampToEdgeWrapping,\n\t33648: THREE.MirroredRepeatWrapping,\n\t10497: THREE.RepeatWrapping\n};\n\nvar WEBGL_TEXTURE_FORMATS = {\n\t6406: THREE.AlphaFormat,\n\t6407: THREE.RGBFormat,\n\t6408: THREE.RGBAFormat,\n\t6409: THREE.LuminanceFormat,\n\t6410: THREE.LuminanceAlphaFormat\n};\n\nvar WEBGL_TEXTURE_DATATYPES = {\n\t5121: THREE.UnsignedByteType,\n\t32819: THREE.UnsignedShort4444Type,\n\t32820: THREE.UnsignedShort5551Type,\n\t33635: THREE.UnsignedShort565Type\n};\n\nvar WEBGL_SIDES = {\n\t1028: THREE.BackSide, // Culling front\n\t1029: THREE.FrontSide // Culling back\n\t//1032: THREE.NoSide   // Culling front and back, what to do?\n};\n\nvar WEBGL_DEPTH_FUNCS = {\n\t512: THREE.NeverDepth,\n\t513: THREE.LessDepth,\n\t514: THREE.EqualDepth,\n\t515: THREE.LessEqualDepth,\n\t516: THREE.GreaterEqualDepth,\n\t517: THREE.NotEqualDepth,\n\t518: THREE.GreaterEqualDepth,\n\t519: THREE.AlwaysDepth\n};\n\nvar WEBGL_BLEND_EQUATIONS = {\n\t32774: THREE.AddEquation,\n\t32778: THREE.SubtractEquation,\n\t32779: THREE.ReverseSubtractEquation\n};\n\nvar WEBGL_BLEND_FUNCS = {\n\t0: THREE.ZeroFactor,\n\t1: THREE.OneFactor,\n\t768: THREE.SrcColorFactor,\n\t769: THREE.OneMinusSrcColorFactor,\n\t770: THREE.SrcAlphaFactor,\n\t771: THREE.OneMinusSrcAlphaFactor,\n\t772: THREE.DstAlphaFactor,\n\t773: THREE.OneMinusDstAlphaFactor,\n\t774: THREE.DstColorFactor,\n\t775: THREE.OneMinusDstColorFactor,\n\t776: THREE.SrcAlphaSaturateFactor\n\t// The followings are not supported by Three.js yet\n\t//32769: CONSTANT_COLOR,\n\t//32770: ONE_MINUS_CONSTANT_COLOR,\n\t//32771: CONSTANT_ALPHA,\n\t//32772: ONE_MINUS_CONSTANT_COLOR\n};\n\nvar WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nvar PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nvar INTERPOLATION = {\n\tCUBICSPLINE: THREE.InterpolateSmooth,\n\tLINEAR: THREE.InterpolateLinear,\n\tSTEP: THREE.InterpolateDiscrete\n};\n\nvar STATES_ENABLES = {\n\t2884: 'CULL_FACE',\n\t2929: 'DEPTH_TEST',\n\t3042: 'BLEND',\n\t3089: 'SCISSOR_TEST',\n\t32823: 'POLYGON_OFFSET_FILL',\n\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\n};\n\nvar ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/* UTILITY FUNCTIONS */\n\nfunction resolveURL( url, path ) {\n\n\t// Invalid URL\n\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t// Absolute URL http://,https://,//\n\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t// Data URI\n\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t// Blob URL\n\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t// Relative URL\n\treturn path + url;\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial() {\n\n\treturn new THREE.MeshStandardMaterial( {\n\t\tcolor: 0xFFFFFF,\n\t\temissive: 0x000000,\n\t\tmetalness: 1,\n\t\troughness: 1,\n\t\ttransparent: false,\n\t\tdepthTest: true,\n\t\tside: THREE.FrontSide\n\t} );\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * TODO: Implement support for morph targets on TANGENT attribute.\n *\n * @param {THREE.Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n * @param {GLTF.Primitive} primitiveDef\n * @param {Array<THREE.BufferAttribute>} accessors\n */\nfunction addMorphTargets( mesh, meshDef, primitiveDef, accessors ) {\n\n\tvar geometry = mesh.geometry;\n\tvar material = mesh.material;\n\n\tvar targets = primitiveDef.targets;\n\tvar morphAttributes = geometry.morphAttributes;\n\n\tmorphAttributes.position = [];\n\tmorphAttributes.normal = [];\n\n\tmaterial.morphTargets = true;\n\n\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tvar target = targets[ i ];\n\t\tvar attributeName = 'morphTarget' + i;\n\n\t\tvar positionAttribute, normalAttribute;\n\n\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t// Three.js morph formula is\n\t\t\t//   position\n\t\t\t//     + weight0 * ( morphTarget0 - position )\n\t\t\t//     + weight1 * ( morphTarget1 - position )\n\t\t\t//     ...\n\t\t\t// while the glTF one is\n\t\t\t//   position\n\t\t\t//     + weight0 * morphTarget0\n\t\t\t//     + weight1 * morphTarget1\n\t\t\t//     ...\n\t\t\t// then adding position to morphTarget.\n\t\t\t// So morphTarget value will depend on mesh's position, then cloning attribute\n\t\t\t// for the case if attribute is shared among two or more meshes.\n\n\t\t\tpositionAttribute = accessors[ target.POSITION ].clone();\n\t\t\tvar position = geometry.attributes.position;\n\n\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\tpositionAttribute.setXYZ(\n\t\t\t\t\tj,\n\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\n\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\n\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t} else if ( geometry.attributes.position ) {\n\n\t\t\t// Copying the original position not to affect the final position.\n\t\t\t// See the formula above.\n\t\t\tpositionAttribute = geometry.attributes.position.clone();\n\n\t\t}\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tpositionAttribute.name = attributeName;\n\t\t\tmorphAttributes.position.push( positionAttribute );\n\n\t\t}\n\n\t\tif ( target.NORMAL !== undefined ) {\n\n\t\t\tmaterial.morphNormals = true;\n\n\t\t\t// see target.POSITION's comment\n\n\t\t\tnormalAttribute = accessors[ target.NORMAL ].clone();\n\t\t\tvar normal = geometry.attributes.normal;\n\n\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\tnormalAttribute.setXYZ(\n\t\t\t\t\tj,\n\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\n\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\n\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t} else if ( geometry.attributes.normal !== undefined ) {\n\n\t\t\tnormalAttribute = geometry.attributes.normal.clone();\n\n\t\t}\n\n\t\tif ( normalAttribute !== undefined ) {\n\n\t\t\tnormalAttribute.name = attributeName;\n\t\t\tmorphAttributes.normal.push( normalAttribute );\n\n\t\t}\n\n\t}\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n}\n\nfunction isPrimitiveEqual( a, b ) {\n\n\tif ( a.indices !== b.indices ) {\n\n\t\treturn false;\n\n\t}\n\n\tvar attribA = a.attributes || {};\n\tvar attribB = b.attributes || {};\n\tvar keysA = Object.keys( attribA );\n\tvar keysB = Object.keys( attribB );\n\n\tif ( keysA.length !== keysB.length ) {\n\n\t\treturn false;\n\n\t}\n\n\tfor ( var i = 0, il = keysA.length; i < il; i ++ ) {\n\n\t\tvar key = keysA[ i ];\n\n\t\tif ( attribA[ key ] !== attribB[ key ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction getCachedGeometry( cache, newPrimitive ) {\n\n\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\n\n\t\tvar cached = cache[ i ];\n\n\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) {\n\n\t\t\treturn cached.geometry;\n\n\t\t}\n\n\t}\n\n\treturn null;\n\n}\n\n/* GLTF PARSER */\n\nfunction GLTFParser( json, extensions, options ) {\n\n\tthis.json = json || {};\n\tthis.extensions = extensions || {};\n\tthis.options = options || {};\n\n\t// loader object cache\n\tthis.cache = new GLTFRegistry();\n\n\t// BufferGeometry caching\n\tthis.primitiveCache = [];\n\n\tthis.textureLoader = new THREE.TextureLoader( this.options.manager );\n\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\tthis.fileLoader = new THREE.FileLoader( this.options.manager );\n\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n}\n\nGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\tvar json = this.json;\n\tvar parser = this;\n\n\t// Clear the loader cache\n\tthis.cache.removeAll();\n\n\t// Mark the special nodes/meshes in json for efficient parse\n\tthis.markDefs();\n\n\t// Fire the callback on complete\n\tthis.getMultiDependencies( [\n\n\t\t'scene',\n\t\t'animation',\n\t\t'camera'\n\n\t] ).then( function ( dependencies ) {\n\n\t\tvar scenes = dependencies.scenes || [];\n\t\tvar scene = scenes[ json.scene || 0 ];\n\t\tvar animations = dependencies.animations || [];\n\t\tvar asset = json.asset;\n\t\tvar cameras = dependencies.cameras || [];\n\n\t\tonLoad( scene, scenes, cameras, animations, asset );\n\n\t} ).catch( onError );\n\n};\n\n/**\n * Marks the special nodes/meshes in json for efficient parse.\n */\nGLTFParser.prototype.markDefs = function () {\n\n\tvar nodeDefs = this.json.nodes || [];\n\tvar skinDefs = this.json.skins || [];\n\tvar meshDefs = this.json.meshes || [];\n\n\tvar meshReferences = {};\n\tvar meshUses = {};\n\n\t// Nothing in the node definition indicates whether it is a Bone or an\n\t// Object3D. Use the skins' joint references to mark bones.\n\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t}\n\n\t}\n\n\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t// avoid having more than one THREE.Mesh with the same name, count\n\t// references and rename instances below.\n\t//\n\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\n\n\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\n\n\t\t\t}\n\n\t\t\tmeshReferences[ nodeDef.mesh ] ++;\n\n\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.json.meshReferences = meshReferences;\n\tthis.json.meshUses = meshUses;\n\n};\n\n/**\n * Requests the specified dependency asynchronously, with caching.\n * @param {string} type\n * @param {number} index\n * @return {Promise<Object>}\n */\nGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\tvar cacheKey = type + ':' + index;\n\tvar dependency = this.cache.get( cacheKey );\n\n\tif ( ! dependency ) {\n\n\t\tvar fnName = 'load' + type.charAt( 0 ).toUpperCase() + type.slice( 1 );\n\t\tdependency = this[ fnName ]( index );\n\t\tthis.cache.add( cacheKey, dependency );\n\n\t}\n\n\treturn dependency;\n\n};\n\n/**\n * Requests all dependencies of the specified type asynchronously, with caching.\n * @param {string} type\n * @return {Promise<Array<Object>>}\n */\nGLTFParser.prototype.getDependencies = function ( type ) {\n\n\tvar dependencies = this.cache.get( type );\n\n\tif ( ! dependencies ) {\n\n\t\tvar parser = this;\n\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\treturn parser.getDependency( type, index );\n\n\t\t} ) );\n\n\t\tthis.cache.add( type, dependencies );\n\n\t}\n\n\treturn dependencies;\n\n};\n\n/**\n * Requests all multiple dependencies of the specified types asynchronously, with caching.\n * @param {Array<string>} types\n * @return {Promise<Object<Array<Object>>>}\n */\nGLTFParser.prototype.getMultiDependencies = function ( types ) {\n\n\tvar results = {};\n\tvar pendings = [];\n\n\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\n\n\t\tvar type = types[ i ];\n\t\tvar value = this.getDependencies( type );\n\n\t\tvalue = value.then( function ( key, value ) {\n\n\t\t\tresults[ key ] = value;\n\n\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\n\n\t\tpendings.push( value );\n\n\t}\n\n\treturn Promise.all( pendings ).then( function () {\n\n\t\treturn results;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n * @param {number} bufferIndex\n * @return {Promise<ArrayBuffer>}\n */\nGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\tvar loader = this.fileLoader;\n\n\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\tthrow new Error( 'GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t}\n\n\t// If present, GLB container is required to be the first buffer.\n\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t}\n\n\tvar options = this.options;\n\n\treturn new Promise( function ( resolve, reject ) {\n\n\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\treject( new Error( 'GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t} );\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n * @param {number} bufferViewIndex\n * @return {Promise<ArrayBuffer>}\n */\nGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n * @param {number} accessorIndex\n * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\n */\nGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\tvar json = this.json;\n\n\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\tvar pendingBufferViews = [];\n\n\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t} else {\n\n\t\tpendingBufferViews.push( null );\n\n\t}\n\n\tif ( accessorDef.sparse !== undefined ) {\n\n\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t}\n\n\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\tvar itemBytes = elementBytes * itemSize;\n\t\tvar byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;\n\t\tvar normalized = accessorDef.normalized === true;\n\t\tvar array, bufferAttribute;\n\n\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t// Use the full buffer if it's interleaved.\n\t\t\tarray = new TypedArray( bufferView );\n\n\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\tvar ib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\tbufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, accessorDef.byteOffset / elementBytes, normalized );\n\n\t\t} else {\n\n\t\t\tif ( bufferView === null ) {\n\n\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t} else {\n\n\t\t\t\tarray = new TypedArray( bufferView, accessorDef.byteOffset, accessorDef.count * itemSize );\n\n\t\t\t}\n\n\t\t\tbufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );\n\n\t\t}\n\n\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bufferAttribute;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n * @param {number} textureIndex\n * @return {Promise<THREE.Texture>}\n */\nGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\tvar parser = this;\n\tvar json = this.json;\n\tvar options = this.options;\n\tvar textureLoader = this.textureLoader;\n\n\tvar URL = window.URL || window.webkitURL;\n\n\tvar textureDef = json.textures[ textureIndex ];\n\tvar source = json.images[ textureDef.source ];\n\tvar sourceURI = source.uri;\n\tvar isObjectURL = false;\n\n\tif ( source.bufferView !== undefined ) {\n\n\t\t// Load binary image data from bufferView, if provided.\n\n\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\tisObjectURL = true;\n\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\treturn sourceURI;\n\n\t\t} );\n\n\t}\n\n\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t// Load Texture resource.\n\n\t\tvar loader = THREE.Loader.Handlers.get( sourceURI ) || textureLoader;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\n\n\t\t} );\n\n\t} ).then( function ( texture ) {\n\n\t\t// Clean up resources and configure Texture.\n\n\t\tif ( isObjectURL === true ) {\n\n\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t}\n\n\t\ttexture.flipY = false;\n\n\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\n\n\t\ttexture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;\n\n\t\tif ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {\n\n\t\t\tconsole.warn( 'GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +\n\t\t\t\t\t\t\t\t\t\t'internalFormat will be forced to be the same value as format.' );\n\n\t\t}\n\n\t\ttexture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;\n\n\t\tvar samplers = json.samplers || {};\n\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;\n\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;\n\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;\n\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;\n\n\t\treturn texture;\n\n\t} );\n\n};\n\n/**\n * Asynchronously assigns a texture to the given material parameters.\n * @param {Object} materialParams\n * @param {string} textureName\n * @param {number} textureIndex\n * @return {Promise}\n */\nGLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {\n\n\treturn this.getDependency( 'texture', textureIndex ).then( function ( texture ) {\n\n\t\tmaterialParams[ textureName ] = texture;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n * @param {number} materialIndex\n * @return {Promise<THREE.Material>}\n */\nGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\tvar parser = this;\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\tvar materialDef = this.json.materials[ materialIndex ];\n\n\tvar materialType;\n\tvar materialParams = {};\n\tvar materialExtensions = materialDef.extensions || {};\n\n\tvar pending = [];\n\n\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_COMMON ] ) {\n\n\t\tvar khcExtension = extensions[ EXTENSIONS.KHR_MATERIALS_COMMON ];\n\t\tmaterialType = khcExtension.getMaterialType( materialDef );\n\t\tpending.push( khcExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\tmaterialType = sgExtension.getMaterialType( materialDef );\n\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t} else if ( materialDef.pbrMetallicRoughness !== undefined ) {\n\n\t\t// Specification:\n\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\tmaterialType = THREE.MeshStandardMaterial;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\n\n\t\t}\n\n\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );\n\n\t\t}\n\n\t} else {\n\n\t\tmaterialType = THREE.MeshPhongMaterial;\n\n\t}\n\n\tif ( materialDef.doubleSided === true ) {\n\n\t\tmaterialParams.side = THREE.DoubleSide;\n\n\t}\n\n\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\tmaterialParams.transparent = true;\n\n\t} else {\n\n\t\tmaterialParams.transparent = false;\n\n\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t}\n\n\t}\n\n\tif ( materialDef.normalTexture !== undefined ) {\n\n\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );\n\n\t\tmaterialParams.normalScale = new THREE.Vector2( 1, 1 );\n\n\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t}\n\n\t}\n\n\tif ( materialDef.occlusionTexture !== undefined ) {\n\n\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );\n\n\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t}\n\n\t}\n\n\tif ( materialDef.emissiveFactor !== undefined ) {\n\n\t\tif ( materialType === THREE.MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.color = new THREE.Color().fromArray( materialDef.emissiveFactor );\n\n\t\t} else {\n\n\t\t\tmaterialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t}\n\n\tif ( materialDef.emissiveTexture !== undefined ) {\n\n\t\tif ( materialType === THREE.MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', materialDef.emissiveTexture.index ) );\n\n\t\t} else {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\tvar material;\n\n\t\tif ( materialType === THREE.ShaderMaterial ) {\n\n\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t} else {\n\n\t\t\tmaterial = new materialType( materialParams );\n\n\t\t}\n\n\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\n\n\t\t// Normal map textures use OpenGL conventions:\n\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\n\t\tif ( material.normalScale ) {\n\n\t\t\tmaterial.normalScale.x = - material.normalScale.x;\n\n\t\t}\n\n\t\t// emissiveTexture and baseColorTexture use sRGB encoding.\n\t\tif ( material.map ) material.map.encoding = THREE.sRGBEncoding;\n\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;\n\n\t\tif ( materialDef.extras ) material.userData = materialDef.extras;\n\n\t\treturn material;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n * @param {Array<Object>} primitives\n * @return {Promise<Array<THREE.BufferGeometry>>}\n */\nGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\tvar cache = this.primitiveCache;\n\n\treturn this.getDependencies( 'accessor' ).then( function ( accessors ) {\n\n\t\tvar geometries = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = getCachedGeometry( cache, primitive );\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tgeometries.push( cached );\n\n\t\t\t} else {\n\n\t\t\t\t// Otherwise create a new geometry\n\t\t\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\t\t\tvar attributes = primitive.attributes;\n\n\t\t\t\tfor ( var attributeId in attributes ) {\n\n\t\t\t\t\tvar attributeEntry = attributes[ attributeId ];\n\n\t\t\t\t\tvar bufferAttribute = accessors[ attributeEntry ];\n\n\t\t\t\t\tswitch ( attributeId ) {\n\n\t\t\t\t\t\tcase 'POSITION':\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'position', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'normal', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD_0':\n\t\t\t\t\t\tcase 'TEXCOORD0':\n\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TEXCOORD_1':\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'COLOR_0':\n\t\t\t\t\t\tcase 'COLOR0':\n\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'color', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'WEIGHTS_0':\n\t\t\t\t\t\tcase 'WEIGHT': // WEIGHT semantic deprecated.\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'skinWeight', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'JOINTS_0':\n\t\t\t\t\t\tcase 'JOINT': // JOINT semantic deprecated.\n\n\t\t\t\t\t\t\tgeometry.addAttribute( 'skinIndex', bufferAttribute );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( primitive.indices !== undefined ) {\n\n\t\t\t\t\tgeometry.setIndex( accessors[ primitive.indices ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache.push( {\n\n\t\t\t\t\tprimitive: primitive,\n\t\t\t\t\tgeometry: geometry\n\n\t\t\t\t} );\n\n\t\t\t\tgeometries.push( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n * @param {number} meshIndex\n * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\n */\nGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\tvar scope = this;\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\n\tvar meshDef = this.json.meshes[ meshIndex ];\n\n\treturn this.getMultiDependencies( [\n\n\t\t'accessor',\n\t\t'material'\n\n\t] ).then( function ( dependencies ) {\n\n\t\tvar group = new THREE.Group();\n\n\t\tvar primitives = meshDef.primitives;\n\n\t\treturn scope.loadGeometries( primitives ).then( function ( geometries ) {\n\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\t\tvar primitive = primitives[ i ];\n\t\t\t\tvar geometry = geometries[ i ];\n\n\t\t\t\tvar material = primitive.material === undefined\n\t\t\t\t\t? createDefaultMaterial()\n\t\t\t\t\t: dependencies.materials[ primitive.material ];\n\n\t\t\t\tif ( material.aoMap\n\t\t\t\t\t\t&& geometry.attributes.uv2 === undefined\n\t\t\t\t\t\t&& geometry.attributes.uv !== undefined ) {\n\n\t\t\t\t\tconsole.log( 'GLTFLoader: Duplicating UVs to support aoMap.' );\n\t\t\t\t\tgeometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// If the material will be modified later on, clone it now.\n\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\t\t\tvar useSkinning = meshDef.isSkinnedMesh === true;\n\t\t\t\tvar useMorphTargets = primitive.targets !== undefined;\n\n\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\t\t\tvar specGlossExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\t\t\t\tmaterial = specGlossExtension.cloneMaterial( material );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterial = material.clone();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( useVertexColors ) {\n\n\t\t\t\t\tmaterial.vertexColors = THREE.VertexColors;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( useFlatShading ) {\n\n\t\t\t\t\tmaterial.flatShading = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\tif ( useSkinning ) {\n\n\t\t\t\t\t\tmesh = new THREE.SkinnedMesh( geometry, material );\n\t\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new THREE.Mesh( geometry, material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.drawMode = THREE.TriangleStripDrawMode;\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.drawMode = THREE.TriangleFanDrawMode;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new THREE.LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new THREE.Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new THREE.LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new THREE.Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\tif ( useMorphTargets ) {\n\n\t\t\t\t\taddMorphTargets( mesh, meshDef, primitive, dependencies.accessors );\n\n\t\t\t\t}\n\n\t\t\t\tif ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;\n\t\t\t\tif ( primitive.extras !== undefined ) mesh.geometry.userData = primitive.extras;\n\n\t\t\t\t// for Specular-Glossiness.\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial === true ) {\n\n\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\n\n\t\t\t\t}\n\n\t\t\t\tif ( primitives.length > 1 ) {\n\n\t\t\t\t\tmesh.name += '_' + i;\n\n\t\t\t\t\tgroup.add( mesh );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn mesh;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n * @param {number} cameraIndex\n * @return {Promise<THREE.Camera>}\n */\nGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\tvar camera;\n\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\tvar params = cameraDef[ cameraDef.type ];\n\n\tif ( ! params ) {\n\n\t\tconsole.warn( 'GLTFLoader: Missing camera parameters.' );\n\t\treturn;\n\n\t}\n\n\tif ( cameraDef.type === 'perspective' ) {\n\n\t\tvar aspectRatio = params.aspectRatio || 1;\n\t\tvar xfov = params.yfov * aspectRatio;\n\n\t\tcamera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( xfov ), aspectRatio, params.znear || 1, params.zfar || 2e6 );\n\n\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\tcamera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\n\n\t}\n\n\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\n\tif ( cameraDef.extras ) camera.userData = cameraDef.extras;\n\n\treturn Promise.resolve( camera );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n * @param {number} skinIndex\n * @return {Promise<Object>}\n */\nGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\tvar skinDef = this.json.skins[ skinIndex ];\n\n\tvar skinEntry = { joints: skinDef.joints };\n\n\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\treturn Promise.resolve( skinEntry );\n\n\t}\n\n\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\treturn skinEntry;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n * @param {number} animationIndex\n * @return {Promise<THREE.AnimationClip>}\n */\nGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\tvar json = this.json;\n\n\tvar animationDef = this.json.animations[ animationIndex ];\n\n\treturn this.getMultiDependencies( [\n\n\t\t'accessor',\n\t\t'node'\n\n\t] ).then( function ( dependencies ) {\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\n\t\t\tif ( sampler ) {\n\n\t\t\t\tvar target = channel.target;\n\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\t\tvar inputAccessor = dependencies.accessors[ input ];\n\t\t\t\tvar outputAccessor = dependencies.accessors[ output ];\n\n\t\t\t\tvar node = dependencies.nodes[ name ];\n\n\t\t\t\tif ( node ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\t\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.NumberKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.VectorKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\tvar itemSize = outputAccessor.itemSize;\n\t\t\t\t\t\tvar TypedArray = outputAccessor.array.constructor;\n\t\t\t\t\t\tvar outputAccessorValues = new TypedArray( outputAccessor.count * itemSize / 3 );\n\n\t\t\t\t\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t\t\t\t\t//\n\t\t\t\t\t\t//   [ inTangent1, splineVertex1, outTangent1, inTangent2, splineVertex2, ... ]\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// THREE.KeyframeTrack infers tangents from the spline vertices when interpolating:\n\t\t\t\t\t\t// those values are extracted below. This still guarantees smooth curves, but does\n\t\t\t\t\t\t// throw away more precise information in the tangents. In the future, consider\n\t\t\t\t\t\t// re-sampling at a higher framerate using the tangents provided.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// See: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\t\t\t\t\t\tfor ( var j = 0, jl = outputAccessor.count; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\toutputAccessorValues[ j * itemSize / 3 ] = outputAccessor.getX( j + 1 );\n\t\t\t\t\t\t\tif ( itemSize > 1 ) outputAccessorValues[ j * itemSize / 3 + 1 ] = outputAccessor.getY( j + 1 );\n\t\t\t\t\t\t\tif ( itemSize > 2 ) outputAccessorValues[ j * itemSize / 3 + 2 ] = outputAccessor.getZ( j + 1 );\n\t\t\t\t\t\t\tif ( itemSize > 3 ) outputAccessorValues[ j * itemSize / 3 + 3 ] = outputAccessor.getW( j + 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toutputAccessor = new THREE.BufferAttribute( outputAccessorValues, itemSize / 3, outputAccessor.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;\n\n\t\t\t\t\tvar targetNames = [];\n\n\t\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t\t// node should be THREE.Group here but\n\t\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\n\t\t\t\t\t\t// the property of a mesh object under node.\n\t\t\t\t\t\t// So finding targets here.\n\n\t\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\t\tif ( object.isMesh === true && object.material.morphTargets === true ) {\n\n\t\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\n\t\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\n\t\t\t\t\t// be reused by other tracks, make copies here.\n\t\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\ttracks.push( new TypedKeyframeTrack(\n\t\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),\n\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),\n\t\t\t\t\t\t\tinterpolation\n\t\t\t\t\t\t) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\n\n\t\treturn new THREE.AnimationClip( name, undefined, tracks );\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n * @param {number} nodeIndex\n * @return {Promise<THREE.Object3D>}\n */\nGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\tvar json = this.json;\n\tvar extensions = this.extensions;\n\n\tvar meshReferences = this.json.meshReferences;\n\tvar meshUses = this.json.meshUses;\n\n\tvar nodeDef = this.json.nodes[ nodeIndex ];\n\n\treturn this.getMultiDependencies( [\n\n\t\t'mesh',\n\t\t'skin',\n\t\t'camera'\n\n\t] ).then( function ( dependencies ) {\n\n\t\tvar node;\n\n\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\tnode = new THREE.Bone();\n\n\t\t} else if ( nodeDef.mesh !== undefined ) {\n\n\t\t\tvar mesh = dependencies.meshes[ nodeDef.mesh ];\n\n\t\t\tnode = mesh.clone();\n\n\t\t\t// for Specular-Glossiness\n\t\t\tif ( mesh.isGroup === true ) {\n\n\t\t\t\tfor ( var i = 0, il = mesh.children.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar child = mesh.children[ i ];\n\n\t\t\t\t\tif ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {\n\n\t\t\t\t\t\tnode.children[ i ].onBeforeRender = child.onBeforeRender;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {\n\n\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\tnode.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;\n\n\t\t\t}\n\n\t\t} else if ( nodeDef.camera !== undefined ) {\n\n\t\t\tnode = dependencies.cameras[ nodeDef.camera ];\n\n\t\t} else if ( nodeDef.extensions\n\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\n\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\n\n\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\n\t\t\tnode = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];\n\n\t\t} else {\n\n\t\t\tnode = new THREE.Object3D();\n\n\t\t}\n\n\t\tif ( nodeDef.name !== undefined ) {\n\n\t\t\tnode.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t}\n\n\t\tif ( nodeDef.extras ) node.userData = nodeDef.extras;\n\n\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\tvar matrix = new THREE.Matrix4();\n\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\tnode.applyMatrix( matrix );\n\n\t\t} else {\n\n\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn node;\n\n\t} );\n\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n * @param {number} sceneIndex\n * @return {Promise<THREE.Scene>}\n */\nGLTFParser.prototype.loadScene = function () {\n\n\t// scene node hierachy builder\n\n\tfunction buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {\n\n\t\tvar node = allNodes[ nodeId ];\n\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t// build skeleton here as well\n\n\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tvar mesh = meshes[ i ];\n\t\t\t\tvar skinEntry = skins[ nodeDef.skin ];\n\n\t\t\t\tvar bones = [];\n\t\t\t\tvar boneInverses = [];\n\n\t\t\t\tfor ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar jointId = skinEntry.joints[ j ];\n\t\t\t\t\tvar jointNode = allNodes[ jointId ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tvar mat = new THREE.Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'GLTFLoader: Joint \"%s\" could not be found.', jointId );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tvar children = nodeDef.children;\n\n\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tvar child = children[ i ];\n\t\t\t\tbuildNodeHierachy( child, node, json, allNodes, skins );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn function loadScene( sceneIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\n\t\treturn this.getMultiDependencies( [\n\n\t\t\t'node',\n\t\t\t'skin'\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar scene = new THREE.Scene();\n\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\n\n\t\t\tif ( sceneDef.extras ) scene.userData = sceneDef.extras;\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tbuildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );\n\n\t\t\t}\n\n\t\t\t// Ambient lighting, if present, is always attached to the scene root.\n\t\t\tif ( sceneDef.extensions\n\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]\n\t\t\t\t\t && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {\n\n\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;\n\t\t\t\tscene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );\n\n\t\t\t}\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t};\n\n}();\n\nexport { GLTFLoader }\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/GLTFLoader.js","/**\r\n * @author Don McCurdy / https://www.donmccurdy.com\r\n */\r\n\r\nvar LoaderUtils = {\r\n\r\n\tdecodeText: function ( array ) {\r\n\r\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n\t\t\treturn new TextDecoder().decode( array );\r\n\r\n\t\t}\r\n\r\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n\t\tvar s = '';\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t// Implicitly assumes little-endian.\r\n\t\t\ts += String.fromCharCode( array[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn s;\r\n\r\n\t},\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { LoaderUtils };\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/LoaderUtils.js","import * as THREE from 'three';\r\nimport { DDSLoader } from './DDSLoader'\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/MTLLoader.js\r\n\r\nconst LoaderHandlers = THREE.Loader.Handlers;\r\nLoaderHandlers.add( /\\.dds$/i, new DDSLoader() );\r\n\r\nconst MTLLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nMTLLoader.prototype = {\r\n\r\n\tconstructor: MTLLoader,\r\n\r\n\t/**\r\n\t * Loads and parses a MTL asset from a URL.\r\n\t *\r\n\t * @param {String} url - URL to the MTL file.\r\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\r\n\t * @param {Function} [onProgress] - Callback for download progress.\r\n\t * @param {Function} [onError] - Callback for download errors.\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\r\n\t */\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving references.\r\n\t * If set this path will be prepended to each loaded and found reference.\r\n\t *\r\n\t * @see setTexturePath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving texture references.\r\n\t * If set this path will be prepended found texture reference.\r\n\t * If not set and setPath is, it will be used as texture base path.\r\n\t *\r\n\t * @see setPath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetTexturePath: function ( path ) {\r\n\r\n\t\tthis.texturePath = path;\r\n\r\n\t},\r\n\r\n\tsetBaseUrl: function ( path ) {\r\n\r\n\t\tconsole.warn( 'MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\r\n\r\n\t\tthis.setTexturePath( path );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetMaterialOptions: function ( value ) {\r\n\r\n\t\tthis.materialOptions = value;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Parses a MTL file.\r\n\t *\r\n\t * @param {String} text - Content of MTL file\r\n\t * @return {MTLLoader.MaterialCreator}\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\r\n\t */\r\n\tparse: function ( text ) {\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar info = {};\r\n\t\tvar delimiter_pattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tvar line = lines[ i ];\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf( ' ' );\r\n\r\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif ( key === 'newmtl' ) {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[ value ] = info;\r\n\r\n\t\t\t} else if ( info ) {\r\n\r\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\r\n\r\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\r\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[ key ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\r\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\r\n\t\tmaterialCreator.setManager( this.manager );\r\n\t\tmaterialCreator.setMaterials( materialsInfo );\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Create a new THREE-MTLLoader.MaterialCreator\r\n * @param baseUrl - Url relative to which textures are loaded\r\n * @param options - Set of options on how to construct the materials\r\n *                  side: Which side to apply the material\r\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\r\n *                  wrap: What type of wrapping to apply for textures\r\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\r\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\r\n *                                Default: false, assumed to be already normalized\r\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\r\n *                                  Default: false\r\n * @constructor\r\n */\r\n\r\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\r\n\r\n\tthis.baseUrl = baseUrl || '';\r\n\tthis.options = options;\r\n\tthis.materialsInfo = {};\r\n\tthis.materials = {};\r\n\tthis.materialsArray = [];\r\n\tthis.nameLookup = {};\r\n\r\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\r\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\r\n\r\n};\r\n\r\nMTLLoader.MaterialCreator.prototype = {\r\n\r\n\tconstructor: MTLLoader.MaterialCreator,\r\n\r\n\tcrossOrigin: 'Anonymous',\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetManager: function ( value ) {\r\n\r\n\t\tthis.manager = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function ( materialsInfo ) {\r\n\r\n\t\tthis.materialsInfo = this.convert( materialsInfo );\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t},\r\n\r\n\tconvert: function ( materialsInfo ) {\r\n\r\n\t\tif ( ! this.options ) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor ( var mn in materialsInfo ) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[ mn ];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[ mn ] = covmat;\r\n\r\n\t\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[ prop ];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch ( lprop ) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\r\n\r\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\r\n\r\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( save ) {\r\n\r\n\t\t\t\t\tcovmat[ lprop ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t},\r\n\r\n\tpreload: function () {\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.create( mn );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetIndex: function ( materialName ) {\r\n\r\n\t\treturn this.nameLookup[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetAsArray: function () {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\r\n\t\t\tthis.nameLookup[ mn ] = index;\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t},\r\n\r\n\tcreate: function ( materialName ) {\r\n\r\n\t\tif ( this.materials[ materialName ] === undefined ) {\r\n\r\n\t\t\tthis.createMaterial_( materialName );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tcreateMaterial_: function ( materialName ) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar scope = this;\r\n\t\tvar mat = this.materialsInfo[ materialName ];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tfunction resolveURL( baseUrl, url ) {\r\n\r\n\t\t\tif ( typeof url !== 'string' || url === '' )\r\n\t\t\t\treturn '';\r\n\r\n\t\t\t// Absolute URL\r\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t\treturn baseUrl + url;\r\n\r\n\t\t}\r\n\r\n\t\tfunction setMapForType( mapType, value ) {\r\n\r\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\r\n\r\n\t\t\tvar texParams = scope.getTextureParams( value, params );\r\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\r\n\r\n\t\t\tmap.repeat.copy( texParams.scale );\r\n\t\t\tmap.offset.copy( texParams.offset );\r\n\r\n\t\t\tmap.wrapS = scope.wrap;\r\n\t\t\tmap.wrapT = scope.wrap;\r\n\r\n\t\t\tparams[ mapType ] = map;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\tvar value = mat[ prop ];\r\n\t\t\tvar n;\r\n\r\n\t\t\tif ( value === '' ) continue;\r\n\r\n\t\t\tswitch ( prop.toLowerCase() ) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tsetMapForType( \"map\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_ks':\r\n\r\n\t\t\t\t\t// Specular map\r\n\r\n\t\t\t\t\tsetMapForType( \"specularMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'norm':\r\n\r\n\t\t\t\t\tsetMapForType( \"normalMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_bump':\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// Bump texture map\r\n\r\n\t\t\t\t\tsetMapForType( \"bumpMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams.shininess = parseFloat( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif ( n < 1 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tr':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif ( n > 0 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = 1 - n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetTextureParams: function ( value, matParams ) {\r\n\r\n\t\tvar texParams = {\r\n\r\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\r\n\t\t\toffset: new THREE.Vector2( 0, 0 )\r\n\r\n\t\t };\r\n\r\n\t\tvar items = value.split( /\\s+/ );\r\n\t\tvar pos;\r\n\r\n\t\tpos = items.indexOf( '-bm' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\r\n\t\t\titems.splice( pos, 2 );\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf( '-s' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf( '-o' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\ttexParams.url = items.join( ' ' ).trim();\r\n\t\treturn texParams;\r\n\r\n\t},\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = LoaderHandlers.get( url );\r\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tif ( loader === null ) {\r\n\r\n\t\t\tloader = new THREE.TextureLoader( manager );\r\n\r\n\t\t}\r\n\r\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\r\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\r\n\r\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { MTLLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/MTLLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n// o object_name | g group_name\r\nvar object_pattern = /^[og]\\s*(.+)?/;\r\n// mtllib file_reference\r\nvar material_library_pattern = /^mtllib /;\r\n// usemtl material_name\r\nvar material_use_pattern = /^usemtl /;\r\n\r\nfunction ParserState() {\r\n\r\n\tvar state = {\r\n\t\tobjects: [],\r\n\t\tobject: {},\r\n\r\n\t\tvertices: [],\r\n\t\tnormals: [],\r\n\t\tcolors: [],\r\n\t\tuvs: [],\r\n\r\n\t\tmaterialLibraries: [],\r\n\r\n\t\tstartObject: function ( name, fromDeclaration ) {\r\n\r\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\r\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\r\n\r\n\t\t\t\tthis.object.name = name;\r\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\r\n\r\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.object = {\r\n\t\t\t\tname: name || '',\r\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\r\n\r\n\t\t\t\tgeometry: {\r\n\t\t\t\t\tvertices: [],\r\n\t\t\t\t\tnormals: [],\r\n\t\t\t\t\tcolors: [],\r\n\t\t\t\t\tuvs: []\r\n\t\t\t\t},\r\n\t\t\t\tmaterials: [],\r\n\t\t\t\tsmooth: true,\r\n\r\n\t\t\t\tstartMaterial: function ( name, libraries ) {\r\n\r\n\t\t\t\t\tvar previous = this._finalize( false );\r\n\r\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\r\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\r\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\r\n\r\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar material = {\r\n\t\t\t\t\t\tindex: this.materials.length,\r\n\t\t\t\t\t\tname: name || '',\r\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\r\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\r\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\r\n\t\t\t\t\t\tgroupEnd: - 1,\r\n\t\t\t\t\t\tgroupCount: - 1,\r\n\t\t\t\t\t\tinherited: false,\r\n\r\n\t\t\t\t\t\tclone: function ( index ) {\r\n\r\n\t\t\t\t\t\t\tvar cloned = {\r\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\r\n\t\t\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\r\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\r\n\t\t\t\t\t\t\t\tgroupStart: 0,\r\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\r\n\t\t\t\t\t\t\t\tgroupCount: - 1,\r\n\t\t\t\t\t\t\t\tinherited: false\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\r\n\t\t\t\t\t\t\treturn cloned;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.materials.push( material );\r\n\r\n\t\t\t\t\treturn material;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcurrentMaterial: function () {\r\n\r\n\t\t\t\t\tif ( this.materials.length > 0 ) {\r\n\r\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn undefined;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_finalize: function ( end ) {\r\n\r\n\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\r\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\r\n\r\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\r\n\r\n\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi -- ) {\r\n\r\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\r\n\r\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\r\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\r\n\r\n\t\t\t\t\t\tthis.materials.push( {\r\n\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\tsmooth: this.smooth\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn lastMultiMaterial;\r\n\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Inherit previous objects material.\r\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\r\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\r\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n\r\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\r\n\r\n\t\t\t\tvar declared = previousMaterial.clone( 0 );\r\n\t\t\t\tdeclared.inherited = true;\r\n\t\t\t\tthis.object.materials.push( declared );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.objects.push( this.object );\r\n\r\n\t\t},\r\n\r\n\t\tfinalize: function () {\r\n\r\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tparseVertexIndex: function ( value, len ) {\r\n\r\n\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t},\r\n\r\n\t\tparseNormalIndex: function ( value, len ) {\r\n\r\n\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t},\r\n\r\n\t\tparseUVIndex: function ( value, len ) {\r\n\r\n\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\r\n\r\n\t\t},\r\n\r\n\t\taddVertex: function ( a, b, c ) {\r\n\r\n\t\t\tvar src = this.vertices;\r\n\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\r\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\r\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddVertexLine: function ( a ) {\r\n\r\n\t\t\tvar src = this.vertices;\r\n\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddNormal: function ( a, b, c ) {\r\n\r\n\t\t\tvar src = this.normals;\r\n\t\t\tvar dst = this.object.geometry.normals;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\r\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\r\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddColor: function ( a, b, c ) {\r\n\r\n\t\t\tvar src = this.colors;\r\n\t\t\tvar dst = this.object.geometry.colors;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\r\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\r\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddUV: function ( a, b, c ) {\r\n\r\n\t\t\tvar src = this.uvs;\r\n\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\r\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\r\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddUVLine: function ( a ) {\r\n\r\n\t\t\tvar src = this.uvs;\r\n\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\r\n\r\n\t\t},\r\n\r\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\r\n\r\n\t\t\tvar vLen = this.vertices.length;\r\n\r\n\t\t\tvar ia = this.parseVertexIndex( a, vLen );\r\n\t\t\tvar ib = this.parseVertexIndex( b, vLen );\r\n\t\t\tvar ic = this.parseVertexIndex( c, vLen );\r\n\r\n\t\t\tthis.addVertex( ia, ib, ic );\r\n\r\n\t\t\tif ( ua !== undefined ) {\r\n\r\n\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\r\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\r\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\r\n\r\n\t\t\t\tthis.addUV( ia, ib, ic );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( na !== undefined ) {\r\n\r\n\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\r\n\t\t\t\tvar nLen = this.normals.length;\r\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\r\n\r\n\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\r\n\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\r\n\r\n\t\t\t\tthis.addNormal( ia, ib, ic );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.colors.length > 0 ) {\r\n\r\n\t\t\t\tthis.addColor( ia, ib, ic );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\taddLineGeometry: function ( vertices, uvs ) {\r\n\r\n\t\t\tthis.object.geometry.type = 'Line';\r\n\r\n\t\t\tvar vLen = this.vertices.length;\r\n\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\r\n\r\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\r\n\r\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tstate.startObject( '', false );\r\n\r\n\treturn state;\r\n\r\n}\r\n\r\n//\r\n\r\nfunction OBJLoader( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.materials = null;\r\n\r\n}\r\n\r\nOBJLoader.prototype = {\r\n\r\n\tconstructor: OBJLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function ( materials ) {\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tparse: function ( text ) {\r\n\r\n\t\tconsole.time( 'OBJLoader' );\r\n\r\n\t\tvar state = new ParserState();\r\n\r\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\r\n\r\n\t\t\t// This is faster than String.split with regex that splits on both\r\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\r\n\r\n\t\t\t// join lines separated by a line continuation character (\\)\r\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\r\n\r\n\t\t}\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar line = '', lineFirstChar = '';\r\n\t\tvar lineLength = 0;\r\n\t\tvar result = [];\r\n\r\n\t\t// Faster to just trim left side of the line. Use if available.\r\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\r\n\r\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\r\n\r\n\t\t\tline = lines[ i ];\r\n\r\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\r\n\r\n\t\t\tlineLength = line.length;\r\n\r\n\t\t\tif ( lineLength === 0 ) continue;\r\n\r\n\t\t\tlineFirstChar = line.charAt( 0 );\r\n\r\n\t\t\t// @todo invoke passed in handler if any\r\n\t\t\tif ( lineFirstChar === '#' ) continue;\r\n\r\n\t\t\tif ( lineFirstChar === 'v' ) {\r\n\r\n\t\t\t\tvar data = line.split( /\\s+/ );\r\n\r\n\t\t\t\tswitch ( data[ 0 ] ) {\r\n\r\n\t\t\t\t\tcase 'v':\r\n\t\t\t\t\t\tstate.vertices.push(\r\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\r\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\r\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( data.length === 8 ) {\r\n\r\n\t\t\t\t\t\t\tstate.colors.push(\r\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\r\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\r\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] )\r\n\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vn':\r\n\t\t\t\t\t\tstate.normals.push(\r\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\r\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\r\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vt':\r\n\t\t\t\t\t\tstate.uvs.push(\r\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\r\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === 'f' ) {\r\n\r\n\t\t\t\tvar lineData = line.substr( 1 ).trim();\r\n\t\t\t\tvar vertexData = lineData.split( /\\s+/ );\r\n\t\t\t\tvar faceVertices = [];\r\n\r\n\t\t\t\t// Parse the face vertex data into an easy to work with format\r\n\r\n\t\t\t\tfor ( var j = 0, jl = vertexData.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertexData[ j ];\r\n\r\n\t\t\t\t\tif ( vertex.length > 0 ) {\r\n\r\n\t\t\t\t\t\tvar vertexParts = vertex.split( '/' );\r\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\r\n\r\n\t\t\t\tvar v1 = faceVertices[ 0 ];\r\n\r\n\t\t\t\tfor ( var j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar v2 = faceVertices[ j ];\r\n\t\t\t\t\tvar v3 = faceVertices[ j + 1 ];\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\r\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\r\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === 'l' ) {\r\n\r\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\r\n\t\t\t\tvar lineVertices = [], lineUVs = [];\r\n\r\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\r\n\r\n\t\t\t\t\tlineVertices = lineParts;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\r\n\r\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\r\n\r\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\r\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\r\n\r\n\t\t\t} else if ( ( result = object_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t// o object_name\r\n\t\t\t\t// or\r\n\t\t\t\t// g group_name\r\n\r\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\r\n\t\t\t\tvar name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\r\n\r\n\t\t\t\tstate.startObject( name );\r\n\r\n\t\t\t} else if ( material_use_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\r\n\r\n\t\t\t} else if ( material_library_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// mtl file\r\n\r\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\r\n\r\n\t\t\t} else if ( lineFirstChar === 's' ) {\r\n\r\n\t\t\t\tresult = line.split( ' ' );\r\n\r\n\t\t\t\t// smooth shading\r\n\r\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n\t\t\t\t// but does not define a usemtl for each face set.\r\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n\t\t\t\t// where explicit usemtl defines geometry groups.\r\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t * http://paulbourke.net/dataformats/obj/\r\n\t\t\t\t * or\r\n\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\r\n\t\t\t\t *\r\n\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\r\n\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\r\n\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\r\n\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\r\n\t\t\t\t * than 0.\"\r\n\t\t\t\t */\r\n\t\t\t\tif ( result.length > 1 ) {\r\n\r\n\t\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\r\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\r\n\t\t\t\t\tstate.object.smooth = true;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar material = state.object.currentMaterial();\r\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Handle null terminated files without exception\r\n\t\t\t\tif ( line === '\\0' ) continue;\r\n\r\n\t\t\t\tthrow new Error( 'OBJLoader: Unexpected line: \"' + line + '\"' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.finalize();\r\n\r\n\t\tvar container = new THREE.Group();\r\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\r\n\r\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar object = state.objects[ i ];\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar materials = object.materials;\r\n\t\t\tvar isLine = ( geometry.type === 'Line' );\r\n\r\n\t\t\t// Skip o/g line declarations that did not follow with any faces\r\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\r\n\r\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( geometry.vertices, 3 ) );\r\n\r\n\t\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( geometry.normals, 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuffergeometry.computeVertexNormals();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'color', new THREE.Float32BufferAttribute( geometry.colors, 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( geometry.uvs, 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create materials\r\n\r\n\t\t\tvar createdMaterials = [];\r\n\r\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\r\n\r\n\t\t\t\tvar sourceMaterial = materials[ mi ];\r\n\t\t\t\tvar material = undefined;\r\n\r\n\t\t\t\tif ( this.materials !== null ) {\r\n\r\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\r\n\r\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\r\n\r\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\tmaterialLine.copy( material );\r\n\t\t\t\t\t\tmaterial = materialLine;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! material ) {\r\n\r\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\r\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\r\n\r\n\t\t\t\tcreatedMaterials.push( material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create mesh\r\n\r\n\t\t\tvar mesh;\r\n\r\n\t\t\tif ( createdMaterials.length > 1 ) {\r\n\r\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\r\n\r\n\t\t\t\t\tvar sourceMaterial = materials[ mi ];\r\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmesh.name = object.name;\r\n\r\n\t\t\tcontainer.add( mesh );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.timeEnd( 'OBJLoader' );\r\n\r\n\t\treturn container;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\nexport { OBJLoader };\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/OBJLoader.js","import * as THREE from 'three'\r\n\r\nconst PLYLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.propertyNameMapping = {};\r\n\r\n};\r\n\r\nPLYLoader.prototype = {\r\n\r\n\tconstructor: PLYLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetPropertyNameMapping: function ( mapping ) {\r\n\r\n\t\tthis.propertyNameMapping = mapping;\r\n\r\n\t},\r\n\r\n\tparse: function ( data ) {\r\n\r\n\t\tfunction bin2str( buf ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf );\r\n\r\n\t\t\tif ( window.TextDecoder !== undefined ) {\r\n\r\n\t\t\t\treturn new TextDecoder().decode( array_buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar str = '';\r\n\r\n\t\t\tfor ( var i = 0, il = buf.byteLength; i < il; i ++ ) {\r\n\r\n\t\t\t\tstr += String.fromCharCode( array_buffer[ i ] ); // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn str;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseHeader( data ) {\r\n\r\n\t\t\tvar patternHeader = /ply([\\s\\S]*)end_header\\s/;\r\n\t\t\tvar headerText = '';\r\n\t\t\tvar headerLength = 0;\r\n\t\t\tvar result = patternHeader.exec( data );\r\n\r\n\t\t\tif ( result !== null ) {\r\n\r\n\t\t\t\theaderText = result[ 1 ];\r\n\t\t\t\theaderLength = result[ 0 ].length;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar header = {\r\n\t\t\t\tcomments: [],\r\n\t\t\t\telements: [],\r\n\t\t\t\theaderLength: headerLength\r\n\t\t\t};\r\n\r\n\t\t\tvar lines = headerText.split( '\\n' );\r\n\t\t\tvar currentElement;\r\n\t\t\tvar lineType, lineValues;\r\n\r\n\t\t\tfunction make_ply_element_property( propertValues, propertyNameMapping ) {\r\n\r\n\t\t\t\tvar property = { type: propertValues[ 0 ] };\r\n\r\n\t\t\t\tif ( property.type === 'list' ) {\r\n\r\n\t\t\t\t\tproperty.name = propertValues[ 3 ];\r\n\t\t\t\t\tproperty.countType = propertValues[ 1 ];\r\n\t\t\t\t\tproperty.itemType = propertValues[ 2 ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tproperty.name = propertValues[ 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( property.name in propertyNameMapping ) {\r\n\r\n\t\t\t\t\tproperty.name = propertyNameMapping[ property.name ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn property;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\t\tvar line = lines[ i ];\r\n\t\t\t\tline = line.trim();\r\n\r\n\t\t\t\tif ( line === '' ) continue;\r\n\r\n\t\t\t\tlineValues = line.split( /\\s+/ );\r\n\t\t\t\tlineType = lineValues.shift();\r\n\t\t\t\tline = lineValues.join( ' ' );\r\n\r\n\t\t\t\tswitch ( lineType ) {\r\n\r\n\t\t\t\t\tcase 'format':\r\n\r\n\t\t\t\t\t\theader.format = lineValues[ 0 ];\r\n\t\t\t\t\t\theader.version = lineValues[ 1 ];\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'comment':\r\n\r\n\t\t\t\t\t\theader.comments.push( line );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'element':\r\n\r\n\t\t\t\t\t\tif ( currentElement !== undefined ) {\r\n\r\n\t\t\t\t\t\t\theader.elements.push( currentElement );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcurrentElement = {};\r\n\t\t\t\t\t\tcurrentElement.name = lineValues[ 0 ];\r\n\t\t\t\t\t\tcurrentElement.count = parseInt( lineValues[ 1 ] );\r\n\t\t\t\t\t\tcurrentElement.properties = [];\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'property':\r\n\r\n\t\t\t\t\t\tcurrentElement.properties.push( make_ply_element_property( lineValues, scope.propertyNameMapping ) );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.log( 'unhandled', lineType, lineValues );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentElement !== undefined ) {\r\n\r\n\t\t\t\theader.elements.push( currentElement );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn header;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseASCIINumber( n, type ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'char': case 'uchar': case 'short': case 'ushort': case 'int': case 'uint':\r\n\t\t\t\tcase 'int8': case 'uint8': case 'int16': case 'uint16': case 'int32': case 'uint32':\r\n\r\n\t\t\t\t\treturn parseInt( n );\r\n\r\n\t\t\t\tcase 'float': case 'double': case 'float32': case 'float64':\r\n\r\n\t\t\t\t\treturn parseFloat( n );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseASCIIElement( properties, line ) {\r\n\r\n\t\t\tvar values = line.split( /\\s+/ );\r\n\r\n\t\t\tvar element = {};\r\n\r\n\t\t\tfor ( var i = 0; i < properties.length; i ++ ) {\r\n\r\n\t\t\t\tif ( properties[ i ].type === 'list' ) {\r\n\r\n\t\t\t\t\tvar list = [];\r\n\t\t\t\t\tvar n = parseASCIINumber( values.shift(), properties[ i ].countType );\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < n; j ++ ) {\r\n\r\n\t\t\t\t\t\tlist.push( parseASCIINumber( values.shift(), properties[ i ].itemType ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telement[ properties[ i ].name ] = list;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\telement[ properties[ i ].name ] = parseASCIINumber( values.shift(), properties[ i ].type );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn element;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseASCII( data, header ) {\r\n\r\n\t\t\t// PLY ascii format specification, as per http://en.wikipedia.org/wiki/PLY_(file_format)\r\n\r\n\t\t\tvar buffer = {\r\n\t\t\t\tindices: [],\r\n\t\t\t\tvertices: [],\r\n\t\t\t\tnormals: [],\r\n\t\t\t\tuvs: [],\r\n\t\t\t\tcolors: []\r\n\t\t\t};\r\n\r\n\t\t\tvar result;\r\n\r\n\t\t\tvar patternBody = /end_header\\s([\\s\\S]*)$/;\r\n\t\t\tvar body = '';\r\n\t\t\tif ( ( result = patternBody.exec( data ) ) !== null ) {\r\n\r\n\t\t\t\tbody = result[ 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar lines = body.split( '\\n' );\r\n\t\t\tvar currentElement = 0;\r\n\t\t\tvar currentElementCount = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\t\tvar line = lines[ i ];\r\n\t\t\t\tline = line.trim();\r\n\t\t\t\tif ( line === '' ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( currentElementCount >= header.elements[ currentElement ].count ) {\r\n\r\n\t\t\t\t\tcurrentElement ++;\r\n\t\t\t\t\tcurrentElementCount = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar element = parseASCIIElement( header.elements[ currentElement ].properties, line );\r\n\r\n\t\t\t\thandleElement( buffer, header.elements[ currentElement ].name, element );\r\n\r\n\t\t\t\tcurrentElementCount ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn postProcess( buffer );\r\n\r\n\t\t}\r\n\r\n\t\tfunction postProcess( buffer ) {\r\n\r\n\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t// mandatory buffer data\r\n\r\n\t\t\tif ( buffer.indices.length > 0 ) {\r\n\r\n\t\t\t\tgeometry.setIndex( buffer.indices );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( buffer.vertices, 3 ) );\r\n\r\n\t\t\t// optional buffer data\r\n\r\n\t\t\tif ( buffer.normals.length > 0 ) {\r\n\r\n\t\t\t\tgeometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( buffer.normals, 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( buffer.uvs.length > 0 ) {\r\n\r\n\t\t\t\tgeometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( buffer.uvs, 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( buffer.colors.length > 0 ) {\r\n\r\n\t\t\t\tgeometry.addAttribute( 'color', new THREE.Float32BufferAttribute( buffer.colors, 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleElement( buffer, elementName, element ) {\r\n\r\n\t\t\tif ( elementName === 'vertex' ) {\r\n\r\n\t\t\t\tbuffer.vertices.push( element.x, element.y, element.z );\r\n\r\n\t\t\t\tif ( 'nx' in element && 'ny' in element && 'nz' in element ) {\r\n\r\n\t\t\t\t\tbuffer.normals.push( element.nx, element.ny, element.nz );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( 's' in element && 't' in element ) {\r\n\r\n\t\t\t\t\tbuffer.uvs.push( element.s, element.t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( 'red' in element && 'green' in element && 'blue' in element ) {\r\n\r\n\t\t\t\t\tbuffer.colors.push( element.red / 255.0, element.green / 255.0, element.blue / 255.0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( elementName === 'face' ) {\r\n\r\n\t\t\t\tvar vertex_indices = element.vertex_indices || element.vertex_index; // issue #9338\r\n\r\n\t\t\t\tif ( vertex_indices.length === 3 ) {\r\n\r\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 0 ], vertex_indices[ 1 ], vertex_indices[ 2 ] );\r\n\r\n\t\t\t\t} else if ( vertex_indices.length === 4 ) {\r\n\r\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 0 ], vertex_indices[ 1 ], vertex_indices[ 3 ] );\r\n\t\t\t\t\tbuffer.indices.push( vertex_indices[ 1 ], vertex_indices[ 2 ], vertex_indices[ 3 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction binaryRead( dataview, at, type, little_endian ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t// corespondences for non-specific length types here match rply:\r\n\t\t\t\tcase 'int8':\t\tcase 'char':\t return [ dataview.getInt8( at ), 1 ];\r\n\t\t\t\tcase 'uint8':\t\tcase 'uchar':\t return [ dataview.getUint8( at ), 1 ];\r\n\t\t\t\tcase 'int16':\t\tcase 'short':\t return [ dataview.getInt16( at, little_endian ), 2 ];\r\n\t\t\t\tcase 'uint16':\tcase 'ushort': return [ dataview.getUint16( at, little_endian ), 2 ];\r\n\t\t\t\tcase 'int32':\t\tcase 'int':\t\t return [ dataview.getInt32( at, little_endian ), 4 ];\r\n\t\t\t\tcase 'uint32':\tcase 'uint':\t return [ dataview.getUint32( at, little_endian ), 4 ];\r\n\t\t\t\tcase 'float32': case 'float':\t return [ dataview.getFloat32( at, little_endian ), 4 ];\r\n\t\t\t\tcase 'float64': case 'double': return [ dataview.getFloat64( at, little_endian ), 8 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction binaryReadElement( dataview, at, properties, little_endian ) {\r\n\r\n\t\t\tvar element = {};\r\n\t\t\tvar result, read = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < properties.length; i ++ ) {\r\n\r\n\t\t\t\tif ( properties[ i ].type === 'list' ) {\r\n\r\n\t\t\t\t\tvar list = [];\r\n\r\n\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].countType, little_endian );\r\n\t\t\t\t\tvar n = result[ 0 ];\r\n\t\t\t\t\tread += result[ 1 ];\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < n; j ++ ) {\r\n\r\n\t\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].itemType, little_endian );\r\n\t\t\t\t\t\tlist.push( result[ 0 ] );\r\n\t\t\t\t\t\tread += result[ 1 ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telement[ properties[ i ].name ] = list;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult = binaryRead( dataview, at + read, properties[ i ].type, little_endian );\r\n\t\t\t\t\telement[ properties[ i ].name ] = result[ 0 ];\r\n\t\t\t\t\tread += result[ 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn [ element, read ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseBinary( data, header ) {\r\n\r\n\t\t\tvar buffer = {\r\n\t\t\t\tindices: [],\r\n\t\t\t\tvertices: [],\r\n\t\t\t\tnormals: [],\r\n\t\t\t\tuvs: [],\r\n\t\t\t\tcolors: []\r\n\t\t\t};\r\n\r\n\t\t\tvar little_endian = ( header.format === 'binary_little_endian' );\r\n\t\t\tvar body = new DataView( data, header.headerLength );\r\n\t\t\tvar result, loc = 0;\r\n\r\n\t\t\tfor ( var currentElement = 0; currentElement < header.elements.length; currentElement ++ ) {\r\n\r\n\t\t\t\tfor ( var currentElementCount = 0; currentElementCount < header.elements[ currentElement ].count; currentElementCount ++ ) {\r\n\r\n\t\t\t\t\tresult = binaryReadElement( body, loc, header.elements[ currentElement ].properties, little_endian );\r\n\t\t\t\t\tloc += result[ 1 ];\r\n\t\t\t\t\tvar element = result[ 0 ];\r\n\r\n\t\t\t\t\thandleElement( buffer, header.elements[ currentElement ].name, element );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn postProcess( buffer );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar geometry;\r\n\t\tvar scope = this;\r\n\r\n\t\tif ( data instanceof ArrayBuffer ) {\r\n\r\n\t\t\tvar text = bin2str( data );\r\n\t\t\tvar header = parseHeader( text );\r\n\r\n\t\t\tgeometry = header.format === 'ascii' ? parseASCII( text, header ) : parseBinary( data, header );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgeometry = parseASCII( data, parseHeader( data ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { PLYLoader }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/PLYLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js\r\n\r\nconst STLLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nSTLLoader.prototype = {\r\n\r\n\tconstructor: STLLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( data ) {\r\n\r\n\t\tvar isBinary = function () {\r\n\r\n\t\t\tvar expect, face_size, n_faces, reader;\r\n\t\t\treader = new DataView( binData );\r\n\t\t\tface_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\r\n\t\t\tn_faces = reader.getUint32( 80, true );\r\n\t\t\texpect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\r\n\r\n\t\t\tif ( expect === reader.byteLength ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\r\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\r\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\r\n\r\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\r\n\t\t\tvar solid = [ 115, 111, 108, 105, 100 ];\r\n\r\n\t\t\tfor ( var i = 0; i < 5; i ++ ) {\r\n\r\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\r\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\r\n\r\n\t\t\t\tif ( solid[ i ] != reader.getUint8( i, false ) ) return true;\r\n\r\n \t\t\t}\r\n\r\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t\tvar binData = this.ensureBinary( data );\r\n\r\n\t\treturn isBinary() ? this.parseBinary( binData ) : this.parseASCII( this.ensureString( data ) );\r\n\r\n\t},\r\n\r\n\tparseBinary: function ( data ) {\r\n\r\n\t\tvar reader = new DataView( data );\r\n\t\tvar faces = reader.getUint32( 80, true );\r\n\r\n\t\tvar r, g, b, hasColors = false, colors;\r\n\t\tvar defaultR, defaultG, defaultB, alpha;\r\n\r\n\t\t// process STL header\r\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\r\n\r\n\t\tfor ( var index = 0; index < 80 - 10; index ++ ) {\r\n\r\n\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\r\n\r\n\t\t\t\thasColors = true;\r\n\t\t\t\tcolors = [];\r\n\r\n\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\r\n\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\r\n\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\r\n\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar dataOffset = 84;\r\n\t\tvar faceLength = 12 * 4 + 2;\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\t\tvar start = dataOffset + face * faceLength;\r\n\t\t\tvar normalX = reader.getFloat32( start, true );\r\n\t\t\tvar normalY = reader.getFloat32( start + 4, true );\r\n\t\t\tvar normalZ = reader.getFloat32( start + 8, true );\r\n\r\n\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\tvar packedColor = reader.getUint16( start + 48, true );\r\n\r\n\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\r\n\r\n\t\t\t\t\t// facet has its own unique color\r\n\r\n\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\r\n\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\r\n\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tr = defaultR;\r\n\t\t\t\t\tg = defaultG;\r\n\t\t\t\t\tb = defaultB;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 1; i <= 3; i ++ ) {\r\n\r\n\t\t\t\tvar vertexstart = start + i * 12;\r\n\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 4, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 8, true ) );\r\n\r\n\t\t\t\tnormals.push( normalX, normalY, normalZ );\r\n\r\n\t\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\t\tcolors.push( r, g, b );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\tif ( hasColors ) {\r\n\r\n\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( colors ), 3 ) );\r\n\t\t\tgeometry.hasColors = true;\r\n\t\t\tgeometry.alpha = alpha;\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tparseASCII: function ( data ) {\r\n\r\n\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\r\n\t\tgeometry = new THREE.BufferGeometry();\r\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\twhile ( ( result = patternFace.exec( data ) ) !== null ) {\r\n\r\n\t\t\ttext = result[ 0 ];\r\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\r\n\t\t\t\tnormal.y = parseFloat( result[ 3 ] );\r\n\t\t\t\tnormal.z = parseFloat( result[ 5 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) );\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tensureString: function ( buf ) {\r\n\r\n\t\tif ( typeof buf !== \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf );\r\n\t\t\tvar strArray = [];\r\n\t\t\tfor ( var i = 0; i < buf.byteLength; i ++ ) {\r\n\r\n\t\t\t\tstrArray.push(String.fromCharCode( array_buffer[ i ] )); // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn strArray.join('');\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tensureBinary: function ( buf ) {\r\n\r\n\t\tif ( typeof buf === \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf.length );\r\n\t\t\tfor ( var i = 0; i < buf.length; i ++ ) {\r\n\r\n\t\t\t\tarray_buffer[ i ] = buf.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn array_buffer.buffer || array_buffer;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { STLLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/STLLoader.js","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-mixin.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b82a4cf6\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./model-mixin.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-mixin.vue\n// module id = 9\n// module chunks = 1"],"sourceRoot":""}