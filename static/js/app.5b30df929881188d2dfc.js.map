{"version":3,"sources":["webpack:///static/js/app.5b30df929881188d2dfc.js","webpack:///./examples/components/demo-block.vue","webpack:///./src/model-obj.vue","webpack:///./src/model-mixin.vue","webpack:///./src/util.js","webpack:///./src/model-collada.vue","webpack:///./examples/App.vue","webpack:///./examples/router/index.js","webpack:///./examples/pages/demo-background.vue?1619","webpack:///./examples/components/demo-block.vue?ba5a","webpack:///./examples/App.vue?8383","webpack:///./examples/pages/demo-background.vue","webpack:///./examples/pages/demo-basic.vue","webpack:///./examples/pages/demo-collada.vue","webpack:///./examples/pages/demo-event.vue","webpack:///./examples/pages/demo-json.vue","webpack:///./examples/pages/demo-obj-mtl.vue","webpack:///./examples/pages/demo-obj.vue","webpack:///./examples/pages/demo-rotate.vue","webpack:///./examples/pages/demo-stl.vue","webpack:///./src/model-stl.vue","webpack:///./src/model-three.vue","webpack:///./examples/pages/demo-json.vue?17b3","webpack:///./examples/pages/demo-stl.vue?8253","webpack:///./examples/pages/demo-obj.vue?3282","webpack:///./examples/pages/demo-basic.vue?e3c1","webpack:///./examples/pages/demo-background.vue?033d","webpack:///./examples/pages/demo-obj-mtl.vue?99a3","webpack:///./examples/components/demo-block.vue?e469","webpack:///./examples/pages/demo-collada.vue?1e78","webpack:///./examples/pages/demo-rotate.vue?0efd","webpack:///./examples/App.vue?2e8f","webpack:///./src/model-mixin.vue?7a73","webpack:///./examples/pages/demo-event.vue?3f78","webpack:///./examples/pages/demo-background.vue?f382","webpack:///./examples/components/demo-block.vue?adce","webpack:///./examples/App.vue?806b","webpack:///./examples/index.js","webpack:///./examples/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-background.vue","webpack:///demo-basic.vue","webpack:///demo-collada.vue","webpack:///demo-event.vue","webpack:///demo-json.vue","webpack:///demo-obj-mtl.vue","webpack:///demo-obj.vue","webpack:///demo-rotate.vue","webpack:///demo-stl.vue","webpack:///model-collada.vue","webpack:///model-mixin.vue","webpack:///model-obj.vue","webpack:///model-stl.vue","webpack:///model-three.vue","webpack:///./src/controls/OrbitControls.js","webpack:///./src/loaders/ColladaLoader.js","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/loaders/MTLLoader.js","webpack:///./src/loaders/OBJLoader.js","webpack:///./src/loaders/STLLoader.js"],"names":["webpackJsonp","module","exports","__webpack_require__","Component","__webpack_exports__","getSize","object","box","setFromObject","getCenter","toIndexed","bufferGeometry","exists","v","vertices","i","length","equals","raw_uvs","raw_positions","getAttribute","array","hasUV","undefined","raw_normals","hasNormal","face","face_normalss","face_uvs","tmp_indices","indices","normals","uvs","v0","__WEBPACK_IMPORTED_MODULE_0_three__","v1","v2","n0","n1","n2","uv0","uv1","uv2","x","y","z","forEach","id","push","clone","positionBuffer","Float32Array","normalBuffer","uvBuffer","i2","i3","addAttribute","setIndex","Uint32Array","d","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","name","path","component","redirect","render","_vm","this","_h","$createElement","_c","_self","attrs","vue-code","code","html-code","htmlCode","slot","backgroundAlpha","src","on","on-load","onLoad","_v","directives","rawName","value","expression","staticClass","staticRenderFns","click","$event","bgColor","bgAlpha","backgroundColor","mtl","_t","ref","_s","_f","vueCode","rotation","_m","to","href","staticStyle","width","height","margin","border","padding","color","on-mousemove","onMouseMove","content","locals","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","h","a","pages","__WEBPACK_IMPORTED_MODULE_0__demo_basic__","__WEBPACK_IMPORTED_MODULE_0__demo_basic___default","__WEBPACK_IMPORTED_MODULE_1__demo_event__","__WEBPACK_IMPORTED_MODULE_1__demo_event___default","__WEBPACK_IMPORTED_MODULE_2__demo_background__","__WEBPACK_IMPORTED_MODULE_2__demo_background___default","__WEBPACK_IMPORTED_MODULE_3__demo_rotate__","__WEBPACK_IMPORTED_MODULE_3__demo_rotate___default","__WEBPACK_IMPORTED_MODULE_4__demo_obj__","__WEBPACK_IMPORTED_MODULE_4__demo_obj___default","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default","__WEBPACK_IMPORTED_MODULE_6__demo_stl__","__WEBPACK_IMPORTED_MODULE_6__demo_stl___default","__WEBPACK_IMPORTED_MODULE_7__demo_collada__","__WEBPACK_IMPORTED_MODULE_7__demo_collada___default","__WEBPACK_IMPORTED_MODULE_8__demo_json__","__WEBPACK_IMPORTED_MODULE_8__demo_json___default","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","type","default","mounted","highlightBlock","$refs","data","filters","val","components","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default","loading","methods","setBackground","alpha","ModelObj","DemoBlock","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default","ModelThree","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default","ModelCollada","intersected","event","console","log","material","setStyle","rotate","requestAnimationFrame","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default","ModelStl","__WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default","mixins","lights","Array","position","skyColor","groundColor","intensity","smoothing","Boolean","loader","options","convertUpAxis","load","_this","scene","remove","collada","add","updateCamera","$emit","err","__WEBPACK_IMPORTED_MODULE_1__util__","__WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__","suportWebGL","canvas","document","createElement","window","WebGLRenderingContext","getContext","e","Number","scale","cameraPosition","cameraRotation","cameraUp","cameraLookAt","controllable","size","raycaster","mouse","camera","renderer","controls","allLights","clock","performance","Date","computed","hasListener","events","_events","result","created","addEventListener","onResize","$el","offsetWidth","offsetHeight","antialias","shadowMap","enabled","update","onMouseDown","onMouseUp","onClick","animate","beforeDestroy","removeEventListener","watch","deep","handler","set","oldVal","updateLights","updateRenderer","updateControls","$nextTick","pick","clientX","clientY","rect","getBoundingClientRect","left","top","setFromCamera","intersects","intersectObject","updateModel","copy","matrixWorldNeedsUpdate","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","distance","center","aspect","updateProjectionMatrix","lookAt","target","_this2","apply","item","toLowerCase","light","_color","_intensity","decay","PointLight","_color2","_intensity2","_intensity3","dispose","_this3","process","__WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__","__WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__","__WEBPACK_IMPORTED_MODULE_2__util__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default","mtlPath","mtlLoader","traverse","child","geometry","computeVertexNormals","onError","mtlSrc","exec","setPath","materials","preload","setMaterials","__WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default","__WEBPACK_IMPORTED_MODULE_2_three__","OrbitControls","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_1_three__","domElement","getAutoRotationAngle","Math","PI","scope","autoRotateSpeed","getZoomScale","pow","zoomSpeed","rotateLeft","angle","sphericalDelta","theta","rotateUp","phi","dollyIn","dollyScale","zoom","max","minZoom","min","maxZoom","zoomChanged","warn","enableZoom","dollyOut","handleMouseDownRotate","rotateStart","handleMouseDownDolly","dollyStart","handleMouseDownPan","panStart","handleMouseMoveRotate","rotateEnd","rotateDelta","subVectors","element","body","clientWidth","rotateSpeed","clientHeight","handleMouseMoveDolly","dollyEnd","dollyDelta","handleMouseMovePan","panEnd","panDelta","pan","handleMouseUp","handleMouseWheel","deltaY","handleKeyDown","keyCode","keys","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","mouseButtons","ORBIT","enableRotate","state","STATE","ROTATE","ZOOM","DOLLY","PAN","enablePan","NONE","dispatchEvent","startEvent","endEvent","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onTouchStart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","Infinity","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","MIDDLE","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","reset","changeEvent","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","makeSafe","radius","panOffset","setFromSpherical","distanceToSquared","EPS","dot","quaternion","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","deltaX","targetDistance","tan","fov","matrix","right","bottom","prototype","constructor","ColladaLoader","url","readyCallback","progressCallback","failCallback","implementation","createDocument","request","XMLHttpRequest","onreadystatechange","readyState","status","response","readyCallbackFunc","parse","error","getResponseHeader","total","loaded","responseText","open","send","alert","text","callBack","COLLADA","DOMParser","parseFromString","parts","split","pop","baseUrl","join","parseAsset","setUpConversion","images","parseLib","_Image","Material","effects","Effect","geometries","Geometry","cameras","Camera","Light","controllers","Controller","animations","Animation","visualScenes","VisualScene","kinematicsModels","KinematicsModel","morphs","skins","visualScene","parseScene","nodes","createSceneGraph","colladaUnit","createAnimations","kinematicsModel","parseKinematicsModel","createKinematics","animData","kinematics","dae","setPreferredShading","shading","preferredShading","elements","querySelectorAll","childNodes","nodeName","meter","parseFloat","colladaUp","textContent","charAt","q","classSpec","prefix","lib","elementsLength","j","daeElement","sceneElement","kinematicsModelElement","recurseHierarchy","node","getChildById","colladaId","newData","fps","hierarchy","sids","il","time","children","jl","calcAnimationBounds","ID","start","end","frames","animation","sampler","create","startTime","endTime","input","createMorph","ctrl","morphCtrl","InstanceController","morph","targets","target_id","daeGeometry","mesh","primitives","morphTargets","setupSkeleton","bones","frame","parent","world","localworld","channels","channel","m","output","multiplyMatrices","setupSkinningMatrices","skin","bone","found","joints","sid","inv","invBindMatrices","invBindMatrix","skinningMatrix","animatrix","weights","k","w","joint","flattenSkeleton","skeleton","list","walk","parentid","decompose","pos","scl","rotq","skinToBindPose","skinController","skinned","vidx","index","weight","o","s","applyMatrix4","applySkin","instanceCtrl","animationBounds","getChildBySid","bonelist","sortedbones","bindShapeMatrix","skinIndices","skinWeights","indicies","animationdata","key","rot","jointMap","getJointValue","jointIndex","jointData","setJointValue","limits","static","threejsNode","axis","transforms","m1","transform","indexOf","multiply","makeRotationAxis","degToRad","makeTranslation","obj","elementsFloat32Arr","slice","call","elementsRowMajor","querySelector","nodeType","visualTarget","parseInt","visualTargetElement","parentVisualElement","parentElement","parentVisualElementId","colladaNode","zeroPosition","morphController","controller","source","inst_geom","InstanceGeometry","instance_material","second","double_sided_materials","first_material","instance_geometry","instance_materials","used_materials","used_materials_array","num_materials","mat","effect_id","instance_effect","shader","material3js","doubleSided","symbol","_copied_material","side","opacity","geom","geometry3js","faces","materialIndex","daeMaterial","skinning","isLineStrip","instance_camera","cparams","cam","yfov","aspect_ratio","znear","zfar","instance_light","lparams","technique","falloff_angle","layer","centerGeometry","delta","getLibraryNode","attObj","attributes","getNamedItem","getChannelsForNode","bakeAnimations","member","fullSid","getTransformBySid","arrIndices","getConvertedIndex","getConvertedMember","getData","findKey","Key","timeNdx","findTimeNdx","splice","addTarget","hasTarget","interpolateKeys","retVal","ndx","prevKey","getPrevKeyWith","nextKey","getNextKeyWith","prevTarget","getTarget","nextData","prevData","init_from","Morph","method","Skin","Node","Transform","InstanceMaterial","Mesh","Polygons","count","inputs","vcount","p","Polylist","LineStrips","Triangles","Accessor","stride","params","Vertices","Input","semantic","Source","ColorOrTexture","setRGB","random","texture","texcoord","texOpts","Shader","effect","Surface","format","Sampler2D","wrap_s","wrap_t","minfilter","magfilter","mipfilter","surface","InstanceEffect","Channel","dotSyntax","arrSyntax","Sampler","strideOut","interpolation","duration","InstanceCamera","InstanceLight","links","Joint","middlePosition","Link","attachments","Attachment","_source","sources","_bools","str","raw","_strings","l","_floats","_ints","_trimString","_attr_as_int","defaultValue","hasAttribute","loadTextureImage","image","needsUpdate","extractDoubleSided","upAxis","upConversion","fixCoords","sign","tmp","getConvertedTranslation","getConvertedVec3","arr","getConvertedMat4","members","X","Y","Z","subdivideFaces","defaultEnvMap","parseInputs","read","f","parseJoints","parseWeights","numBones","vertex_weights","influence","recursive","getChannelForTransform","transformSid","shift","info","iNode","updateMatrix","identity","convert","n11","n21","n31","n41","n12","n22","n32","n42","n13","n23","n33","n43","n14","n24","n34","n44","propName","toString","instances","instance","vertexData","primitive","setVertices","handlePrimitive","calcNormals","idx32","numParams","pList","vcIndex","maxOffset","texture_sets","pCount","vs","ns","ts","cs","accessor","NORMAL","len","TEXCOORD","COLOR","uv","uvArr","clr","faceVertexUvs","param","isColor","isTexture","opaque","rgba","offsetU","offsetV","repeatU","repeatV","wrapU","wrapV","parseTexture","toUpperCase","bumpType","transparent","transparencyLevel","r","g","b","transparency","diffuse","ambient","specular","emission","bump","normal","prop","cot","samplerId","Handlers","get","wrapS","wrapT","repeat","emissive","parseTechnique","parseProfileCOMMON","parseNewparam","_image","parseExtra","parseExtraTechnique","anim","opt_sid","interpolate","nextTarget","parseOptics","perspective","xfov","orthographic","xmag","ymag","parseCommon","profile","axisElement","_axis","jointTypes","DDSLoader","_parser","buffer","loadMipmaps","fourCCToInt32","charCodeAt","dds","mipmaps","mipmapCount","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","header","Int32Array","blockBytes","fourCC","isRGBAUncompressed","fromCharCode","caps2","isCubemap","dataOffset","byteArray","dataLength","srcBuffer","Uint8Array","dst","mipmap","MTLLoader","__WEBPACK_IMPORTED_MODULE_1__DDSLoader__","LoaderHandlers","manager","onProgress","setTexturePath","texturePath","setBaseUrl","setCrossOrigin","crossOrigin","setMaterialOptions","materialOptions","lines","delimiter_pattern","materialsInfo","line","trim","substring","ss","materialCreator","MaterialCreator","setManager","materialsArray","nameLookup","wrap","converted","mn","covmat","save","lprop","normalizeRGB","ignoreZeroRGBs","getIndex","materialName","getAsArray","createMaterial_","resolveURL","test","setMapForType","mapType","texParams","getTextureParams","loadTexture","fromArray","shininess","matParams","items","bumpScale","mapping","OBJLoader","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","_createParserState","objects","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","isArray","groupStart","groupEnd","cloned","bind","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","parseNormalIndex","parseUVIndex","addVertex","c","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","vi","uvi","lineFirstChar","lineSecondChar","trimLeft","Error","lineParts","lineVertices","lineUVs","li","llen","substr","container","concat","isLine","buffergeometry","createdMaterials","miLen","sourceMaterial","materialLine","addGroup","timeEnd","STLLoader","setResponseType","binData","ensureBinary","face_size","n_faces","reader","DataView","getUint32","byteLength","solid","getUint8","parseBinary","parseASCII","ensureString","colors","defaultR","defaultG","defaultB","hasColors","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","patternFace","patternNormal","patternVertex","buf","array_buffer","strArray"],"mappings":"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","file":"static/js/app.5b30df929881188d2dfc.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(52)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(84),\n  /* template */\n  __webpack_require__(45),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(96),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(95),\n  /* template */\n  __webpack_require__(49),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getCenter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return toIndexed; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* Box3 */]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ }),\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(94),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(53)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(83),\n  /* template */\n  __webpack_require__(48),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(82);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n\n    var name = page.name;\n\n    return {\n        path: '/' + name,\n        name: name,\n        component: page\n    };\n});\n\nroutes.push({\n    path: '*',\n    redirect: '/demo-basic'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(7)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(7)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(7)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(51)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(85),\n  /* template */\n  __webpack_require__(43),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(86),\n  /* template */\n  __webpack_require__(42),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(87),\n  /* template */\n  __webpack_require__(46),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(88),\n  /* template */\n  __webpack_require__(50),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(89),\n  /* template */\n  __webpack_require__(39),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(90),\n  /* template */\n  __webpack_require__(44),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(91),\n  /* template */\n  __webpack_require__(41),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(92),\n  /* template */\n  __webpack_require__(47),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(93),\n  /* template */\n  __webpack_require__(40),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(97),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(98),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"\\n                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"\\n                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(25);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(8)(\"6e88b5b7\", content, true);\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(26);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(8)(\"3bd70d8a\", content, true);\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(27);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(8)(\"12d3a60f\", content, true);\n\n/***/ }),\n/* 54 */,\n/* 55 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(24);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n/* 82 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_basic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_event__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_background__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_rotate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__demo_obj__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_stl__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_stl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__demo_stl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_collada__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_collada___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__demo_collada__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_json__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__demo_json__);\n\n\n\n\n\n\n\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_basic___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_event___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_background___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default.a, __WEBPACK_IMPORTED_MODULE_4__demo_obj___default.a, __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default.a, __WEBPACK_IMPORTED_MODULE_6__demo_stl___default.a, __WEBPACK_IMPORTED_MODULE_7__demo_collada___default.a, __WEBPACK_IMPORTED_MODULE_8__demo_json___default.a];\n\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n/* 84 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-3d-model.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n/* 85 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <p class=\"background-text\">\\n        Vue<br>3D<br>Model<br>Background\\n    </p>\\n    <div class=\"background-buttons\">\\n        <p>Color</p>\\n        <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n        <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n        <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n        <p>Alpha</p>\\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\\n        <button @click=\"bgAlpha = 1\">1</button>\\n        <button @click=\"bgAlpha = 0\">0</button>\\n    </div>\\n    <model-obj\\n        :backgroundAlpha=\"bgAlpha\"\\n        :backgroundColor=\"bgColor\"\\n        src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <p class=\"background-text\">\\n            Vue<br>3D<br>Model<br>Background\\n        </p>\\n        <div class=\"background-buttons\">\\n            <p>Color</p>\\n            <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n            <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n            <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n            <p>Alpha</p>\\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\\n            <button @click=\"bgAlpha = 1\">1</button>\\n            <button @click=\"bgAlpha = 0\">0</button>\\n        </div>\\n        <model-obj\\n            :backgroundAlpha=\"bgAlpha\"\\n            :backgroundColor=\"bgColor\"\\n            src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-background',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            bgColor: '#ff0',\n            bgAlpha: 0.5\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        setBackground: function setBackground(color, alpha) {}\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 86 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-three src=\"static/models/json/scene.json\"></model-three>\\n</template>\\n\\n<script>\\n    import { ModelThree } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelThree\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-three src=\"static/models/json/scene.json\"></model-three>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-basic',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelThree: __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 87 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-collada',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 88 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/tree.obj\"\\n        @on-mousemove=\"onMouseMove\">\\n    </model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                intersected: null\\n            }\\n        },\\n        methods: {\\n            onMouseMove ( event ) {\\n\\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                if ( !event ) {\\n\\n                    if ( this.intersected ) {\\n                        this.intersected.material.color.setStyle( \\'#fff\\' );\\n                    }\\n\\n                    this.intersected = null;\\n                    return;\\n                }\\n\\n                this.intersected = event.object;\\n                this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/tree.obj\"\\n            @on-mousemove=\"onMouseMove\">\\n        </model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                intersected: null\\n            },\\n            methods: {\\n                onMouseMove ( event ) {\\n\\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                    if ( !event ) {\\n\\n                        if ( this.intersected ) {\\n                            this.intersected.material.color.setStyle( \\'#fff\\' );\\n                        }\\n\\n                        this.intersected = null;\\n                        return;\\n                    }\\n\\n                    this.intersected = event.object;\\n                    this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-event',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            intersected: null\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            console.log(event);\n\n            if (!event) {\n\n                if (this.intersected) {\n                    this.intersected.material.color.setStyle('#fff');\n                }\n\n                this.intersected = null;\n                return;\n            }\n\n            this.intersected = event.object;\n            this.intersected.material.color.setStyle('#13ce66');\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 89 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 90 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/male02/male02.obj\"\\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/male02/male02.obj\"\\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj-mtl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 91 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 92 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada\\n        :rotation=\"rotation\"\\n        @on-load=\"onLoad\"\\n        src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data: {\\n            rotation: {\\n                x: 0,\\n                y: 0,\\n                z: 0\\n            }\\n        },\\n        methods: {\\n            onLoad () {\\n                this.rotate();\\n            },\\n            rotate () {\\n                this.rotation.y += 0.01;\\n                requestAnimationFrame( this.rotate );\\n            }\\n        },\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada\\n            :rotation=\"rotation\"\\n            @on-load=\"onLoad\"\\n            src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                rotation: {\\n                    x: 0,\\n                    y: 0,\\n                    z: 0\\n                }\\n            },\\n            methods: {\\n                onLoad () {\\n                    this.rotate();\\n                },\\n                rotate () {\\n                    this.rotation.y += 0.01;\\n                    requestAnimationFrame( this.rotate );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-rotate',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n            this.rotate();\n        },\n        rotate: function rotate() {\n            requestAnimationFrame(this.rotate);\n            this.rotation.y += 0.01;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 93 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n</template>\\n\\n<script>\\n    import { ModelStl } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelStl\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-stl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelStl: __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n/* 94 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-collada',\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data: function data() {\n\n        var loader = new __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__[\"a\" /* ColladaLoader */]();\n        loader.options.convertUpAxis = true;\n\n        return {\n            loader: loader\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (collada) {\n\n                _this.object = collada.scene;\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n/* 95 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__ = __webpack_require__(99);\n\n\n\n\n\n\nvar suportWebGL = function () {\n\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n        return false;\n    }\n}();\n\nvar handler = null;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        src: {\n            type: String\n        },\n        width: {\n            type: Number\n        },\n        height: {\n            type: Number\n        },\n        position: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        rotation: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        scale: {\n            type: Object,\n            default: function _default() {\n                return { x: 1, y: 1, z: 1 };\n            }\n        },\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [];\n            }\n        },\n        cameraPosition: {\n            type: Object\n        },\n        cameraRotation: {\n            type: Object\n        },\n        cameraUp: {\n            type: Object\n        },\n        cameraLookAt: {\n            type: Object\n        },\n        backgroundColor: {\n            default: 0xffffff\n        },\n        backgroundAlpha: {\n            type: Number,\n            default: 1\n        },\n        controllable: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data: function data() {\n        return {\n            suportWebGL: suportWebGL,\n            size: {\n                width: this.width,\n                height: this.height\n            },\n            object: null,\n            raycaster: new __WEBPACK_IMPORTED_MODULE_0_three__[\"z\" /* Raycaster */](),\n            mouse: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](),\n            camera: new __WEBPACK_IMPORTED_MODULE_0_three__[\"A\" /* PerspectiveCamera */](45, 1, 0.001, 100000),\n            scene: new __WEBPACK_IMPORTED_MODULE_0_three__[\"B\" /* Scene */](),\n            renderer: null,\n            controls: null,\n            allLights: [],\n            clock: typeof performance === 'undefined' ? Date : performance\n        };\n    },\n\n    computed: {\n        hasListener: function hasListener() {\n            var events = this._events;\n            var result = {};\n\n            ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click'].forEach(function (name) {\n                result[name] = !!events[name] && events[name].length > 0;\n            });\n\n            return result;\n        }\n    },\n    created: function created() {\n        window.addEventListener('resize', this.onResize, false);\n    },\n    mounted: function mounted() {\n\n        if (this.width === undefined || this.height === undefined) {\n            this.size = {\n                width: this.$el.offsetWidth,\n                height: this.$el.offsetHeight\n            };\n        }\n\n        this.renderer = new __WEBPACK_IMPORTED_MODULE_0_three__[\"C\" /* WebGLRenderer */]({ antialias: true, alpha: true, canvas: this.$refs.canvas });\n        this.renderer.shadowMap.enabled = true;\n\n        this.load();\n        this.update();\n\n        this.$el.addEventListener('mousedown', this.onMouseDown, false);\n        this.$el.addEventListener('mousemove', this.onMouseMove, false);\n        this.$el.addEventListener('mouseup', this.onMouseUp, false);\n        this.$el.addEventListener('click', this.onClick, false);\n\n        this.animate();\n    },\n    beforeDestroy: function beforeDestroy() {\n\n        this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n        this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n        this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n        this.$el.removeEventListener('click', this.onClick, false);\n    },\n\n    watch: {\n        src: function src() {\n            this.load();\n        },\n\n        rotation: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.rotation.set(val.x, val.y, val.z);\n            }\n        },\n        position: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.position.set(val.x, val.y, val.z);\n            }\n        },\n        scale: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.scale.set(val.x, val.y, val.z);\n            }\n        },\n        lights: {\n            deep: true,\n            handler: function handler(val, oldVal) {\n                this.updateLights();\n            }\n        },\n        size: {\n            deep: true,\n            handler: function handler(val) {\n                this.updateCamera();\n                this.updateRenderer();\n            }\n        },\n        controllable: function controllable() {\n            this.updateControls();\n        },\n        backgroundAlpha: function backgroundAlpha() {\n            this.updateRenderer();\n        },\n        backgroundColor: function backgroundColor() {\n            this.updateRenderer();\n        }\n    },\n    methods: {\n        onResize: function onResize() {\n            var _this = this;\n\n            if (this.width === undefined || this.height === undefined) {\n\n                this.$nextTick(function () {\n                    _this.size = {\n                        width: _this.$el.offsetWidth,\n                        height: _this.$el.offsetHeight\n                    };\n                });\n            }\n        },\n        onMouseDown: function onMouseDown(event) {\n\n            if (!this.hasListener['on-mousedown']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousedown', intersected);\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            if (!this.hasListener['on-mousemove']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousemove', intersected);\n        },\n        onMouseUp: function onMouseUp(event) {\n\n            if (!this.hasListener['on-mouseup']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mouseup', intersected);\n        },\n        onClick: function onClick(event) {\n\n            if (!this.hasListener['on-click']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-click', intersected);\n        },\n        pick: function pick(x, y) {\n\n            if (!this.object) return;\n\n            var rect = this.$el.getBoundingClientRect();\n\n            x -= rect.left;\n            y -= rect.top;\n\n            this.mouse.x = x / this.size.width * 2 - 1;\n            this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n            this.raycaster.setFromCamera(this.mouse, this.camera);\n\n            var intersects = this.raycaster.intersectObject(this.object, true);\n\n            return (intersects && intersects.length) > 0 ? intersects[0] : null;\n        },\n        update: function update() {\n\n            this.updateRenderer();\n            this.updateModel();\n            this.updateCamera();\n            this.updateLights();\n            this.updateControls();\n        },\n        updateModel: function updateModel() {\n\n            var object = this.object;\n\n            if (!object) return;\n\n            object.position.copy(this.position);\n            object.rotation.copy(this.rotation);\n            object.scale.copy(this.scale);\n\n            object.matrixWorldNeedsUpdate = true;\n        },\n        updateRenderer: function updateRenderer() {\n\n            var renderer = this.renderer;\n\n            renderer.setSize(this.size.width, this.size.height);\n            renderer.setPixelRatio(window.devicePixelRatio || 1);\n            renderer.setClearColor(new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */](this.backgroundColor).getHex());\n            renderer.setClearAlpha(this.backgroundAlpha);\n        },\n        updateCamera: function updateCamera() {\n\n            var camera = this.camera;\n            var object = this.object;\n\n            var distance = 0;\n            var center = null;\n\n            camera.aspect = this.size.width / this.size.height;\n            camera.updateProjectionMatrix();\n\n            if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n\n                if (!object) return;\n\n                distance = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* getSize */])(object).length();\n                center = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* getCenter */])(object);\n\n                camera.position.set(0, 0, 0);\n                camera.position.z = distance;\n                camera.position.add(center);\n                camera.lookAt(center);\n            } else {}\n\n            if (this.controls && center) this.controls.target.copy(center);\n        },\n        updateLights: function updateLights() {\n            var _this2 = this;\n\n            this.scene.remove.apply(this.scene, this.allLights);\n\n            this.allLights = [];\n\n            this.lights.forEach(function (item) {\n\n                if (!item.type) return;\n\n                var type = item.type.toLowerCase();\n\n                var light = null;\n\n                if (type === 'ambient' || type === 'ambientlight') {\n\n                    var color = item.color || 0x404040;\n                    var intensity = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"D\" /* AmbientLight */](color, intensity);\n                } else if (type === 'point' || type === 'pointlight') {\n\n                    var _color = item.color || 0xffffff;\n                    var _intensity = item.intensity || 1;\n                    var distance = item.distance || 0;\n                    var decay = item.decay || 1;\n\n                    light = new PointLight(_color, _intensity, distance, decay);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                } else if (type === 'directional' || type === 'directionallight') {\n\n                    var _color2 = item.color || 0xffffff;\n                    var _intensity2 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"E\" /* DirectionalLight */](_color2, _intensity2);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n\n                    if (item.target) {\n                        light.target.copy(item.target);\n                    }\n                } else if (type === 'hemisphere' || type === 'hemispherelight') {\n\n                    var skyColor = item.skyColor || 0xffffff;\n                    var groundColor = item.groundColor || 0xffffff;\n                    var _intensity3 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"F\" /* HemisphereLight */](skyColor, groundColor, _intensity3);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                }\n\n                _this2.allLights.push(light);\n                _this2.scene.add(light);\n            });\n        },\n        updateControls: function updateControls() {\n\n            if (this.controllable && this.controls) return;\n\n            if (this.controllable) {\n\n                if (this.controls) return;\n\n                this.controls = new __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__[\"a\" /* OrbitControls */](this.camera, this.$el);\n                this.controls.type = 'orbit';\n            } else {\n\n                if (this.controls) {\n\n                    this.controls.dispose();\n                    this.controls = null;\n                }\n            }\n        },\n        load: function load() {\n            var _this3 = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (object) {\n\n                if (_this3.process) {\n                    _this3.process(object);\n                }\n\n                _this3.object = object;\n\n                _this3.scene.add(_this3.object);\n\n                _this3.updateCamera();\n\n                _this3.$emit('on-load');\n            }, function (err) {\n\n                _this3.$emit('on-error', err);\n            });\n        },\n        animate: function animate() {\n            requestAnimationFrame(this.animate);\n            this.render();\n        },\n        render: function render() {\n            this.renderer.render(this.scene, this.camera);\n        }\n    }\n});\n\n/***/ }),\n/* 96 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-obj',\n    mixins: [__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        },\n        mtlPath: {\n            type: String\n        },\n        mtl: {\n            type: String\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__[\"a\" /* OBJLoader */](),\n            mtlLoader: new __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__[\"a\" /* MTLLoader */]()\n        };\n    },\n\n    watch: {\n        mtl: function mtl() {\n            this.load();\n        }\n    },\n    methods: {\n        process: function process(object) {\n            if (this.smoothing) {\n                object.traverse(function (child) {\n                    if (child.geometry) {\n                        child.geometry = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* toIndexed */])(child.geometry);\n                        child.geometry.computeVertexNormals();\n                    }\n                });\n            }\n        },\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            var onLoad = function onLoad(object) {\n\n                if (_this.process) {\n                    _this.process(object);\n                }\n\n                _this.object = object;\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            };\n\n            var onError = function onError(err) {\n\n                _this.$emit('on-error', err);\n            };\n\n            if (this.mtl) {\n\n                var mtlPath = this.mtlPath;\n                var mtlSrc = this.mtl;\n\n                if (!this.mtlPath) {\n\n                    var result = /^(.*\\/)([^/]*)$/.exec(this.mtl);\n\n                    if (result) {\n                        mtlPath = result[1];\n                        mtlSrc = result[2];\n                    }\n                }\n\n                if (mtlPath) {\n                    this.mtlLoader.setPath(mtlPath);\n                }\n\n                this.mtlLoader.load(mtlSrc, function (materials) {\n\n                    materials.preload();\n\n                    _this.loader.setMaterials(materials);\n\n                    _this.loader.load(_this.src, onLoad, onError);\n                }, onError);\n            } else {\n\n                this.loader.load(this.src, onLoad, onError);\n            }\n        }\n    }\n});\n\n/***/ }),\n/* 97 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-stl',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__[\"a\" /* STLLoader */]()\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (geometry) {\n\n                _this.object = new __WEBPACK_IMPORTED_MODULE_2_three__[\"x\" /* Mesh */](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"k\" /* MeshPhongMaterial */]());\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n/* 98 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-three',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_4\" /* ObjectLoader */]()\n        };\n    }\n});\n\n/***/ }),\n/* 99 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OrbitControls; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar OrbitControls = function OrbitControls(object, domElement) {\n\n\tthis.object = object;\n\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\tthis.enabled = true;\n\n\tthis.target = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\tthis.minPolarAngle = 0;\n\tthis.maxPolarAngle = Math.PI;\n\tthis.minAzimuthAngle = -Infinity;\n\tthis.maxAzimuthAngle = Infinity;\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\tthis.enablePan = true;\n\tthis.keyPanSpeed = 7.0;\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0;\n\tthis.enableKeys = true;\n\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].RIGHT };\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy(scope.target);\n\t\tscope.position0.copy(scope.object.position);\n\t\tscope.zoom0 = scope.object.zoom;\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy(scope.target0);\n\t\tscope.object.position.copy(scope.position0);\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent(changeEvent);\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\t};\n\n\tthis.update = function () {\n\n\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\tvar quat = new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](0, 1, 0));\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */]();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\toffset.applyQuaternion(quat);\n\n\t\t\tspherical.setFromVector3(offset);\n\n\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\tspherical.makeSafe();\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\tscope.target.add(panOffset);\n\n\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t}\n\n\t\t\tscale = 1;\n\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\t};\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\tvar spherical = new __WEBPACK_IMPORTED_MODULE_1_three__[\"I\" /* Spherical */]();\n\tvar sphericalDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"I\" /* Spherical */]();\n\n\tvar scale = 1;\n\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\tvar panStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t}\n\n\tfunction rotateLeft(angle) {\n\n\t\tsphericalDelta.theta -= angle;\n\t}\n\n\tfunction rotateUp(angle) {\n\n\t\tsphericalDelta.phi -= angle;\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\tv.setFromMatrixColumn(objectMatrix, 0);\n\t\t\tv.multiplyScalar(-distance);\n\n\t\t\tpanOffset.add(v);\n\t\t};\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\tv.setFromMatrixColumn(objectMatrix, 1);\n\t\t\tv.multiplyScalar(distance);\n\n\t\t\tpanOffset.add(v);\n\t\t};\n\t}();\n\n\tvar pan = function () {\n\n\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t} else {\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\tscope.enablePan = false;\n\t\t\t}\n\t\t};\n\t}();\n\n\tfunction dollyIn(dollyScale) {\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\n\t\t\tscale /= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\n\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\tscope.enableZoom = false;\n\t\t}\n\t}\n\n\tfunction dollyOut(dollyScale) {\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\n\t\t\tscale *= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\n\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\tscope.enableZoom = false;\n\t\t}\n\t}\n\n\tfunction handleMouseDownRotate(event) {\n\n\t\trotateStart.set(event.clientX, event.clientY);\n\t}\n\n\tfunction handleMouseDownDolly(event) {\n\n\t\tdollyStart.set(event.clientX, event.clientY);\n\t}\n\n\tfunction handleMouseDownPan(event) {\n\n\t\tpanStart.set(event.clientX, event.clientY);\n\t}\n\n\tfunction handleMouseMoveRotate(event) {\n\n\t\trotateEnd.set(event.clientX, event.clientY);\n\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\trotateStart.copy(rotateEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleMouseMoveDolly(event) {\n\n\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\tif (dollyDelta.y > 0) {\n\n\t\t\tdollyIn(getZoomScale());\n\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\tdollyOut(getZoomScale());\n\t\t}\n\n\t\tdollyStart.copy(dollyEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleMouseMovePan(event) {\n\n\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\tpan(panDelta.x, panDelta.y);\n\n\t\tpanStart.copy(panEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleMouseUp(event) {}\n\n\tfunction handleMouseWheel(event) {\n\n\t\tif (event.deltaY < 0) {\n\n\t\t\tdollyOut(getZoomScale());\n\t\t} else if (event.deltaY > 0) {\n\n\t\t\tdollyIn(getZoomScale());\n\t\t}\n\n\t\tscope.update();\n\t}\n\n\tfunction handleKeyDown(event) {\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tfunction handleTouchStartRotate(event) {\n\n\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t}\n\n\tfunction handleTouchStartDolly(event) {\n\n\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\tdollyStart.set(0, distance);\n\t}\n\n\tfunction handleTouchStartPan(event) {\n\n\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t}\n\n\tfunction handleTouchMoveRotate(event) {\n\n\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\trotateStart.copy(rotateEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleTouchMoveDolly(event) {\n\n\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\tdollyEnd.set(0, distance);\n\n\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\tif (dollyDelta.y > 0) {\n\n\t\t\tdollyOut(getZoomScale());\n\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\tdollyIn(getZoomScale());\n\t\t}\n\n\t\tdollyStart.copy(dollyEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleTouchMovePan(event) {\n\n\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\tpan(panDelta.x, panDelta.y);\n\n\t\tpanStart.copy(panEnd);\n\n\t\tscope.update();\n\t}\n\n\tfunction handleTouchEnd(event) {}\n\n\tfunction onMouseDown(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch (event.button) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\n\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\tscope.dispatchEvent(startEvent);\n\t\t}\n\t}\n\n\tfunction onMouseMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch (state) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleMouseMoveRotate(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseMoveDolly(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleMouseMovePan(event);\n\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tfunction onMouseUp(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\thandleMouseUp(event);\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\tscope.dispatchEvent(endEvent);\n\n\t\tstate = STATE.NONE;\n\t}\n\n\tfunction onMouseWheel(event) {\n\n\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\thandleMouseWheel(event);\n\n\t\tscope.dispatchEvent(startEvent);\n\t\tscope.dispatchEvent(endEvent);\n\t}\n\n\tfunction onKeyDown(event) {\n\n\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\thandleKeyDown(event);\n\t}\n\n\tfunction onTouchStart(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleTouchStartDolly(event);\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\n\t\t\tscope.dispatchEvent(startEvent);\n\t\t}\n\t}\n\n\tfunction onTouchMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\thandleTouchMoveDolly(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\t}\n\n\tfunction onTouchEnd(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\thandleTouchEnd(event);\n\n\t\tscope.dispatchEvent(endEvent);\n\n\t\tstate = STATE.NONE;\n\t}\n\n\tfunction onContextMenu(event) {\n\n\t\tevent.preventDefault();\n\t}\n\n\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\twindow.addEventListener('keydown', onKeyDown, false);\n\n\tthis.update();\n};\n\nOrbitControls.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"K\" /* EventDispatcher */].prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n\n/***/ }),\n/* 100 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ColladaLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar ColladaLoader = function ColladaLoader() {\n\n\tvar COLLADA = null;\n\tvar scene = null;\n\tvar visualScene;\n\tvar kinematicsModel;\n\n\tvar readyCallbackFunc = null;\n\n\tvar sources = {};\n\tvar images = {};\n\tvar animations = {};\n\tvar controllers = {};\n\tvar geometries = {};\n\tvar materials = {};\n\tvar effects = {};\n\tvar cameras = {};\n\tvar lights = {};\n\n\tvar animData;\n\tvar kinematics;\n\tvar visualScenes;\n\tvar kinematicsModels;\n\tvar baseUrl;\n\tvar morphs;\n\tvar skins;\n\n\tvar flip_uv = true;\n\tvar preferredShading = __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* SmoothShading */];\n\n\tvar options = {\n\t\tcenterGeometry: false,\n\n\t\tconvertUpAxis: false,\n\n\t\tsubdivideFaces: true,\n\n\t\tupAxis: 'Y',\n\n\t\tdefaultEnvMap: null\n\n\t};\n\n\tvar colladaUnit = 1.0;\n\tvar colladaUp = 'Y';\n\tvar upConversion = null;\n\n\tfunction load(url, readyCallback, progressCallback, failCallback) {\n\n\t\tvar length = 0;\n\n\t\tif (document.implementation && document.implementation.createDocument) {\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.onreadystatechange = function () {\n\n\t\t\t\tif (request.readyState === 4) {\n\n\t\t\t\t\tif (request.status === 0 || request.status === 200) {\n\n\t\t\t\t\t\tif (request.response) {\n\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\tparse(request.response, undefined, url);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.error(\"ColladaLoader: Empty or non-existing file (\" + url + \")\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.error('ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (request.readyState === 3) {\n\n\t\t\t\t\tif (progressCallback) {\n\n\t\t\t\t\t\tif (length === 0) {\n\n\t\t\t\t\t\t\tlength = request.getResponseHeader(\"Content-Length\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tprogressCallback({ total: length, loaded: request.responseText.length });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.open(\"GET\", url, true);\n\t\t\trequest.send(null);\n\t\t} else {\n\n\t\t\talert(\"Don't know how to parse XML!\");\n\t\t}\n\t}\n\n\tfunction parse(text, callBack, url) {\n\n\t\tCOLLADA = new DOMParser().parseFromString(text, 'text/xml');\n\t\tcallBack = callBack || readyCallbackFunc;\n\n\t\tif (url !== undefined) {\n\n\t\t\tvar parts = url.split('/');\n\t\t\tparts.pop();\n\t\t\tbaseUrl = (parts.length < 1 ? '.' : parts.join('/')) + '/';\n\t\t}\n\n\t\tparseAsset();\n\t\tsetUpConversion();\n\t\timages = parseLib(\"library_images image\", _Image, \"image\");\n\t\tmaterials = parseLib(\"library_materials material\", Material, \"material\");\n\t\teffects = parseLib(\"library_effects effect\", Effect, \"effect\");\n\t\tgeometries = parseLib(\"library_geometries geometry\", Geometry, \"geometry\");\n\t\tcameras = parseLib(\"library_cameras camera\", Camera, \"camera\");\n\t\tlights = parseLib(\"library_lights light\", Light, \"light\");\n\t\tcontrollers = parseLib(\"library_controllers controller\", Controller, \"controller\");\n\t\tanimations = parseLib(\"library_animations animation\", Animation, \"animation\");\n\t\tvisualScenes = parseLib(\"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\");\n\t\tkinematicsModels = parseLib(\"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\");\n\n\t\tmorphs = [];\n\t\tskins = [];\n\n\t\tvisualScene = parseScene();\n\t\tscene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"s\" /* Group */]();\n\n\t\tfor (var i = 0; i < visualScene.nodes.length; i++) {\n\n\t\t\tscene.add(createSceneGraph(visualScene.nodes[i]));\n\t\t}\n\n\t\tscene.scale.multiplyScalar(colladaUnit);\n\n\t\tcreateAnimations();\n\n\t\tkinematicsModel = parseKinematicsModel();\n\t\tcreateKinematics();\n\n\t\tvar result = {\n\n\t\t\tscene: scene,\n\t\t\tmorphs: morphs,\n\t\t\tskins: skins,\n\t\t\tanimations: animData,\n\t\t\tkinematics: kinematics,\n\t\t\tdae: {\n\t\t\t\timages: images,\n\t\t\t\tmaterials: materials,\n\t\t\t\tcameras: cameras,\n\t\t\t\tlights: lights,\n\t\t\t\teffects: effects,\n\t\t\t\tgeometries: geometries,\n\t\t\t\tcontrollers: controllers,\n\t\t\t\tanimations: animations,\n\t\t\t\tvisualScenes: visualScenes,\n\t\t\t\tvisualScene: visualScene,\n\t\t\t\tscene: visualScene,\n\t\t\t\tkinematicsModels: kinematicsModels,\n\t\t\t\tkinematicsModel: kinematicsModel\n\t\t\t}\n\n\t\t};\n\n\t\tif (callBack) {\n\n\t\t\tcallBack(result);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction setPreferredShading(shading) {\n\n\t\tpreferredShading = shading;\n\t}\n\n\tfunction parseAsset() {\n\n\t\tvar elements = COLLADA.querySelectorAll('asset');\n\n\t\tvar element = elements[0];\n\n\t\tif (element && element.childNodes) {\n\n\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\tcase 'unit':\n\n\t\t\t\t\t\tvar meter = child.getAttribute('meter');\n\n\t\t\t\t\t\tif (meter) {\n\n\t\t\t\t\t\t\tcolladaUnit = parseFloat(meter);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'up_axis':\n\n\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction parseLib(q, classSpec, prefix) {\n\n\t\tvar elements = COLLADA.querySelectorAll(q);\n\n\t\tvar lib = {};\n\n\t\tvar i = 0;\n\n\t\tvar elementsLength = elements.length;\n\n\t\tfor (var j = 0; j < elementsLength; j++) {\n\n\t\t\tvar element = elements[j];\n\t\t\tvar daeElement = new classSpec().parse(element);\n\n\t\t\tif (!daeElement.id || daeElement.id.length === 0) daeElement.id = prefix + i++;\n\t\t\tlib[daeElement.id] = daeElement;\n\t\t}\n\n\t\treturn lib;\n\t}\n\n\tfunction parseScene() {\n\n\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\n\t\tif (sceneElement) {\n\n\t\t\tvar url = sceneElement.getAttribute('url').replace(/^#/, '');\n\t\t\treturn visualScenes[url.length > 0 ? url : 'visual_scene0'];\n\t\t} else {\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction parseKinematicsModel() {\n\n\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\n\n\t\tif (kinematicsModelElement) {\n\n\t\t\tvar url = kinematicsModelElement.getAttribute('url').replace(/^#/, '');\n\t\t\treturn kinematicsModels[url.length > 0 ? url : 'kinematics_model0'];\n\t\t} else {\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction createAnimations() {\n\n\t\tanimData = [];\n\n\t\trecurseHierarchy(scene);\n\t}\n\n\tfunction recurseHierarchy(node) {\n\n\t\tvar n = visualScene.getChildById(node.colladaId, true),\n\t\t    newData = null;\n\n\t\tif (n && n.keys) {\n\n\t\t\tnewData = {\n\t\t\t\tfps: 60,\n\t\t\t\thierarchy: [{\n\t\t\t\t\tnode: n,\n\t\t\t\t\tkeys: n.keys,\n\t\t\t\t\tsids: n.sids\n\t\t\t\t}],\n\t\t\t\tnode: node,\n\t\t\t\tname: 'animation_' + node.name,\n\t\t\t\tlength: 0\n\t\t\t};\n\n\t\t\tanimData.push(newData);\n\n\t\t\tfor (var i = 0, il = n.keys.length; i < il; i++) {\n\n\t\t\t\tnewData.length = Math.max(newData.length, n.keys[i].time);\n\t\t\t}\n\t\t} else {\n\n\t\t\tnewData = {\n\t\t\t\thierarchy: [{\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\n\t\tfor (var i = 0, il = node.children.length; i < il; i++) {\n\n\t\t\tvar d = recurseHierarchy(node.children[i]);\n\n\t\t\tfor (var j = 0, jl = d.hierarchy.length; j < jl; j++) {\n\n\t\t\t\tnewData.hierarchy.push({\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn newData;\n\t}\n\n\tfunction calcAnimationBounds() {\n\n\t\tvar start = 1000000;\n\t\tvar end = -start;\n\t\tvar frames = 0;\n\t\tvar ID;\n\t\tfor (var id in animations) {\n\n\t\t\tvar animation = animations[id];\n\t\t\tID = ID || animation.id;\n\t\t\tfor (var i = 0; i < animation.sampler.length; i++) {\n\n\t\t\t\tvar sampler = animation.sampler[i];\n\n\t\t\t\tsampler.create();\n\n\t\t\t\tstart = Math.min(start, sampler.startTime);\n\t\t\t\tend = Math.max(end, sampler.endTime);\n\t\t\t\tframes = Math.max(frames, sampler.input.length);\n\t\t\t}\n\t\t}\n\n\t\treturn { start: start, end: end, frames: frames, ID: ID };\n\t}\n\n\tfunction createMorph(geometry, ctrl) {\n\n\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ctrl.url] : ctrl;\n\n\t\tif (!morphCtrl || !morphCtrl.morph) {\n\n\t\t\tconsole.log(\"could not find morph controller!\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar morph = morphCtrl.morph;\n\n\t\tfor (var i = 0; i < morph.targets.length; i++) {\n\n\t\t\tvar target_id = morph.targets[i];\n\t\t\tvar daeGeometry = geometries[target_id];\n\n\t\t\tif (!daeGeometry.mesh || !daeGeometry.mesh.primitives || !daeGeometry.mesh.primitives.length) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar target = daeGeometry.mesh.primitives[0].geometry;\n\n\t\t\tif (target.vertices.length === geometry.vertices.length) {\n\n\t\t\t\tgeometry.morphTargets.push({ name: \"target_1\", vertices: target.vertices });\n\t\t\t}\n\t\t}\n\n\t\tgeometry.morphTargets.push({ name: \"target_Z\", vertices: geometry.vertices });\n\t}\n\n\tfunction createSkin(geometry, ctrl, applyBindShape) {\n\n\t\tvar skinCtrl = controllers[ctrl.url];\n\n\t\tif (!skinCtrl || !skinCtrl.skin) {\n\n\t\t\tconsole.log(\"could not find skin controller!\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!ctrl.skeleton || !ctrl.skeleton.length) {\n\n\t\t\tconsole.log(\"could not find the skeleton for the skin!\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar skin = skinCtrl.skin;\n\t\tvar skeleton = visualScene.getChildById(ctrl.skeleton[0]);\n\t\tvar hierarchy = [];\n\n\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n\t\tvar bones = [];\n\t\tgeometry.skinWeights = [];\n\t\tgeometry.skinIndices = [];\n\n\t\tif (applyBindShape) {\n\n\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\tgeometry.vertices[i].applyMatrix4(skin.bindShapeMatrix);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setupSkeleton(node, bones, frame, parent) {\n\n\t\tnode.world = node.world || new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\tnode.localworld = node.localworld || new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\tnode.world.copy(node.matrix);\n\t\tnode.localworld.copy(node.matrix);\n\n\t\tif (node.channels && node.channels.length) {\n\n\t\t\tvar channel = node.channels[0];\n\t\t\tvar m = channel.sampler.output[frame];\n\n\t\t\tif (m instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]) {\n\n\t\t\t\tnode.world.copy(m);\n\t\t\t\tnode.localworld.copy(m);\n\t\t\t\tif (frame === 0) node.matrix.copy(m);\n\t\t\t}\n\t\t}\n\n\t\tif (parent) {\n\n\t\t\tnode.world.multiplyMatrices(parent, node.world);\n\t\t}\n\n\t\tbones.push(node);\n\n\t\tfor (var i = 0; i < node.nodes.length; i++) {\n\n\t\t\tsetupSkeleton(node.nodes[i], bones, frame, node.world);\n\t\t}\n\t}\n\n\tfunction setupSkinningMatrices(bones, skin) {\n\n\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\tvar bone = bones[i];\n\t\t\tvar found = -1;\n\n\t\t\tif (bone.type != 'JOINT') continue;\n\n\t\t\tfor (var j = 0; j < skin.joints.length; j++) {\n\n\t\t\t\tif (bone.sid === skin.joints[j]) {\n\n\t\t\t\t\tfound = j;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (found >= 0) {\n\n\t\t\t\tvar inv = skin.invBindMatrices[found];\n\n\t\t\t\tbone.invBindMatrix = inv;\n\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv);\n\t\t\t\tbone.animatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\tbone.animatrix.copy(bone.localworld);\n\t\t\t\tbone.weights = [];\n\n\t\t\t\tfor (var j = 0; j < skin.weights.length; j++) {\n\n\t\t\t\t\tfor (var k = 0; k < skin.weights[j].length; k++) {\n\n\t\t\t\t\t\tvar w = skin.weights[j][k];\n\n\t\t\t\t\t\tif (w.joint === found) {\n\n\t\t\t\t\t\t\tbone.weights.push(w);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\");\n\n\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\tbone.weights = [];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction flattenSkeleton(skeleton) {\n\n\t\tvar list = [];\n\t\tvar walk = function walk(parentid, node, list) {\n\n\t\t\tvar bone = {};\n\t\t\tbone.name = node.sid;\n\t\t\tbone.parent = parentid;\n\t\t\tbone.matrix = node.matrix;\n\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]()];\n\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\tbone.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\tbone.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\tbone.rotq = [data[1].x, data[1].y, data[1].z, data[1].w];\n\t\t\tlist.push(bone);\n\n\t\t\tfor (var i in node.nodes) {\n\n\t\t\t\twalk(node.sid, node.nodes[i], list);\n\t\t\t}\n\t\t};\n\n\t\twalk(-1, skeleton, list);\n\t\treturn list;\n\t}\n\n\tfunction skinToBindPose(geometry, skeleton, skinController) {\n\n\t\tvar bones = [];\n\t\tsetupSkeleton(skeleton, bones, -1);\n\t\tsetupSkinningMatrices(bones, skinController.skin);\n\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\tvar skinned = [];\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tskinned.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]());\n\t\t}\n\n\t\tfor (i = 0; i < bones.length; i++) {\n\n\t\t\tif (bones[i].type != 'JOINT') continue;\n\n\t\t\tfor (var j = 0; j < bones[i].weights.length; j++) {\n\n\t\t\t\tvar w = bones[i].weights[j];\n\t\t\t\tvar vidx = w.index;\n\t\t\t\tvar weight = w.weight;\n\n\t\t\t\tvar o = geometry.vertices[vidx];\n\t\t\t\tvar s = skinned[vidx];\n\n\t\t\t\tv.x = o.x;\n\t\t\t\tv.y = o.y;\n\t\t\t\tv.z = o.z;\n\n\t\t\t\tv.applyMatrix4(bones[i].skinningMatrix);\n\n\t\t\t\ts.x += v.x * weight;\n\t\t\t\ts.y += v.y * weight;\n\t\t\t\ts.z += v.z * weight;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tgeometry.vertices[i] = skinned[i];\n\t\t}\n\t}\n\n\tfunction applySkin(geometry, instanceCtrl, frame) {\n\n\t\tif (frame === undefined) frame = 40;\n\n\t\tvar skinController = controllers[instanceCtrl.url];\n\n\t\tif (!skinController || !skinController.skin) {\n\n\t\t\tconsole.log('ColladaLoader: Could not find skin controller.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!instanceCtrl.skeleton || !instanceCtrl.skeleton.length) {\n\n\t\t\tconsole.log('ColladaLoader: Could not find the skeleton for the skin. ');\n\t\t\treturn;\n\t\t}\n\n\t\tvar animationBounds = calcAnimationBounds();\n\t\tvar skeleton = visualScene.getChildById(instanceCtrl.skeleton[0], true) || visualScene.getChildBySid(instanceCtrl.skeleton[0], true);\n\n\t\tvar bonelist = flattenSkeleton(skeleton);\n\t\tvar joints = skinController.skin.joints;\n\n\t\tvar sortedbones = [];\n\t\tfor (var i = 0; i < joints.length; i++) {\n\n\t\t\tfor (var j = 0; j < bonelist.length; j++) {\n\n\t\t\t\tif (bonelist[j].name === joints[i]) {\n\n\t\t\t\t\tsortedbones[i] = bonelist[j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < sortedbones.length; i++) {\n\n\t\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\n\n\t\t\t\t\tsortedbones[i].parent = j;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar i, j, w, vidx, weight;\n\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](),\n\t\t    o,\n\t\t    s;\n\n\t\tfor (i = 0; i < geometry.vertices.length; i++) {\n\t\t\tgeometry.vertices[i].applyMatrix4(skinController.skin.bindShapeMatrix);\n\t\t}\n\n\t\tvar skinIndices = [];\n\t\tvar skinWeights = [];\n\t\tvar weights = skinController.skin.weights;\n\n\t\tfor (var i = 0; i < weights.length; i++) {\n\n\t\t\tvar indicies = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Vector4 */](weights[i][0] ? weights[i][0].joint : 0, weights[i][1] ? weights[i][1].joint : 0, weights[i][2] ? weights[i][2].joint : 0, weights[i][3] ? weights[i][3].joint : 0);\n\t\t\tvar weight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Vector4 */](weights[i][0] ? weights[i][0].weight : 0, weights[i][1] ? weights[i][1].weight : 0, weights[i][2] ? weights[i][2].weight : 0, weights[i][3] ? weights[i][3].weight : 0);\n\n\t\t\tskinIndices.push(indicies);\n\t\t\tskinWeights.push(weight);\n\t\t}\n\n\t\tgeometry.skinIndices = skinIndices;\n\t\tgeometry.skinWeights = skinWeights;\n\t\tgeometry.bones = sortedbones;\n\n\t\tvar animationdata = { \"name\": animationBounds.ID, \"fps\": 30, \"length\": animationBounds.frames / 30, \"hierarchy\": [] };\n\n\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\tanimationdata.hierarchy.push({ parent: sortedbones[j].parent, name: sortedbones[j].name, keys: [] });\n\t\t}\n\n\t\tconsole.log('ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.');\n\n\t\tskinToBindPose(geometry, skeleton, skinController);\n\n\t\tfor (frame = 0; frame < animationBounds.frames; frame++) {\n\n\t\t\tvar bones = [];\n\t\t\tvar skinned = [];\n\n\n\t\t\tsetupSkeleton(skeleton, bones, frame);\n\t\t\tsetupSkinningMatrices(bones, skinController.skin);\n\n\t\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j++) {\n\n\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\n\n\t\t\t\t\t\tvar key = {};\n\t\t\t\t\t\tkey.time = frame / 30;\n\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\n\n\t\t\t\t\t\tif (frame === 0) bones[i].matrix = key.matrix;\n\n\t\t\t\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]()];\n\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\tkey.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\t\t\t\tkey.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\t\t\t\tkey.rot = data[1];\n\n\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgeometry.animation = animationdata;\n\t\t}\n\t}\n\n\tfunction createKinematics() {\n\n\t\tif (kinematicsModel && kinematicsModel.joints.length === 0) {\n\t\t\tkinematics = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tvar jointMap = {};\n\n\t\tvar _addToMap = function _addToMap(jointIndex, parentVisualElement) {\n\n\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute('id');\n\t\t\tvar colladaNode = visualScene.getChildById(parentVisualElementId, true);\n\t\t\tvar joint = kinematicsModel.joints[jointIndex];\n\n\t\t\tscene.traverse(function (node) {\n\n\t\t\t\tif (node.colladaId == parentVisualElementId) {\n\n\t\t\t\t\tjointMap[jointIndex] = {\n\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\ttransforms: colladaNode.transforms,\n\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tkinematics = {\n\n\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\tgetJointValue: function getJointValue(jointIndex) {\n\n\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\tif (jointData) {\n\n\t\t\t\t\treturn jointData.position;\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('getJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetJointValue: function setJointValue(jointIndex, value) {\n\n\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\tif (jointData) {\n\n\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\tif (value > joint.limits.max || value < joint.limits.min) {\n\n\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')');\n\t\t\t\t\t} else if (joint.static) {\n\n\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' is static');\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar threejsNode = jointData.node;\n\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\t\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\t\t\tfor (i = 0; i < transforms.length; i++) {\n\n\t\t\t\t\t\t\tvar transform = transforms[i];\n\n\t\t\t\t\t\t\tif (transform.sid && transform.sid.indexOf('joint' + jointIndex) !== -1) {\n\t\t\t\t\t\t\t\tswitch (joint.type) {\n\n\t\t\t\t\t\t\t\t\tcase 'revolute':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(axis, __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(value)));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn('setJointValue: unknown joint type: ' + joint.type);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tswitch (transform.type) {\n\n\t\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(transform.obj);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(transform.obj, transform.angle));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\n\t\t\t\t\t\tvar elements = Array.prototype.slice.call(elementsFloat32Arr);\n\n\t\t\t\t\t\tvar elementsRowMajor = [elements[0], elements[4], elements[8], elements[12], elements[1], elements[5], elements[9], elements[13], elements[2], elements[6], elements[10], elements[14], elements[3], elements[7], elements[11], elements[15]];\n\n\t\t\t\t\t\tthreejsNode.matrix.set.apply(threejsNode.matrix, elementsRowMajor);\n\t\t\t\t\t\tthreejsNode.matrix.decompose(threejsNode.position, threejsNode.quaternion, threejsNode.scale);\n\n\t\t\t\t\t\tjointMap[jointIndex].position = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\n\n\t\tif (element) {\n\n\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\tcase 'bind_joint_axis':\n\n\t\t\t\t\t\tvar visualTarget = child.getAttribute('target').split('/').pop();\n\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\n\t\t\t\t\t\tvar jointIndex = parseInt(axis.split('joint').pop().split('.')[0]);\n\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector('[sid=\"' + visualTarget + '\"]');\n\n\t\t\t\t\t\tif (visualTargetElement) {\n\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\n\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction createSceneGraph(node, parent) {\n\n\t\tvar obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"O\" /* Object3D */]();\n\t\tvar skinned = false;\n\t\tvar skinController;\n\t\tvar morphController;\n\t\tvar i, j;\n\n\t\tfor (i = 0; i < node.controllers.length; i++) {\n\n\t\t\tvar controller = controllers[node.controllers[i].url];\n\n\t\t\tswitch (controller.type) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tif (geometries[controller.skin.source]) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.skin.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\tskinned = true;\n\t\t\t\t\t\tskinController = node.controllers[i];\n\t\t\t\t\t} else if (controllers[controller.skin.source]) {\n\n\t\t\t\t\t\tvar second = controllers[controller.skin.source];\n\t\t\t\t\t\tmorphController = second;\n\n\n\t\t\t\t\t\tif (second.morph && geometries[second.morph.source]) {\n\n\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\n\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tif (geometries[controller.morph.source]) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.morph.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\tmorphController = node.controllers[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log('ColladaLoader: Morph-controller partially supported.');\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tvar double_sided_materials = {};\n\n\t\tfor (i = 0; i < node.geometries.length; i++) {\n\n\t\t\tvar instance_geometry = node.geometries[i];\n\t\t\tvar instance_materials = instance_geometry.instance_material;\n\t\t\tvar geometry = geometries[instance_geometry.url];\n\t\t\tvar used_materials = {};\n\t\t\tvar used_materials_array = [];\n\t\t\tvar num_materials = 0;\n\t\t\tvar first_material;\n\n\t\t\tif (geometry) {\n\n\t\t\t\tif (!geometry.mesh || !geometry.mesh.primitives) continue;\n\n\t\t\t\tif (obj.name.length === 0) {\n\n\t\t\t\t\tobj.name = geometry.id;\n\t\t\t\t}\n\n\t\t\t\tif (instance_materials) {\n\n\t\t\t\t\tfor (j = 0; j < instance_materials.length; j++) {\n\n\t\t\t\t\t\tvar instance_material = instance_materials[j];\n\t\t\t\t\t\tvar mat = materials[instance_material.target];\n\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\n\t\t\t\t\t\tvar shader = effects[effect_id].shader;\n\t\t\t\t\t\tvar material3js = shader.material;\n\n\t\t\t\t\t\tif (geometry.doubleSided) {\n\n\t\t\t\t\t\t\tif (!(instance_material.symbol in double_sided_materials)) {\n\n\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\n\t\t\t\t\t\t\t\t_copied_material.side = __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */];\n\t\t\t\t\t\t\t\tdouble_sided_materials[instance_material.symbol] = _copied_material;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial3js = double_sided_materials[instance_material.symbol];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n\t\t\t\t\t\tused_materials[instance_material.symbol] = num_materials;\n\t\t\t\t\t\tused_materials_array.push(material3js);\n\t\t\t\t\t\tfirst_material = material3js;\n\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\n\t\t\t\t\t\tnum_materials++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar mesh;\n\t\t\t\tvar material = first_material || new __WEBPACK_IMPORTED_MODULE_1_three__[\"Q\" /* MeshLambertMaterial */]({ color: 0xdddddd, side: geometry.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* FrontSide */] });\n\t\t\t\tvar geom = geometry.mesh.geometry3js;\n\n\t\t\t\tif (num_materials > 1) {\n\n\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"R\" /* MultiMaterial */](used_materials_array);\n\n\t\t\t\t\tfor (j = 0; j < geom.faces.length; j++) {\n\n\t\t\t\t\t\tvar face = geom.faces[j];\n\t\t\t\t\t\tface.materialIndex = used_materials[face.daeMaterial];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (skinController !== undefined) {\n\n\t\t\t\t\tapplySkin(geom, skinController);\n\n\t\t\t\t\tif (geom.morphTargets.length > 0) {\n\n\t\t\t\t\t\tmaterial.morphTargets = true;\n\t\t\t\t\t\tmaterial.skinning = false;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterial.morphTargets = false;\n\t\t\t\t\t\tmaterial.skinning = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"S\" /* SkinnedMesh */](geom, material, false);\n\n\t\t\t\t\tmesh.name = 'skin_' + skins.length;\n\n\t\t\t\t\tskins.push(mesh);\n\t\t\t\t} else if (morphController !== undefined) {\n\n\t\t\t\t\tcreateMorph(geom, morphController);\n\n\t\t\t\t\tmaterial.morphTargets = true;\n\n\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Mesh */](geom, material);\n\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\n\n\t\t\t\t\tmorphs.push(mesh);\n\t\t\t\t} else {\n\n\t\t\t\t\tif (geom.isLineStrip === true) {\n\n\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"T\" /* Line */](geom);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Mesh */](geom, material);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tobj.add(mesh);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < node.cameras.length; i++) {\n\n\t\t\tvar instance_camera = node.cameras[i];\n\t\t\tvar cparams = cameras[instance_camera.url];\n\n\t\t\tvar cam = new __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */](cparams.yfov, parseFloat(cparams.aspect_ratio), parseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n\t\t\tobj.add(cam);\n\t\t}\n\n\t\tfor (i = 0; i < node.lights.length; i++) {\n\n\t\t\tvar light = null;\n\t\t\tvar instance_light = node.lights[i];\n\t\t\tvar lparams = lights[instance_light.url];\n\n\t\t\tif (lparams && lparams.technique) {\n\n\t\t\t\tvar color = lparams.color.getHex();\n\t\t\t\tvar intensity = lparams.intensity;\n\t\t\t\tvar distance = lparams.distance;\n\t\t\t\tvar angle = lparams.falloff_angle;\n\n\t\t\t\tswitch (lparams.technique) {\n\n\t\t\t\t\tcase 'directional':\n\n\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"E\" /* DirectionalLight */](color, intensity, distance);\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'point':\n\n\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"U\" /* PointLight */](color, intensity, distance);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'spot':\n\n\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"V\" /* SpotLight */](color, intensity, distance, angle);\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"D\" /* AmbientLight */](color);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (light) {\n\t\t\t\tobj.add(light);\n\t\t\t}\n\t\t}\n\n\t\tobj.name = node.name || node.id || \"\";\n\t\tobj.colladaId = node.id || \"\";\n\t\tobj.layer = node.layer || \"\";\n\t\tobj.matrix = node.matrix;\n\t\tobj.matrix.decompose(obj.position, obj.quaternion, obj.scale);\n\n\t\tif (options.centerGeometry && obj.geometry) {\n\n\t\t\tvar delta = obj.geometry.center();\n\t\t\tdelta.multiply(obj.scale);\n\t\t\tdelta.applyQuaternion(obj.quaternion);\n\n\t\t\tobj.position.sub(delta);\n\t\t}\n\n\t\tfor (i = 0; i < node.nodes.length; i++) {\n\n\t\t\tobj.add(createSceneGraph(node.nodes[i], node));\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\tfunction getJointId(skin, id) {\n\n\t\tfor (var i = 0; i < skin.joints.length; i++) {\n\n\t\t\tif (skin.joints[i] === id) {\n\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getLibraryNode(id) {\n\n\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\n\n\t\tfor (var i = 0; i < nodes.length; i++) {\n\n\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\n\n\t\t\tif (attObj && attObj.value === id) {\n\n\t\t\t\treturn nodes[i];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction getChannelsForNode(node) {\n\n\t\tvar channels = [];\n\t\tvar startTime = 1000000;\n\t\tvar endTime = -1000000;\n\n\t\tfor (var id in animations) {\n\n\t\t\tvar animation = animations[id];\n\n\t\t\tfor (var i = 0; i < animation.channel.length; i++) {\n\n\t\t\t\tvar channel = animation.channel[i];\n\t\t\t\tvar sampler = animation.sampler[i];\n\t\t\t\tvar id = channel.target.split('/')[0];\n\n\t\t\t\tif (id == node.id) {\n\n\t\t\t\t\tsampler.create();\n\t\t\t\t\tchannel.sampler = sampler;\n\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\n\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\n\t\t\t\t\tchannels.push(channel);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (channels.length) {\n\n\t\t\tnode.startTime = startTime;\n\t\t\tnode.endTime = endTime;\n\t\t}\n\n\t\treturn channels;\n\t}\n\n\tfunction calcFrameDuration(node) {\n\n\t\tvar minT = 10000000;\n\n\t\tfor (var i = 0; i < node.channels.length; i++) {\n\n\t\t\tvar sampler = node.channels[i].sampler;\n\n\t\t\tfor (var j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\tvar t0 = sampler.input[j];\n\t\t\t\tvar t1 = sampler.input[j + 1];\n\t\t\t\tminT = Math.min(minT, t1 - t0);\n\t\t\t}\n\t\t}\n\n\t\treturn minT;\n\t}\n\n\tfunction calcMatrixAt(node, t) {\n\n\t\tvar animated = {};\n\n\t\tvar i, j;\n\n\t\tfor (i = 0; i < node.channels.length; i++) {\n\n\t\t\tvar channel = node.channels[i];\n\t\t\tanimated[channel.sid] = channel;\n\t\t}\n\n\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\tfor (i = 0; i < node.transforms.length; i++) {\n\n\t\t\tvar transform = node.transforms[i];\n\t\t\tvar channel = animated[transform.sid];\n\n\t\t\tif (channel !== undefined) {\n\n\t\t\t\tvar sampler = channel.sampler;\n\t\t\t\tvar value;\n\n\t\t\t\tfor (j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\t\tif (sampler.input[j + 1] > t) {\n\n\t\t\t\t\t\tvalue = sampler.output[j];\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value !== undefined) {\n\n\t\t\t\t\tif (value instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]) {\n\n\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, value);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t}\n\t\t}\n\n\t\treturn matrix;\n\t}\n\n\tfunction bakeAnimations(node) {\n\n\t\tif (node.channels && node.channels.length) {\n\n\t\t\tvar keys = [],\n\t\t\t    sids = [];\n\n\t\t\tfor (var i = 0, il = node.channels.length; i < il; i++) {\n\n\t\t\t\tvar channel = node.channels[i],\n\t\t\t\t    fullSid = channel.fullSid,\n\t\t\t\t    sampler = channel.sampler,\n\t\t\t\t    input = sampler.input,\n\t\t\t\t    transform = node.getTransformBySid(channel.sid),\n\t\t\t\t    member;\n\n\t\t\t\tif (channel.arrIndices) {\n\n\t\t\t\t\tmember = [];\n\n\t\t\t\t\tfor (var j = 0, jl = channel.arrIndices.length; j < jl; j++) {\n\n\t\t\t\t\t\tmember[j] = getConvertedIndex(channel.arrIndices[j]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tmember = getConvertedMember(channel.member);\n\t\t\t\t}\n\n\t\t\t\tif (transform) {\n\n\t\t\t\t\tif (sids.indexOf(fullSid) === -1) {\n\n\t\t\t\t\t\tsids.push(fullSid);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var j = 0, jl = input.length; j < jl; j++) {\n\n\t\t\t\t\t\tvar time = input[j],\n\t\t\t\t\t\t    data = sampler.getData(transform.type, j, member),\n\t\t\t\t\t\t    key = findKey(keys, time);\n\n\t\t\t\t\t\tif (!key) {\n\n\t\t\t\t\t\t\tkey = new Key(time);\n\t\t\t\t\t\t\tvar timeNdx = findTimeNdx(keys, time);\n\t\t\t\t\t\t\tkeys.splice(timeNdx === -1 ? keys.length : timeNdx, 0, key);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkey.addTarget(fullSid, transform, member, data);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('Could not find transform \"' + channel.sid + '\" in node ' + node.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < sids.length; i++) {\n\n\t\t\t\tvar sid = sids[i];\n\n\t\t\t\tfor (var j = 0; j < keys.length; j++) {\n\n\t\t\t\t\tvar key = keys[j];\n\n\t\t\t\t\tif (!key.hasTarget(sid)) {\n\n\t\t\t\t\t\tinterpolateKeys(keys, key, j, sid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.keys = keys;\n\t\t\tnode.sids = sids;\n\t\t}\n\t}\n\n\tfunction findKey(keys, time) {\n\n\t\tvar retVal = null;\n\n\t\tfor (var i = 0, il = keys.length; i < il && retVal === null; i++) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif (key.time === time) {\n\n\t\t\t\tretVal = key;\n\t\t\t} else if (key.time > time) {\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction findTimeNdx(keys, time) {\n\n\t\tvar ndx = -1;\n\n\t\tfor (var i = 0, il = keys.length; i < il && ndx === -1; i++) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif (key.time >= time) {\n\n\t\t\t\tndx = i;\n\t\t\t}\n\t\t}\n\n\t\treturn ndx;\n\t}\n\n\tfunction interpolateKeys(keys, key, ndx, fullSid) {\n\n\t\tvar prevKey = getPrevKeyWith(keys, fullSid, ndx ? ndx - 1 : 0),\n\t\t    nextKey = getNextKeyWith(keys, fullSid, ndx + 1);\n\n\t\tif (prevKey && nextKey) {\n\n\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n\t\t\t    prevTarget = prevKey.getTarget(fullSid),\n\t\t\t    nextData = nextKey.getTarget(fullSid).data,\n\t\t\t    prevData = prevTarget.data,\n\t\t\t    data;\n\n\t\t\tif (prevTarget.type === 'matrix') {\n\n\t\t\t\tdata = prevData;\n\t\t\t} else if (prevData.length) {\n\n\t\t\t\tdata = [];\n\n\t\t\t\tfor (var i = 0; i < prevData.length; ++i) {\n\n\t\t\t\t\tdata[i] = prevData[i] + (nextData[i] - prevData[i]) * scale;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t}\n\n\t\t\tkey.addTarget(fullSid, prevTarget.transform, prevTarget.member, data);\n\t\t}\n\t}\n\n\tfunction getNextKeyWith(keys, fullSid, ndx) {\n\n\t\tfor (; ndx < keys.length; ndx++) {\n\n\t\t\tvar key = keys[ndx];\n\n\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction getPrevKeyWith(keys, fullSid, ndx) {\n\n\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n\t\tfor (; ndx >= 0; ndx--) {\n\n\t\t\tvar key = keys[ndx];\n\n\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction _Image() {\n\n\t\tthis.id = \"\";\n\t\tthis.init_from = \"\";\n\t}\n\n\t_Image.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tif (child.nodeName === 'init_from') {\n\n\t\t\t\tthis.init_from = child.textContent;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Controller() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.type = \"\";\n\t\tthis.skin = null;\n\t\tthis.morph = null;\n\t}\n\n\tController.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = \"none\";\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tthis.skin = new Skin().parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tthis.morph = new Morph().parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Morph() {\n\n\t\tthis.method = null;\n\t\tthis.source = null;\n\t\tthis.targets = null;\n\t\tthis.weights = null;\n\t}\n\n\tMorph.prototype.parse = function (element) {\n\n\t\tvar sources = {};\n\t\tvar inputs = [];\n\t\tvar i;\n\n\t\tthis.method = element.getAttribute('method');\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\n\t\tfor (i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar source = new Source().parse(child);\n\t\t\t\t\tsources[source.id] = source;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'targets':\n\n\t\t\t\t\tinputs = this.parseInputs(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < inputs.length; i++) {\n\n\t\t\tvar input = inputs[i];\n\t\t\tvar source = sources[input.source];\n\n\t\t\tswitch (input.semantic) {\n\n\t\t\t\tcase 'MORPH_TARGET':\n\n\t\t\t\t\tthis.targets = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'MORPH_WEIGHT':\n\n\t\t\t\t\tthis.weights = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tMorph.prototype.parseInputs = function (element) {\n\n\t\tvar inputs = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn inputs;\n\t};\n\n\tfunction Skin() {\n\n\t\tthis.source = \"\";\n\t\tthis.bindShapeMatrix = null;\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\t}\n\n\tSkin.prototype.parse = function (element) {\n\n\t\tvar sources = {};\n\t\tvar joints, weights;\n\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'bind_shape_matrix':\n\n\t\t\t\t\tvar f = _floats(child.textContent);\n\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4(f);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\tsources[src.id] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'joints':\n\n\t\t\t\t\tjoints = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertex_weights':\n\n\t\t\t\t\tweights = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.parseJoints(joints, sources);\n\t\tthis.parseWeights(weights, sources);\n\n\t\treturn this;\n\t};\n\n\tSkin.prototype.parseJoints = function (element, sources) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tvar input = new Input().parse(child);\n\t\t\t\t\tvar source = sources[input.source];\n\n\t\t\t\t\tif (input.semantic === 'JOINT') {\n\n\t\t\t\t\t\tthis.joints = source.read();\n\t\t\t\t\t} else if (input.semantic === 'INV_BIND_MATRIX') {\n\n\t\t\t\t\t\tthis.invBindMatrices = source.read();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tSkin.prototype.parseWeights = function (element, sources) {\n\n\t\tvar v,\n\t\t    vcount,\n\t\t    inputs = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v':\n\n\t\t\t\t\tv = _ints(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tvcount = _ints(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tvar index = 0;\n\n\t\tfor (var i = 0; i < vcount.length; i++) {\n\n\t\t\tvar numBones = vcount[i];\n\t\t\tvar vertex_weights = [];\n\n\t\t\tfor (var j = 0; j < numBones; j++) {\n\n\t\t\t\tvar influence = {};\n\n\t\t\t\tfor (var k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\tvar input = inputs[k];\n\t\t\t\t\tvar value = v[index + input.offset];\n\n\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\tinfluence.joint = value;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\tinfluence.weight = sources[input.source].data[value];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvertex_weights.push(influence);\n\t\t\t\tindex += inputs.length;\n\t\t\t}\n\n\t\t\tfor (var j = 0; j < vertex_weights.length; j++) {\n\n\t\t\t\tvertex_weights[j].index = i;\n\t\t\t}\n\n\t\t\tthis.weights.push(vertex_weights);\n\t\t}\n\t};\n\n\tfunction VisualScene() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.nodes = [];\n\t\tthis.scene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"s\" /* Group */]();\n\t}\n\n\tVisualScene.prototype.getChildById = function (id, recursive) {\n\n\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\tvar node = this.nodes[i].getChildById(id, recursive);\n\n\t\t\tif (node) {\n\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tVisualScene.prototype.getChildBySid = function (sid, recursive) {\n\n\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\tvar node = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\tif (node) {\n\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tVisualScene.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.nodes = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Node() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.sid = \"\";\n\t\tthis.nodes = [];\n\t\tthis.controllers = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.channels = [];\n\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t}\n\n\tNode.prototype.getChannelForTransform = function (transformSid) {\n\n\t\tfor (var i = 0; i < this.channels.length; i++) {\n\n\t\t\tvar channel = this.channels[i];\n\t\t\tvar parts = channel.target.split('/');\n\t\t\tvar id = parts.shift();\n\t\t\tvar sid = parts.shift();\n\t\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\t\t\tvar arrIndices;\n\n\t\t\tif (dotSyntax) {\n\n\t\t\t\tparts = sid.split(\".\");\n\t\t\t\tsid = parts.shift();\n\t\t\t} else if (arrSyntax) {\n\n\t\t\t\tarrIndices = sid.split(\"(\");\n\t\t\t\tsid = arrIndices.shift();\n\n\t\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (sid === transformSid) {\n\n\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n\t\t\t\treturn channel;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tNode.prototype.getChildById = function (id, recursive) {\n\n\t\tif (this.id === id) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (recursive) {\n\n\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\tvar n = this.nodes[i].getChildById(id, recursive);\n\n\t\t\t\tif (n) {\n\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tNode.prototype.getChildBySid = function (sid, recursive) {\n\n\t\tif (this.sid === sid) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (recursive) {\n\n\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\tvar n = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\t\tif (n) {\n\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tNode.prototype.getTransformBySid = function (sid) {\n\n\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\tif (this.transforms[i].sid === sid) return this.transforms[i];\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tNode.prototype.parse = function (element) {\n\n\t\tvar url;\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = element.getAttribute('type');\n\t\tthis.layer = element.getAttribute('layer');\n\n\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\n\n\t\tthis.nodes = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.cameras = [];\n\t\tthis.lights = [];\n\t\tthis.controllers = [];\n\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_camera':\n\n\t\t\t\t\tthis.cameras.push(new InstanceCamera().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_controller':\n\n\t\t\t\t\tthis.controllers.push(new InstanceController().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_geometry':\n\n\t\t\t\t\tthis.geometries.push(new InstanceGeometry().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_light':\n\n\t\t\t\t\tthis.lights.push(new InstanceLight().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_node':\n\n\t\t\t\t\turl = child.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\tvar iNode = getLibraryNode(url);\n\n\t\t\t\t\tif (iNode) {\n\n\t\t\t\t\t\tthis.nodes.push(new Node().parse(iNode));\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'scale':\n\t\t\t\tcase 'matrix':\n\t\t\t\tcase 'lookat':\n\t\t\t\tcase 'skew':\n\n\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.channels = getChannelsForNode(this);\n\t\tbakeAnimations(this);\n\n\t\tthis.updateMatrix();\n\n\t\treturn this;\n\t};\n\n\tNode.prototype.updateMatrix = function () {\n\n\t\tthis.matrix.identity();\n\n\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\tthis.transforms[i].apply(this.matrix);\n\t\t}\n\t};\n\n\tfunction Transform() {\n\n\t\tthis.sid = \"\";\n\t\tthis.type = \"\";\n\t\tthis.data = [];\n\t\tthis.obj = null;\n\t}\n\n\tTransform.prototype.parse = function (element) {\n\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.type = element.nodeName;\n\t\tthis.data = _floats(element.textContent);\n\t\tthis.convert();\n\n\t\treturn this;\n\t};\n\n\tTransform.prototype.convert = function () {\n\n\t\tswitch (this.type) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tthis.obj = getConvertedMat4(this.data);\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(this.data[3]);\n\n\t\t\tcase 'translate':\n\n\t\t\t\tfixCoords(this.data, -1);\n\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\tbreak;\n\n\t\t\tcase 'scale':\n\n\t\t\t\tfixCoords(this.data, 1);\n\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.log('Can not convert Transform of type ' + this.type);\n\t\t\t\tbreak;\n\n\t\t}\n\t};\n\n\tTransform.prototype.apply = function () {\n\n\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\treturn function (matrix) {\n\n\t\t\tswitch (this.type) {\n\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tmatrix.multiply(this.obj);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'translate':\n\n\t\t\t\t\tmatrix.multiply(m1.makeTranslation(this.obj.x, this.obj.y, this.obj.z));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\n\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(this.obj, this.angle));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'scale':\n\n\t\t\t\t\tmatrix.scale(this.obj);\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t};\n\t}();\n\n\tTransform.prototype.update = function (data, member) {\n\n\t\tvar members = ['X', 'Y', 'Z', 'ANGLE'];\n\n\t\tswitch (this.type) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tif (!member) {\n\n\t\t\t\t\tthis.obj.copy(data);\n\t\t\t\t} else if (member.length === 1) {\n\n\t\t\t\t\tswitch (member[0]) {\n\n\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\tthis.obj.n11 = data[0];\n\t\t\t\t\t\t\tthis.obj.n21 = data[1];\n\t\t\t\t\t\t\tthis.obj.n31 = data[2];\n\t\t\t\t\t\t\tthis.obj.n41 = data[3];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\tthis.obj.n12 = data[0];\n\t\t\t\t\t\t\tthis.obj.n22 = data[1];\n\t\t\t\t\t\t\tthis.obj.n32 = data[2];\n\t\t\t\t\t\t\tthis.obj.n42 = data[3];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tthis.obj.n13 = data[0];\n\t\t\t\t\t\t\tthis.obj.n23 = data[1];\n\t\t\t\t\t\t\tthis.obj.n33 = data[2];\n\t\t\t\t\t\t\tthis.obj.n43 = data[3];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\tthis.obj.n14 = data[0];\n\t\t\t\t\t\t\tthis.obj.n24 = data[1];\n\t\t\t\t\t\t\tthis.obj.n34 = data[2];\n\t\t\t\t\t\t\tthis.obj.n44 = data[3];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t} else if (member.length === 2) {\n\n\t\t\t\t\tvar propName = 'n' + (member[0] + 1) + (member[1] + 1);\n\t\t\t\t\tthis.obj[propName] = data;\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\n\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t}\n\n\t\t\t\tswitch (member) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t}\n\n\t\t\t\tswitch (member) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ANGLE':\n\n\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(data);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(data[3]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t}\n\t};\n\n\tfunction InstanceController() {\n\n\t\tthis.url = \"\";\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\t}\n\n\tInstanceController.prototype.parse = function (element) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'skeleton':\n\n\t\t\t\t\tthis.skeleton.push(child.textContent.replace(/^#/, ''));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bind_material':\n\n\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction InstanceMaterial() {\n\n\t\tthis.symbol = \"\";\n\t\tthis.target = \"\";\n\t}\n\n\tInstanceMaterial.prototype.parse = function (element) {\n\n\t\tthis.symbol = element.getAttribute('symbol');\n\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\n\t\treturn this;\n\t};\n\n\tfunction InstanceGeometry() {\n\n\t\tthis.url = \"\";\n\t\tthis.instance_material = [];\n\t}\n\n\tInstanceGeometry.prototype.parse = function (element) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.instance_material = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tif (child.nodeName === 'bind_material') {\n\n\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Geometry() {\n\n\t\tthis.id = \"\";\n\t\tthis.mesh = null;\n\t}\n\n\tGeometry.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\textractDoubleSided(this, element);\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'mesh':\n\n\t\t\t\t\tthis.mesh = new Mesh(this).parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Mesh(geometry) {\n\n\t\tthis.geometry = geometry.id;\n\t\tthis.primitives = [];\n\t\tthis.vertices = null;\n\t\tthis.geometry3js = null;\n\t}\n\n\tMesh.prototype.parse = function (element) {\n\n\t\tthis.primitives = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\t_source(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertices':\n\n\t\t\t\t\tthis.vertices = new Vertices().parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'linestrips':\n\n\t\t\t\t\tthis.primitives.push(new LineStrips().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'triangles':\n\n\t\t\t\t\tthis.primitives.push(new Triangles().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygons':\n\n\t\t\t\t\tthis.primitives.push(new Polygons().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polylist':\n\n\t\t\t\t\tthis.primitives.push(new Polylist().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.geometry3js = new __WEBPACK_IMPORTED_MODULE_1_three__[\"W\" /* Geometry */]();\n\n\t\tif (this.vertices === null) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\tvar vertexData = sources[this.vertices.input['POSITION'].source].data;\n\n\t\tfor (var i = 0; i < vertexData.length; i += 3) {\n\n\t\t\tthis.geometry3js.vertices.push(getConvertedVec3(vertexData, i).clone());\n\t\t}\n\n\t\tfor (var i = 0; i < this.primitives.length; i++) {\n\n\t\t\tvar primitive = this.primitives[i];\n\t\t\tprimitive.setVertices(this.vertices);\n\t\t\tthis.handlePrimitive(primitive, this.geometry3js);\n\t\t}\n\n\t\tif (this.geometry3js.calcNormals) {\n\n\t\t\tthis.geometry3js.computeVertexNormals();\n\t\t\tdelete this.geometry3js.calcNormals;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tMesh.prototype.handlePrimitive = function (primitive, geom) {\n\n\t\tif (primitive instanceof LineStrips) {\n\n\t\t\tgeom.isLineStrip = true;\n\t\t\treturn;\n\t\t}\n\n\t\tvar j,\n\t\t    k,\n\t\t    pList = primitive.p,\n\t\t    inputs = primitive.inputs;\n\t\tvar input, index, idx32;\n\t\tvar source, numParams;\n\t\tvar vcount,\n\t\t    vcIndex = 0,\n\t\t    maxOffset = 0;\n\t\tvar texture_sets = [];\n\n\t\tfor (j = 0; j < inputs.length; j++) {\n\n\t\t\tinput = inputs[j];\n\n\t\t\tvar offset = input.offset + 1;\n\t\t\tmaxOffset = maxOffset < offset ? offset : maxOffset;\n\n\t\t\tswitch (input.semantic) {\n\n\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tfor (var pCount = 0; pCount < pList.length; ++pCount) {\n\n\t\t\tvar p = pList[pCount],\n\t\t\t    i = 0;\n\n\t\t\twhile (i < p.length) {\n\n\t\t\t\tvar vs = [];\n\t\t\t\tvar ns = [];\n\t\t\t\tvar ts = null;\n\t\t\t\tvar cs = [];\n\n\t\t\t\tif (primitive.vcount) {\n\n\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[vcIndex++] : primitive.vcount;\n\t\t\t\t} else {\n\n\t\t\t\t\tvcount = p.length / maxOffset;\n\t\t\t\t}\n\n\t\t\t\tfor (j = 0; j < vcount; j++) {\n\n\t\t\t\t\tfor (k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\t\tinput = inputs[k];\n\t\t\t\t\t\tsource = sources[input.source];\n\n\t\t\t\t\t\tindex = p[i + j * maxOffset + input.offset];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\t\t\t\t\t\tidx32 = index * numParams;\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\tcase 'VERTEX':\n\n\t\t\t\t\t\t\t\tvs.push(index);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, idx32));\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\t\tts = ts || {};\n\t\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */](source.data[idx32], source.data[idx32 + 1]));\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (ns.length === 0) {\n\t\t\t\t\tinput = this.vertices.input.NORMAL;\n\n\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, vs[ndx] * numParams));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgeom.calcNormals = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!ts) {\n\n\t\t\t\t\tts = {};\n\n\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\n\n\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */](source.data[idx32], 1.0 - source.data[idx32 + 1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cs.length === 0) {\n\t\t\t\t\tinput = this.vertices.input.COLOR;\n\n\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar face = null,\n\t\t\t\t    faces = [],\n\t\t\t\t    uv,\n\t\t\t\t    uvArr;\n\n\t\t\t\tif (vcount === 3) {\n\n\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[1], vs[2], ns, cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[1], vs[3], ns.length ? [ns[0].clone(), ns[1].clone(), ns[3].clone()] : [], cs.length ? [cs[0], cs[1], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\n\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[1], vs[2], vs[3], ns.length ? [ns[1].clone(), ns[2].clone(), ns[3].clone()] : [], cs.length ? [cs[1], cs[2], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\t\t\t\t} else if (vcount > 4 && options.subdivideFaces) {\n\n\t\t\t\t\tvar clr = cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */](),\n\t\t\t\t\t    vec1,\n\t\t\t\t\t    vec2,\n\t\t\t\t\t    vec3,\n\t\t\t\t\t    v1,\n\t\t\t\t\t    v2,\n\t\t\t\t\t    norm;\n\n\t\t\t\t\tfor (k = 1; k < vcount - 1;) {\n\n\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[k], vs[k + 1], ns.length ? [ns[0].clone(), ns[k++].clone(), ns[k].clone()] : [], clr));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (faces.length) {\n\n\t\t\t\t\tfor (var ndx = 0, len = faces.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\tface = faces[ndx];\n\t\t\t\t\t\tface.daeMaterial = primitive.material;\n\t\t\t\t\t\tgeom.faces.push(face);\n\n\t\t\t\t\t\tfor (k = 0; k < texture_sets.length; k++) {\n\n\t\t\t\t\t\t\tuv = ts[texture_sets[k]];\n\n\t\t\t\t\t\t\tif (vcount > 4) {\n\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[ndx + 1], uv[ndx + 2]];\n\t\t\t\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\t\t\t\tif (ndx === 0) {\n\n\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[3]];\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tuvArr = [uv[1].clone(), uv[2], uv[3].clone()];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[2]];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (geom.faceVertexUvs[k] === undefined) {\n\n\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push(uvArr);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id);\n\t\t\t\t}\n\n\t\t\t\ti += maxOffset * vcount;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction Polygons() {\n\n\t\tthis.material = \"\";\n\t\tthis.count = 0;\n\t\tthis.inputs = [];\n\t\tthis.vcount = null;\n\t\tthis.p = [];\n\t\tthis.geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"W\" /* Geometry */]();\n\t}\n\n\tPolygons.prototype.setVertices = function (vertices) {\n\n\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\tif (this.inputs[i].source === vertices.id) {\n\n\t\t\t\tthis.inputs[i].source = vertices.input['POSITION'].source;\n\t\t\t}\n\t\t}\n\t};\n\n\tPolygons.prototype.parse = function (element) {\n\n\t\tthis.material = element.getAttribute('material');\n\t\tthis.count = _attr_as_int(element, 'count', 0);\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push(new Input().parse(element.childNodes[i]));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tthis.vcount = _ints(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'p':\n\n\t\t\t\t\tthis.p.push(_ints(child.textContent));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ph':\n\n\t\t\t\t\tconsole.warn('polygon holes not yet supported!');\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Polylist() {\n\n\t\tPolygons.call(this);\n\n\t\tthis.vcount = [];\n\t}\n\n\tPolylist.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\tPolylist.prototype.constructor = Polylist;\n\n\tfunction LineStrips() {\n\n\t\tPolygons.call(this);\n\n\t\tthis.vcount = 1;\n\t}\n\n\tLineStrips.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\tLineStrips.prototype.constructor = LineStrips;\n\n\tfunction Triangles() {\n\n\t\tPolygons.call(this);\n\n\t\tthis.vcount = 3;\n\t}\n\n\tTriangles.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\tTriangles.prototype.constructor = Triangles;\n\n\tfunction Accessor() {\n\n\t\tthis.source = \"\";\n\t\tthis.count = 0;\n\t\tthis.stride = 0;\n\t\tthis.params = [];\n\t}\n\n\tAccessor.prototype.parse = function (element) {\n\n\t\tthis.params = [];\n\t\tthis.source = element.getAttribute('source');\n\t\tthis.count = _attr_as_int(element, 'count', 0);\n\t\tthis.stride = _attr_as_int(element, 'stride', 0);\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tif (child.nodeName === 'param') {\n\n\t\t\t\tvar param = {};\n\t\t\t\tparam['name'] = child.getAttribute('name');\n\t\t\t\tparam['type'] = child.getAttribute('type');\n\t\t\t\tthis.params.push(param);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Vertices() {\n\n\t\tthis.input = {};\n\t}\n\n\tVertices.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tif (element.childNodes[i].nodeName === 'input') {\n\n\t\t\t\tvar input = new Input().parse(element.childNodes[i]);\n\t\t\t\tthis.input[input.semantic] = input;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Input() {\n\n\t\tthis.semantic = \"\";\n\t\tthis.offset = 0;\n\t\tthis.source = \"\";\n\t\tthis.set = 0;\n\t}\n\n\tInput.prototype.parse = function (element) {\n\n\t\tthis.semantic = element.getAttribute('semantic');\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\tthis.set = _attr_as_int(element, 'set', -1);\n\t\tthis.offset = _attr_as_int(element, 'offset', 0);\n\n\t\tif (this.semantic === 'TEXCOORD' && this.set < 0) {\n\n\t\t\tthis.set = 0;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Source(id) {\n\n\t\tthis.id = id;\n\t\tthis.type = null;\n\t}\n\n\tSource.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'bool_array':\n\n\t\t\t\t\tthis.data = _bools(child.textContent);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'float_array':\n\n\t\t\t\t\tthis.data = _floats(child.textContent);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'int_array':\n\n\t\t\t\t\tthis.data = _ints(child.textContent);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IDREF_array':\n\t\t\t\tcase 'Name_array':\n\n\t\t\t\t\tthis.data = _strings(child.textContent);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tfor (var j = 0; j < child.childNodes.length; j++) {\n\n\t\t\t\t\t\tif (child.childNodes[j].nodeName === 'accessor') {\n\n\t\t\t\t\t\t\tthis.accessor = new Accessor().parse(child.childNodes[j]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tSource.prototype.read = function () {\n\n\t\tvar result = [];\n\n\t\tvar param = this.accessor.params[0];\n\n\t\tswitch (param.type) {\n\n\t\t\tcase 'IDREF':\n\t\t\tcase 'Name':case 'name':\n\t\t\tcase 'float':\n\n\t\t\t\treturn this.data;\n\n\t\t\tcase 'float4x4':\n\n\t\t\t\tfor (var j = 0; j < this.data.length; j += 16) {\n\n\t\t\t\t\tvar s = this.data.slice(j, j + 16);\n\t\t\t\t\tvar m = getConvertedMat4(s);\n\t\t\t\t\tresult.push(m);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.log('ColladaLoader: Source: Read dont know how to read ' + param.type + '.');\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tfunction Material() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.instance_effect = null;\n\t}\n\n\tMaterial.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tif (element.childNodes[i].nodeName === 'instance_effect') {\n\n\t\t\t\tthis.instance_effect = new InstanceEffect().parse(element.childNodes[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction ColorOrTexture() {\n\n\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]();\n\t\tthis.color.setRGB(Math.random(), Math.random(), Math.random());\n\t\tthis.color.a = 1.0;\n\n\t\tthis.texture = null;\n\t\tthis.texcoord = null;\n\t\tthis.texOpts = null;\n\t}\n\n\tColorOrTexture.prototype.isColor = function () {\n\n\t\treturn this.texture === null;\n\t};\n\n\tColorOrTexture.prototype.isTexture = function () {\n\n\t\treturn this.texture != null;\n\t};\n\n\tColorOrTexture.prototype.parse = function (element) {\n\n\t\tif (element.nodeName === 'transparent') {\n\n\t\t\tthis.opaque = element.getAttribute('opaque');\n\t\t}\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'color':\n\n\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]();\n\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\n\t\t\t\t\tthis.texture = child.getAttribute('texture');\n\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\n\n\t\t\t\t\tthis.texOpts = {\n\t\t\t\t\t\toffsetU: 0,\n\t\t\t\t\t\toffsetV: 0,\n\t\t\t\t\t\trepeatU: 1,\n\t\t\t\t\t\trepeatV: 1,\n\t\t\t\t\t\twrapU: 1,\n\t\t\t\t\t\twrapV: 1\n\t\t\t\t\t};\n\t\t\t\t\tthis.parseTexture(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tColorOrTexture.prototype.parseTexture = function (element) {\n\n\t\tif (!element.childNodes) return this;\n\n\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'extra') {\n\n\t\t\telement = element.childNodes[1];\n\n\t\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'technique') {\n\n\t\t\t\telement = element.childNodes[1];\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'offsetU':\n\t\t\t\tcase 'offsetV':\n\t\t\t\tcase 'repeatU':\n\t\t\t\tcase 'repeatV':\n\n\t\t\t\t\tthis.texOpts[child.nodeName] = parseFloat(child.textContent);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrapU':\n\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\tif (child.textContent.toUpperCase() === 'TRUE') {\n\n\t\t\t\t\t\tthis.texOpts[child.nodeName] = 1;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.texOpts[child.nodeName] = parseInt(child.textContent);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.texOpts[child.nodeName] = child.textContent;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Shader(type, effect) {\n\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.material = null;\n\t}\n\n\tShader.prototype.parse = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\t\t\t\tcase 'transparent':\n\n\t\t\t\t\tthis[child.nodeName] = new ColorOrTexture().parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bump':\n\t\t\t\t\tvar bumpType = child.getAttribute('bumptype');\n\t\t\t\t\tif (bumpType) {\n\t\t\t\t\t\tif (bumpType.toLowerCase() === \"heightfield\") {\n\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t} else if (bumpType.toLowerCase() === \"normalmap\") {\n\t\t\t\t\t\t\tthis['normal'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error(\"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\t\t\t\tcase 'reflectivity':\n\t\t\t\tcase 'index_of_refraction':\n\t\t\t\tcase 'transparency':\n\n\t\t\t\t\tvar f = child.querySelectorAll('float');\n\n\t\t\t\t\tif (f.length > 0) this[child.nodeName] = parseFloat(f[0].textContent);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.create();\n\t\treturn this;\n\t};\n\n\tShader.prototype.create = function () {\n\n\t\tvar props = {};\n\n\t\tvar transparent = false;\n\n\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n\t\t\tvar transparentColor = this['transparent'];\n\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\n\n\t\t\tif (transparencyLevel > 0) {\n\t\t\t\ttransparent = true;\n\t\t\t\tprops['transparent'] = true;\n\t\t\t\tprops['opacity'] = 1 - transparencyLevel;\n\t\t\t}\n\t\t}\n\n\t\tvar keys = {\n\t\t\t'diffuse': 'map',\n\t\t\t'ambient': 'lightMap',\n\t\t\t'specular': 'specularMap',\n\t\t\t'emission': 'emissionMap',\n\t\t\t'bump': 'bumpMap',\n\t\t\t'normal': 'normalMap'\n\t\t};\n\n\t\tfor (var prop in this) {\n\n\t\t\tswitch (prop) {\n\n\t\t\t\tcase 'ambient':\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\t\t\t\tcase 'bump':\n\t\t\t\tcase 'normal':\n\n\t\t\t\t\tvar cot = this[prop];\n\n\t\t\t\t\tif (cot instanceof ColorOrTexture) {\n\n\t\t\t\t\t\tif (cot.isTexture()) {\n\n\t\t\t\t\t\t\tvar samplerId = cot.texture;\n\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\n\n\t\t\t\t\t\t\tif (sampler !== undefined && sampler.source !== undefined) {\n\n\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\n\n\t\t\t\t\t\t\t\tif (surface !== undefined) {\n\n\t\t\t\t\t\t\t\t\tvar image = images[surface.init_from];\n\n\t\t\t\t\t\t\t\t\tif (image) {\n\n\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\n\n\t\t\t\t\t\t\t\t\t\tvar texture;\n\t\t\t\t\t\t\t\t\t\tvar loader = __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Loader */].Handlers.get(url);\n\n\t\t\t\t\t\t\t\t\t\tif (loader !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load(url);\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Y\" /* Texture */]();\n\n\t\t\t\t\t\t\t\t\t\t\tloadTextureImage(texture, url);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_s === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"Z\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"_0\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_t === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"Z\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"_0\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\n\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\n\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\n\n\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (prop === 'diffuse' || !transparent) {\n\n\t\t\t\t\t\t\tif (prop === 'emission') {\n\n\t\t\t\t\t\t\t\tprops['emissive'] = cot.color.getHex();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tprops[prop] = cot.color.getHex();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\n\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'reflectivity':\n\n\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\tif (props[prop] > 0.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tprops['combine'] = __WEBPACK_IMPORTED_MODULE_1_three__[\"_1\" /* MixOperation */];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'index_of_refraction':\n\n\t\t\t\t\tprops['refractionRatio'] = this[prop];\n\t\t\t\t\tif (this[prop] !== 1.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'transparency':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tprops['shading'] = preferredShading;\n\t\tprops['side'] = this.effect.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* FrontSide */];\n\n\t\tif (props.diffuse !== undefined) {\n\n\t\t\tprops.color = props.diffuse;\n\t\t\tdelete props.diffuse;\n\t\t}\n\n\t\tswitch (this.type) {\n\n\t\t\tcase 'constant':\n\n\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\n\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_2\" /* MeshBasicMaterial */](props);\n\t\t\t\tbreak;\n\n\t\t\tcase 'phong':\n\t\t\tcase 'blinn':\n\n\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* MeshPhongMaterial */](props);\n\t\t\t\tbreak;\n\n\t\t\tcase 'lambert':\n\t\t\tdefault:\n\n\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Q\" /* MeshLambertMaterial */](props);\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn this.material;\n\t};\n\n\tfunction Surface(effect) {\n\n\t\tthis.effect = effect;\n\t\tthis.init_from = null;\n\t\tthis.format = null;\n\t}\n\n\tSurface.prototype.parse = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'init_from':\n\n\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'format':\n\n\t\t\t\t\tthis.format = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(\"unhandled Surface prop: \" + child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Sampler2D(effect) {\n\n\t\tthis.effect = effect;\n\t\tthis.source = null;\n\t\tthis.wrap_s = null;\n\t\tthis.wrap_t = null;\n\t\tthis.minfilter = null;\n\t\tthis.magfilter = null;\n\t\tthis.mipfilter = null;\n\t}\n\n\tSampler2D.prototype.parse = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tthis.source = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'minfilter':\n\n\t\t\t\t\tthis.minfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'magfilter':\n\n\t\t\t\t\tthis.magfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mipfilter':\n\n\t\t\t\t\tthis.mipfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_s':\n\n\t\t\t\t\tthis.wrap_s = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_t':\n\n\t\t\t\t\tthis.wrap_t = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(\"unhandled Sampler2D prop: \" + child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Effect() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.shader = null;\n\t\tthis.surface = {};\n\t\tthis.sampler = {};\n\t}\n\n\tEffect.prototype.create = function () {\n\n\t\tif (this.shader === null) {\n\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tEffect.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\n\t\textractDoubleSided(this, element);\n\n\t\tthis.shader = null;\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseTechnique(this.parseProfileCOMMON(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tEffect.prototype.parseNewparam = function (element) {\n\n\t\tvar sid = element.getAttribute('sid');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'surface':\n\n\t\t\t\t\tthis.surface[sid] = new Surface(this).parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler2D':\n\n\t\t\t\t\tthis.sampler[sid] = new Sampler2D(this).parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tEffect.prototype.parseProfileCOMMON = function (element) {\n\n\t\tvar technique;\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseProfileCOMMON(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\ttechnique = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'newparam':\n\n\t\t\t\t\tthis.parseNewparam(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'image':\n\n\t\t\t\t\tvar _image = new _Image().parse(child);\n\t\t\t\t\timages[_image.id] = _image;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn technique;\n\t};\n\n\tEffect.prototype.parseTechnique = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'constant':\n\t\t\t\tcase 'lambert':\n\t\t\t\tcase 'blinn':\n\t\t\t\tcase 'phong':\n\n\t\t\t\t\tthis.shader = new Shader(child.nodeName, this).parse(child);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'extra':\n\t\t\t\t\tthis.parseExtra(child);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tEffect.prototype.parseExtra = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'technique':\n\t\t\t\t\tthis.parseExtraTechnique(child);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tEffect.prototype.parseExtraTechnique = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'bump':\n\t\t\t\t\tthis.shader.parse(element);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction InstanceEffect() {\n\n\t\tthis.url = \"\";\n\t}\n\n\tInstanceEffect.prototype.parse = function (element) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\treturn this;\n\t};\n\n\tfunction Animation() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.source = {};\n\t\tthis.sampler = [];\n\t\tthis.channel = [];\n\t}\n\n\tAnimation.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.source = {};\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'animation':\n\n\t\t\t\t\tvar anim = new Animation().parse(child);\n\n\t\t\t\t\tfor (var src in anim.source) {\n\n\t\t\t\t\t\tthis.source[src] = anim.source[src];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var j = 0; j < anim.channel.length; j++) {\n\n\t\t\t\t\t\tthis.channel.push(anim.channel[j]);\n\t\t\t\t\t\tthis.sampler.push(anim.sampler[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\tthis.source[src.id] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler':\n\n\t\t\t\t\tthis.sampler.push(new Sampler(this).parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'channel':\n\n\t\t\t\t\tthis.channel.push(new Channel(this).parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Channel(animation) {\n\n\t\tthis.animation = animation;\n\t\tthis.source = \"\";\n\t\tthis.target = \"\";\n\t\tthis.fullSid = null;\n\t\tthis.sid = null;\n\t\tthis.dotSyntax = null;\n\t\tthis.arrSyntax = null;\n\t\tthis.arrIndices = null;\n\t\tthis.member = null;\n\t}\n\n\tChannel.prototype.parse = function (element) {\n\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\tthis.target = element.getAttribute('target');\n\n\t\tvar parts = this.target.split('/');\n\n\t\tvar id = parts.shift();\n\t\tvar sid = parts.shift();\n\n\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\n\t\tif (dotSyntax) {\n\n\t\t\tparts = sid.split(\".\");\n\t\t\tthis.sid = parts.shift();\n\t\t\tthis.member = parts.shift();\n\t\t} else if (arrSyntax) {\n\n\t\t\tvar arrIndices = sid.split(\"(\");\n\t\t\tthis.sid = arrIndices.shift();\n\n\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t}\n\n\t\t\tthis.arrIndices = arrIndices;\n\t\t} else {\n\n\t\t\tthis.sid = sid;\n\t\t}\n\n\t\tthis.fullSid = sid;\n\t\tthis.dotSyntax = dotSyntax;\n\t\tthis.arrSyntax = arrSyntax;\n\n\t\treturn this;\n\t};\n\n\tfunction Sampler(animation) {\n\n\t\tthis.id = \"\";\n\t\tthis.animation = animation;\n\t\tthis.inputs = [];\n\t\tthis.input = null;\n\t\tthis.output = null;\n\t\tthis.strideOut = null;\n\t\tthis.interpolation = null;\n\t\tthis.startTime = null;\n\t\tthis.endTime = null;\n\t\tthis.duration = 0;\n\t}\n\n\tSampler.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.inputs = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push(new Input().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tSampler.prototype.create = function () {\n\n\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\tvar input = this.inputs[i];\n\t\t\tvar source = this.animation.source[input.source];\n\n\t\t\tswitch (input.semantic) {\n\n\t\t\t\tcase 'INPUT':\n\n\t\t\t\t\tthis.input = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUTPUT':\n\n\t\t\t\t\tthis.output = source.read();\n\t\t\t\t\tthis.strideOut = source.accessor.stride;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'INTERPOLATION':\n\n\t\t\t\t\tthis.interpolation = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IN_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUT_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(input.semantic);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.startTime = 0;\n\t\tthis.endTime = 0;\n\t\tthis.duration = 0;\n\n\t\tif (this.input.length) {\n\n\t\t\tthis.startTime = 100000000;\n\t\t\tthis.endTime = -100000000;\n\n\t\t\tfor (var i = 0; i < this.input.length; i++) {\n\n\t\t\t\tthis.startTime = Math.min(this.startTime, this.input[i]);\n\t\t\t\tthis.endTime = Math.max(this.endTime, this.input[i]);\n\t\t\t}\n\n\t\t\tthis.duration = this.endTime - this.startTime;\n\t\t}\n\t};\n\n\tSampler.prototype.getData = function (type, ndx, member) {\n\n\t\tvar data;\n\n\t\tif (type === 'matrix' && this.strideOut === 16) {\n\n\t\t\tdata = this.output[ndx];\n\t\t} else if (this.strideOut > 1) {\n\n\t\t\tdata = [];\n\t\t\tndx *= this.strideOut;\n\n\t\t\tfor (var i = 0; i < this.strideOut; ++i) {\n\n\t\t\t\tdata[i] = this.output[ndx + i];\n\t\t\t}\n\n\t\t\tif (this.strideOut === 3) {\n\n\t\t\t\tswitch (type) {\n\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\tfixCoords(data, -1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\tfixCoords(data, 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t} else if (this.strideOut === 4 && type === 'matrix') {\n\n\t\t\t\tfixCoords(data, -1);\n\t\t\t}\n\t\t} else {\n\n\t\t\tdata = this.output[ndx];\n\n\t\t\tif (member && type === 'translate') {\n\t\t\t\tdata = getConvertedTranslation(member, data);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tfunction Key(time) {\n\n\t\tthis.targets = [];\n\t\tthis.time = time;\n\t}\n\n\tKey.prototype.addTarget = function (fullSid, transform, member, data) {\n\n\t\tthis.targets.push({\n\t\t\tsid: fullSid,\n\t\t\tmember: member,\n\t\t\ttransform: transform,\n\t\t\tdata: data\n\t\t});\n\t};\n\n\tKey.prototype.apply = function (opt_sid) {\n\n\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\tvar target = this.targets[i];\n\n\t\t\tif (!opt_sid || target.sid === opt_sid) {\n\n\t\t\t\ttarget.transform.update(target.data, target.member);\n\t\t\t}\n\t\t}\n\t};\n\n\tKey.prototype.getTarget = function (fullSid) {\n\n\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\treturn this.targets[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tKey.prototype.hasTarget = function (fullSid) {\n\n\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tKey.prototype.interpolate = function (nextKey, time) {\n\n\t\tfor (var i = 0, l = this.targets.length; i < l; i++) {\n\n\t\t\tvar target = this.targets[i],\n\t\t\t    nextTarget = nextKey.getTarget(target.sid),\n\t\t\t    data;\n\n\t\t\tif (target.transform.type !== 'matrix' && nextTarget) {\n\n\t\t\t\tvar scale = (time - this.time) / (nextKey.time - this.time),\n\t\t\t\t    nextData = nextTarget.data,\n\t\t\t\t    prevData = target.data;\n\n\t\t\t\tif (scale < 0) scale = 0;\n\t\t\t\tif (scale > 1) scale = 1;\n\n\t\t\t\tif (prevData.length) {\n\n\t\t\t\t\tdata = [];\n\n\t\t\t\t\tfor (var j = 0; j < prevData.length; ++j) {\n\n\t\t\t\t\t\tdata[j] = prevData[j] + (nextData[j] - prevData[j]) * scale;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tdata = target.data;\n\t\t\t}\n\n\t\t\ttarget.transform.update(data, target.member);\n\t\t}\n\t};\n\n\tfunction Camera() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\t}\n\n\tCamera.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'optics':\n\n\t\t\t\t\tthis.parseOptics(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tCamera.prototype.parseOptics = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tif (element.childNodes[i].nodeName === 'technique_common') {\n\n\t\t\t\tvar technique = element.childNodes[i];\n\n\t\t\t\tfor (var j = 0; j < technique.childNodes.length; j++) {\n\n\t\t\t\t\tthis.technique = technique.childNodes[j].nodeName;\n\n\t\t\t\t\tif (this.technique === 'perspective') {\n\n\t\t\t\t\t\tvar perspective = technique.childNodes[j];\n\n\t\t\t\t\t\tfor (var k = 0; k < perspective.childNodes.length; k++) {\n\n\t\t\t\t\t\t\tvar param = perspective.childNodes[k];\n\n\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.technique === 'orthographic') {\n\n\t\t\t\t\t\tvar orthographic = technique.childNodes[j];\n\n\t\t\t\t\t\tfor (var k = 0; k < orthographic.childNodes.length; k++) {\n\n\t\t\t\t\t\t\tvar param = orthographic.childNodes[k];\n\n\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction InstanceCamera() {\n\n\t\tthis.url = \"\";\n\t}\n\n\tInstanceCamera.prototype.parse = function (element) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\t};\n\n\tfunction Light() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\t}\n\n\tLight.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\tthis.parseTechnique(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tLight.prototype.parseCommon = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\tcase 'point':\n\t\t\t\tcase 'spot':\n\t\t\t\tcase 'ambient':\n\n\t\t\t\t\tthis.technique = element.childNodes[i].nodeName;\n\n\t\t\t\t\tvar light = element.childNodes[i];\n\n\t\t\t\t\tfor (var j = 0; j < light.childNodes.length; j++) {\n\n\t\t\t\t\t\tvar child = light.childNodes[j];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */](0);\n\t\t\t\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'falloff_angle':\n\n\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\t\t\tvar f = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt(1 / f) : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tLight.prototype.parseTechnique = function (element) {\n\n\t\tthis.profile = element.getAttribute('profile');\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'intensity':\n\n\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction InstanceLight() {\n\n\t\tthis.url = \"\";\n\t}\n\n\tInstanceLight.prototype.parse = function (element) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\t};\n\n\tfunction KinematicsModel() {\n\n\t\tthis.id = '';\n\t\tthis.name = '';\n\t\tthis.joints = [];\n\t\tthis.links = [];\n\t}\n\n\tKinematicsModel.prototype.parse = function (element) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.joints = [];\n\t\tthis.links = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tKinematicsModel.prototype.parseCommon = function (element) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\tcase 'joint':\n\t\t\t\t\tthis.joints.push(new Joint().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'link':\n\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Joint() {\n\n\t\tthis.sid = '';\n\t\tthis.name = '';\n\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\tthis.limits = {\n\t\t\tmin: 0,\n\t\t\tmax: 0\n\t\t};\n\t\tthis.type = '';\n\t\tthis.static = false;\n\t\tthis.zeroPosition = 0.0;\n\t\tthis.middlePosition = 0.0;\n\t}\n\n\tJoint.prototype.parse = function (element) {\n\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\tthis.limits = {\n\t\t\tmin: 0,\n\t\t\tmax: 0\n\t\t};\n\t\tthis.type = '';\n\t\tthis.static = false;\n\t\tthis.zeroPosition = 0.0;\n\t\tthis.middlePosition = 0.0;\n\n\t\tvar axisElement = element.querySelector('axis');\n\t\tvar _axis = _floats(axisElement.textContent);\n\t\tthis.axis = getConvertedVec3(_axis, 0);\n\n\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\n\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\n\n\t\tthis.limits = {\n\t\t\tmin: min,\n\t\t\tmax: max\n\t\t};\n\n\t\tvar jointTypes = ['prismatic', 'revolute'];\n\t\tfor (var i = 0; i < jointTypes.length; i++) {\n\n\t\t\tvar type = jointTypes[i];\n\n\t\t\tvar jointElement = element.querySelector(type);\n\n\t\t\tif (jointElement) {\n\n\t\t\t\tthis.type = type;\n\t\t\t}\n\t\t}\n\n\t\tif (this.limits.min >= this.limits.max) {\n\n\t\t\tthis.static = true;\n\t\t}\n\n\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\n\t\treturn this;\n\t};\n\n\tfunction Link() {\n\n\t\tthis.sid = '';\n\t\tthis.name = '';\n\t\tthis.transforms = [];\n\t\tthis.attachments = [];\n\t}\n\n\tLink.prototype.parse = function (element) {\n\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.transforms = [];\n\t\tthis.attachments = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'attachment_full':\n\t\t\t\t\tthis.attachments.push(new Attachment().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction Attachment() {\n\n\t\tthis.joint = '';\n\t\tthis.transforms = [];\n\t\tthis.links = [];\n\t}\n\n\tAttachment.prototype.parse = function (element) {\n\n\t\tthis.joint = element.getAttribute('joint').split('/').pop();\n\t\tthis.links = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\tswitch (child.nodeName) {\n\n\t\t\t\tcase 'link':\n\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tfunction _source(element) {\n\n\t\tvar id = element.getAttribute('id');\n\n\t\tif (sources[id] != undefined) {\n\n\t\t\treturn sources[id];\n\t\t}\n\n\t\tsources[id] = new Source(id).parse(element);\n\t\treturn sources[id];\n\t}\n\n\tfunction _nsResolver(nsPrefix) {\n\n\t\tif (nsPrefix === \"dae\") {\n\n\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction _bools(str) {\n\n\t\tvar raw = _strings(str);\n\t\tvar data = [];\n\n\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\tdata.push(raw[i] === 'true' || raw[i] === '1' ? true : false);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction _floats(str) {\n\n\t\tvar raw = _strings(str);\n\t\tvar data = [];\n\n\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\tdata.push(parseFloat(raw[i]));\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction _ints(str) {\n\n\t\tvar raw = _strings(str);\n\t\tvar data = [];\n\n\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\tdata.push(parseInt(raw[i], 10));\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction _strings(str) {\n\n\t\treturn str.length > 0 ? _trimString(str).split(/\\s+/) : [];\n\t}\n\n\tfunction _trimString(str) {\n\n\t\treturn str.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n\t}\n\n\tfunction _attr_as_float(element, name, defaultValue) {\n\n\t\tif (element.hasAttribute(name)) {\n\n\t\t\treturn parseFloat(element.getAttribute(name));\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\tfunction _attr_as_int(element, name, defaultValue) {\n\n\t\tif (element.hasAttribute(name)) {\n\n\t\t\treturn parseInt(element.getAttribute(name), 10);\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\tfunction _attr_as_string(element, name, defaultValue) {\n\n\t\tif (element.hasAttribute(name)) {\n\n\t\t\treturn element.getAttribute(name);\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\tfunction _format_float(f, num) {\n\n\t\tif (f === undefined) {\n\n\t\t\tvar s = '0.';\n\n\t\t\twhile (s.length < num + 2) {\n\n\t\t\t\ts += '0';\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}\n\n\t\tnum = num || 2;\n\n\t\tvar parts = f.toString().split('.');\n\t\tparts[1] = parts.length > 1 ? parts[1].substr(0, num) : \"0\";\n\n\t\twhile (parts[1].length < num) {\n\n\t\t\tparts[1] += '0';\n\t\t}\n\n\t\treturn parts.join('.');\n\t}\n\n\tfunction loadTextureImage(texture, url) {\n\n\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_3\" /* ImageLoader */]();\n\n\t\tloader.load(url, function (image) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\t\t});\n\t}\n\n\tfunction extractDoubleSided(obj, element) {\n\n\t\tobj.doubleSided = false;\n\n\t\tvar node = element.querySelectorAll('extra double_sided')[0];\n\n\t\tif (node) {\n\n\t\t\tif (node && parseInt(node.textContent, 10) === 1) {\n\n\t\t\t\tobj.doubleSided = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setUpConversion() {\n\n\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\tupConversion = null;\n\t\t} else {\n\n\t\t\tswitch (colladaUp) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction fixCoords(data, sign) {\n\n\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (upConversion) {\n\n\t\t\tcase 'XtoY':\n\n\t\t\t\tvar tmp = data[0];\n\t\t\t\tdata[0] = sign * data[1];\n\t\t\t\tdata[1] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XtoZ':\n\n\t\t\t\tvar tmp = data[2];\n\t\t\t\tdata[2] = data[1];\n\t\t\t\tdata[1] = data[0];\n\t\t\t\tdata[0] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoX':\n\n\t\t\t\tvar tmp = data[0];\n\t\t\t\tdata[0] = data[1];\n\t\t\t\tdata[1] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoZ':\n\n\t\t\t\tvar tmp = data[1];\n\t\t\t\tdata[1] = sign * data[2];\n\t\t\t\tdata[2] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoX':\n\n\t\t\t\tvar tmp = data[0];\n\t\t\t\tdata[0] = data[1];\n\t\t\t\tdata[1] = data[2];\n\t\t\t\tdata[2] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoY':\n\n\t\t\t\tvar tmp = data[1];\n\t\t\t\tdata[1] = data[2];\n\t\t\t\tdata[2] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tfunction getConvertedTranslation(axis, data) {\n\n\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\treturn data;\n\t\t}\n\n\t\tswitch (axis) {\n\t\t\tcase 'X':\n\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\n\t\t\t\tbreak;\n\t\t\tcase 'Y':\n\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\n\t\t\t\tbreak;\n\t\t\tcase 'Z':\n\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction getConvertedVec3(data, offset) {\n\n\t\tvar arr = [data[offset], data[offset + 1], data[offset + 2]];\n\t\tfixCoords(arr, -1);\n\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](arr[0], arr[1], arr[2]);\n\t}\n\n\tfunction getConvertedMat4(data) {\n\n\t\tif (options.convertUpAxis) {\n\t\t\tvar arr = [data[0], data[4], data[8]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[0] = arr[0];\n\t\t\tdata[4] = arr[1];\n\t\t\tdata[8] = arr[2];\n\t\t\tarr = [data[1], data[5], data[9]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[1] = arr[0];\n\t\t\tdata[5] = arr[1];\n\t\t\tdata[9] = arr[2];\n\t\t\tarr = [data[2], data[6], data[10]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[2] = arr[0];\n\t\t\tdata[6] = arr[1];\n\t\t\tdata[10] = arr[2];\n\n\t\t\tarr = [data[0], data[1], data[2]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[0] = arr[0];\n\t\t\tdata[1] = arr[1];\n\t\t\tdata[2] = arr[2];\n\t\t\tarr = [data[4], data[5], data[6]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[4] = arr[0];\n\t\t\tdata[5] = arr[1];\n\t\t\tdata[6] = arr[2];\n\t\t\tarr = [data[8], data[9], data[10]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[8] = arr[0];\n\t\t\tdata[9] = arr[1];\n\t\t\tdata[10] = arr[2];\n\n\t\t\tarr = [data[3], data[7], data[11]];\n\t\t\tfixCoords(arr, -1);\n\t\t\tdata[3] = arr[0];\n\t\t\tdata[7] = arr[1];\n\t\t\tdata[11] = arr[2];\n\t\t}\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]().set(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], data[9], data[10], data[11], data[12], data[13], data[14], data[15]);\n\t}\n\n\tfunction getConvertedIndex(index) {\n\n\t\tif (index > -1 && index < 3) {\n\n\t\t\tvar members = ['X', 'Y', 'Z'],\n\t\t\t    indices = { X: 0, Y: 1, Z: 2 };\n\n\t\t\tindex = getConvertedMember(members[index]);\n\t\t\tindex = indices[index];\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction getConvertedMember(member) {\n\n\t\tif (options.convertUpAxis) {\n\n\t\t\tswitch (member) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'YtoX':\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoX':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn member;\n\t}\n\n\treturn {\n\n\t\tload: load,\n\t\tparse: parse,\n\t\tsetPreferredShading: setPreferredShading,\n\t\tapplySkin: applySkin,\n\t\tgeometries: geometries,\n\t\toptions: options\n\n\t};\n};\n\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DDSLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar DDSLoader = function DDSLoader() {\n\n\tthis._parser = DDSLoader.parse;\n};\n\nDDSLoader.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"m\" /* CompressedTextureLoader */].prototype);\nDDSLoader.prototype.constructor = DDSLoader;\n\nDDSLoader.parse = function (buffer, loadMipmaps) {\n\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\tvar DDS_MAGIC = 0x20534444;\n\n\tvar DDSD_CAPS = 0x1,\n\t    DDSD_HEIGHT = 0x2,\n\t    DDSD_WIDTH = 0x4,\n\t    DDSD_PITCH = 0x8,\n\t    DDSD_PIXELFORMAT = 0x1000,\n\t    DDSD_MIPMAPCOUNT = 0x20000,\n\t    DDSD_LINEARSIZE = 0x80000,\n\t    DDSD_DEPTH = 0x800000;\n\n\tvar DDSCAPS_COMPLEX = 0x8,\n\t    DDSCAPS_MIPMAP = 0x400000,\n\t    DDSCAPS_TEXTURE = 0x1000;\n\n\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t    DDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t    DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t    DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t    DDSCAPS2_VOLUME = 0x200000;\n\n\tvar DDPF_ALPHAPIXELS = 0x1,\n\t    DDPF_ALPHA = 0x2,\n\t    DDPF_FOURCC = 0x4,\n\t    DDPF_RGB = 0x40,\n\t    DDPF_YUV = 0x200,\n\t    DDPF_LUMINANCE = 0x20000;\n\n\tfunction fourCCToInt32(value) {\n\n\t\treturn value.charCodeAt(0) + (value.charCodeAt(1) << 8) + (value.charCodeAt(2) << 16) + (value.charCodeAt(3) << 24);\n\t}\n\n\tfunction int32ToFourCC(value) {\n\n\t\treturn String.fromCharCode(value & 0xff, value >> 8 & 0xff, value >> 16 & 0xff, value >> 24 & 0xff);\n\t}\n\n\tfunction loadARGBMip(buffer, dataOffset, width, height) {\n\n\t\tvar dataLength = width * height * 4;\n\t\tvar srcBuffer = new Uint8Array(buffer, dataOffset, dataLength);\n\t\tvar byteArray = new Uint8Array(dataLength);\n\t\tvar dst = 0;\n\t\tvar src = 0;\n\t\tfor (var y = 0; y < height; y++) {\n\n\t\t\tfor (var x = 0; x < width; x++) {\n\n\t\t\t\tvar b = srcBuffer[src];src++;\n\t\t\t\tvar g = srcBuffer[src];src++;\n\t\t\t\tvar r = srcBuffer[src];src++;\n\t\t\t\tvar a = srcBuffer[src];src++;\n\t\t\t\tbyteArray[dst] = r;dst++;\n\t\t\t\tbyteArray[dst] = g;dst++;\n\t\t\t\tbyteArray[dst] = b;dst++;\n\t\t\t\tbyteArray[dst] = a;dst++;\n\t\t\t}\n\t\t}\n\t\treturn byteArray;\n\t}\n\n\tvar FOURCC_DXT1 = fourCCToInt32(\"DXT1\");\n\tvar FOURCC_DXT3 = fourCCToInt32(\"DXT3\");\n\tvar FOURCC_DXT5 = fourCCToInt32(\"DXT5\");\n\tvar FOURCC_ETC1 = fourCCToInt32(\"ETC1\");\n\n\tvar headerLengthInt = 31;\n\n\tvar off_magic = 0;\n\n\tvar off_size = 1;\n\tvar off_flags = 2;\n\tvar off_height = 3;\n\tvar off_width = 4;\n\n\tvar off_mipmapCount = 7;\n\n\tvar off_pfFlags = 20;\n\tvar off_pfFourCC = 21;\n\tvar off_RGBBitCount = 22;\n\tvar off_RBitMask = 23;\n\tvar off_GBitMask = 24;\n\tvar off_BBitMask = 25;\n\tvar off_ABitMask = 26;\n\n\tvar off_caps = 27;\n\tvar off_caps2 = 28;\n\tvar off_caps3 = 29;\n\tvar off_caps4 = 30;\n\n\tvar header = new Int32Array(buffer, 0, headerLengthInt);\n\n\tif (header[off_magic] !== DDS_MAGIC) {\n\n\t\tconsole.error('DDSLoader.parse: Invalid magic number in DDS header.');\n\t\treturn dds;\n\t}\n\n\tif (!header[off_pfFlags] & DDPF_FOURCC) {\n\n\t\tconsole.error('DDSLoader.parse: Unsupported format, must contain a FourCC code.');\n\t\treturn dds;\n\t}\n\n\tvar blockBytes;\n\n\tvar fourCC = header[off_pfFourCC];\n\n\tvar isRGBAUncompressed = false;\n\n\tswitch (fourCC) {\n\n\t\tcase FOURCC_DXT1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"n\" /* RGB_S3TC_DXT1_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT3:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* RGBA_S3TC_DXT3_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT5:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* RGBA_S3TC_DXT5_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_ETC1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* RGB_ETC1_Format */];\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tif (header[off_RGBBitCount] === 32 && header[off_RBitMask] & 0xff0000 && header[off_GBitMask] & 0xff00 && header[off_BBitMask] & 0xff && header[off_ABitMask] & 0xff000000) {\n\n\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\tblockBytes = 64;\n\t\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"r\" /* RGBAFormat */];\n\t\t\t} else {\n\n\t\t\t\tconsole.error('DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC(fourCC));\n\t\t\t\treturn dds;\n\t\t\t}\n\t}\n\n\tdds.mipmapCount = 1;\n\n\tif (header[off_flags] & DDSD_MIPMAPCOUNT && loadMipmaps !== false) {\n\n\t\tdds.mipmapCount = Math.max(1, header[off_mipmapCount]);\n\t}\n\n\tvar caps2 = header[off_caps2];\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\tif (dds.isCubemap && (!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ))) {\n\n\t\tconsole.error('DDSLoader.parse: Incomplete cubemap faces');\n\t\treturn dds;\n\t}\n\n\tdds.width = header[off_width];\n\tdds.height = header[off_height];\n\n\tvar dataOffset = header[off_size] + 4;\n\n\tvar faces = dds.isCubemap ? 6 : 1;\n\n\tfor (var face = 0; face < faces; face++) {\n\n\t\tvar width = dds.width;\n\t\tvar height = dds.height;\n\n\t\tfor (var i = 0; i < dds.mipmapCount; i++) {\n\n\t\t\tif (isRGBAUncompressed) {\n\n\t\t\t\tvar byteArray = loadARGBMip(buffer, dataOffset, width, height);\n\t\t\t\tvar dataLength = byteArray.length;\n\t\t\t} else {\n\n\t\t\t\tvar dataLength = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockBytes;\n\t\t\t\tvar byteArray = new Uint8Array(buffer, dataOffset, dataLength);\n\t\t\t}\n\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\tdds.mipmaps.push(mipmap);\n\n\t\t\tdataOffset += dataLength;\n\n\t\t\twidth = Math.max(width >> 1, 1);\n\t\t\theight = Math.max(height >> 1, 1);\n\t\t}\n\t}\n\n\treturn dds;\n};\n\n\n\n/***/ }),\n/* 102 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MTLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__DDSLoader__ = __webpack_require__(101);\n\n\n\nvar LoaderHandlers = __WEBPACK_IMPORTED_MODULE_0_three__[\"e\" /* Loader */].Handlers;\nLoaderHandlers.add(/\\.dds$/i, new __WEBPACK_IMPORTED_MODULE_1__DDSLoader__[\"a\" /* DDSLoader */]());\n\nvar MTLLoader = function MTLLoader(manager) {\n\n\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n};\n\nMTLLoader.prototype = {\n\n\tconstructor: MTLLoader,\n\n\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](this.manager);\n\t\tloader.setPath(this.path);\n\t\tloader.load(url, function (text) {\n\n\t\t\tonLoad(scope.parse(text));\n\t\t}, onProgress, onError);\n\t},\n\n\tsetPath: function setPath(path) {\n\n\t\tthis.path = path;\n\t},\n\n\tsetTexturePath: function setTexturePath(path) {\n\n\t\tthis.texturePath = path;\n\t},\n\n\tsetBaseUrl: function setBaseUrl(path) {\n\n\t\tconsole.warn('MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.');\n\n\t\tthis.setTexturePath(path);\n\t},\n\n\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\tthis.crossOrigin = value;\n\t},\n\n\tsetMaterialOptions: function setMaterialOptions(value) {\n\n\t\tthis.materialOptions = value;\n\t},\n\n\tparse: function parse(text) {\n\n\t\tvar lines = text.split('\\n');\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor (var i = 0; i < lines.length; i++) {\n\n\t\t\tvar line = lines[i];\n\t\t\tline = line.trim();\n\n\t\t\tif (line.length === 0 || line.charAt(0) === '#') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf(' ');\n\n\t\t\tvar key = pos >= 0 ? line.substring(0, pos) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = pos >= 0 ? line.substring(pos + 1) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif (key === 'newmtl') {\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[value] = info;\n\t\t\t} else if (info) {\n\n\t\t\t\tif (key === 'ka' || key === 'kd' || key === 'ks') {\n\n\t\t\t\t\tvar ss = value.split(delimiter_pattern, 3);\n\t\t\t\t\tinfo[key] = [parseFloat(ss[0]), parseFloat(ss[1]), parseFloat(ss[2])];\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator(this.texturePath || this.path, this.materialOptions);\n\t\tmaterialCreator.setCrossOrigin(this.crossOrigin);\n\t\tmaterialCreator.setManager(this.manager);\n\t\tmaterialCreator.setMaterials(materialsInfo);\n\t\treturn materialCreator;\n\t}\n\n};\n\nMTLLoader.MaterialCreator = function (baseUrl, options) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = this.options && this.options.side ? this.options.side : __WEBPACK_IMPORTED_MODULE_0_three__[\"h\" /* FrontSide */];\n\tthis.wrap = this.options && this.options.wrap ? this.options.wrap : __WEBPACK_IMPORTED_MODULE_0_three__[\"i\" /* RepeatWrapping */];\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tcrossOrigin: 'Anonymous',\n\n\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\tthis.crossOrigin = value;\n\t},\n\n\tsetManager: function setManager(value) {\n\n\t\tthis.manager = value;\n\t},\n\n\tsetMaterials: function setMaterials(materialsInfo) {\n\n\t\tthis.materialsInfo = this.convert(materialsInfo);\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\t},\n\n\tconvert: function convert(materialsInfo) {\n\n\t\tif (!this.options) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor (var mn in materialsInfo) {\n\n\t\t\tvar mat = materialsInfo[mn];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[mn] = covmat;\n\n\t\t\tfor (var prop in mat) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[prop];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch (lprop) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\tif (this.options && this.options.normalizeRGB) {\n\n\t\t\t\t\t\t\tvalue = [value[0] / 255, value[1] / 255, value[2] / 255];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.options && this.options.ignoreZeroRGBs) {\n\n\t\t\t\t\t\t\tif (value[0] === 0 && value[1] === 0 && value[2] === 0) {\n\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif (save) {\n\n\t\t\t\t\tcovmat[lprop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn converted;\n\t},\n\n\tpreload: function preload() {\n\n\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\tthis.create(mn);\n\t\t}\n\t},\n\n\tgetIndex: function getIndex(materialName) {\n\n\t\treturn this.nameLookup[materialName];\n\t},\n\n\tgetAsArray: function getAsArray() {\n\n\t\tvar index = 0;\n\n\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\tthis.materialsArray[index] = this.create(mn);\n\t\t\tthis.nameLookup[mn] = index;\n\t\t\tindex++;\n\t\t}\n\n\t\treturn this.materialsArray;\n\t},\n\n\tcreate: function create(materialName) {\n\n\t\tif (this.materials[materialName] === undefined) {\n\n\t\t\tthis.createMaterial_(materialName);\n\t\t}\n\n\t\treturn this.materials[materialName];\n\t},\n\n\tcreateMaterial_: function createMaterial_(materialName) {\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[materialName];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL(baseUrl, url) {\n\n\t\t\tif (typeof url !== 'string' || url === '') return '';\n\n\t\t\tif (/^https?:\\/\\//i.test(url)) return url;\n\n\t\t\treturn baseUrl + url;\n\t\t}\n\n\t\tfunction setMapForType(mapType, value) {\n\n\t\t\tif (params[mapType]) return;\n\n\t\t\tvar texParams = scope.getTextureParams(value, params);\n\t\t\tvar map = scope.loadTexture(resolveURL(scope.baseUrl, texParams.url));\n\n\t\t\tmap.repeat.copy(texParams.scale);\n\t\t\tmap.offset.copy(texParams.offset);\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[mapType] = map;\n\t\t}\n\n\t\tfor (var prop in mat) {\n\n\t\t\tvar value = mat[prop];\n\t\t\tvar n;\n\n\t\t\tif (value === '') continue;\n\n\t\t\tswitch (prop.toLowerCase()) {\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\tparams.color = new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */]().fromArray(value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\t\t\t\t\tparams.specular = new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */]().fromArray(value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\tsetMapForType(\"map\", value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\tsetMapForType(\"specularMap\", value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType(\"normalMap\", value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\tsetMapForType(\"bumpMap\", value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\tparams.shininess = parseFloat(value);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\tif (n < 1) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\tif (n > 0) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.materials[materialName] = new __WEBPACK_IMPORTED_MODULE_0_three__[\"k\" /* MeshPhongMaterial */](params);\n\t\treturn this.materials[materialName];\n\t},\n\n\tgetTextureParams: function getTextureParams(value, matParams) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](1, 1),\n\t\t\toffset: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](0, 0)\n\n\t\t};\n\n\t\tvar items = value.split(/\\s+/);\n\t\tvar pos;\n\n\t\tpos = items.indexOf('-bm');\n\n\t\tif (pos >= 0) {\n\n\t\t\tmatParams.bumpScale = parseFloat(items[pos + 1]);\n\t\t\titems.splice(pos, 2);\n\t\t}\n\n\t\tpos = items.indexOf('-s');\n\n\t\tif (pos >= 0) {\n\n\t\t\ttexParams.scale.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\titems.splice(pos, 4);\n\t\t}\n\n\t\tpos = items.indexOf('-o');\n\n\t\tif (pos >= 0) {\n\n\t\t\ttexParams.offset.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\titems.splice(pos, 4);\n\t\t}\n\n\t\ttexParams.url = items.join(' ').trim();\n\t\treturn texParams;\n\t},\n\n\tloadTexture: function loadTexture(url, mapping, onLoad, onProgress, onError) {\n\n\t\tvar texture;\n\t\tvar loader = LoaderHandlers.get(url);\n\t\tvar manager = this.manager !== undefined ? this.manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n\n\t\tif (loader === null) {\n\n\t\t\tloader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"l\" /* TextureLoader */](manager);\n\t\t}\n\n\t\tif (loader.setCrossOrigin) loader.setCrossOrigin(this.crossOrigin);\n\t\ttexture = loader.load(url, onLoad, onProgress, onError);\n\n\t\tif (mapping !== undefined) texture.mapping = mapping;\n\n\t\treturn texture;\n\t}\n\n};\n\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OBJLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar OBJLoader = function OBJLoader(manager) {\n\n\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n\n\tthis.materials = null;\n\n\tthis.regexp = {\n\t\tvertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\tnormal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\tuv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\tface_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\n\t\tface_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\n\t\tface_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\n\t\tface_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\n\t\tobject_pattern: /^[og]\\s*(.+)?/,\n\n\t\tsmoothing_pattern: /^s\\s+(\\d+|on|off)/,\n\n\t\tmaterial_library_pattern: /^mtllib /,\n\n\t\tmaterial_use_pattern: /^usemtl /\n\t};\n};\n\nOBJLoader.prototype = {\n\n\tconstructor: OBJLoader,\n\n\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](scope.manager);\n\t\tloader.setPath(this.path);\n\t\tloader.load(url, function (text) {\n\n\t\t\tonLoad(scope.parse(text));\n\t\t}, onProgress, onError);\n\t},\n\n\tsetPath: function setPath(value) {\n\n\t\tthis.path = value;\n\t},\n\n\tsetMaterials: function setMaterials(materials) {\n\n\t\tthis.materials = materials;\n\t},\n\n\t_createParserState: function _createParserState() {\n\n\t\tvar state = {\n\t\t\tobjects: [],\n\t\t\tobject: {},\n\n\t\t\tvertices: [],\n\t\t\tnormals: [],\n\t\t\tuvs: [],\n\n\t\t\tmaterialLibraries: [],\n\n\t\t\tstartObject: function startObject(name, fromDeclaration) {\n\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = fromDeclaration !== false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t}\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname: name || '',\n\t\t\t\t\tfromDeclaration: fromDeclaration !== false,\n\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\tuvs: []\n\t\t\t\t\t},\n\t\t\t\t\tmaterials: [],\n\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\tstartMaterial: function startMaterial(name, libraries) {\n\n\t\t\t\t\t\tvar previous = this._finalize(false);\n\n\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\tmtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n\t\t\t\t\t\t\tsmooth: previous !== undefined ? previous.smooth : this.smooth,\n\t\t\t\t\t\t\tgroupStart: previous !== undefined ? previous.groupEnd : 0,\n\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\tclone: function clone(index) {\n\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\tindex: typeof index === 'number' ? index : this.index,\n\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push(material);\n\n\t\t\t\t\t\treturn material;\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial: function currentMaterial() {\n\n\t\t\t\t\t\tif (this.materials.length > 0) {\n\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize: function _finalize(end) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (end && this.materials.length > 1) {\n\n\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\n\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (end && this.materials.length === 0) {\n\n\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n\n\t\t\t\t\tvar declared = previousMaterial.clone(0);\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push(declared);\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push(this.object);\n\t\t\t},\n\n\t\t\tfinalize: function finalize() {\n\n\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tparseVertexIndex: function parseVertexIndex(value, len) {\n\n\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t},\n\n\t\t\tparseNormalIndex: function parseNormalIndex(value, len) {\n\n\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t},\n\n\t\t\tparseUVIndex: function parseUVIndex(value, len) {\n\n\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\n\t\t\t},\n\n\t\t\taddVertex: function addVertex(a, b, c) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\tdst.push(src[c + 2]);\n\t\t\t},\n\n\t\t\taddVertexLine: function addVertexLine(a) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\tdst.push(src[a + 2]);\n\t\t\t},\n\n\t\t\taddNormal: function addNormal(a, b, c) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\tdst.push(src[c + 2]);\n\t\t\t},\n\n\t\t\taddUV: function addUV(a, b, c) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\tdst.push(src[c + 1]);\n\t\t\t},\n\n\t\t\taddUVLine: function addUVLine(a) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\tdst.push(src[a + 1]);\n\t\t\t},\n\n\t\t\taddFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\n\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\n\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\n\t\t\t\tvar id;\n\n\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\tthis.addVertex(ia, ib, ic);\n\t\t\t\t} else {\n\n\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\n\n\t\t\t\t\tthis.addVertex(ia, ib, id);\n\t\t\t\t\tthis.addVertex(ib, ic, id);\n\t\t\t\t}\n\n\t\t\t\tif (ua !== undefined) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\n\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\n\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\n\n\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\tthis.addUV(ia, ib, ic);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\n\n\t\t\t\t\t\tthis.addUV(ia, ib, id);\n\t\t\t\t\t\tthis.addUV(ib, ic, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (na !== undefined) {\n\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\n\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\n\n\t\t\t\t\t\tthis.addNormal(ia, ib, id);\n\t\t\t\t\t\tthis.addNormal(ib, ic, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\taddLineGeometry: function addLineGeometry(vertices, uvs) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\t\t\t\t}\n\n\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject('', false);\n\n\t\treturn state;\n\t},\n\n\tparse: function parse(text) {\n\n\t\tconsole.time('OBJLoader');\n\n\t\tvar state = this._createParserState();\n\n\t\tif (text.indexOf('\\r\\n') !== -1) {\n\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t}\n\n\t\tif (text.indexOf('\\\\\\n') !== -1) {\n\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t}\n\n\t\tvar lines = text.split('\\n');\n\t\tvar line = '',\n\t\t    lineFirstChar = '',\n\t\t    lineSecondChar = '';\n\t\tvar lineLength = 0;\n\t\tvar result = [];\n\n\t\tvar trimLeft = typeof ''.trimLeft === 'function';\n\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\n\t\t\tline = lines[i];\n\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\tlineLength = line.length;\n\n\t\t\tif (lineLength === 0) continue;\n\n\t\t\tlineFirstChar = line.charAt(0);\n\n\t\t\tif (lineFirstChar === '#') continue;\n\n\t\t\tif (lineFirstChar === 'v') {\n\n\t\t\t\tlineSecondChar = line.charAt(1);\n\n\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n\t\t\t\t\tstate.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n\t\t\t\t\tstate.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n\t\t\t\t\tstate.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n\t\t\t\t}\n\t\t\t} else if (lineFirstChar === \"f\") {\n\n\t\t\t\tif ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n\t\t\t\t\tstate.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n\t\t\t\t} else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n\t\t\t\t} else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n\t\t\t\t} else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n\t\t\t\t\tstate.addFace(result[1], result[2], result[3], result[4]);\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error(\"Unexpected face line: '\" + line + \"'\");\n\t\t\t\t}\n\t\t\t} else if (lineFirstChar === \"l\") {\n\n\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\n\t\t\t\tvar lineVertices = [],\n\t\t\t\t    lineUVs = [];\n\n\t\t\t\tif (line.indexOf(\"/\") === -1) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\t\t\t\t} else {\n\n\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\n\n\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\n\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\n\t\t\t} else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n\t\t\t\tstate.startObject(name);\n\t\t\t} else if (this.regexp.material_use_pattern.test(line)) {\n\n\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\t\t\t} else if (this.regexp.material_library_pattern.test(line)) {\n\n\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\n\t\t\t} else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n\t\t\t\tvar value = result[1].trim().toLowerCase();\n\t\t\t\tstate.object.smooth = value === '1' || value === 'on';\n\n\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\tif (material) {\n\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (line === '\\0') continue;\n\n\t\t\t\tthrow new Error(\"Unexpected line: '\" + line + \"'\");\n\t\t\t}\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tvar container = new __WEBPACK_IMPORTED_MODULE_0_three__[\"s\" /* Group */]();\n\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\n\n\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\n\n\t\t\tvar object = state.objects[i];\n\t\t\tvar geometry = object.geometry;\n\t\t\tvar materials = object.materials;\n\t\t\tvar isLine = geometry.type === 'Line';\n\n\t\t\tif (geometry.vertices.length === 0) continue;\n\n\t\t\tvar buffergeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\n\t\t\tbuffergeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.vertices), 3));\n\n\t\t\tif (geometry.normals.length > 0) {\n\n\t\t\t\tbuffergeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.normals), 3));\n\t\t\t} else {\n\n\t\t\t\tbuffergeometry.computeVertexNormals();\n\t\t\t}\n\n\t\t\tif (geometry.uvs.length > 0) {\n\n\t\t\t\tbuffergeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.uvs), 2));\n\t\t\t}\n\n\t\t\tvar createdMaterials = [];\n\n\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\tvar material = undefined;\n\n\t\t\t\tif (this.materials !== null) {\n\n\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\n\n\t\t\t\t\tif (isLine && material && !(material instanceof __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */])) {\n\n\t\t\t\t\t\tvar materialLine = new __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */]();\n\t\t\t\t\t\tmaterialLine.copy(material);\n\t\t\t\t\t\tmaterial = materialLine;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!material) {\n\n\t\t\t\t\tmaterial = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"k\" /* MeshPhongMaterial */]() : new __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */]();\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t}\n\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* SmoothShading */] : __WEBPACK_IMPORTED_MODULE_0_three__[\"w\" /* FlatShading */];\n\n\t\t\t\tcreatedMaterials.push(material);\n\t\t\t}\n\n\t\t\tvar mesh;\n\n\t\t\tif (createdMaterials.length > 1) {\n\n\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\t\t\t\t}\n\n\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"x\" /* Mesh */](buffergeometry, createdMaterials) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"y\" /* LineSegments */](buffergeometry, createdMaterials);\n\t\t\t} else {\n\n\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"x\" /* Mesh */](buffergeometry, createdMaterials[0]) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"y\" /* LineSegments */](buffergeometry, createdMaterials[0]);\n\t\t\t}\n\n\t\t\tmesh.name = object.name;\n\n\t\t\tcontainer.add(mesh);\n\t\t}\n\n\t\tconsole.timeEnd('OBJLoader');\n\n\t\treturn container;\n\t}\n\n};\n\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return STLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar STLLoader = function STLLoader(manager) {\n\n\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n};\n\nSTLLoader.prototype = {\n\n\tconstructor: STLLoader,\n\n\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](scope.manager);\n\t\tloader.setResponseType('arraybuffer');\n\t\tloader.load(url, function (text) {\n\n\t\t\tonLoad(scope.parse(text));\n\t\t}, onProgress, onError);\n\t},\n\n\tparse: function parse(data) {\n\n\t\tvar isBinary = function isBinary() {\n\n\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\treader = new DataView(binData);\n\t\t\tface_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\tif (expect === reader.byteLength) {\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\tfor (var i = 0; i < 5; i++) {\n\n\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tvar binData = this.ensureBinary(data);\n\n\t\treturn isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t},\n\n\tparseBinary: function parseBinary(data) {\n\n\t\tvar reader = new DataView(data);\n\t\tvar faces = reader.getUint32(80, true);\n\n\t\tvar r,\n\t\t    g,\n\t\t    b,\n\t\t    hasColors = false,\n\t\t    colors;\n\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\tfor (var index = 0; index < 80 - 10; index++) {\n\n\t\t\tif (reader.getUint32(index, false) == 0x434F4C4F && reader.getUint8(index + 4) == 0x52 && reader.getUint8(index + 5) == 0x3D) {\n\n\t\t\t\thasColors = true;\n\t\t\t\tcolors = [];\n\n\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t}\n\t\t}\n\n\t\tvar dataOffset = 84;\n\t\tvar faceLength = 12 * 4 + 2;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\n\t\tfor (var face = 0; face < faces; face++) {\n\n\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\tif (hasColors) {\n\n\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\n\t\t\t\t\tr = (packedColor & 0x1F) / 31;\n\t\t\t\t\tg = (packedColor >> 5 & 0x1F) / 31;\n\t\t\t\t\tb = (packedColor >> 10 & 0x1F) / 31;\n\t\t\t\t} else {\n\n\t\t\t\t\tr = defaultR;\n\t\t\t\t\tg = defaultG;\n\t\t\t\t\tb = defaultB;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 1; i <= 3; i++) {\n\n\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\tif (hasColors) {\n\n\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\tif (hasColors) {\n\n\t\t\tgeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(colors), 3));\n\t\t\tgeometry.hasColors = true;\n\t\t\tgeometry.alpha = alpha;\n\t\t}\n\n\t\treturn geometry;\n\t},\n\n\tparseASCII: function parseASCII(data) {\n\n\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\n\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\n\t\tvar normal = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n\t\twhile ((result = patternFace.exec(data)) !== null) {\n\n\t\t\ttext = result[0];\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\n\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t}\n\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\n\t\t\t\tvertices.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\treturn geometry;\n\t},\n\n\tensureString: function ensureString(buf) {\n\n\t\tif (typeof buf !== \"string\") {\n\n\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\tvar strArray = [];\n\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\n\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i]));\n\t\t\t}\n\t\t\treturn strArray.join('');\n\t\t} else {\n\n\t\t\treturn buf;\n\t\t}\n\t},\n\n\tensureBinary: function ensureBinary(buf) {\n\n\t\tif (typeof buf === \"string\") {\n\n\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\tfor (var i = 0; i < buf.length; i++) {\n\n\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff;\n\t\t\t}\n\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t} else {\n\n\t\t\treturn buf;\n\t\t}\n\t}\n\n};\n\n\n\n/***/ })\n],[81]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.5b30df929881188d2dfc.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/components/demo-block.vue\n// module id = 2\n// module chunks = 1","var Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./model-obj.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-obj.vue\n// module id = 3\n// module chunks = 1","var Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./model-mixin.vue\"),\n  /* template */\n  require(\"!!../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b82a4cf6\\\"}!../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./model-mixin.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-mixin.vue\n// module id = 4\n// module chunks = 1","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\n\nlet box = new Box3();\n\nfunction getSize( object ) {\n\n    box.setFromObject( object );\n\n    return box.getSize();\n}\n\nfunction getCenter( object ) {\n\n    box.setFromObject( object );\n\n    return box.getCenter();\n}\n\nfunction lightsDiff( lights, oldLights ) {\n\n}\n\nfunction toIndexed ( bufferGeometry ) {\n\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new Vector3();\n    var v1 = new Vector3();\n    var v2 = new Vector3();\n\n    var n0 = new Vector3();\n    var n1 = new Vector3();\n    var n2 = new Vector3();\n\n    var uv0 = new Vector2();\n    var uv1 = new Vector2();\n    var uv2 = new Vector2();\n\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\n\n        v0.x = raw_positions[ i ];\n        v0.y = raw_positions[ i + 1 ];\n        v0.z = raw_positions[ i + 2 ];\n\n        v1.x = raw_positions[ i + 3 ];\n        v1.y = raw_positions[ i + 4 ];\n        v1.z = raw_positions[ i + 5 ];\n\n        v2.x = raw_positions[ i + 6 ];\n        v2.y = raw_positions[ i + 7 ];\n        v2.z = raw_positions[ i + 8 ];\n\n        face = [ v0, v1, v2 ];\n\n        if ( hasNormal ) {\n\n            n0.x = raw_normals[ i ];\n            n0.y = raw_normals[ i + 1 ];\n            n0.z = raw_normals[ i + 2 ];\n\n            n1.x = raw_normals[ i + 3 ];\n            n1.y = raw_normals[ i + 4 ];\n            n1.z = raw_normals[ i + 5 ];\n\n            n2.x = raw_normals[ i + 6 ];\n            n2.y = raw_normals[ i + 7 ];\n            n2.z = raw_normals[ i + 8 ];\n\n            face_normalss = [ n0, n1, n2 ];\n\n        }\n\n        if ( hasUV ) {\n\n            uv0.x = raw_uvs[ i ];\n            uv0.y = raw_uvs[ i + 1 ];\n\n            uv1.x = raw_uvs[ i + 2 ];\n            uv1.y = raw_uvs[ i + 3 ];\n\n            uv2.x = raw_uvs[ i + 4 ];\n            uv2.y = raw_uvs[ i + 5 ];\n\n            face_uvs = [ uv0, uv1, uv2 ];\n\n        }\n\n        tmp_indices = [];\n\n        face.forEach( function ( v, i ) {\n\n            var id = exists( v, vertices );\n            if ( id == -1 ) {\n\n                id = vertices.length;\n                vertices.push( v.clone() );\n\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\n\n            }\n            tmp_indices.push( id );\n\n        } );\n\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\n\n    }\n\n    var positionBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\n\n    var i2 = 0;\n    var i3 = 0;\n    for ( i = 0; i < vertices.length; i++ ) {\n\n        i3 = i * 3;\n\n        positionBuffer[ i3 ] = vertices[ i ].x;\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\n\n        if ( hasNormal ) {\n\n            normalBuffer[ i3 ] = normals[ i ].x;\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\n\n        }\n\n        if ( hasUV ) {\n\n            i2 = i * 2;\n            uvBuffer[ i2 ] = uvs[ i ].x;\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\n\n        }\n\n    }\n\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\n    return bufferGeometry;\n\n    function exists( v, vertices ) {\n        for ( var i = 0; i < vertices.length; i++ ) {\n            if ( v.equals( vertices[ i ] ) ) return i;\n        }\n        return -1;\n    }\n}\n\nexport { getSize, getCenter, toIndexed }\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","var Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./model-collada.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-collada.vue\n// module id = 14\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/.11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/.11.3.4@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\"}!../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/App.vue\n// module id = 23\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n// import DemoBasic from '../pages/demo-basic'\n// import DemoEvent from '../pages/demo-event'\n// import DemoBackground from '../pages/demo-background'\n// import DemoRotate from '../pages/demo-rotate'\n// import DemoObj from '../pages/demo-obj'\n// // import DemoGltf from '../pages/demo-gltf'\n// import DemoStl from '../pages/demo-stl'\n// import DemoCollada from '../pages/demo-collada'\n// // import DemoSea3d from '../pages/demo-sea3d'\n// import DemoJson from '../pages/demo-json'\n\nimport { pages } from '../pages'\n\nVue.use( Router )\n\nconst routes = pages.map( page => {\n    \n    const name = page.name;\n\n    return {\n        path: `/${ name }`,\n        name,\n        component: page\n    }\n} )\n\nroutes.push( {\n    path: '*',\n    redirect: '/demo-basic'\n} )\n\nexport default new Router( { routes } )\n\n\n// WEBPACK FOOTER //\n// ./examples/router/index.js","exports = module.exports = require(\"../../node_modules/.0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 25\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/.0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 26\n// module chunks = 1","exports = module.exports = require(\"../node_modules/.0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 27\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-background.vue\")\n\nvar Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-background.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-background.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-background.vue\n// module id = 28\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-basic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-333e0508\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-basic.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-basic.vue\n// module id = 29\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-collada.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-678f988c\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-collada.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-collada.vue\n// module id = 30\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-event.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb36e518\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-event.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-event.vue\n// module id = 31\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-json.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b02f5fe\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-json.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-json.vue\n// module id = 32\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj-mtl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f64b4ae\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj-mtl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj-mtl.vue\n// module id = 33\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d85b9d1\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj.vue\n// module id = 34\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-rotate.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-756fcd71\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-rotate.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-rotate.vue\n// module id = 35\n// module chunks = 1","var Component = require(\"!../../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-stl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ff21105\\\"}!../../node_modules/.11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-stl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-stl.vue\n// module id = 36\n// module chunks = 1","var Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./model-stl.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-stl.vue\n// module id = 37\n// module chunks = 1","var Component = require(\"!../node_modules/.11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/.11.3.4@vue-loader/lib/selector?type=script&index=0!./model-three.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-three.vue\n// module id = 38\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-0b02f5fe\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-json.vue\n// module id = 39\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-1ff21105\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-stl.vue\n// module id = 40\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-2d85b9d1\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj.vue\n// module id = 41\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-333e0508\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-basic.vue\n// module id = 42\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4d9d1678\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-background.vue\n// module id = 43\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4f64b4ae\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj-mtl.vue\n// module id = 44\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"\\n                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"\\n                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d8f5ef3\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/components/demo-block.vue\n// module id = 45\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-678f988c\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-collada.vue\n// module id = 46\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-756fcd71\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-rotate.vue\n// module id = 47\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7a736b78\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/App.vue\n// module id = 48\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-b82a4cf6\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/model-mixin.vue\n// module id = 49\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-cb36e518\"}!./~/.11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-event.vue\n// module id = 50\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/.0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-background.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/.2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"6e88b5b7\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.0.5@vue-style-loader!./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 51\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/.0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/.11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/.2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"3bd70d8a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.0.5@vue-style-loader!./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 52\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/.0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/.11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/.2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"12d3a60f\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.0.5@vue-style-loader!./~/.0.28.4@css-loader?{\"minimize\":true}!./~/.11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 53\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./examples/index.js","import DemoBasic from './demo-basic'\nimport DemoEvent from './demo-event'\nimport DemoBackground from './demo-background'\nimport DemoRotate from './demo-rotate'\nimport DemoObj from './demo-obj'\nimport DemoObjMtl from './demo-obj-mtl'\n// import DemoGltf from './demo-gltf'\nimport DemoStl from './demo-stl'\nimport DemoCollada from './demo-collada'\n// import DemoSea3d from './demo-sea3d'\nimport DemoJson from './demo-json'\n\nconst pages = [\n    DemoBasic,\n    DemoEvent,\n    DemoBackground,\n    DemoRotate,\n    DemoObj,\n    DemoObjMtl,\n    DemoStl,\n    DemoCollada,\n    DemoJson\n]\n\nexport { pages };\n\n\n\n// WEBPACK FOOTER //\n// ./examples/pages/index.js","<template>\n    <div class=\"examples\">\n        <div class=\"examples-header\">\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"title\">Vue3DModel</a>\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"github\">View on GitHub</a>\n        </div>\n        <div class=\"examples-content\">\n            <ul class=\"examples-menu\">\n                <li class=\"examples-menu-title\">Examples</li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-basic\">basic</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-rotate\">rotate</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-background\">background</router-link>\n                </li>\n                <li class=\"examples-menu-title\">Events</li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-event\">mousemove</router-link>\n                </li>\n                <li class=\"examples-menu-title\">Model Formats</li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-basic\">JSON Model (.json)</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-obj\">OBJ Model (.obj)</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-obj-mtl\">OBJ + MTL (.obj + .mtl)</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-stl\">STL Model (.stl)</router-link>\n                </li>\n                <li class=\"examples-menu-item\">\n                    <router-link to=\"demo-collada\">Collada Model (.dae)</router-link>\n                </li>\n            </ul>\n            <div class=\"examples-pages\">\n                <router-view></router-view>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'app'\n}\n</script>\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul, ol, li {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml, body, .examples {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\n                 SimSun, sans-serif;\n    background: #fff;\n}\n\n.examples-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.examples-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.examples-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.examples-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.examples-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.examples-menu .examples-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.examples-menu .examples-menu-item > a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.examples-menu .examples-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.examples-menu .examples-menu-item:hover > a {\n    color: #39f;\n}\n\n.examples-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.example-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n.example-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.example-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate{\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?8c740092","<template>\n    <div class=\"demo-block\">\n        <div class=\"demo-block-preview\">\n            <slot name=\"preview\"></slot>\n        </div>\n        <div class=\"demo-block-code\">\n            <div class=\"demo-block-code-box\">\n                <h3>Vue Component & Webpack</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n            <div class=\"demo-block-code-box\">\n                <h3>HTML & JS</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css';\nimport hljs from 'highlight.js'\n\nconst codeHandler = code => {\n    const scripts = `<script src=\"vue.js\"><\\/script>\n  <script src=\"vue-3d-model.min.js\"><\\/script>`;\n\n    return code.replace( /#scripts#/ig, scripts );\n}\n\nexport default {\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted () {\n        hljs.highlightBlock( this.$refs.vueCode );\n        hljs.highlightBlock( this.$refs.htmlCode );\n    },\n    data () {\n    \treturn {}\n    },\n    filters: {\n        code ( val ) {\n            return codeHandler( val );\n        }\n    },\n    components: {\n\n    }\n}\n</script>\n<style>\n    .demo-block {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        border-radius: 3px;\n    }\n\n    .demo-block .demo-block-preview {\n        width: 50%;\n        height: 100%;\n        float: left;\n        position: relative;\n    }\n\n    .demo-block .demo-block-code {\n        width: 50%;\n        height: 100%;\n        background: #f9fafc;\n        border-left: solid 1px #dfe2e7;\n        font-size: 13px;\n        float: left;\n    }\n    \n\n    .demo-block .demo-block-code pre code {\n        font: normal 10pt Consolas, Monaco, monospace;\n    }\n\n\n    .demo-block .demo-block-code .demo-block-code-box {\n        width: 100%;\n        height: 50%;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .demo-block .demo-block-code-box::after {\n        content: '';\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 90%;\n        height: 1px;\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n    }\n\n    .demo-block .demo-block-code-box h3 {\n        width: 100%;\n        padding: 10px 20px;\n        font-size: 16px;\n        font-weight: bold;\n        position: absolute;\n    }\n\n    .demo-block .demo-block-code-box-content {\n        position: absolute;\n        top: 40px;\n        bottom: 10px;\n        left: 20px;\n        right: 20px;\n        overflow: auto;\n    }\n\n    .demo-block .demo-block-code code {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?05f78a8b","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <p class=\"background-text\">\n                Vue<br>3D<br>Model<br>Background\n            </p>\n            <div class=\"background-buttons\">\n                <p>Color</p>\n                <button @click=\"bgColor = '#ff0'\">#ff0</button>\n                <button @click=\"bgColor = '#f00'\">#f00</button>\n                <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\n                <p>Alpha</p>\n                <button @click=\"bgAlpha = 0.5\">0.5</button>\n                <button @click=\"bgAlpha = 1\">1</button>\n                <button @click=\"bgAlpha = 0\">0</button>\n            </div>\n            <model-obj\n                class=\"model-box\"\n                :backgroundAlpha=\"bgAlpha\"\n                :backgroundColor=\"bgColor\"\n                @on-load=\"onLoad\"\n                src=\"static/models/obj/tree.obj\"></model-obj>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n<style>\n    .background-text {\n        position: absolute;\n        top: 50%;\n        left: 0;\n        z-index: 1;\n        width: 100%;\n        transform: translateY(-50%);\n        text-align: center; \n        font-size: 60px;\n    }\n    .background-buttons {\n        position: absolute;\n        top: 0;\n        left: 10px;\n        z-index: 3;\n    }\n\n    .background-buttons > p {\n        margin-top: 15px;\n        color: #000;\n    }\n\n    .background-buttons > button {\n        background: #fff;\n        padding: 4px 6px;\n        margin-top: 5px;\n        outline: none;\n        border: 1px solid #c4c4c4;\n    }\n\n    .model-box {\n        position: relative;\n        z-index: 2;\n    }\n</style>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelObj from '../../src/model-obj.vue'\n\nconst code = `\n<template>\n    <p class=\"background-text\">\n        Vue<br>3D<br>Model<br>Background\n    </p>\n    <div class=\"background-buttons\">\n        <p>Color</p>\n        <button @click=\"bgColor = '#ff0'\">#ff0</button>\n        <button @click=\"bgColor = '#f00'\">#f00</button>\n        <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\n        <p>Alpha</p>\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\n        <button @click=\"bgAlpha = 1\">1</button>\n        <button @click=\"bgAlpha = 0\">0</button>\n    </div>\n    <model-obj\n        :backgroundAlpha=\"bgAlpha\"\n        :backgroundColor=\"bgColor\"\n        src=\"static/models/obj/tree.obj\"></model-obj>\n</template>\n\n<script>\n    import { ModelObj } from 'vue-3d-model'\n\n    export default {\n        data () {\n            return {\n                bgColor: '#ff0',\n                bgAlpha: 0.5\n            }\n        },\n        components: {\n            ModelObj\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <p class=\"background-text\">\n            Vue<br>3D<br>Model<br>Background\n        </p>\n        <div class=\"background-buttons\">\n            <p>Color</p>\n            <button @click=\"bgColor = '#ff0'\">#ff0</button>\n            <button @click=\"bgColor = '#f00'\">#f00</button>\n            <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\n            <p>Alpha</p>\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\n            <button @click=\"bgAlpha = 1\">1</button>\n            <button @click=\"bgAlpha = 0\">0</button>\n        </div>\n        <model-obj\n            :backgroundAlpha=\"bgAlpha\"\n            :backgroundColor=\"bgColor\"\n            src=\"static/models/obj/tree.obj\"></model-obj>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app',\n            data: {\n                bgColor: '#ff0',\n                bgAlpha: 0.5\n            }\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-background',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true,\n            bgColor: '#ff0',\n            bgAlpha: 0.5\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        },\n        setBackground ( color, alpha ) {\n\n        }\n    },\n    components: {\n        ModelObj,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-background.vue?03d8306a","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-three :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/json/scene.json\"></model-three>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelThree from '../../src/model-three.vue'\n\nconst code = `\n<template>\n    <model-three src=\"static/models/json/scene.json\"></model-three>\n</template>\n\n<script>\n    import { ModelThree } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelThree\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-three src=\"static/models/json/scene.json\"></model-three>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-basic',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelThree,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-basic.vue?5e412224","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-collada :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelCollada from '../../src/model-collada.vue'\n\nconst code = `\n<template>\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\n</template>\n\n<script>\n    import { ModelCollada } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelCollada\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-collada',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelCollada,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-collada.vue?0ef2a0f5","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-obj :backgroundAlpha=\"0\"\n                ref=\"model\"\n                @on-load=\"onLoad\"\n                @on-mousemove=\"onMouseMove\"\n                src=\"static/models/obj/tree.obj\"></model-obj>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelObj from '../../src/model-obj.vue'\n\nconst code = `\n\n<template>\n    <model-obj \n        src=\"static/models/obj/tree.obj\"\n        @on-mousemove=\"onMouseMove\">\n    </model-obj>\n</template>\n\n<script>\n    import { ModelObj } from 'vue-3d-model'\n\n    export default {\n        data () {\n            return {\n                intersected: null\n            }\n        },\n        methods: {\n            onMouseMove ( event ) {\n\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\n\n                if ( !event ) {\n\n                    if ( this.intersected ) {\n                        this.intersected.material.color.setStyle( '#fff' );\n                    }\n\n                    this.intersected = null;\n                    return;\n                }\n\n                this.intersected = event.object;\n                this.intersected.material.color.setStyle( '#13ce66' );\n            }\n        },\n        components: {\n            ModelObj\n        }\n    }\n<\\/script>\n\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-obj \n            src=\"static/models/obj/tree.obj\"\n            @on-mousemove=\"onMouseMove\">\n        </model-obj>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app',\n            data: {\n                intersected: null\n            },\n            methods: {\n                onMouseMove ( event ) {\n\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\n\n                    if ( !event ) {\n\n                        if ( this.intersected ) {\n                            this.intersected.material.color.setStyle( '#fff' );\n                        }\n\n                        this.intersected = null;\n                        return;\n                    }\n\n                    this.intersected = event.object;\n                    this.intersected.material.color.setStyle( '#13ce66' );\n                }\n            }\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-event',\n    data () {\n        return {\n            code,\n            htmlCode,\n            loading: true,\n            intersected: null\n        }\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        },\n        onMouseMove ( event ) {\n\n            console.log( event );\n\n            if ( !event ) {\n\n                if ( this.intersected ) {\n                    this.intersected.material.color.setStyle( '#fff' );\n                }\n\n                this.intersected = null;\n                return;\n            }\n\n            this.intersected = event.object;\n            this.intersected.material.color.setStyle( '#13ce66' );\n        }\n    },\n    components: {\n        ModelObj,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-event.vue?0524f207","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-obj :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/obj/tree.obj\"></model-obj>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelObj from '../../src/model-obj.vue'\n\nconst code = `\n<template>\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\n</template>\n\n<script>\n    import { ModelObj } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelObj\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-obj',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-json.vue?2b61a2ac","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-obj :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/obj/male02/male02.obj\"\n                mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelObj from '../../src/model-obj.vue'\n\nconst code = `\n<template>\n    <model-obj \n        src=\"static/models/obj/male02/male02.obj\"\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\n</template>\n\n<script>\n    import { ModelObj } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelObj\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-obj \n            src=\"static/models/obj/male02/male02.obj\"\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-obj-mtl',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj-mtl.vue?14c58746","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-obj :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/obj/tree.obj\"></model-obj>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelObj from '../../src/model-obj.vue'\n\nconst code = `\n<template>\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\n</template>\n\n<script>\n    import { ModelObj } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelObj\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-obj',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj.vue?21f5f5de","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-collada\n                ref=\"collada\"\n                :rotation=\"rotation\"\n                @on-load=\"onLoad\"\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelCollada from '../../src/model-collada.vue'\n\nconst code = `\n<template>\n    <model-collada\n        :rotation=\"rotation\"\n        @on-load=\"onLoad\"\n        src=\"static/models/collada/elf.dae\"></model-collada>\n</template>\n\n<script>\n    import { ModelCollada } from 'vue-3d-model'\n\n    export default {\n        data: {\n            rotation: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        },\n        methods: {\n            onLoad () {\n                this.rotate();\n            },\n            rotate () {\n                this.rotation.y += 0.01;\n                requestAnimationFrame( this.rotate );\n            }\n        },\n        components: {\n            ModelCollada\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-collada\n            :rotation=\"rotation\"\n            @on-load=\"onLoad\"\n            src=\"static/models/collada/elf.dae\"></model-collada>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app',\n            data: {\n                rotation: {\n                    x: 0,\n                    y: 0,\n                    z: 0\n                }\n            },\n            methods: {\n                onLoad () {\n                    this.rotate();\n                },\n                rotate () {\n                    this.rotation.y += 0.01;\n                    requestAnimationFrame( this.rotate );\n                }\n            }\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-rotate',\n    data () {\n        return {\n            code,\n            htmlCode,\n            loading: true,\n            rotation: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        }\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n            this.rotate();\n        },\n        rotate () {\n            requestAnimationFrame( this.rotate );\n            this.rotation.y += 0.01;\n        }\n    },\n    components: {\n        ModelCollada,\n        DemoBlock\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-rotate.vue?38a1ceef","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <model-stl :backgroundAlpha=\"0\"\n                @on-load=\"onLoad\"\n                src=\"static/models/stl/gear.stl\"></model-stl>\n            <div class=\"example-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport ModelStl from '../../src/model-stl.vue'\n\nconst code = `\n<template>\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\n</template>\n\n<script>\n    import { ModelStl } from 'vue-3d-model'\n\n    export default {\n        components: {\n            ModelStl\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-stl',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelStl,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-stl.vue?0243a378","<script>\nimport { ColladaLoader } from './loaders/ColladaLoader'\nimport { toIndexed } from './util'\nimport mixin from './model-mixin.vue'\n\nexport default {\n    name: 'model-collada',\n    mixins: [ mixin ],\n    props: {\n        lights: {\n            type: Array,\n            default () {\n                return [\n                    {\n                        type: 'HemisphereLight',\n                        position: { x: 0, y: 1, z: 0 },\n                        skyColor: 0xaaaaff,\n                        groundColor: 0x806060,\n                        intensity: 0.2\n                    },\n                    {\n                        type: 'DirectionalLight',\n                        position: { x: 1, y: 1, z: 1 },\n                        color: 0xffffff,\n                        intensity: 0.8\n                    }\n                ]\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data () {\n\n        const loader = new ColladaLoader();\n        loader.options.convertUpAxis = true;\n\n        return {\n            loader\n        }\n    },\n    methods: {\n        load () {\n\n            if ( !this.src ) return;\n\n            if ( this.object ) {\n                this.scene.remove( this.object );\n            }\n\n            this.loader.load( this.src, collada => {\n\n                this.object = collada.scene;\n\n                this.scene.add( this.object );\n\n                this.updateCamera();\n\n                this.$emit( 'on-load' );\n\n            }, err => {\n\n                this.$emit( 'on-error', err );\n\n            } );\n\n        }\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// model-collada.vue?4aa6be61","<template>\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n        <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\n        <div v-else>\n            <slot>\n                Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\n            </slot>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport {\n    Object3D,\n    Vector2,\n    Vector3,\n    Color,\n    Scene,\n    Raycaster,\n    WebGLRenderer,\n    PerspectiveCamera,\n    AmbientLight,\n    HemisphereLight,\n    DirectionalLight\n} from 'three'\nimport { getSize, getCenter } from './util'\nimport { OrbitControls } from './controls/OrbitControls'\n\nconst suportWebGL = ( () => {\n\n    try {\n        var canvas = document.createElement( 'canvas' ); \n        return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n    } catch ( e ) {\n        return false;\n    }\n\n} )();\n\nlet handler = null;\n\nexport default {\n    props: {\n        src: {\n            type: String\n        },\n        width: {\n            type: Number\n        },\n        height: {\n            type: Number\n        },\n        position: {\n            type: Object,\n            default () {\n                return { x: 0, y: 0, z: 0 }\n            }\n        },\n        rotation: {\n            type: Object,\n            default () {\n                return { x: 0, y: 0, z: 0 }\n            }\n        },\n        scale: {\n            type: Object,\n            default () {\n                return { x: 1, y: 1, z: 1 }\n            }\n        },\n        lights: {\n            type: Array,\n            default () {\n                return [];\n            }\n        },\n        cameraPosition: {\n            type: Object\n        },\n        cameraRotation: {\n            type: Object\n        },\n        cameraUp: {\n            type: Object\n        },\n        cameraLookAt: {\n            type: Object\n        },\n        backgroundColor: {\n            default: 0xffffff\n        },\n        backgroundAlpha: {\n            type: Number,\n            default: 1\n        },\n        controllable: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data () {\n        return {\n            suportWebGL,\n            size: {\n                width: this.width,\n                height: this.height\n            },\n            object: null,\n            raycaster: new Raycaster(),\n            mouse: new Vector2(),\n            camera: new PerspectiveCamera( 45, 1, 0.001, 100000 ),\n            scene: new Scene(),\n            renderer: null,\n            controls: null,\n            allLights: [],\n            clock: typeof performance === 'undefined' ? Date : performance\n        }\n    },\n    computed: {\n        hasListener () {\n\n            // \n            const events = this._events;\n            let result = {};\n\n            [ 'on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click' ].forEach( name => {\n                result[ name ] = !!events[ name ] && events[ name ].length > 0;\n            } )\n\n            return result;\n        }\n    },\n    created () {\n        window.addEventListener( 'resize', this.onResize, false );\n    },\n    mounted () {\n\n        if ( this.width === undefined || this.height === undefined ) {\n            this.size = {\n                width: this.$el.offsetWidth,\n                height: this.$el.offsetHeight\n            }\n        }\n\n        this.renderer = new WebGLRenderer( { antialias: true, alpha: true, canvas: this.$refs.canvas } )\n        this.renderer.shadowMap.enabled = true;\n\n        this.load();\n        this.update();\n\n        this.$el.addEventListener( 'mousedown', this.onMouseDown, false );\n        this.$el.addEventListener( 'mousemove', this.onMouseMove, false );\n        this.$el.addEventListener( 'mouseup', this.onMouseUp, false );\n        this.$el.addEventListener( 'click', this.onClick, false );\n\n        this.animate();\n    },\n    beforeDestroy () {\n\n        this.$el.removeEventListener( 'mousedown', this.onMouseDown, false );\n        this.$el.removeEventListener( 'mousemove', this.onMouseMove, false );\n        this.$el.removeEventListener( 'mouseup', this.onMouseUp, false );\n        this.$el.removeEventListener( 'click', this.onClick, false );\n\n    },\n    watch: {\n        src () {\n            this.load();\n        },\n        rotation: {\n            deep: true,\n            handler( val ) {\n                if ( !this.object ) return;\n                this.object.rotation.set( val.x, val.y, val.z );\n            }\n        },\n        position: {\n            deep: true,\n            handler( val ) {\n                if ( !this.object ) return;\n                this.object.position.set( val.x, val.y, val.z );\n            }\n        },\n        scale: {\n            deep: true,\n            handler( val ) {\n                if ( !this.object ) return;\n                this.object.scale.set( val.x, val.y, val.z );\n            }\n        },\n        lights: {\n            deep: true,\n            handler( val, oldVal ) {\n                this.updateLights();\n            }\n        },\n        size: {\n            deep: true,\n            handler ( val ) {\n                this.updateCamera();\n                this.updateRenderer();\n            }\n        },\n        controllable () {\n            this.updateControls();\n        },\n        backgroundAlpha () {\n            this.updateRenderer();\n        },\n        backgroundColor () {\n            this.updateRenderer();\n        }\n    },\n    methods: {\n        onResize () {\n\n            if ( this.width === undefined || this.height === undefined ) {\n\n                this.$nextTick( () => {\n                    this.size = {\n                        width: this.$el.offsetWidth,\n                        height: this.$el.offsetHeight\n                    }\n                } )\n                \n            }\n        },\n        onMouseDown ( event ) {\n\n            if ( !this.hasListener[ 'on-mousedown' ] ) return;\n\n            const intersected = this.pick( event.clientX, event.clientY );\n            this.$emit( 'on-mousedown', intersected );\n\n        },\n        onMouseMove ( event ) {\n\n            if ( !this.hasListener[ 'on-mousemove' ] ) return;\n\n            const intersected = this.pick( event.clientX, event.clientY );\n            this.$emit( 'on-mousemove', intersected );\n\n        },\n        onMouseUp ( event ) {\n\n            if ( !this.hasListener[ 'on-mouseup' ] ) return;\n\n            const intersected = this.pick( event.clientX, event.clientY );\n            this.$emit( 'on-mouseup', intersected );\n\n        },\n        onClick ( event ) {\n\n            if ( !this.hasListener[ 'on-click' ] ) return;\n\n            const intersected = this.pick( event.clientX, event.clientY );\n            this.$emit( 'on-click', intersected );\n\n        },\n        pick ( x, y ) {\n\n            if ( !this.object ) return;\n\n            const rect = this.$el.getBoundingClientRect();\n\n            x -= rect.left;\n            y -= rect.top;\n\n            this.mouse.x = ( x / this.size.width ) * 2 - 1;\n            this.mouse.y = - ( y / this.size.height ) * 2 + 1;\n\n            this.raycaster.setFromCamera( this.mouse, this.camera );\n\n            const intersects = this.raycaster.intersectObject( this.object, true );\n\n            return ( intersects && intersects.length ) > 0 ? intersects[ 0 ] : null;\n\n        },\n        update () {\n\n            this.updateRenderer();\n            this.updateModel();\n            this.updateCamera();\n            this.updateLights();\n            this.updateControls();\n            \n        },\n        updateModel () {\n\n            let object = this.object;\n\n            if ( !object ) return;\n\n            object.position.copy( this.position );\n            object.rotation.copy( this.rotation );\n            object.scale.copy( this.scale );\n\n            object.matrixWorldNeedsUpdate = true;\n\n        },\n        updateRenderer () {\n\n            let renderer = this.renderer;\n\n            renderer.setSize( this.size.width, this.size.height );\n            renderer.setPixelRatio( window.devicePixelRatio || 1 );\n            renderer.setClearColor( new Color( this.backgroundColor ).getHex() );\n            renderer.setClearAlpha( this.backgroundAlpha );\n        },\n        updateCamera () {\n\n            let camera = this.camera;\n            let object = this.object;\n\n            let distance = 0;\n            let center = null;\n\n            camera.aspect = this.size.width / this.size.height;\n            camera.updateProjectionMatrix();\n\n            if ( !this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp ) {\n\n                if ( !object ) return;\n\n                distance = getSize( object ).length();\n                center = getCenter( object );\n\n                camera.position.set( 0, 0, 0 );\n                camera.position.z = distance;\n                camera.position.add( center );\n                camera.lookAt( center );\n\n            } else {\n                // TODO\n            }\n\n            if ( this.controls && center ) this.controls.target.copy( center );\n\n        },\n        updateLights () {\n\n            this.scene.remove.apply( this.scene, this.allLights );\n\n            this.allLights = [];\n\n            this.lights.forEach( item => {\n\n                if ( !item.type ) return;\n\n                const type = item.type.toLowerCase();\n\n                let light = null;\n\n                if ( type === 'ambient' || type === 'ambientlight' ) {\n\n                    const color = item.color || 0x404040;\n                    const intensity = item.intensity || 1;\n\n                    light = new AmbientLight( color, intensity );\n\n                } else if ( type === 'point' || type === 'pointlight' ) {\n\n                    const color = item.color || 0xffffff;\n                    const intensity = item.intensity || 1;\n                    const distance = item.distance || 0;\n                    const decay = item.decay || 1;\n\n                    light = new PointLight( color, intensity, distance, decay );\n\n                    if ( item.position ) {\n                        light.position.copy( item.position );\n                    }\n\n                } else if ( type === 'directional' || type === 'directionallight' ) {\n\n                    const color = item.color || 0xffffff;\n                    const intensity = item.intensity || 1;\n\n                    light = new DirectionalLight( color, intensity );\n\n                    if ( item.position ) {\n                        light.position.copy( item.position );\n                    }\n\n                    if ( item.target ) {\n                        light.target.copy( item.target );\n                    }\n\n                } else if ( type === 'hemisphere' || type === 'hemispherelight' ) {\n\n                    const skyColor = item.skyColor || 0xffffff;\n                    const groundColor = item.groundColor || 0xffffff;\n                    const intensity = item.intensity || 1;\n\n                    light = new HemisphereLight( skyColor, groundColor, intensity );\n\n                    if ( item.position ) {\n                        light.position.copy( item.position );\n                    }\n\n                }\n\n                this.allLights.push( light );\n                this.scene.add( light );\n\n            } )\n\n        },\n        updateControls () {\n\n            if ( this.controllable && this.controls ) return;\n\n            if ( this.controllable ) {\n\n                if ( this.controls ) return;\n\n                this.controls = new OrbitControls( this.camera, this.$el );\n                this.controls.type = 'orbit';\n\n            } else {\n\n                if ( this.controls ) {\n\n                    this.controls.dispose();\n                    this.controls = null;\n\n                }\n\n            }\n\n        },\n        load () {\n\n            if ( !this.src ) return;\n\n            if ( this.object ) {\n                this.scene.remove( this.object );\n            }\n\n            this.loader.load( this.src, object => {\n\n                if ( this.process ) {\n                    this.process ( object );\n                }\n\n                this.object = object;\n\n                this.scene.add( this.object );\n\n                this.updateCamera();\n\n                this.$emit( 'on-load' );\n\n            }, err => {\n\n                this.$emit( 'on-error', err );\n\n            } );\n\n        },\n        animate () {\n            requestAnimationFrame( this.animate );\n            this.render();\n        },\n        render () {\n            this.renderer.render( this.scene, this.camera );\n        }\n    }\n}\n\n</script>\n\n\n// WEBPACK FOOTER //\n// model-mixin.vue?f3daebce","<script>\nimport { OBJLoader } from './loaders/OBJLoader'\nimport { MTLLoader } from './loaders/MTLLoader'\nimport { toIndexed } from './util'\nimport mixin from './model-mixin.vue'\n\nexport default {\n    name: 'model-obj',\n    mixins: [ mixin ],\n    props: {\n        lights: {\n            type: Array,\n            default () {\n                return [\n                    {\n                        type: 'HemisphereLight',\n                        position: { x: 0, y: 1, z: 0 },\n                        skyColor: 0xaaaaff,\n                        groundColor: 0x806060,\n                        intensity: 0.2\n                    },\n                    {\n                        type: 'DirectionalLight',\n                        position: { x: 1, y: 1, z: 1 },\n                        color: 0xffffff,\n                        intensity: 0.8\n                    }\n                ]\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        },\n        mtlPath: {\n            type: String\n        },\n        mtl: {\n            type: String\n        }\n    },\n    data () {\n        return {\n            loader: new OBJLoader(),\n            mtlLoader: new MTLLoader()\n        }\n    },\n    watch: {\n        mtl () {\n            this.load();\n        }\n    },\n    methods: {\n        process ( object ) {\n            if ( this.smoothing ) {\n                object.traverse( child => {\n                    if ( child.geometry ) {\n                        child.geometry = toIndexed( child.geometry );\n                        child.geometry.computeVertexNormals();\n                    }\n                } )\n            }\n        },\n        load () {\n\n            if ( !this.src ) return;\n\n            if ( this.object ) {\n                this.scene.remove( this.object );\n            }\n\n            const onLoad = object => {\n                \n                if ( this.process ) {\n                    this.process ( object );\n                }\n\n                this.object = object;\n\n                this.scene.add( this.object );\n\n                this.updateCamera();\n\n                this.$emit( 'on-load' );\n\n            }\n\n            const onError = err => {\n\n                this.$emit( 'on-error', err );\n\n            }\n\n            if ( this.mtl ) {\n\n                let mtlPath = this.mtlPath;\n                let mtlSrc = this.mtl;\n                \n                if ( !this.mtlPath ) {\n\n                    const result = /^(.*\\/)([^/]*)$/.exec( this.mtl );\n\n                    if ( result ) {\n                        mtlPath = result[ 1 ];\n                        mtlSrc = result[ 2 ];\n                    }\n\n                }\n\n                if ( mtlPath ) {\n                    this.mtlLoader.setPath( mtlPath )\n                }\n\n                this.mtlLoader.load( mtlSrc, materials => {\n\n                    materials.preload();\n\n                    this.loader.setMaterials( materials );\n\n                    this.loader.load( this.src, onLoad, onError );\n\n                }, onError );\n\n            } else {\n    \n                this.loader.load( this.src, onLoad, onError );\n\n            }\n\n        },\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// model-obj.vue?3dbd79de","<script>\nimport { STLLoader } from './loaders/STLLoader'\nimport mixin from './model-mixin.vue'\nimport {\n    Mesh,\n    MeshPhongMaterial\n} from 'three'\n\nexport default {\n    name: 'model-stl',\n    mixins: [ mixin ],\n    props: {\n        lights: {\n            type: Array,\n            default () {\n                return [\n                    {\n                        type: 'HemisphereLight',\n                        position: { x: 0, y: 1, z: 0 },\n                        skyColor: 0xaaaaff,\n                        groundColor: 0x806060,\n                        intensity: 0.2\n                    },\n                    {\n                        type: 'DirectionalLight',\n                        position: { x: 1, y: 1, z: 1 },\n                        color: 0xffffff,\n                        intensity: 0.8\n                    }\n                ]\n            }\n        }\n    },\n    data () {\n        return {\n            loader: new STLLoader()\n        }\n    },\n    methods: {\n        load () {\n\n            if ( !this.src ) return;\n\n            if ( this.object ) {\n                this.scene.remove( this.object );\n            }\n\n            this.loader.load( this.src, geometry => {\n\n                this.object = new Mesh( geometry, new MeshPhongMaterial() );\n\n                this.scene.add( this.object );\n\n                \n\n                this.updateCamera();\n\n                this.$emit( 'on-load' );\n\n            }, err => {\n\n                this.$emit( 'on-error', err );\n\n            } );\n\n        }\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// model-stl.vue?058b0a4a","<script>\nimport { ObjectLoader } from 'three'\nimport mixin from './model-mixin.vue'\n\nexport default {\n    name: 'model-three',\n    mixins: [ mixin ],\n    data () {\n        return {\n            loader: new ObjectLoader()\n        }\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// model-three.vue?01cfeaec","import * as THREE from 'three';\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\n\nconst OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\t//console.log( 'handleTouchStartPan' );\n\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\t//console.log( 'handleTouchMovePan' );\n\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\nexport { OrbitControls };\n\n\n// WEBPACK FOOTER //\n// ./src/controls/OrbitControls.js","import * as THREE from 'three';\n\n/**\n* @author Tim Knip / http://www.floorplanner.com/ / tim at floorplanner.com\n* @author Tony Parisi / http://www.tonyparisi.com/\n*/\n\nconst ColladaLoader = function () {\n\n\tvar COLLADA = null;\n\tvar scene = null;\n\tvar visualScene;\n\tvar kinematicsModel;\n\n\tvar readyCallbackFunc = null;\n\n\tvar sources = {};\n\tvar images = {};\n\tvar animations = {};\n\tvar controllers = {};\n\tvar geometries = {};\n\tvar materials = {};\n\tvar effects = {};\n\tvar cameras = {};\n\tvar lights = {};\n\n\tvar animData;\n\tvar kinematics;\n\tvar visualScenes;\n\tvar kinematicsModels;\n\tvar baseUrl;\n\tvar morphs;\n\tvar skins;\n\n\tvar flip_uv = true;\n\tvar preferredShading = THREE.SmoothShading;\n\n\tvar options = {\n\t\t// Force Geometry to always be centered at the local origin of the\n\t\t// containing Mesh.\n\t\tcenterGeometry: false,\n\n\t\t// Axis conversion is done for geometries, animations, and controllers.\n\t\t// If we ever pull cameras or lights out of the COLLADA file, they'll\n\t\t// need extra work.\n\t\tconvertUpAxis: false,\n\n\t\tsubdivideFaces: true,\n\n\t\tupAxis: 'Y',\n\n\t\t// For reflective or refractive materials we'll use this cubemap\n\t\tdefaultEnvMap: null\n\n\t};\n\n\tvar colladaUnit = 1.0;\n\tvar colladaUp = 'Y';\n\tvar upConversion = null;\n\n\tfunction load ( url, readyCallback, progressCallback, failCallback ) {\n\n\t\tvar length = 0;\n\n\t\tif ( document.implementation && document.implementation.createDocument ) {\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.onreadystatechange = function() {\n\n\t\t\t\tif ( request.readyState === 4 ) {\n\n\t\t\t\t\tif ( request.status === 0 || request.status === 200 ) {\n\n\t\t\t\t\t\tif ( request.response ) {\n\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\tparse( request.response, undefined, url );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( failCallback ) {\n\n\t\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.error( \"ColladaLoader: Empty or non-existing file (\" + url + \")\" );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tif( failCallback ){\n\n\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\n\n\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t\tconsole.error( 'ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( request.readyState === 3 ) {\n\n\t\t\t\t\tif ( progressCallback ) {\n\n\t\t\t\t\t\tif ( length === 0 ) {\n\n\t\t\t\t\t\t\tlength = request.getResponseHeader( \"Content-Length\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tprogressCallback( { total: length, loaded: request.responseText.length } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\trequest.open( \"GET\", url, true );\n\t\t\trequest.send( null );\n\n\t\t} else {\n\n\t\t\talert( \"Don't know how to parse XML!\" );\n\n\t\t}\n\n\t}\n\n\tfunction parse( text, callBack, url ) {\n\n\t\tCOLLADA = new DOMParser().parseFromString( text, 'text/xml' );\n\t\tcallBack = callBack || readyCallbackFunc;\n\n\t\tif ( url !== undefined ) {\n\n\t\t\tvar parts = url.split( '/' );\n\t\t\tparts.pop();\n\t\t\tbaseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';\n\n\t\t}\n\n\t\tparseAsset();\n\t\tsetUpConversion();\n\t\timages = parseLib( \"library_images image\", _Image, \"image\" );\n\t\tmaterials = parseLib( \"library_materials material\", Material, \"material\" );\n\t\teffects = parseLib( \"library_effects effect\", Effect, \"effect\" );\n\t\tgeometries = parseLib( \"library_geometries geometry\", Geometry, \"geometry\" );\n\t\tcameras = parseLib( \"library_cameras camera\", Camera, \"camera\" );\n\t\tlights = parseLib( \"library_lights light\", Light, \"light\" );\n\t\tcontrollers = parseLib( \"library_controllers controller\", Controller, \"controller\" );\n\t\tanimations = parseLib( \"library_animations animation\", Animation, \"animation\" );\n\t\tvisualScenes = parseLib( \"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\" );\n\t\tkinematicsModels = parseLib( \"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\" );\n\n\t\tmorphs = [];\n\t\tskins = [];\n\n\t\tvisualScene = parseScene();\n\t\tscene = new THREE.Group();\n\n\t\tfor ( var i = 0; i < visualScene.nodes.length; i ++ ) {\n\n\t\t\tscene.add( createSceneGraph( visualScene.nodes[ i ] ) );\n\n\t\t}\n\n\t\t// unit conversion\n\t\tscene.scale.multiplyScalar( colladaUnit );\n\n\t\tcreateAnimations();\n\n\t\tkinematicsModel = parseKinematicsModel();\n\t\tcreateKinematics();\n\n\t\tvar result = {\n\n\t\t\tscene: scene,\n\t\t\tmorphs: morphs,\n\t\t\tskins: skins,\n\t\t\tanimations: animData,\n\t\t\tkinematics: kinematics,\n\t\t\tdae: {\n\t\t\t\timages: images,\n\t\t\t\tmaterials: materials,\n\t\t\t\tcameras: cameras,\n\t\t\t\tlights: lights,\n\t\t\t\teffects: effects,\n\t\t\t\tgeometries: geometries,\n\t\t\t\tcontrollers: controllers,\n\t\t\t\tanimations: animations,\n\t\t\t\tvisualScenes: visualScenes,\n\t\t\t\tvisualScene: visualScene,\n\t\t\t\tscene: visualScene,\n\t\t\t\tkinematicsModels: kinematicsModels,\n\t\t\t\tkinematicsModel: kinematicsModel\n\t\t\t}\n\n\t\t};\n\n\t\tif ( callBack ) {\n\n\t\t\tcallBack( result );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction setPreferredShading ( shading ) {\n\n\t\tpreferredShading = shading;\n\n\t}\n\n\tfunction parseAsset () {\n\n\t\tvar elements = COLLADA.querySelectorAll('asset');\n\n\t\tvar element = elements[0];\n\n\t\tif ( element && element.childNodes ) {\n\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'unit':\n\n\t\t\t\t\t\tvar meter = child.getAttribute( 'meter' );\n\n\t\t\t\t\t\tif ( meter ) {\n\n\t\t\t\t\t\t\tcolladaUnit = parseFloat( meter );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'up_axis':\n\n\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction parseLib ( q, classSpec, prefix ) {\n\n\t\tvar elements = COLLADA.querySelectorAll(q);\n\n\t\tvar lib = {};\n\n\t\tvar i = 0;\n\n\t\tvar elementsLength = elements.length;\n\n\t\tfor ( var j = 0; j < elementsLength; j ++ ) {\n\n\t\t\tvar element = elements[j];\n\t\t\tvar daeElement = ( new classSpec() ).parse( element );\n\n\t\t\tif ( !daeElement.id || daeElement.id.length === 0 ) daeElement.id = prefix + ( i ++ );\n\t\t\tlib[ daeElement.id ] = daeElement;\n\n\t\t}\n\n\t\treturn lib;\n\n\t}\n\n\tfunction parseScene() {\n\n\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\n\t\tif ( sceneElement ) {\n\n\t\t\tvar url = sceneElement.getAttribute( 'url' ).replace( /^#/, '' );\n\t\t\treturn visualScenes[ url.length > 0 ? url : 'visual_scene0' ];\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tfunction parseKinematicsModel() {\n\n\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\n\n\t\tif ( kinematicsModelElement ) {\n\n\t\t\tvar url = kinematicsModelElement.getAttribute( 'url' ).replace(/^#/, '');\n\t\t\treturn kinematicsModels[ url.length > 0 ? url : 'kinematics_model0' ];\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tfunction createAnimations() {\n\n\t\tanimData = [];\n\n\t\t// fill in the keys\n\t\trecurseHierarchy( scene );\n\n\t}\n\n\tfunction recurseHierarchy( node ) {\n\n\t\tvar n = visualScene.getChildById( node.colladaId, true ),\n\t\t\tnewData = null;\n\n\t\tif ( n && n.keys ) {\n\n\t\t\tnewData = {\n\t\t\t\tfps: 60,\n\t\t\t\thierarchy: [ {\n\t\t\t\t\tnode: n,\n\t\t\t\t\tkeys: n.keys,\n\t\t\t\t\tsids: n.sids\n\t\t\t\t} ],\n\t\t\t\tnode: node,\n\t\t\t\tname: 'animation_' + node.name,\n\t\t\t\tlength: 0\n\t\t\t};\n\n\t\t\tanimData.push(newData);\n\n\t\t\tfor ( var i = 0, il = n.keys.length; i < il; i ++ ) {\n\n\t\t\t\tnewData.length = Math.max( newData.length, n.keys[i].time );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tnewData = {\n\t\t\t\thierarchy: [ {\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t} ]\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, il = node.children.length; i < il; i ++ ) {\n\n\t\t\tvar d = recurseHierarchy( node.children[i] );\n\n\t\t\tfor ( var j = 0, jl = d.hierarchy.length; j < jl; j ++ ) {\n\n\t\t\t\tnewData.hierarchy.push( {\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn newData;\n\n\t}\n\n\tfunction calcAnimationBounds () {\n\n\t\tvar start = 1000000;\n\t\tvar end = -start;\n\t\tvar frames = 0;\n\t\tvar ID;\n\t\tfor ( var id in animations ) {\n\n\t\t\tvar animation = animations[ id ];\n\t\t\tID = ID || animation.id;\n\t\t\tfor ( var i = 0; i < animation.sampler.length; i ++ ) {\n\n\t\t\t\tvar sampler = animation.sampler[ i ];\n\n\t\t\t\tsampler.create();\n\n\t\t\t\tstart = Math.min( start, sampler.startTime );\n\t\t\t\tend = Math.max( end, sampler.endTime );\n\t\t\t\tframes = Math.max( frames, sampler.input.length );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn { start:start, end:end, frames:frames,ID:ID };\n\n\t}\n\n\tfunction createMorph ( geometry, ctrl ) {\n\n\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ ctrl.url ] : ctrl;\n\n\t\tif ( !morphCtrl || !morphCtrl.morph ) {\n\n\t\t\tconsole.log(\"could not find morph controller!\");\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar morph = morphCtrl.morph;\n\n\t\tfor ( var i = 0; i < morph.targets.length; i ++ ) {\n\n\t\t\tvar target_id = morph.targets[ i ];\n\t\t\tvar daeGeometry = geometries[ target_id ];\n\n\t\t\tif ( !daeGeometry.mesh ||\n\t\t\t\t !daeGeometry.mesh.primitives ||\n\t\t\t\t !daeGeometry.mesh.primitives.length ) {\n\t\t\t\t continue;\n\t\t\t}\n\n\t\t\tvar target = daeGeometry.mesh.primitives[ 0 ].geometry;\n\n\t\t\tif ( target.vertices.length === geometry.vertices.length ) {\n\n\t\t\t\tgeometry.morphTargets.push( { name: \"target_1\", vertices: target.vertices } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.morphTargets.push( { name: \"target_Z\", vertices: geometry.vertices } );\n\n\t}\n\n\tfunction createSkin ( geometry, ctrl, applyBindShape ) {\n\n\t\tvar skinCtrl = controllers[ ctrl.url ];\n\n\t\tif ( !skinCtrl || !skinCtrl.skin ) {\n\n\t\t\tconsole.log( \"could not find skin controller!\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !ctrl.skeleton || !ctrl.skeleton.length ) {\n\n\t\t\tconsole.log( \"could not find the skeleton for the skin!\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar skin = skinCtrl.skin;\n\t\tvar skeleton = visualScene.getChildById( ctrl.skeleton[ 0 ] );\n\t\tvar hierarchy = [];\n\n\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n\t\tvar bones = [];\n\t\tgeometry.skinWeights = [];\n\t\tgeometry.skinIndices = [];\n\n\t\t//createBones( geometry.bones, skin, hierarchy, skeleton, null, -1 );\n\t\t//createWeights( skin, geometry.bones, geometry.skinIndices, geometry.skinWeights );\n\n\t\t/*\n\t\tgeometry.animation = {\n\t\t\tname: 'take_001',\n\t\t\tfps: 30,\n\t\t\tlength: 2,\n\t\t\tJIT: true,\n\t\t\thierarchy: hierarchy\n\t\t};\n\t\t*/\n\n\t\tif ( applyBindShape ) {\n\n\t\t\tfor ( var i = 0; i < geometry.vertices.length; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ i ].applyMatrix4( skin.bindShapeMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupSkeleton ( node, bones, frame, parent ) {\n\n\t\tnode.world = node.world || new THREE.Matrix4();\n\t\tnode.localworld = node.localworld || new THREE.Matrix4();\n\t\tnode.world.copy( node.matrix );\n\t\tnode.localworld.copy( node.matrix );\n\n\t\tif ( node.channels && node.channels.length ) {\n\n\t\t\tvar channel = node.channels[ 0 ];\n\t\t\tvar m = channel.sampler.output[ frame ];\n\n\t\t\tif ( m instanceof THREE.Matrix4 ) {\n\n\t\t\t\tnode.world.copy( m );\n\t\t\t\tnode.localworld.copy(m);\n\t\t\t\tif (frame === 0)\n\t\t\t\t\tnode.matrix.copy(m);\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parent ) {\n\n\t\t\tnode.world.multiplyMatrices( parent, node.world );\n\n\t\t}\n\n\t\tbones.push( node );\n\n\t\tfor ( var i = 0; i < node.nodes.length; i ++ ) {\n\n\t\t\tsetupSkeleton( node.nodes[ i ], bones, frame, node.world );\n\n\t\t}\n\n\t}\n\n\tfunction setupSkinningMatrices ( bones, skin ) {\n\n\t\t// FIXME: this is dumb...\n\n\t\tfor ( var i = 0; i < bones.length; i ++ ) {\n\n\t\t\tvar bone = bones[ i ];\n\t\t\tvar found = -1;\n\n\t\t\tif ( bone.type != 'JOINT' ) continue;\n\n\t\t\tfor ( var j = 0; j < skin.joints.length; j ++ ) {\n\n\t\t\t\tif ( bone.sid === skin.joints[ j ] ) {\n\n\t\t\t\t\tfound = j;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( found >= 0 ) {\n\n\t\t\t\tvar inv = skin.invBindMatrices[ found ];\n\n\t\t\t\tbone.invBindMatrix = inv;\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\n\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv); // (IBMi * JMi)\n\t\t\t\tbone.animatrix = new THREE.Matrix4();\n\n\t\t\t\tbone.animatrix.copy(bone.localworld);\n\t\t\t\tbone.weights = [];\n\n\t\t\t\tfor ( var j = 0; j < skin.weights.length; j ++ ) {\n\n\t\t\t\t\tfor (var k = 0; k < skin.weights[ j ].length; k ++ ) {\n\n\t\t\t\t\t\tvar w = skin.weights[ j ][ k ];\n\n\t\t\t\t\t\tif ( w.joint === found ) {\n\n\t\t\t\t\t\t\tbone.weights.push( w );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( \"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\" );\n\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\n\t\t\t\tbone.weights = [];\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t//Walk the Collada tree and flatten the bones into a list, extract the position, quat and scale from the matrix\n\tfunction flattenSkeleton(skeleton) {\n\n\t\tvar list = [];\n\t\tvar walk = function(parentid, node, list) {\n\n\t\t\tvar bone = {};\n\t\t\tbone.name = node.sid;\n\t\t\tbone.parent = parentid;\n\t\t\tbone.matrix = node.matrix;\n\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\n\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\tbone.pos = [ data[0].x,data[0].y,data[0].z ];\n\n\t\t\tbone.scl = [ data[2].x,data[2].y,data[2].z ];\n\t\t\tbone.rotq = [ data[1].x,data[1].y,data[1].z,data[1].w ];\n\t\t\tlist.push(bone);\n\n\t\t\tfor (var i in node.nodes) {\n\n\t\t\t\twalk(node.sid, node.nodes[i], list);\n\n\t\t\t}\n\n\t\t};\n\n\t\twalk(-1, skeleton, list);\n\t\treturn list;\n\n\t}\n\n\t//Move the vertices into the pose that is proper for the start of the animation\n\tfunction skinToBindPose(geometry,skeleton,skinController) {\n\n\t\tvar bones = [];\n\t\tsetupSkeleton( skeleton, bones, -1 );\n\t\tsetupSkinningMatrices( bones, skinController.skin );\n\t\tvar v = new THREE.Vector3();\n\t\tvar skinned = [];\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\n\n\t\t\tskinned.push(new THREE.Vector3());\n\n\t\t}\n\n\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\tif ( bones[ i ].type != 'JOINT' ) continue;\n\n\t\t\tfor ( var j = 0; j < bones[ i ].weights.length; j ++ ) {\n\n\t\t\t\tvar w = bones[ i ].weights[ j ];\n\t\t\t\tvar vidx = w.index;\n\t\t\t\tvar weight = w.weight;\n\n\t\t\t\tvar o = geometry.vertices[vidx];\n\t\t\t\tvar s = skinned[vidx];\n\n\t\t\t\tv.x = o.x;\n\t\t\t\tv.y = o.y;\n\t\t\t\tv.z = o.z;\n\n\t\t\t\tv.applyMatrix4( bones[i].skinningMatrix );\n\n\t\t\t\ts.x += (v.x * weight);\n\t\t\t\ts.y += (v.y * weight);\n\t\t\t\ts.z += (v.z * weight);\n\t\t\t}\n\n\t\t}\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\n\n\t\t\tgeometry.vertices[i] = skinned[i];\n\n\t\t}\n\n\t}\n\n\tfunction applySkin( geometry, instanceCtrl, frame ) {\n\n\t\tif ( frame === undefined ) frame = 40;\n\n\t\tvar skinController = controllers[ instanceCtrl.url ];\n\n\t\tif ( !skinController || !skinController.skin ) {\n\n\t\t\tconsole.log( 'ColladaLoader: Could not find skin controller.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !instanceCtrl.skeleton || !instanceCtrl.skeleton.length ) {\n\n\t\t\tconsole.log( 'ColladaLoader: Could not find the skeleton for the skin. ' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar animationBounds = calcAnimationBounds();\n\t\tvar skeleton = visualScene.getChildById( instanceCtrl.skeleton[0], true ) || visualScene.getChildBySid( instanceCtrl.skeleton[0], true );\n\n\t\t//flatten the skeleton into a list of bones\n\t\tvar bonelist = flattenSkeleton(skeleton);\n\t\tvar joints = skinController.skin.joints;\n\n\t\t//sort that list so that the order reflects the order in the joint list\n\t\tvar sortedbones = [];\n\t\tfor (var i = 0; i < joints.length; i ++) {\n\n\t\t\tfor (var j = 0; j < bonelist.length; j ++) {\n\n\t\t\t\tif (bonelist[j].name === joints[i]) {\n\n\t\t\t\t\tsortedbones[i] = bonelist[j];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//hook up the parents by index instead of name\n\t\tfor (var i = 0; i < sortedbones.length; i ++) {\n\n\t\t\tfor (var j = 0; j < sortedbones.length; j ++) {\n\n\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\n\n\t\t\t\t\tsortedbones[i].parent = j;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar i, j, w, vidx, weight;\n\t\tvar v = new THREE.Vector3(), o, s;\n\n\t\t// move vertices to bind shape\n\t\tfor ( i = 0; i < geometry.vertices.length; i ++ ) {\n\t\t\tgeometry.vertices[i].applyMatrix4( skinController.skin.bindShapeMatrix );\n\t\t}\n\n\t\tvar skinIndices = [];\n\t\tvar skinWeights = [];\n\t\tvar weights = skinController.skin.weights;\n\n\t\t// hook up the skin weights\n\t\t// TODO - this might be a good place to choose greatest 4 weights\n\t\tfor ( var i =0; i < weights.length; i ++ ) {\n\n\t\t\tvar indicies = new THREE.Vector4(weights[i][0] ? weights[i][0].joint : 0,weights[i][1] ? weights[i][1].joint : 0,weights[i][2] ? weights[i][2].joint : 0,weights[i][3] ? weights[i][3].joint : 0);\n\t\t\tvar weight = new THREE.Vector4(weights[i][0] ? weights[i][0].weight : 0,weights[i][1] ? weights[i][1].weight : 0,weights[i][2] ? weights[i][2].weight : 0,weights[i][3] ? weights[i][3].weight : 0);\n\n\t\t\tskinIndices.push(indicies);\n\t\t\tskinWeights.push(weight);\n\n\t\t}\n\n\t\tgeometry.skinIndices = skinIndices;\n\t\tgeometry.skinWeights = skinWeights;\n\t\tgeometry.bones = sortedbones;\n\t\t// process animation, or simply pose the rig if no animation\n\n\t\t//create an animation for the animated bones\n\t\t//NOTE: this has no effect when using morphtargets\n\t\tvar animationdata = { \"name\":animationBounds.ID,\"fps\":30,\"length\":animationBounds.frames / 30,\"hierarchy\":[] };\n\n\t\tfor (var j = 0; j < sortedbones.length; j ++) {\n\n\t\t\tanimationdata.hierarchy.push({ parent:sortedbones[j].parent, name:sortedbones[j].name, keys:[] });\n\n\t\t}\n\n\t\tconsole.log( 'ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.' );\n\n\n\n\t\tskinToBindPose(geometry, skeleton, skinController);\n\n\n\t\tfor ( frame = 0; frame < animationBounds.frames; frame ++ ) {\n\n\t\t\tvar bones = [];\n\t\t\tvar skinned = [];\n\t\t\t// process the frame and setup the rig with a fresh\n\t\t\t// transform, possibly from the bone's animation channel(s)\n\n\t\t\tsetupSkeleton( skeleton, bones, frame );\n\t\t\tsetupSkinningMatrices( bones, skinController.skin );\n\n\t\t\tfor (var i = 0; i < bones.length; i ++) {\n\n\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j ++) {\n\n\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\n\n\t\t\t\t\t\tvar key = {};\n\t\t\t\t\t\tkey.time = (frame / 30);\n\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\n\n\t\t\t\t\t\tif (frame === 0)\n\t\t\t\t\t\t\tbones[i].matrix = key.matrix;\n\n\t\t\t\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\n\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\tkey.pos = [ data[0].x,data[0].y,data[0].z ];\n\n\t\t\t\t\t\tkey.scl = [ data[2].x,data[2].y,data[2].z ];\n\t\t\t\t\t\tkey.rot = data[1];\n\n\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.animation = animationdata;\n\n\t\t}\n\n\t}\n\n\tfunction createKinematics() {\n\n\t\tif ( kinematicsModel && kinematicsModel.joints.length === 0 ) {\n\t\t\tkinematics = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tvar jointMap = {};\n\n\t\tvar _addToMap = function( jointIndex, parentVisualElement ) {\n\n\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute( 'id' );\n\t\t\tvar colladaNode = visualScene.getChildById( parentVisualElementId, true );\n\t\t\tvar joint = kinematicsModel.joints[ jointIndex ];\n\n\t\t\tscene.traverse(function( node ) {\n\n\t\t\t\tif ( node.colladaId == parentVisualElementId ) {\n\n\t\t\t\t\tjointMap[ jointIndex ] = {\n\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\ttransforms: colladaNode.transforms,\n\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t};\n\n\t\tkinematics = {\n\n\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\tgetJointValue: function( jointIndex ) {\n\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\n\n\t\t\t\tif ( jointData ) {\n\n\t\t\t\t\treturn jointData.position;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'getJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetJointValue: function( jointIndex, value ) {\n\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\n\n\t\t\t\tif ( jointData ) {\n\n\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\tif ( value > joint.limits.max || value < joint.limits.min ) {\n\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')' );\n\n\t\t\t\t\t} else if ( joint.static ) {\n\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' is static' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar threejsNode = jointData.node;\n\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\tvar matrix = new THREE.Matrix4();\n\t\t\t\t\t\tvar m1 = new THREE.Matrix4();\n\n\t\t\t\t\t\tfor (i = 0; i < transforms.length; i ++ ) {\n\n\t\t\t\t\t\t\tvar transform = transforms[ i ];\n\n\t\t\t\t\t\t\t// kinda ghetto joint detection\n\n\t\t\t\t\t\t\tif ( transform.sid && transform.sid.indexOf( 'joint' + jointIndex ) !== -1 ) {\n\n\t\t\t\t\t\t\t\t// apply actual joint value here\n\t\t\t\t\t\t\t\tswitch ( joint.type ) {\n\n\t\t\t\t\t\t\t\t\tcase 'revolute':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( axis, THREE.Math.degToRad(value) ) );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value ) );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'setJointValue: unknown joint type: ' + joint.type );\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tswitch ( transform.type ) {\n\n\t\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( transform.obj );\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( transform.obj, transform.angle ) );\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// apply the matrix to the threejs node\n\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\n\t\t\t\t\t\tvar elements = Array.prototype.slice.call( elementsFloat32Arr );\n\n\t\t\t\t\t\tvar elementsRowMajor = [\n\t\t\t\t\t\t\telements[ 0 ],\n\t\t\t\t\t\t\telements[ 4 ],\n\t\t\t\t\t\t\telements[ 8 ],\n\t\t\t\t\t\t\telements[ 12 ],\n\t\t\t\t\t\t\telements[ 1 ],\n\t\t\t\t\t\t\telements[ 5 ],\n\t\t\t\t\t\t\telements[ 9 ],\n\t\t\t\t\t\t\telements[ 13 ],\n\t\t\t\t\t\t\telements[ 2 ],\n\t\t\t\t\t\t\telements[ 6 ],\n\t\t\t\t\t\t\telements[ 10 ],\n\t\t\t\t\t\t\telements[ 14 ],\n\t\t\t\t\t\t\telements[ 3 ],\n\t\t\t\t\t\t\telements[ 7 ],\n\t\t\t\t\t\t\telements[ 11 ],\n\t\t\t\t\t\t\telements[ 15 ]\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\tthreejsNode.matrix.set.apply( threejsNode.matrix, elementsRowMajor );\n\t\t\t\t\t\tthreejsNode.matrix.decompose( threejsNode.position, threejsNode.quaternion, threejsNode.scale );\n\n\t\t\t\t\t\tjointMap[ jointIndex ].position = value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\n\n\t\tif ( element ) {\n\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'bind_joint_axis':\n\n\t\t\t\t\t\tvar visualTarget = child.getAttribute( 'target' ).split( '/' ).pop();\n\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\n\t\t\t\t\t\tvar jointIndex = parseInt( axis.split( 'joint' ).pop().split( '.' )[0] );\n\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector( '[sid=\"' + visualTarget + '\"]' );\n\n\t\t\t\t\t\tif ( visualTargetElement ) {\n\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\n\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction createSceneGraph ( node, parent ) {\n\n\t\tvar obj = new THREE.Object3D();\n\t\tvar skinned = false;\n\t\tvar skinController;\n\t\tvar morphController;\n\t\tvar i, j;\n\n\t\t// FIXME: controllers\n\n\t\tfor ( i = 0; i < node.controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ node.controllers[ i ].url ];\n\n\t\t\tswitch ( controller.type ) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tif ( geometries[ controller.skin.source ] ) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.skin.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\t\t\t\t\t\tskinned = true;\n\t\t\t\t\t\tskinController = node.controllers[ i ];\n\n\t\t\t\t\t} else if ( controllers[ controller.skin.source ] ) {\n\n\t\t\t\t\t\t// urgh: controller can be chained\n\t\t\t\t\t\t// handle the most basic case...\n\n\t\t\t\t\t\tvar second = controllers[ controller.skin.source ];\n\t\t\t\t\t\tmorphController = second;\n\t\t\t\t\t//\tskinController = node.controllers[i];\n\n\t\t\t\t\t\tif ( second.morph && geometries[ second.morph.source ] ) {\n\n\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\n\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tif ( geometries[ controller.morph.source ] ) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.morph.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\t\t\t\t\t\tmorphController = node.controllers[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log( 'ColladaLoader: Morph-controller partially supported.' );\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// geometries\n\n\t\tvar double_sided_materials = {};\n\n\t\tfor ( i = 0; i < node.geometries.length; i ++ ) {\n\n\t\t\tvar instance_geometry = node.geometries[i];\n\t\t\tvar instance_materials = instance_geometry.instance_material;\n\t\t\tvar geometry = geometries[ instance_geometry.url ];\n\t\t\tvar used_materials = {};\n\t\t\tvar used_materials_array = [];\n\t\t\tvar num_materials = 0;\n\t\t\tvar first_material;\n\n\t\t\tif ( geometry ) {\n\n\t\t\t\tif ( !geometry.mesh || !geometry.mesh.primitives )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( obj.name.length === 0 ) {\n\n\t\t\t\t\tobj.name = geometry.id;\n\n\t\t\t\t}\n\n\t\t\t\t// collect used fx for this geometry-instance\n\n\t\t\t\tif ( instance_materials ) {\n\n\t\t\t\t\tfor ( j = 0; j < instance_materials.length; j ++ ) {\n\n\t\t\t\t\t\tvar instance_material = instance_materials[ j ];\n\t\t\t\t\t\tvar mat = materials[ instance_material.target ];\n\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\n\t\t\t\t\t\tvar shader = effects[ effect_id ].shader;\n\t\t\t\t\t\tvar material3js = shader.material;\n\n\t\t\t\t\t\tif ( geometry.doubleSided ) {\n\n\t\t\t\t\t\t\tif ( !( instance_material.symbol in double_sided_materials ) ) {\n\n\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\n\t\t\t\t\t\t\t\t_copied_material.side = THREE.DoubleSide;\n\t\t\t\t\t\t\t\tdouble_sided_materials[ instance_material.symbol ] = _copied_material;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial3js = double_sided_materials[ instance_material.symbol ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n\t\t\t\t\t\tused_materials[ instance_material.symbol ] = num_materials;\n\t\t\t\t\t\tused_materials_array.push( material3js );\n\t\t\t\t\t\tfirst_material = material3js;\n\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\n\t\t\t\t\t\tnum_materials ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar mesh;\n\t\t\t\tvar material = first_material || new THREE.MeshLambertMaterial( { color: 0xdddddd, side: geometry.doubleSided ? THREE.DoubleSide : THREE.FrontSide } );\n\t\t\t\tvar geom = geometry.mesh.geometry3js;\n\n\t\t\t\tif ( num_materials > 1 ) {\n\n\t\t\t\t\tmaterial = new THREE.MultiMaterial( used_materials_array );\n\n\t\t\t\t\tfor ( j = 0; j < geom.faces.length; j ++ ) {\n\n\t\t\t\t\t\tvar face = geom.faces[ j ];\n\t\t\t\t\t\tface.materialIndex = used_materials[ face.daeMaterial ]\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( skinController !== undefined ) {\n\n\n\t\t\t\t\tapplySkin( geom, skinController );\n\n\t\t\t\t\tif ( geom.morphTargets.length > 0 ) {\n\n\t\t\t\t\t\tmaterial.morphTargets = true;\n\t\t\t\t\t\tmaterial.skinning = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterial.morphTargets = false;\n\t\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tmesh = new THREE.SkinnedMesh( geom, material, false );\n\n\n\t\t\t\t\t//mesh.skeleton = skinController.skeleton;\n\t\t\t\t\t//mesh.skinController = controllers[ skinController.url ];\n\t\t\t\t\t//mesh.skinInstanceController = skinController;\n\t\t\t\t\tmesh.name = 'skin_' + skins.length;\n\n\n\n\t\t\t\t\t//mesh.animationHandle.setKey(0);\n\t\t\t\t\tskins.push( mesh );\n\n\t\t\t\t} else if ( morphController !== undefined ) {\n\n\t\t\t\t\tcreateMorph( geom, morphController );\n\n\t\t\t\t\tmaterial.morphTargets = true;\n\n\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\n\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\n\n\t\t\t\t\tmorphs.push( mesh );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( geom.isLineStrip === true ) {\n\n\t\t\t\t\t\tmesh = new THREE.Line( geom );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tobj.add(mesh);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = 0; i < node.cameras.length; i ++ ) {\n\n\t\t\tvar instance_camera = node.cameras[i];\n\t\t\tvar cparams = cameras[instance_camera.url];\n\n\t\t\tvar cam = new THREE.PerspectiveCamera(cparams.yfov, parseFloat(cparams.aspect_ratio),\n\t\t\t\t\tparseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n\t\t\tobj.add(cam);\n\t\t}\n\n\t\tfor ( i = 0; i < node.lights.length; i ++ ) {\n\n\t\t\tvar light = null;\n\t\t\tvar instance_light = node.lights[i];\n\t\t\tvar lparams = lights[instance_light.url];\n\n\t\t\tif ( lparams && lparams.technique ) {\n\n\t\t\t\tvar color = lparams.color.getHex();\n\t\t\t\tvar intensity = lparams.intensity;\n\t\t\t\tvar distance = lparams.distance;\n\t\t\t\tvar angle = lparams.falloff_angle;\n\n\t\t\t\tswitch ( lparams.technique ) {\n\n\t\t\t\t\tcase 'directional':\n\n\t\t\t\t\t\tlight = new THREE.DirectionalLight( color, intensity, distance );\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'point':\n\n\t\t\t\t\t\tlight = new THREE.PointLight( color, intensity, distance );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'spot':\n\n\t\t\t\t\t\tlight = new THREE.SpotLight( color, intensity, distance, angle );\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\tlight = new THREE.AmbientLight( color );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (light) {\n\t\t\t\tobj.add(light);\n\t\t\t}\n\t\t}\n\n\t\tobj.name = node.name || node.id || \"\";\n\t\tobj.colladaId = node.id || \"\";\n\t\tobj.layer = node.layer || \"\";\n\t\tobj.matrix = node.matrix;\n\t\tobj.matrix.decompose( obj.position, obj.quaternion, obj.scale );\n\n\t\tif ( options.centerGeometry && obj.geometry ) {\n\n\t\t\tvar delta = obj.geometry.center();\n\t\t\tdelta.multiply( obj.scale );\n\t\t\tdelta.applyQuaternion( obj.quaternion );\n\n\t\t\tobj.position.sub( delta );\n\n\t\t}\n\n\t\tfor ( i = 0; i < node.nodes.length; i ++ ) {\n\n\t\t\tobj.add( createSceneGraph( node.nodes[i], node ) );\n\n\t\t}\n\n\t\treturn obj;\n\n\t}\n\n\tfunction getJointId( skin, id ) {\n\n\t\tfor ( var i = 0; i < skin.joints.length; i ++ ) {\n\n\t\t\tif ( skin.joints[ i ] === id ) {\n\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getLibraryNode( id ) {\n\n\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\n\n\t\tfor ( var i = 0; i < nodes.length; i++ ) {\n\n\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\n\n\t\t\tif ( attObj && attObj.value === id ) {\n\n\t\t\t\treturn nodes[i];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tfunction getChannelsForNode ( node ) {\n\n\t\tvar channels = [];\n\t\tvar startTime = 1000000;\n\t\tvar endTime = -1000000;\n\n\t\tfor ( var id in animations ) {\n\n\t\t\tvar animation = animations[id];\n\n\t\t\tfor ( var i = 0; i < animation.channel.length; i ++ ) {\n\n\t\t\t\tvar channel = animation.channel[i];\n\t\t\t\tvar sampler = animation.sampler[i];\n\t\t\t\tvar id = channel.target.split('/')[0];\n\n\t\t\t\tif ( id == node.id ) {\n\n\t\t\t\t\tsampler.create();\n\t\t\t\t\tchannel.sampler = sampler;\n\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\n\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\n\t\t\t\t\tchannels.push(channel);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( channels.length ) {\n\n\t\t\tnode.startTime = startTime;\n\t\t\tnode.endTime = endTime;\n\n\t\t}\n\n\t\treturn channels;\n\n\t}\n\n\tfunction calcFrameDuration( node ) {\n\n\t\tvar minT = 10000000;\n\n\t\tfor ( var i = 0; i < node.channels.length; i ++ ) {\n\n\t\t\tvar sampler = node.channels[i].sampler;\n\n\t\t\tfor ( var j = 0; j < sampler.input.length - 1; j ++ ) {\n\n\t\t\t\tvar t0 = sampler.input[ j ];\n\t\t\t\tvar t1 = sampler.input[ j + 1 ];\n\t\t\t\tminT = Math.min( minT, t1 - t0 );\n\n\t\t\t}\n\t\t}\n\n\t\treturn minT;\n\n\t}\n\n\tfunction calcMatrixAt( node, t ) {\n\n\t\tvar animated = {};\n\n\t\tvar i, j;\n\n\t\tfor ( i = 0; i < node.channels.length; i ++ ) {\n\n\t\t\tvar channel = node.channels[ i ];\n\t\t\tanimated[ channel.sid ] = channel;\n\n\t\t}\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\tfor ( i = 0; i < node.transforms.length; i ++ ) {\n\n\t\t\tvar transform = node.transforms[ i ];\n\t\t\tvar channel = animated[ transform.sid ];\n\n\t\t\tif ( channel !== undefined ) {\n\n\t\t\t\tvar sampler = channel.sampler;\n\t\t\t\tvar value;\n\n\t\t\t\tfor ( j = 0; j < sampler.input.length - 1; j ++ ) {\n\n\t\t\t\t\tif ( sampler.input[ j + 1 ] > t ) {\n\n\t\t\t\t\t\tvalue = sampler.output[ j ];\n\t\t\t\t\t\t//console.log(value.flatten)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\tif ( value instanceof THREE.Matrix4 ) {\n\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, value );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// FIXME: handle other types\n\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn matrix;\n\n\t}\n\n\tfunction bakeAnimations ( node ) {\n\n\t\tif ( node.channels && node.channels.length ) {\n\n\t\t\tvar keys = [],\n\t\t\t\tsids = [];\n\n\t\t\tfor ( var i = 0, il = node.channels.length; i < il; i ++ ) {\n\n\t\t\t\tvar channel = node.channels[i],\n\t\t\t\t\tfullSid = channel.fullSid,\n\t\t\t\t\tsampler = channel.sampler,\n\t\t\t\t\tinput = sampler.input,\n\t\t\t\t\ttransform = node.getTransformBySid( channel.sid ),\n\t\t\t\t\tmember;\n\n\t\t\t\tif ( channel.arrIndices ) {\n\n\t\t\t\t\tmember = [];\n\n\t\t\t\t\tfor ( var j = 0, jl = channel.arrIndices.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tmember[ j ] = getConvertedIndex( channel.arrIndices[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmember = getConvertedMember( channel.member );\n\n\t\t\t\t}\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tif ( sids.indexOf( fullSid ) === -1 ) {\n\n\t\t\t\t\t\tsids.push( fullSid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var j = 0, jl = input.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar time = input[j],\n\t\t\t\t\t\t\tdata = sampler.getData( transform.type, j, member ),\n\t\t\t\t\t\t\tkey = findKey( keys, time );\n\n\t\t\t\t\t\tif ( !key ) {\n\n\t\t\t\t\t\t\tkey = new Key( time );\n\t\t\t\t\t\t\tvar timeNdx = findTimeNdx( keys, time );\n\t\t\t\t\t\t\tkeys.splice( timeNdx === -1 ? keys.length : timeNdx, 0, key );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkey.addTarget( fullSid, transform, member, data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'Could not find transform \"' + channel.sid + '\" in node ' + node.id );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// post process\n\t\t\tfor ( var i = 0; i < sids.length; i ++ ) {\n\n\t\t\t\tvar sid = sids[ i ];\n\n\t\t\t\tfor ( var j = 0; j < keys.length; j ++ ) {\n\n\t\t\t\t\tvar key = keys[ j ];\n\n\t\t\t\t\tif ( !key.hasTarget( sid ) ) {\n\n\t\t\t\t\t\tinterpolateKeys( keys, key, j, sid );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnode.keys = keys;\n\t\t\tnode.sids = sids;\n\n\t\t}\n\n\t}\n\n\tfunction findKey ( keys, time) {\n\n\t\tvar retVal = null;\n\n\t\tfor ( var i = 0, il = keys.length; i < il && retVal === null; i ++ ) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif ( key.time === time ) {\n\n\t\t\t\tretVal = key;\n\n\t\t\t} else if ( key.time > time ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn retVal;\n\n\t}\n\n\tfunction findTimeNdx ( keys, time) {\n\n\t\tvar ndx = -1;\n\n\t\tfor ( var i = 0, il = keys.length; i < il && ndx === -1; i ++ ) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif ( key.time >= time ) {\n\n\t\t\t\tndx = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn ndx;\n\n\t}\n\n\tfunction interpolateKeys ( keys, key, ndx, fullSid ) {\n\n\t\tvar prevKey = getPrevKeyWith( keys, fullSid, ndx ? ndx - 1 : 0 ),\n\t\t\tnextKey = getNextKeyWith( keys, fullSid, ndx + 1 );\n\n\t\tif ( prevKey && nextKey ) {\n\n\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n\t\t\t\tprevTarget = prevKey.getTarget( fullSid ),\n\t\t\t\tnextData = nextKey.getTarget( fullSid ).data,\n\t\t\t\tprevData = prevTarget.data,\n\t\t\t\tdata;\n\n\t\t\tif ( prevTarget.type === 'matrix' ) {\n\n\t\t\t\tdata = prevData;\n\n\t\t\t} else if ( prevData.length ) {\n\n\t\t\t\tdata = [];\n\n\t\t\t\tfor ( var i = 0; i < prevData.length; ++ i ) {\n\n\t\t\t\t\tdata[ i ] = prevData[ i ] + ( nextData[ i ] - prevData[ i ] ) * scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\n\n\t\t\t}\n\n\t\t\tkey.addTarget( fullSid, prevTarget.transform, prevTarget.member, data );\n\n\t\t}\n\n\t}\n\n\t// Get next key with given sid\n\n\tfunction getNextKeyWith( keys, fullSid, ndx ) {\n\n\t\tfor ( ; ndx < keys.length; ndx ++ ) {\n\n\t\t\tvar key = keys[ ndx ];\n\n\t\t\tif ( key.hasTarget( fullSid ) ) {\n\n\t\t\t\treturn key;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// Get previous key with given sid\n\n\tfunction getPrevKeyWith( keys, fullSid, ndx ) {\n\n\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n\t\tfor ( ; ndx >= 0; ndx -- ) {\n\n\t\t\tvar key = keys[ ndx ];\n\n\t\t\tif ( key.hasTarget( fullSid ) ) {\n\n\t\t\t\treturn key;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfunction _Image() {\n\n\t\tthis.id = \"\";\n\t\tthis.init_from = \"\";\n\n\t}\n\n\t_Image.prototype.parse = function(element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeName === 'init_from' ) {\n\n\t\t\t\tthis.init_from = child.textContent;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Controller() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.type = \"\";\n\t\tthis.skin = null;\n\t\tthis.morph = null;\n\n\t}\n\n\tController.prototype.parse = function( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = \"none\";\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tthis.skin = (new Skin()).parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tthis.morph = (new Morph()).parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Morph() {\n\n\t\tthis.method = null;\n\t\tthis.source = null;\n\t\tthis.targets = null;\n\t\tthis.weights = null;\n\n\t}\n\n\tMorph.prototype.parse = function( element ) {\n\n\t\tvar sources = {};\n\t\tvar inputs = [];\n\t\tvar i;\n\n\t\tthis.method = element.getAttribute( 'method' );\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\n\t\tfor ( i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar source = ( new Source() ).parse( child );\n\t\t\t\t\tsources[ source.id ] = source;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'targets':\n\n\t\t\t\t\tinputs = this.parseInputs( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = 0; i < inputs.length; i ++ ) {\n\n\t\t\tvar input = inputs[ i ];\n\t\t\tvar source = sources[ input.source ];\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'MORPH_TARGET':\n\n\t\t\t\t\tthis.targets = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'MORPH_WEIGHT':\n\n\t\t\t\t\tthis.weights = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tMorph.prototype.parseInputs = function(element) {\n\n\t\tvar inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push( (new Input()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn inputs;\n\n\t};\n\n\tfunction Skin() {\n\n\t\tthis.source = \"\";\n\t\tthis.bindShapeMatrix = null;\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\n\t}\n\n\tSkin.prototype.parse = function( element ) {\n\n\t\tvar sources = {};\n\t\tvar joints, weights;\n\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'bind_shape_matrix':\n\n\t\t\t\t\tvar f = _floats(child.textContent);\n\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4( f );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\tsources[ src.id ] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'joints':\n\n\t\t\t\t\tjoints = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertex_weights':\n\n\t\t\t\t\tweights = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.parseJoints( joints, sources );\n\t\tthis.parseWeights( weights, sources );\n\n\t\treturn this;\n\n\t};\n\n\tSkin.prototype.parseJoints = function ( element, sources ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tvar input = ( new Input() ).parse( child );\n\t\t\t\t\tvar source = sources[ input.source ];\n\n\t\t\t\t\tif ( input.semantic === 'JOINT' ) {\n\n\t\t\t\t\t\tthis.joints = source.read();\n\n\t\t\t\t\t} else if ( input.semantic === 'INV_BIND_MATRIX' ) {\n\n\t\t\t\t\t\tthis.invBindMatrices = source.read();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tSkin.prototype.parseWeights = function ( element, sources ) {\n\n\t\tvar v, vcount, inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push( ( new Input() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v':\n\n\t\t\t\t\tv = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tvcount = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar index = 0;\n\n\t\tfor ( var i = 0; i < vcount.length; i ++ ) {\n\n\t\t\tvar numBones = vcount[i];\n\t\t\tvar vertex_weights = [];\n\n\t\t\tfor ( var j = 0; j < numBones; j ++ ) {\n\n\t\t\t\tvar influence = {};\n\n\t\t\t\tfor ( var k = 0; k < inputs.length; k ++ ) {\n\n\t\t\t\t\tvar input = inputs[ k ];\n\t\t\t\t\tvar value = v[ index + input.offset ];\n\n\t\t\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\tinfluence.joint = value;//this.joints[value];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\tinfluence.weight = sources[ input.source ].data[ value ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvertex_weights.push( influence );\n\t\t\t\tindex += inputs.length;\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < vertex_weights.length; j ++ ) {\n\n\t\t\t\tvertex_weights[ j ].index = i;\n\n\t\t\t}\n\n\t\t\tthis.weights.push( vertex_weights );\n\n\t\t}\n\n\t};\n\n\tfunction VisualScene () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.nodes = [];\n\t\tthis.scene = new THREE.Group();\n\n\t}\n\n\tVisualScene.prototype.getChildById = function( id, recursive ) {\n\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\tvar node = this.nodes[ i ].getChildById( id, recursive );\n\n\t\t\tif ( node ) {\n\n\t\t\t\treturn node;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tVisualScene.prototype.getChildBySid = function( sid, recursive ) {\n\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\tvar node = this.nodes[ i ].getChildBySid( sid, recursive );\n\n\t\t\tif ( node ) {\n\n\t\t\t\treturn node;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tVisualScene.prototype.parse = function( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\t\tthis.nodes = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Node() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.sid = \"\";\n\t\tthis.nodes = [];\n\t\tthis.controllers = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.channels = [];\n\t\tthis.matrix = new THREE.Matrix4();\n\n\t}\n\n\tNode.prototype.getChannelForTransform = function( transformSid ) {\n\n\t\tfor ( var i = 0; i < this.channels.length; i ++ ) {\n\n\t\t\tvar channel = this.channels[i];\n\t\t\tvar parts = channel.target.split('/');\n\t\t\tvar id = parts.shift();\n\t\t\tvar sid = parts.shift();\n\t\t\tvar dotSyntax = (sid.indexOf(\".\") >= 0);\n\t\t\tvar arrSyntax = (sid.indexOf(\"(\") >= 0);\n\t\t\tvar arrIndices;\n\n\t\t\tif ( dotSyntax ) {\n\n\t\t\t\tparts = sid.split(\".\");\n\t\t\t\tsid = parts.shift();\n\n\t\t\t} else if ( arrSyntax ) {\n\n\t\t\t\tarrIndices = sid.split(\"(\");\n\t\t\t\tsid = arrIndices.shift();\n\n\t\t\t\tfor ( var j = 0; j < arrIndices.length; j ++ ) {\n\n\t\t\t\t\tarrIndices[ j ] = parseInt( arrIndices[ j ].replace( /\\)/, '' ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( sid === transformSid ) {\n\n\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n\t\t\t\treturn channel;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getChildById = function ( id, recursive ) {\n\n\t\tif ( this.id === id ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( recursive ) {\n\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\t\tvar n = this.nodes[ i ].getChildById( id, recursive );\n\n\t\t\t\tif ( n ) {\n\n\t\t\t\t\treturn n;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getChildBySid = function ( sid, recursive ) {\n\n\t\tif ( this.sid === sid ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( recursive ) {\n\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\t\tvar n = this.nodes[ i ].getChildBySid( sid, recursive );\n\n\t\t\t\tif ( n ) {\n\n\t\t\t\t\treturn n;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getTransformBySid = function ( sid ) {\n\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\n\n\t\t\tif ( this.transforms[ i ].sid === sid ) return this.transforms[ i ];\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.parse = function( element ) {\n\n\t\tvar url;\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = element.getAttribute('type');\n\t\tthis.layer = element.getAttribute('layer');\n\n\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\n\n\t\tthis.nodes = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.cameras = [];\n\t\tthis.lights = [];\n\t\tthis.controllers = [];\n\t\tthis.matrix = new THREE.Matrix4();\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_camera':\n\n\t\t\t\t\tthis.cameras.push( ( new InstanceCamera() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_controller':\n\n\t\t\t\t\tthis.controllers.push( ( new InstanceController() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_geometry':\n\n\t\t\t\t\tthis.geometries.push( ( new InstanceGeometry() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_light':\n\n\t\t\t\t\tthis.lights.push( ( new InstanceLight() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_node':\n\n\t\t\t\t\turl = child.getAttribute( 'url' ).replace( /^#/, '' );\n\t\t\t\t\tvar iNode = getLibraryNode( url );\n\n\t\t\t\t\tif ( iNode ) {\n\n\t\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( iNode )) ;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'scale':\n\t\t\t\tcase 'matrix':\n\t\t\t\tcase 'lookat':\n\t\t\t\tcase 'skew':\n\n\t\t\t\t\tthis.transforms.push( ( new Transform() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.channels = getChannelsForNode( this );\n\t\tbakeAnimations( this );\n\n\t\tthis.updateMatrix();\n\n\t\treturn this;\n\n\t};\n\n\tNode.prototype.updateMatrix = function () {\n\n\t\tthis.matrix.identity();\n\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\n\n\t\t\tthis.transforms[ i ].apply( this.matrix );\n\n\t\t}\n\n\t};\n\n\tfunction Transform () {\n\n\t\tthis.sid = \"\";\n\t\tthis.type = \"\";\n\t\tthis.data = [];\n\t\tthis.obj = null;\n\n\t}\n\n\tTransform.prototype.parse = function ( element ) {\n\n\t\tthis.sid = element.getAttribute( 'sid' );\n\t\tthis.type = element.nodeName;\n\t\tthis.data = _floats( element.textContent );\n\t\tthis.convert();\n\n\t\treturn this;\n\n\t};\n\n\tTransform.prototype.convert = function () {\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tthis.obj = getConvertedMat4( this.data );\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tthis.angle = THREE.Math.degToRad( this.data[3] );\n\n\t\t\tcase 'translate':\n\n\t\t\t\tfixCoords( this.data, -1 );\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\n\t\t\t\tbreak;\n\n\t\t\tcase 'scale':\n\n\t\t\t\tfixCoords( this.data, 1 );\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.log( 'Can not convert Transform of type ' + this.type );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tTransform.prototype.apply = function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( matrix ) {\n\n\t\t\tswitch ( this.type ) {\n\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tmatrix.multiply( this.obj );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'translate':\n\n\t\t\t\t\tmatrix.multiply( m1.makeTranslation( this.obj.x, this.obj.y, this.obj.z ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\n\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( this.obj, this.angle ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'scale':\n\n\t\t\t\t\tmatrix.scale( this.obj );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tTransform.prototype.update = function ( data, member ) {\n\n\t\tvar members = [ 'X', 'Y', 'Z', 'ANGLE' ];\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tif ( ! member ) {\n\n\t\t\t\t\tthis.obj.copy( data );\n\n\t\t\t\t} else if ( member.length === 1 ) {\n\n\t\t\t\t\tswitch ( member[ 0 ] ) {\n\n\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\tthis.obj.n11 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n21 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n31 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n41 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\tthis.obj.n12 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n22 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n32 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n42 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tthis.obj.n13 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n23 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n33 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n43 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\tthis.obj.n14 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n24 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n34 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n44 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( member.length === 2 ) {\n\n\t\t\t\t\tvar propName = 'n' + ( member[ 0 ] + 1 ) + ( member[ 1 ] + 1 );\n\t\t\t\t\tthis.obj[ propName ] = data;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\n\n\t\t\t\t\tmember = members[ member[ 0 ] ];\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( member ) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\n\n\t\t\t\t\tmember = members[ member[ 0 ] ];\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( member ) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ANGLE':\n\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data[ 3 ] );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction InstanceController() {\n\n\t\tthis.url = \"\";\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\n\t}\n\n\tInstanceController.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'skeleton':\n\n\t\t\t\t\tthis.skeleton.push( child.textContent.replace(/^#/, '') );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bind_material':\n\n\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\n\n\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceMaterial () {\n\n\t\tthis.symbol = \"\";\n\t\tthis.target = \"\";\n\n\t}\n\n\tInstanceMaterial.prototype.parse = function ( element ) {\n\n\t\tthis.symbol = element.getAttribute('symbol');\n\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceGeometry() {\n\n\t\tthis.url = \"\";\n\t\tthis.instance_material = [];\n\n\t}\n\n\tInstanceGeometry.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.instance_material = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tif ( child.nodeName === 'bind_material' ) {\n\n\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\n\n\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Geometry() {\n\n\t\tthis.id = \"\";\n\t\tthis.mesh = null;\n\n\t}\n\n\tGeometry.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\textractDoubleSided( this, element );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'mesh':\n\n\t\t\t\t\tthis.mesh = (new Mesh(this)).parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\n\t\t\t\t\t// console.log( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Mesh( geometry ) {\n\n\t\tthis.geometry = geometry.id;\n\t\tthis.primitives = [];\n\t\tthis.vertices = null;\n\t\tthis.geometry3js = null;\n\n\t}\n\n\tMesh.prototype.parse = function ( element ) {\n\n\t\tthis.primitives = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\t_source( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertices':\n\n\t\t\t\t\tthis.vertices = ( new Vertices() ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'linestrips':\n\n\t\t\t\t\tthis.primitives.push( ( new LineStrips().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'triangles':\n\n\t\t\t\t\tthis.primitives.push( ( new Triangles().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygons':\n\n\t\t\t\t\tthis.primitives.push( ( new Polygons().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polylist':\n\n\t\t\t\t\tthis.primitives.push( ( new Polylist().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry3js = new THREE.Geometry();\n\n\t\tif ( this.vertices === null ) {\n\n\t\t\t// TODO (mrdoob): Study case when this is null (carrier.dae)\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar vertexData = sources[ this.vertices.input['POSITION'].source ].data;\n\n\t\tfor ( var i = 0; i < vertexData.length; i += 3 ) {\n\n\t\t\tthis.geometry3js.vertices.push( getConvertedVec3( vertexData, i ).clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.primitives.length; i ++ ) {\n\n\t\t\tvar primitive = this.primitives[ i ];\n\t\t\tprimitive.setVertices( this.vertices );\n\t\t\tthis.handlePrimitive( primitive, this.geometry3js );\n\n\t\t}\n\n\t\tif ( this.geometry3js.calcNormals ) {\n\n\t\t\tthis.geometry3js.computeVertexNormals();\n\t\t\tdelete this.geometry3js.calcNormals;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tMesh.prototype.handlePrimitive = function ( primitive, geom ) {\n\n\t\tif ( primitive instanceof LineStrips ) {\n\n\t\t\t// TODO: Handle indices. Maybe easier with BufferGeometry?\n\n\t\t\tgeom.isLineStrip = true;\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar j, k, pList = primitive.p, inputs = primitive.inputs;\n\t\tvar input, index, idx32;\n\t\tvar source, numParams;\n\t\tvar vcount, vcIndex = 0, maxOffset = 0;\n\t\tvar texture_sets = [];\n\n\t\tfor ( j = 0; j < inputs.length; j ++ ) {\n\n\t\t\tinput = inputs[ j ];\n\n\t\t\tvar offset = input.offset + 1;\n\t\t\tmaxOffset = (maxOffset < offset) ? offset : maxOffset;\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\ttexture_sets.push( input.set );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var pCount = 0; pCount < pList.length; ++ pCount ) {\n\n\t\t\tvar p = pList[ pCount ], i = 0;\n\n\t\t\twhile ( i < p.length ) {\n\n\t\t\t\tvar vs = [];\n\t\t\t\tvar ns = [];\n\t\t\t\tvar ts = null;\n\t\t\t\tvar cs = [];\n\n\t\t\t\tif ( primitive.vcount ) {\n\n\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[ vcIndex ++ ] : primitive.vcount;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvcount = p.length / maxOffset;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor ( j = 0; j < vcount; j ++ ) {\n\n\t\t\t\t\tfor ( k = 0; k < inputs.length; k ++ ) {\n\n\t\t\t\t\t\tinput = inputs[ k ];\n\t\t\t\t\t\tsource = sources[ input.source ];\n\n\t\t\t\t\t\tindex = p[ i + ( j * maxOffset ) + input.offset ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\t\t\t\t\t\tidx32 = index * numParams;\n\n\t\t\t\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\t\t\t\tcase 'VERTEX':\n\n\t\t\t\t\t\t\t\tvs.push( index );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, idx32 ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\t\tts = ts || { };\n\t\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [];\n\t\t\t\t\t\t\t\t// invert the V\n\t\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], source.data[ idx32 + 1 ] ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ns.length === 0 ) {\n\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.NORMAL;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\n\n\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, vs[ ndx ] * numParams ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgeom.calcNormals = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( !ts ) {\n\n\t\t\t\t\tts = { };\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\ttexture_sets.push( input.set );\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\n\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\n\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [ ];\n\t\t\t\t\t\t\t// invert the V\n\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], 1.0 - source.data[ idx32 + 1 ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( cs.length === 0 ) {\n\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.COLOR;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\n\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\n\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar face = null, faces = [], uv, uvArr;\n\n\t\t\t\tif ( vcount === 3 ) {\n\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[2], ns, cs.length ? cs : new THREE.Color() ) );\n\n\t\t\t\t} else if ( vcount === 4 ) {\n\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[3], ns.length ? [ ns[0].clone(), ns[1].clone(), ns[3].clone() ] : [], cs.length ? [ cs[0], cs[1], cs[3] ] : new THREE.Color() ) );\n\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[1], vs[2], vs[3], ns.length ? [ ns[1].clone(), ns[2].clone(), ns[3].clone() ] : [], cs.length ? [ cs[1], cs[2], cs[3] ] : new THREE.Color() ) );\n\n\t\t\t\t} else if ( vcount > 4 && options.subdivideFaces ) {\n\n\t\t\t\t\tvar clr = cs.length ? cs : new THREE.Color(),\n\t\t\t\t\t\tvec1, vec2, vec3, v1, v2, norm;\n\n\t\t\t\t\t// subdivide into multiple Face3s\n\n\t\t\t\t\tfor ( k = 1; k < vcount - 1; ) {\n\n\t\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[k], vs[k + 1], ns.length ? [ ns[0].clone(), ns[k ++].clone(), ns[k].clone() ] : [], clr ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( faces.length ) {\n\n\t\t\t\t\tfor ( var ndx = 0, len = faces.length; ndx < len; ndx ++ ) {\n\n\t\t\t\t\t\tface = faces[ndx];\n\t\t\t\t\t\tface.daeMaterial = primitive.material;\n\t\t\t\t\t\tgeom.faces.push( face );\n\n\t\t\t\t\t\tfor ( k = 0; k < texture_sets.length; k ++ ) {\n\n\t\t\t\t\t\t\tuv = ts[ texture_sets[k] ];\n\n\t\t\t\t\t\t\tif ( vcount > 4 ) {\n\n\t\t\t\t\t\t\t\t// Grab the right UVs for the vertices in this face\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[ndx + 1], uv[ndx + 2] ];\n\n\t\t\t\t\t\t\t} else if ( vcount === 4 ) {\n\n\t\t\t\t\t\t\t\tif ( ndx === 0 ) {\n\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[3] ];\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[1].clone(), uv[2], uv[3].clone() ];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[2] ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( geom.faceVertexUvs[k] === undefined ) {\n\n\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push( uvArr );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id );\n\n\t\t\t\t}\n\n\t\t\t\ti += maxOffset * vcount;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction Polygons () {\n\n\t\tthis.material = \"\";\n\t\tthis.count = 0;\n\t\tthis.inputs = [];\n\t\tthis.vcount = null;\n\t\tthis.p = [];\n\t\tthis.geometry = new THREE.Geometry();\n\n\t}\n\n\tPolygons.prototype.setVertices = function ( vertices ) {\n\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\n\n\t\t\tif ( this.inputs[ i ].source === vertices.id ) {\n\n\t\t\t\tthis.inputs[ i ].source = vertices.input[ 'POSITION' ].source;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tPolygons.prototype.parse = function ( element ) {\n\n\t\tthis.material = element.getAttribute( 'material' );\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push( ( new Input() ).parse( element.childNodes[ i ] ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tthis.vcount = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'p':\n\n\t\t\t\t\tthis.p.push( _ints( child.textContent ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ph':\n\n\t\t\t\t\tconsole.warn( 'polygon holes not yet supported!' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Polylist () {\n\n\t\tPolygons.call( this );\n\n\t\tthis.vcount = [];\n\n\t}\n\n\tPolylist.prototype = Object.create( Polygons.prototype );\n\tPolylist.prototype.constructor = Polylist;\n\n\tfunction LineStrips() {\n\n\t\tPolygons.call( this );\n\n\t\tthis.vcount = 1;\n\n\t}\n\n\tLineStrips.prototype = Object.create( Polygons.prototype );\n\tLineStrips.prototype.constructor = LineStrips;\n\n\tfunction Triangles () {\n\n\t\tPolygons.call( this );\n\n\t\tthis.vcount = 3;\n\n\t}\n\n\tTriangles.prototype = Object.create( Polygons.prototype );\n\tTriangles.prototype.constructor = Triangles;\n\n\tfunction Accessor() {\n\n\t\tthis.source = \"\";\n\t\tthis.count = 0;\n\t\tthis.stride = 0;\n\t\tthis.params = [];\n\n\t}\n\n\tAccessor.prototype.parse = function ( element ) {\n\n\t\tthis.params = [];\n\t\tthis.source = element.getAttribute( 'source' );\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\n\t\tthis.stride = _attr_as_int( element, 'stride', 0 );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeName === 'param' ) {\n\n\t\t\t\tvar param = {};\n\t\t\t\tparam[ 'name' ] = child.getAttribute( 'name' );\n\t\t\t\tparam[ 'type' ] = child.getAttribute( 'type' );\n\t\t\t\tthis.params.push( param );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Vertices() {\n\n\t\tthis.input = {};\n\n\t}\n\n\tVertices.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[i].nodeName === 'input' ) {\n\n\t\t\t\tvar input = ( new Input() ).parse( element.childNodes[ i ] );\n\t\t\t\tthis.input[ input.semantic ] = input;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Input () {\n\n\t\tthis.semantic = \"\";\n\t\tthis.offset = 0;\n\t\tthis.source = \"\";\n\t\tthis.set = 0;\n\n\t}\n\n\tInput.prototype.parse = function ( element ) {\n\n\t\tthis.semantic = element.getAttribute('semantic');\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\tthis.set = _attr_as_int(element, 'set', -1);\n\t\tthis.offset = _attr_as_int(element, 'offset', 0);\n\n\t\tif ( this.semantic === 'TEXCOORD' && this.set < 0 ) {\n\n\t\t\tthis.set = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Source ( id ) {\n\n\t\tthis.id = id;\n\t\tthis.type = null;\n\n\t}\n\n\tSource.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'bool_array':\n\n\t\t\t\t\tthis.data = _bools( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'float_array':\n\n\t\t\t\t\tthis.data = _floats( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'int_array':\n\n\t\t\t\t\tthis.data = _ints( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IDREF_array':\n\t\t\t\tcase 'Name_array':\n\n\t\t\t\t\tthis.data = _strings( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tfor ( var j = 0; j < child.childNodes.length; j ++ ) {\n\n\t\t\t\t\t\tif ( child.childNodes[ j ].nodeName === 'accessor' ) {\n\n\t\t\t\t\t\t\tthis.accessor = ( new Accessor() ).parse( child.childNodes[ j ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tSource.prototype.read = function () {\n\n\t\tvar result = [];\n\n\t\t//for (var i = 0; i < this.accessor.params.length; i++) {\n\n\t\tvar param = this.accessor.params[ 0 ];\n\n\t\t\t//console.log(param.name + \" \" + param.type);\n\n\t\tswitch ( param.type ) {\n\n\t\t\tcase 'IDREF':\n\t\t\tcase 'Name': case 'name':\n\t\t\tcase 'float':\n\n\t\t\t\treturn this.data;\n\n\t\t\tcase 'float4x4':\n\n\t\t\t\tfor ( var j = 0; j < this.data.length; j += 16 ) {\n\n\t\t\t\t\tvar s = this.data.slice( j, j + 16 );\n\t\t\t\t\tvar m = getConvertedMat4( s );\n\t\t\t\t\tresult.push( m );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.log( 'ColladaLoader: Source: Read dont know how to read ' + param.type + '.' );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t//}\n\n\t\treturn result;\n\n\t};\n\n\tfunction Material () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.instance_effect = null;\n\n\t}\n\n\tMaterial.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[ i ].nodeName === 'instance_effect' ) {\n\n\t\t\t\tthis.instance_effect = ( new InstanceEffect() ).parse( element.childNodes[ i ] );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction ColorOrTexture () {\n\n\t\tthis.color = new THREE.Color();\n\t\tthis.color.setRGB( Math.random(), Math.random(), Math.random() );\n\t\tthis.color.a = 1.0;\n\n\t\tthis.texture = null;\n\t\tthis.texcoord = null;\n\t\tthis.texOpts = null;\n\n\t}\n\n\tColorOrTexture.prototype.isColor = function () {\n\n\t\treturn ( this.texture === null );\n\n\t};\n\n\tColorOrTexture.prototype.isTexture = function () {\n\n\t\treturn ( this.texture != null );\n\n\t};\n\n\tColorOrTexture.prototype.parse = function ( element ) {\n\n\t\tif (element.nodeName === 'transparent') {\n\n\t\t\tthis.opaque = element.getAttribute('opaque');\n\n\t\t}\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'color':\n\n\t\t\t\t\tvar rgba = _floats( child.textContent );\n\t\t\t\t\tthis.color = new THREE.Color();\n\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\n\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\n\t\t\t\t\tthis.texture = child.getAttribute('texture');\n\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\n\t\t\t\t\t// Defaults from:\n\t\t\t\t\t// https://collada.org/mediawiki/index.php/Maya_texture_placement_MAYA_extension\n\t\t\t\t\tthis.texOpts = {\n\t\t\t\t\t\toffsetU: 0,\n\t\t\t\t\t\toffsetV: 0,\n\t\t\t\t\t\trepeatU: 1,\n\t\t\t\t\t\trepeatV: 1,\n\t\t\t\t\t\twrapU: 1,\n\t\t\t\t\t\twrapV: 1\n\t\t\t\t\t};\n\t\t\t\t\tthis.parseTexture( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tColorOrTexture.prototype.parseTexture = function ( element ) {\n\n\t\tif ( ! element.childNodes ) return this;\n\n\t\t// This should be supported by Maya, 3dsMax, and MotionBuilder\n\n\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'extra' ) {\n\n\t\t\telement = element.childNodes[1];\n\n\t\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'technique' ) {\n\n\t\t\t\telement = element.childNodes[1];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'offsetU':\n\t\t\t\tcase 'offsetV':\n\t\t\t\tcase 'repeatU':\n\t\t\t\tcase 'repeatV':\n\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseFloat( child.textContent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrapU':\n\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\t// some dae have a value of true which becomes NaN via parseInt\n\n\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\n\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = 1;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseInt( child.textContent );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = child.textContent;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Shader ( type, effect ) {\n\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.material = null;\n\n\t}\n\n\tShader.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\t\t\t\tcase 'transparent':\n\n\t\t\t\t\tthis[ child.nodeName ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// If 'bumptype' is 'heightfield', create a 'bump' property\n\t\t\t\t\t// Else if 'bumptype' is 'normalmap', create a 'normal' property\n\t\t\t\t\t// (Default to 'bump')\n\t\t\t\t\tvar bumpType = child.getAttribute( 'bumptype' );\n\t\t\t\t\tif ( bumpType ) {\n\t\t\t\t\t\tif ( bumpType.toLowerCase() === \"heightfield\" ) {\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\t\t} else if ( bumpType.toLowerCase() === \"normalmap\" ) {\n\t\t\t\t\t\t\tthis[ 'normal' ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error( \"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\" );\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn( \"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\" );\n\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\t\t\t\tcase 'reflectivity':\n\t\t\t\tcase 'index_of_refraction':\n\t\t\t\tcase 'transparency':\n\n\t\t\t\t\tvar f = child.querySelectorAll('float');\n\n\t\t\t\t\tif ( f.length > 0 )\n\t\t\t\t\t\tthis[ child.nodeName ] = parseFloat( f[ 0 ].textContent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.create();\n\t\treturn this;\n\n\t};\n\n\tShader.prototype.create = function() {\n\n\t\tvar props = {};\n\n\t\tvar transparent = false;\n\n\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n\t\t\t// convert transparent color RBG to average value\n\t\t\tvar transparentColor = this['transparent'];\n\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\n\n\t\t\tif (transparencyLevel > 0) {\n\t\t\t\ttransparent = true;\n\t\t\t\tprops[ 'transparent' ] = true;\n\t\t\t\tprops[ 'opacity' ] = 1 - transparencyLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar keys = {\n\t\t\t'diffuse':'map',\n\t\t\t'ambient':'lightMap',\n\t\t\t'specular':'specularMap',\n\t\t\t'emission':'emissionMap',\n\t\t\t'bump':'bumpMap',\n\t\t\t'normal':'normalMap'\n\t\t\t};\n\n\t\tfor ( var prop in this ) {\n\n\t\t\tswitch ( prop ) {\n\n\t\t\t\tcase 'ambient':\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\t\t\t\tcase 'bump':\n\t\t\t\tcase 'normal':\n\n\t\t\t\t\tvar cot = this[ prop ];\n\n\t\t\t\t\tif ( cot instanceof ColorOrTexture ) {\n\n\t\t\t\t\t\tif ( cot.isTexture() ) {\n\n\t\t\t\t\t\t\tvar samplerId = cot.texture;\n\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\n\n\t\t\t\t\t\t\tif ( sampler !== undefined && sampler.source !== undefined ) {\n\n\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\n\n\t\t\t\t\t\t\t\tif ( surface !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar image = images[ surface.init_from ];\n\n\t\t\t\t\t\t\t\t\tif ( image ) {\n\n\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\n\n\t\t\t\t\t\t\t\t\t\tvar texture;\n\t\t\t\t\t\t\t\t\t\tvar loader = THREE.Loader.Handlers.get( url );\n\n\t\t\t\t\t\t\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load( url );\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\t\t\t\t\t\t\t\tloadTextureImage( texture, url );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_s === \"MIRROR\" ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.MirroredRepeatWrapping;\n\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.RepeatWrapping;\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.ClampToEdgeWrapping;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_t === \"MIRROR\" ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.MirroredRepeatWrapping;\n\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.ClampToEdgeWrapping;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\n\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\n\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\n\n\t\t\t\t\t\t\t\t\t\t// Texture with baked lighting?\n\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( prop === 'diffuse' || !transparent ) {\n\n\t\t\t\t\t\t\tif ( prop === 'emission' ) {\n\n\t\t\t\t\t\t\t\tprops[ 'emissive' ] = cot.color.getHex();\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tprops[ prop ] = cot.color.getHex();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\n\t\t\t\t\tprops[ prop ] = this[ prop ];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'reflectivity':\n\n\t\t\t\t\tprops[ prop ] = this[ prop ];\n\t\t\t\t\tif ( props[ prop ] > 0.0 ) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tprops['combine'] = THREE.MixOperation;\t//mix regular shading with reflective component\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'index_of_refraction':\n\n\t\t\t\t\tprops[ 'refractionRatio' ] = this[ prop ]; //TODO: \"index_of_refraction\" becomes \"refractionRatio\" in shader, but I'm not sure if the two are actually comparable\n\t\t\t\t\tif ( this[ prop ] !== 1.0 ) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'transparency':\n\t\t\t\t\t// gets figured out up top\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tprops[ 'shading' ] = preferredShading;\n\t\tprops[ 'side' ] = this.effect.doubleSided ? THREE.DoubleSide : THREE.FrontSide;\n\n\t\tif ( props.diffuse !== undefined ) {\n\n\t\t\tprops.color = props.diffuse;\n\t\t\tdelete props.diffuse;\n\n\t\t}\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'constant':\n\n\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\n\t\t\t\tthis.material = new THREE.MeshBasicMaterial( props );\n\t\t\t\tbreak;\n\n\t\t\tcase 'phong':\n\t\t\tcase 'blinn':\n\n\t\t\t\tthis.material = new THREE.MeshPhongMaterial( props );\n\t\t\t\tbreak;\n\n\t\t\tcase 'lambert':\n\t\t\tdefault:\n\n\t\t\t\tthis.material = new THREE.MeshLambertMaterial( props );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn this.material;\n\n\t};\n\n\tfunction Surface ( effect ) {\n\n\t\tthis.effect = effect;\n\t\tthis.init_from = null;\n\t\tthis.format = null;\n\n\t}\n\n\tSurface.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'init_from':\n\n\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'format':\n\n\t\t\t\t\tthis.format = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( \"unhandled Surface prop: \" + child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Sampler2D ( effect ) {\n\n\t\tthis.effect = effect;\n\t\tthis.source = null;\n\t\tthis.wrap_s = null;\n\t\tthis.wrap_t = null;\n\t\tthis.minfilter = null;\n\t\tthis.magfilter = null;\n\t\tthis.mipfilter = null;\n\n\t}\n\n\tSampler2D.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tthis.source = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'minfilter':\n\n\t\t\t\t\tthis.minfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'magfilter':\n\n\t\t\t\t\tthis.magfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mipfilter':\n\n\t\t\t\t\tthis.mipfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_s':\n\n\t\t\t\t\tthis.wrap_s = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_t':\n\n\t\t\t\t\tthis.wrap_t = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( \"unhandled Sampler2D prop: \" + child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Effect () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.shader = null;\n\t\tthis.surface = {};\n\t\tthis.sampler = {};\n\n\t}\n\n\tEffect.prototype.create = function () {\n\n\t\tif ( this.shader === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\textractDoubleSided( this, element );\n\n\t\tthis.shader = null;\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseTechnique( this.parseProfileCOMMON( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tEffect.prototype.parseNewparam = function ( element ) {\n\n\t\tvar sid = element.getAttribute( 'sid' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'surface':\n\n\t\t\t\t\tthis.surface[sid] = ( new Surface( this ) ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler2D':\n\n\t\t\t\t\tthis.sampler[sid] = ( new Sampler2D( this ) ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parseProfileCOMMON = function ( element ) {\n\n\t\tvar technique;\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseProfileCOMMON( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\ttechnique = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'newparam':\n\n\t\t\t\t\tthis.parseNewparam( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'image':\n\n\t\t\t\t\tvar _image = ( new _Image() ).parse( child );\n\t\t\t\t\timages[ _image.id ] = _image;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn technique;\n\n\t};\n\n\tEffect.prototype.parseTechnique = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'constant':\n\t\t\t\tcase 'lambert':\n\t\t\t\tcase 'blinn':\n\t\t\t\tcase 'phong':\n\n\t\t\t\t\tthis.shader = ( new Shader( child.nodeName, this ) ).parse( child );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'extra':\n\t\t\t\t\tthis.parseExtra(child);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parseExtra = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'technique':\n\t\t\t\t\tthis.parseExtraTechnique( child );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parseExtraTechnique = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'bump':\n\t\t\t\t\tthis.shader.parse( element );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction InstanceEffect () {\n\n\t\tthis.url = \"\";\n\n\t}\n\n\tInstanceEffect.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute( 'url' ).replace( /^#/, '' );\n\t\treturn this;\n\n\t};\n\n\tfunction Animation() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.source = {};\n\t\tthis.sampler = [];\n\t\tthis.channel = [];\n\n\t}\n\n\tAnimation.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\t\tthis.source = {};\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'animation':\n\n\t\t\t\t\tvar anim = ( new Animation() ).parse( child );\n\n\t\t\t\t\tfor ( var src in anim.source ) {\n\n\t\t\t\t\t\tthis.source[ src ] = anim.source[ src ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var j = 0; j < anim.channel.length; j ++ ) {\n\n\t\t\t\t\t\tthis.channel.push( anim.channel[ j ] );\n\t\t\t\t\t\tthis.sampler.push( anim.sampler[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = ( new Source() ).parse( child );\n\t\t\t\t\tthis.source[ src.id ] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler':\n\n\t\t\t\t\tthis.sampler.push( ( new Sampler( this ) ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'channel':\n\n\t\t\t\t\tthis.channel.push( ( new Channel( this ) ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Channel( animation ) {\n\n\t\tthis.animation = animation;\n\t\tthis.source = \"\";\n\t\tthis.target = \"\";\n\t\tthis.fullSid = null;\n\t\tthis.sid = null;\n\t\tthis.dotSyntax = null;\n\t\tthis.arrSyntax = null;\n\t\tthis.arrIndices = null;\n\t\tthis.member = null;\n\n\t}\n\n\tChannel.prototype.parse = function ( element ) {\n\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\t\tthis.target = element.getAttribute( 'target' );\n\n\t\tvar parts = this.target.split( '/' );\n\n\t\tvar id = parts.shift();\n\t\tvar sid = parts.shift();\n\n\t\tvar dotSyntax = ( sid.indexOf(\".\") >= 0 );\n\t\tvar arrSyntax = ( sid.indexOf(\"(\") >= 0 );\n\n\t\tif ( dotSyntax ) {\n\n\t\t\tparts = sid.split(\".\");\n\t\t\tthis.sid = parts.shift();\n\t\t\tthis.member = parts.shift();\n\n\t\t} else if ( arrSyntax ) {\n\n\t\t\tvar arrIndices = sid.split(\"(\");\n\t\t\tthis.sid = arrIndices.shift();\n\n\t\t\tfor (var j = 0; j < arrIndices.length; j ++ ) {\n\n\t\t\t\tarrIndices[j] = parseInt( arrIndices[j].replace(/\\)/, '') );\n\n\t\t\t}\n\n\t\t\tthis.arrIndices = arrIndices;\n\n\t\t} else {\n\n\t\t\tthis.sid = sid;\n\n\t\t}\n\n\t\tthis.fullSid = sid;\n\t\tthis.dotSyntax = dotSyntax;\n\t\tthis.arrSyntax = arrSyntax;\n\n\t\treturn this;\n\n\t};\n\n\tfunction Sampler ( animation ) {\n\n\t\tthis.id = \"\";\n\t\tthis.animation = animation;\n\t\tthis.inputs = [];\n\t\tthis.input = null;\n\t\tthis.output = null;\n\t\tthis.strideOut = null;\n\t\tthis.interpolation = null;\n\t\tthis.startTime = null;\n\t\tthis.endTime = null;\n\t\tthis.duration = 0;\n\n\t}\n\n\tSampler.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push( (new Input()).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tSampler.prototype.create = function () {\n\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\n\n\t\t\tvar input = this.inputs[ i ];\n\t\t\tvar source = this.animation.source[ input.source ];\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'INPUT':\n\n\t\t\t\t\tthis.input = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUTPUT':\n\n\t\t\t\t\tthis.output = source.read();\n\t\t\t\t\tthis.strideOut = source.accessor.stride;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'INTERPOLATION':\n\n\t\t\t\t\tthis.interpolation = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IN_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUT_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(input.semantic);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.startTime = 0;\n\t\tthis.endTime = 0;\n\t\tthis.duration = 0;\n\n\t\tif ( this.input.length ) {\n\n\t\t\tthis.startTime = 100000000;\n\t\t\tthis.endTime = -100000000;\n\n\t\t\tfor ( var i = 0; i < this.input.length; i ++ ) {\n\n\t\t\t\tthis.startTime = Math.min( this.startTime, this.input[ i ] );\n\t\t\t\tthis.endTime = Math.max( this.endTime, this.input[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.duration = this.endTime - this.startTime;\n\n\t\t}\n\n\t};\n\n\tSampler.prototype.getData = function ( type, ndx, member ) {\n\n\t\tvar data;\n\n\t\tif ( type === 'matrix' && this.strideOut === 16 ) {\n\n\t\t\tdata = this.output[ ndx ];\n\n\t\t} else if ( this.strideOut > 1 ) {\n\n\t\t\tdata = [];\n\t\t\tndx *= this.strideOut;\n\n\t\t\tfor ( var i = 0; i < this.strideOut; ++ i ) {\n\n\t\t\t\tdata[ i ] = this.output[ ndx + i ];\n\n\t\t\t}\n\n\t\t\tif ( this.strideOut === 3 ) {\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\tfixCoords( data, -1 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\tfixCoords( data, 1 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.strideOut === 4 && type === 'matrix' ) {\n\n\t\t\t\tfixCoords( data, -1 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdata = this.output[ ndx ];\n\n\t\t\tif ( member && type === 'translate' ) {\n\t\t\t\tdata = getConvertedTranslation( member, data );\n\t\t\t}\n\n\t\t}\n\n\t\treturn data;\n\n\t};\n\n\tfunction Key ( time ) {\n\n\t\tthis.targets = [];\n\t\tthis.time = time;\n\n\t}\n\n\tKey.prototype.addTarget = function ( fullSid, transform, member, data ) {\n\n\t\tthis.targets.push( {\n\t\t\tsid: fullSid,\n\t\t\tmember: member,\n\t\t\ttransform: transform,\n\t\t\tdata: data\n\t\t} );\n\n\t};\n\n\tKey.prototype.apply = function ( opt_sid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\n\n\t\t\tvar target = this.targets[ i ];\n\n\t\t\tif ( !opt_sid || target.sid === opt_sid ) {\n\n\t\t\t\ttarget.transform.update( target.data, target.member );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tKey.prototype.getTarget = function ( fullSid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\n\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\n\n\t\t\t\treturn this.targets[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tKey.prototype.hasTarget = function ( fullSid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\n\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\t// TODO: Currently only doing linear interpolation. Should support full COLLADA spec.\n\tKey.prototype.interpolate = function ( nextKey, time ) {\n\n\t\tfor ( var i = 0, l = this.targets.length; i < l; i ++ ) {\n\n\t\t\tvar target = this.targets[ i ],\n\t\t\t\tnextTarget = nextKey.getTarget( target.sid ),\n\t\t\t\tdata;\n\n\t\t\tif ( target.transform.type !== 'matrix' && nextTarget ) {\n\n\t\t\t\tvar scale = ( time - this.time ) / ( nextKey.time - this.time ),\n\t\t\t\t\tnextData = nextTarget.data,\n\t\t\t\t\tprevData = target.data;\n\n\t\t\t\tif ( scale < 0 ) scale = 0;\n\t\t\t\tif ( scale > 1 ) scale = 1;\n\n\t\t\t\tif ( prevData.length ) {\n\n\t\t\t\t\tdata = [];\n\n\t\t\t\t\tfor ( var j = 0; j < prevData.length; ++ j ) {\n\n\t\t\t\t\t\tdata[ j ] = prevData[ j ] + ( nextData[ j ] - prevData[ j ] ) * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdata = target.data;\n\n\t\t\t}\n\n\t\t\ttarget.transform.update( data, target.member );\n\n\t\t}\n\n\t};\n\n\t// Camera\n\tfunction Camera() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\n\t}\n\n\tCamera.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'optics':\n\n\t\t\t\t\tthis.parseOptics( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tCamera.prototype.parseOptics = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[ i ].nodeName === 'technique_common' ) {\n\n\t\t\t\tvar technique = element.childNodes[ i ];\n\n\t\t\t\tfor ( var j = 0; j < technique.childNodes.length; j ++ ) {\n\n\t\t\t\t\tthis.technique = technique.childNodes[ j ].nodeName;\n\n\t\t\t\t\tif ( this.technique === 'perspective' ) {\n\n\t\t\t\t\t\tvar perspective = technique.childNodes[ j ];\n\n\t\t\t\t\t\tfor ( var k = 0; k < perspective.childNodes.length; k ++ ) {\n\n\t\t\t\t\t\t\tvar param = perspective.childNodes[ k ];\n\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\n\n\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( this.technique === 'orthographic' ) {\n\n\t\t\t\t\t\tvar orthographic = technique.childNodes[ j ];\n\n\t\t\t\t\t\tfor ( var k = 0; k < orthographic.childNodes.length; k ++ ) {\n\n\t\t\t\t\t\t\tvar param = orthographic.childNodes[ k ];\n\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\n\n\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceCamera() {\n\n\t\tthis.url = \"\";\n\n\t}\n\n\tInstanceCamera.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\n\t};\n\n\t// Light\n\n\tfunction Light() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\n\t}\n\n\tLight.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tthis.parseCommon( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\tthis.parseTechnique( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tLight.prototype.parseCommon = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\tcase 'point':\n\t\t\t\tcase 'spot':\n\t\t\t\tcase 'ambient':\n\n\t\t\t\t\tthis.technique = element.childNodes[ i ].nodeName;\n\n\t\t\t\t\tvar light = element.childNodes[ i ];\n\n\t\t\t\t\tfor ( var j = 0; j < light.childNodes.length; j ++ ) {\n\n\t\t\t\t\t\tvar child = light.childNodes[j];\n\n\t\t\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\tvar rgba = _floats( child.textContent );\n\t\t\t\t\t\t\t\tthis.color = new THREE.Color(0);\n\t\t\t\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\n\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'falloff_angle':\n\n\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat( child.textContent );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\t\t\tvar f = parseFloat( child.textContent );\n\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt( 1 / f ) : 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tLight.prototype.parseTechnique = function ( element ) {\n\n\t\tthis.profile = element.getAttribute( 'profile' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'intensity':\n\n\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceLight() {\n\n\t\tthis.url = \"\";\n\n\t}\n\n\tInstanceLight.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\n\t};\n\n\tfunction KinematicsModel( ) {\n\n\t\tthis.id = '';\n\t\tthis.name = '';\n\t\tthis.joints = [];\n\t\tthis.links = [];\n\n\t}\n\n\tKinematicsModel.prototype.parse = function( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.joints = [];\n\t\tthis.links = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tKinematicsModel.prototype.parseCommon = function( element ) {\n\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\n\n\t\t\t\tcase 'joint':\n\t\t\t\t\tthis.joints.push( (new Joint()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'link':\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Joint( ) {\n\n\t\tthis.sid = '';\n\t\tthis.name = '';\n\t\tthis.axis = new THREE.Vector3();\n\t\tthis.limits = {\n\t\t\tmin: 0,\n\t\t\tmax: 0\n\t\t};\n\t\tthis.type = '';\n\t\tthis.static = false;\n\t\tthis.zeroPosition = 0.0;\n\t\tthis.middlePosition = 0.0;\n\n\t}\n\n\tJoint.prototype.parse = function( element ) {\n\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.axis = new THREE.Vector3();\n\t\tthis.limits = {\n\t\t\tmin: 0,\n\t\t\tmax: 0\n\t\t};\n\t\tthis.type = '';\n\t\tthis.static = false;\n\t\tthis.zeroPosition = 0.0;\n\t\tthis.middlePosition = 0.0;\n\n\t\tvar axisElement = element.querySelector('axis');\n\t\tvar _axis = _floats(axisElement.textContent);\n\t\tthis.axis = getConvertedVec3(_axis, 0);\n\n\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\n\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\n\n\t\tthis.limits = {\n\t\t\tmin: min,\n\t\t\tmax: max\n\t\t};\n\n\t\tvar jointTypes = [ 'prismatic', 'revolute' ];\n\t\tfor (var i = 0; i < jointTypes.length; i ++ ) {\n\n\t\t\tvar type = jointTypes[ i ];\n\n\t\t\tvar jointElement = element.querySelector(type);\n\n\t\t\tif ( jointElement ) {\n\n\t\t\t\tthis.type = type;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if the min is equal to or somehow greater than the max, consider the joint static\n\t\tif ( this.limits.min >= this.limits.max ) {\n\n\t\t\tthis.static = true;\n\n\t\t}\n\n\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\n\t\treturn this;\n\n\t};\n\n\tfunction Link( ) {\n\n\t\tthis.sid = '';\n\t\tthis.name = '';\n\t\tthis.transforms = [];\n\t\tthis.attachments = [];\n\n\t}\n\n\tLink.prototype.parse = function( element ) {\n\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.transforms = [];\n\t\tthis.attachments = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'attachment_full':\n\t\t\t\t\tthis.attachments.push( (new Attachment()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Attachment( ) {\n\n\t\tthis.joint = '';\n\t\tthis.transforms = [];\n\t\tthis.links = [];\n\n\t}\n\n\tAttachment.prototype.parse = function( element ) {\n\n\t\tthis.joint = element.getAttribute('joint').split('/').pop();\n\t\tthis.links = [];\n\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'link':\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction _source( element ) {\n\n\t\tvar id = element.getAttribute( 'id' );\n\n\t\tif ( sources[ id ] != undefined ) {\n\n\t\t\treturn sources[ id ];\n\n\t\t}\n\n\t\tsources[ id ] = ( new Source(id )).parse( element );\n\t\treturn sources[ id ];\n\n\t}\n\n\tfunction _nsResolver( nsPrefix ) {\n\n\t\tif ( nsPrefix === \"dae\" ) {\n\n\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfunction _bools( str ) {\n\n\t\tvar raw = _strings( str );\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( (raw[i] === 'true' || raw[i] === '1') ? true : false );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfunction _floats( str ) {\n\n\t\tvar raw = _strings(str);\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( parseFloat( raw[ i ] ) );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfunction _ints( str ) {\n\n\t\tvar raw = _strings( str );\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( parseInt( raw[ i ], 10 ) );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfunction _strings( str ) {\n\n\t\treturn ( str.length > 0 ) ? _trimString( str ).split( /\\s+/ ) : [];\n\n\t}\n\n\tfunction _trimString( str ) {\n\n\t\treturn str.replace( /^\\s+/, \"\" ).replace( /\\s+$/, \"\" );\n\n\t}\n\n\tfunction _attr_as_float( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn parseFloat( element.getAttribute( name ) );\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t}\n\n\tfunction _attr_as_int( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn parseInt( element.getAttribute( name ), 10) ;\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t}\n\n\tfunction _attr_as_string( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn element.getAttribute( name );\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t}\n\n\tfunction _format_float( f, num ) {\n\n\t\tif ( f === undefined ) {\n\n\t\t\tvar s = '0.';\n\n\t\t\twhile ( s.length < num + 2 ) {\n\n\t\t\t\ts += '0';\n\n\t\t\t}\n\n\t\t\treturn s;\n\n\t\t}\n\n\t\tnum = num || 2;\n\n\t\tvar parts = f.toString().split( '.' );\n\t\tparts[ 1 ] = parts.length > 1 ? parts[ 1 ].substr( 0, num ) : \"0\";\n\n\t\twhile ( parts[ 1 ].length < num ) {\n\n\t\t\tparts[ 1 ] += '0';\n\n\t\t}\n\n\t\treturn parts.join( '.' );\n\n\t}\n\n\tfunction loadTextureImage ( texture, url ) {\n\n\t\tvar loader = new THREE.ImageLoader();\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t} );\n\n\t}\n\n\tfunction extractDoubleSided( obj, element ) {\n\n\t\tobj.doubleSided = false;\n\n\t\tvar node = element.querySelectorAll('extra double_sided')[0];\n\n\t\tif ( node ) {\n\n\t\t\tif ( node && parseInt( node.textContent, 10 ) === 1 ) {\n\n\t\t\t\tobj.doubleSided = true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Up axis conversion\n\n\tfunction setUpConversion() {\n\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\n\n\t\t\tupConversion = null;\n\n\t\t} else {\n\n\t\t\tswitch ( colladaUp ) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction fixCoords( data, sign ) {\n\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tswitch ( upConversion ) {\n\n\t\t\tcase 'XtoY':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = sign * data[ 1 ];\n\t\t\t\tdata[ 1 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XtoZ':\n\n\t\t\t\tvar tmp = data[ 2 ];\n\t\t\t\tdata[ 2 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 0 ];\n\t\t\t\tdata[ 0 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoX':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoZ':\n\n\t\t\t\tvar tmp = data[ 1 ];\n\t\t\t\tdata[ 1 ] = sign * data[ 2 ];\n\t\t\t\tdata[ 2 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoX':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 2 ];\n\t\t\t\tdata[ 2 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoY':\n\n\t\t\t\tvar tmp = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 2 ];\n\t\t\t\tdata[ 2 ] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction getConvertedTranslation( axis, data ) {\n\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tswitch ( axis ) {\n\t\t\tcase 'X':\n\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\n\t\t\t\tbreak;\n\t\t\tcase 'Y':\n\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\n\t\t\t\tbreak;\n\t\t\tcase 'Z':\n\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data ;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction getConvertedVec3( data, offset ) {\n\n\t\tvar arr = [ data[ offset ], data[ offset + 1 ], data[ offset + 2 ] ];\n\t\tfixCoords( arr, -1 );\n\t\treturn new THREE.Vector3( arr[ 0 ], arr[ 1 ], arr[ 2 ] );\n\n\t}\n\n\tfunction getConvertedMat4( data ) {\n\n\t\tif ( options.convertUpAxis ) {\n\n\t\t\t// First fix rotation and scale\n\n\t\t\t// Columns first\n\t\t\tvar arr = [ data[ 0 ], data[ 4 ], data[ 8 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 0 ] = arr[ 0 ];\n\t\t\tdata[ 4 ] = arr[ 1 ];\n\t\t\tdata[ 8 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 1 ], data[ 5 ], data[ 9 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 1 ] = arr[ 0 ];\n\t\t\tdata[ 5 ] = arr[ 1 ];\n\t\t\tdata[ 9 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 2 ], data[ 6 ], data[ 10 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 2 ] = arr[ 0 ];\n\t\t\tdata[ 6 ] = arr[ 1 ];\n\t\t\tdata[ 10 ] = arr[ 2 ];\n\t\t\t// Rows second\n\t\t\tarr = [ data[ 0 ], data[ 1 ], data[ 2 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 0 ] = arr[ 0 ];\n\t\t\tdata[ 1 ] = arr[ 1 ];\n\t\t\tdata[ 2 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 4 ], data[ 5 ], data[ 6 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 4 ] = arr[ 0 ];\n\t\t\tdata[ 5 ] = arr[ 1 ];\n\t\t\tdata[ 6 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 8 ], data[ 9 ], data[ 10 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 8 ] = arr[ 0 ];\n\t\t\tdata[ 9 ] = arr[ 1 ];\n\t\t\tdata[ 10 ] = arr[ 2 ];\n\n\t\t\t// Now fix translation\n\t\t\tarr = [ data[ 3 ], data[ 7 ], data[ 11 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 3 ] = arr[ 0 ];\n\t\t\tdata[ 7 ] = arr[ 1 ];\n\t\t\tdata[ 11 ] = arr[ 2 ];\n\n\t\t}\n\n\t\treturn new THREE.Matrix4().set(\n\t\t\tdata[0], data[1], data[2], data[3],\n\t\t\tdata[4], data[5], data[6], data[7],\n\t\t\tdata[8], data[9], data[10], data[11],\n\t\t\tdata[12], data[13], data[14], data[15]\n\t\t\t);\n\n\t}\n\n\tfunction getConvertedIndex( index ) {\n\n\t\tif ( index > -1 && index < 3 ) {\n\n\t\t\tvar members = [ 'X', 'Y', 'Z' ],\n\t\t\t\tindices = { X: 0, Y: 1, Z: 2 };\n\n\t\t\tindex = getConvertedMember( members[ index ] );\n\t\t\tindex = indices[ index ];\n\n\t\t}\n\n\t\treturn index;\n\n\t}\n\n\tfunction getConvertedMember( member ) {\n\n\t\tif ( options.convertUpAxis ) {\n\n\t\t\tswitch ( member ) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'YtoX':\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoX':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn member;\n\n\t}\n\n\treturn {\n\n\t\tload: load,\n\t\tparse: parse,\n\t\tsetPreferredShading: setPreferredShading,\n\t\tapplySkin: applySkin,\n\t\tgeometries : geometries,\n\t\toptions: options\n\n\t};\n\n};\n\nexport { ColladaLoader }\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ColladaLoader.js","import * as THREE from 'three';\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\n\nconst DDSLoader = function () {\n\n\tthis._parser = DDSLoader.parse;\n\n};\n\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\nDDSLoader.prototype.constructor = DDSLoader;\n\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\n\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\t// Adapted from @toji's DDS utils\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\n\n\t// All values and structures referenced from:\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\n\n\tvar DDS_MAGIC = 0x20534444;\n\n\tvar DDSD_CAPS = 0x1,\n\t\tDDSD_HEIGHT = 0x2,\n\t\tDDSD_WIDTH = 0x4,\n\t\tDDSD_PITCH = 0x8,\n\t\tDDSD_PIXELFORMAT = 0x1000,\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\n\t\tDDSD_LINEARSIZE = 0x80000,\n\t\tDDSD_DEPTH = 0x800000;\n\n\tvar DDSCAPS_COMPLEX = 0x8,\n\t\tDDSCAPS_MIPMAP = 0x400000,\n\t\tDDSCAPS_TEXTURE = 0x1000;\n\n\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t\tDDSCAPS2_VOLUME = 0x200000;\n\n\tvar DDPF_ALPHAPIXELS = 0x1,\n\t\tDDPF_ALPHA = 0x2,\n\t\tDDPF_FOURCC = 0x4,\n\t\tDDPF_RGB = 0x40,\n\t\tDDPF_YUV = 0x200,\n\t\tDDPF_LUMINANCE = 0x20000;\n\n\tfunction fourCCToInt32( value ) {\n\n\t\treturn value.charCodeAt( 0 ) +\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\n\t\t\t( value.charCodeAt( 3 ) << 24 );\n\n\t}\n\n\tfunction int32ToFourCC( value ) {\n\n\t\treturn String.fromCharCode(\n\t\t\tvalue & 0xff,\n\t\t\t( value >> 8 ) & 0xff,\n\t\t\t( value >> 16 ) & 0xff,\n\t\t\t( value >> 24 ) & 0xff\n\t\t);\n\n\t}\n\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\n\n\t\tvar dataLength = width * height * 4;\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\n\t\tvar byteArray = new Uint8Array( dataLength );\n\t\tvar dst = 0;\n\t\tvar src = 0;\n\t\tfor ( var y = 0; y < height; y ++ ) {\n\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\n\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\n\n\t\t\t}\n\n\t\t}\n\t\treturn byteArray;\n\n\t}\n\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\n\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\n\n\t// Offsets into the header array\n\n\tvar off_magic = 0;\n\n\tvar off_size = 1;\n\tvar off_flags = 2;\n\tvar off_height = 3;\n\tvar off_width = 4;\n\n\tvar off_mipmapCount = 7;\n\n\tvar off_pfFlags = 20;\n\tvar off_pfFourCC = 21;\n\tvar off_RGBBitCount = 22;\n\tvar off_RBitMask = 23;\n\tvar off_GBitMask = 24;\n\tvar off_BBitMask = 25;\n\tvar off_ABitMask = 26;\n\n\tvar off_caps = 27;\n\tvar off_caps2 = 28;\n\tvar off_caps3 = 29;\n\tvar off_caps4 = 30;\n\n\t// Parse header\n\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\n\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\n\n\t\tconsole.error( 'DDSLoader.parse: Invalid magic number in DDS header.' );\n\t\treturn dds;\n\n\t}\n\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\n\n\t\tconsole.error( 'DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\n\t\treturn dds;\n\n\t}\n\n\tvar blockBytes;\n\n\tvar fourCC = header[ off_pfFourCC ];\n\n\tvar isRGBAUncompressed = false;\n\n\tswitch ( fourCC ) {\n\n\t\tcase FOURCC_DXT1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT3:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT5:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\n\t\t\tbreak;\n\n\t\tcase FOURCC_ETC1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tif ( header[ off_RGBBitCount ] === 32\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000  ) {\n\n\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\tblockBytes = 64;\n\t\t\t\tdds.format = THREE.RGBAFormat;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\n\t\t\t\treturn dds;\n\n\t\t\t}\n\t}\n\n\tdds.mipmapCount = 1;\n\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\n\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\n\n\t}\n\n\tvar caps2 = header[ off_caps2 ];\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\tif ( dds.isCubemap && (\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\n\t\t) ) {\n\n\t\tconsole.error( 'DDSLoader.parse: Incomplete cubemap faces' );\n\t\treturn dds;\n\n\t}\n\n\tdds.width = header[ off_width ];\n\tdds.height = header[ off_height ];\n\n\tvar dataOffset = header[ off_size ] + 4;\n\n\t// Extract mipmaps buffers\n\n\tvar faces = dds.isCubemap ? 6 : 1;\n\n\tfor ( var face = 0; face < faces; face ++ ) {\n\n\t\tvar width = dds.width;\n\t\tvar height = dds.height;\n\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\n\n\t\t\tif ( isRGBAUncompressed ) {\n\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\n\t\t\t\tvar dataLength = byteArray.length;\n\n\t\t\t} else {\n\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\n\n\t\t\t}\n\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\tdds.mipmaps.push( mipmap );\n\n\t\t\tdataOffset += dataLength;\n\n\t\t\twidth = Math.max( width >> 1, 1 );\n\t\t\theight = Math.max( height >> 1, 1 );\n\n\t\t}\n\n\t}\n\n\treturn dds;\n\n};\n\nexport { DDSLoader };\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/DDSLoader.js","import * as THREE from 'three';\nimport { DDSLoader } from './DDSLoader'\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/MTLLoader.js\n\nconst LoaderHandlers = THREE.Loader.Handlers;\nLoaderHandlers.add( /\\.dds$/i, new DDSLoader() );\n\nconst MTLLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nMTLLoader.prototype = {\n\n\tconstructor: MTLLoader,\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/**\n\t * Set base path for resolving references.\n\t * If set this path will be prepended to each loaded and found reference.\n\t *\n\t * @see setTexturePath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\n\t},\n\n\t/**\n\t * Set base path for resolving texture references.\n\t * If set this path will be prepended found texture reference.\n\t * If not set and setPath is, it will be used as texture base path.\n\t *\n\t * @see setPath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetTexturePath: function ( path ) {\n\n\t\tthis.texturePath = path;\n\n\t},\n\n\tsetBaseUrl: function ( path ) {\n\n\t\tconsole.warn( 'MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\n\n\t\tthis.setTexturePath( path );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\n\t */\n\tparse: function ( text ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else if ( info ) {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n};\n\n/**\n * Create a new THREE-MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\n\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tcrossOrigin: 'Anonymous',\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function ( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function ( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function ( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function () {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tvar texParams = scope.getTextureParams( value, params );\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\t\t\tvar n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( \"map\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( \"specularMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( \"normalMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( \"bumpMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tgetTextureParams: function ( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\n\t\t\toffset: new THREE.Vector2( 0, 0 )\n\n\t\t };\n\n\t\tvar items = value.split( /\\s+/ );\n\t\tvar pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar loader = LoaderHandlers.get( url );\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new THREE.TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\nexport { MTLLoader };\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/MTLLoader.js","import * as THREE from 'three';\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\n\nconst OBJLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\tthis.materials = null;\n\n\tthis.regexp = {\n\t\t// v float float float\n\t\tvertex_pattern           : /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vn float float float\n\t\tnormal_pattern           : /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vt float float\n\t\tuv_pattern               : /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// f vertex vertex vertex\n\t\tface_vertex              : /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\t\t// f vertex/uv vertex/uv vertex/uv\n\t\tface_vertex_uv           : /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\tface_vertex_uv_normal    : /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex//normal vertex//normal vertex//normal\n\t\tface_vertex_normal       : /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\t\t// o object_name | g group_name\n\t\tobject_pattern           : /^[og]\\s*(.+)?/,\n\t\t// s boolean\n\t\tsmoothing_pattern        : /^s\\s+(\\d+|on|off)/,\n\t\t// mtllib file_reference\n\t\tmaterial_library_pattern : /^mtllib /,\n\t\t// usemtl material_name\n\t\tmaterial_use_pattern     : /^usemtl /\n\t};\n\n};\n\nOBJLoader.prototype = {\n\n\tconstructor: OBJLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\n\t},\n\n\tsetMaterials: function ( materials ) {\n\n\t\tthis.materials = materials;\n\n\t},\n\n\t_createParserState : function () {\n\n\t\tvar state = {\n\t\t\tobjects  : [],\n\t\t\tobject   : {},\n\n\t\t\tvertices : [],\n\t\t\tnormals  : [],\n\t\t\tuvs      : [],\n\n\t\t\tmaterialLibraries : [],\n\n\t\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname : name || '',\n\t\t\t\t\tfromDeclaration : ( fromDeclaration !== false ),\n\n\t\t\t\t\tgeometry : {\n\t\t\t\t\t\tvertices : [],\n\t\t\t\t\t\tnormals  : [],\n\t\t\t\t\t\tuvs      : []\n\t\t\t\t\t},\n\t\t\t\t\tmaterials : [],\n\t\t\t\t\tsmooth : true,\n\n\t\t\t\t\tstartMaterial : function( name, libraries ) {\n\n\t\t\t\t\t\tvar previous = this._finalize( false );\n\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex      : this.materials.length,\n\t\t\t\t\t\t\tname       : name || '',\n\t\t\t\t\t\t\tmtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\t\tsmooth     : ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\t\tgroupStart : ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\tinherited  : false,\n\n\t\t\t\t\t\t\tclone : function( index ) {\n\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\tindex      : ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\t\tname       : this.name,\n\t\t\t\t\t\t\t\t\tmtllib     : this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth     : this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart : 0,\n\t\t\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\t\t\tinherited  : false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\t\treturn material;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial : function() {\n\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize : function( end ) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {\n\t\t\t\t\t\t\t\tif ( this.materials[mi].groupCount <= 0 ) {\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\tname   : '',\n\t\t\t\t\t\t\t\tsmooth : this.smooth\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Inherit previous objects material.\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\" ) {\n\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push( this.object );\n\n\t\t\t},\n\n\t\t\tfinalize : function() {\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t\t},\n\n\t\t\taddVertex: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexLine: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddNormal : function ( a, b, c ) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddUV: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\n\t\t\t},\n\n\t\t\taddUVLine: function ( a ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\n\t\t\t},\n\n\t\t\taddFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\n\t\t\t\tvar id;\n\n\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\tthis.addVertex( ia, ib, ic );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tid = this.parseVertexIndex( d, vLen );\n\n\t\t\t\t\tthis.addVertex( ia, ib, id );\n\t\t\t\t\tthis.addVertex( ib, ic, id );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ua !== undefined ) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseUVIndex( ud, uvLen );\n\n\t\t\t\t\t\tthis.addUV( ia, ib, id );\n\t\t\t\t\t\tthis.addUV( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( na !== undefined ) {\n\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\n\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseNormalIndex( nd, nLen );\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, id );\n\t\t\t\t\t\tthis.addNormal( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject( '', false );\n\n\t\treturn state;\n\n\t},\n\n\tparse: function ( text ) {\n\n\t\tconsole.time( 'OBJLoader' );\n\n\t\tvar state = this._createParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\n\t\tvar lineLength = 0;\n\t\tvar result = [];\n\n\t\t// Faster to just trim left side of the line. Use if available.\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\n\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tline = lines[ i ];\n\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\tlineLength = line.length;\n\n\t\t\tif ( lineLength === 0 ) continue;\n\n\t\t\tlineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tlineSecondChar = line.charAt( 1 );\n\n\t\t\t\tif ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                  1      2      3\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                   1      2      3\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0               1      2\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected vertex/normal/uv line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"f\" ) {\n\n\t\t\t\tif ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],\n\t\t\t\t\t\tresult[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex vertex vertex\n\t\t\t\t\t// 0            1    2    3   4\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected face line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"l\" ) {\n\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\n\t\t\t\tvar lineVertices = [], lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\tvar name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( this.regexp.material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( this.regexp.material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\n\t\t\t\tstate.object.smooth = ( value === '1' || value === 'on' );\n\n\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\tif ( material ) {\n\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tthrow new Error( \"Unexpected line: '\" + line  + \"'\" );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tvar container = new THREE.Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\tvar object = state.objects[ i ];\n\t\t\tvar geometry = object.geometry;\n\t\t\tvar materials = object.materials;\n\t\t\tvar isLine = ( geometry.type === 'Line' );\n\n\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\n\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );\n\n\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\tbuffergeometry.computeVertexNormals();\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );\n\n\t\t\t}\n\n\t\t\t// Create materials\n\n\t\t\tvar createdMaterials = [];\n\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\tvar material = undefined;\n\n\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\n\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\n\t\t\t\t\t\tmaterialLine.copy( material );\n\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! material ) {\n\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n\t\t\t\tcreatedMaterials.push(material);\n\n\t\t\t}\n\n\t\t\t// Create mesh\n\n\t\t\tvar mesh;\n\n\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t}\n\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );\n\n\t\t\t} else {\n\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\n\t\t\t}\n\n\t\t\tmesh.name = object.name;\n\n\t\t\tcontainer.add( mesh );\n\n\t\t}\n\n\t\tconsole.timeEnd( 'OBJLoader' );\n\n\t\treturn container;\n\n\t}\n\n};\n\nexport { OBJLoader };\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/OBJLoader.js","import * as THREE from 'three';\n\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js\n\nconst STLLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nSTLLoader.prototype = {\n\n\tconstructor: STLLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( scope.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( data ) {\n\n\t\tvar isBinary = function () {\n\n\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\treader = new DataView( binData );\n\t\t\tface_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\n\t\t\tn_faces = reader.getUint32( 80, true );\n\t\t\texpect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\n\n\t\t\tif ( expect === reader.byteLength ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\n\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\t\t\tvar solid = [ 115, 111, 108, 105, 100 ];\n\n\t\t\tfor ( var i = 0; i < 5; i ++ ) {\n\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\n\n\t\t\t\tif ( solid[ i ] != reader.getUint8( i, false ) ) return true;\n\n \t\t\t}\n\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\n\t\t\treturn false;\n\n\t\t};\n\n\t\tvar binData = this.ensureBinary( data );\n\n\t\treturn isBinary() ? this.parseBinary( binData ) : this.parseASCII( this.ensureString( data ) );\n\n\t},\n\n\tparseBinary: function ( data ) {\n\n\t\tvar reader = new DataView( data );\n\t\tvar faces = reader.getUint32( 80, true );\n\n\t\tvar r, g, b, hasColors = false, colors;\n\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t// process STL header\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\n\n\t\tfor ( var index = 0; index < 80 - 10; index ++ ) {\n\n\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\n\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\n\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\n\n\t\t\t\thasColors = true;\n\t\t\t\tcolors = [];\n\n\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\n\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\n\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\n\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar dataOffset = 84;\n\t\tvar faceLength = 12 * 4 + 2;\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\n\t\tfor ( var face = 0; face < faces; face ++ ) {\n\n\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\tvar normalX = reader.getFloat32( start, true );\n\t\t\tvar normalY = reader.getFloat32( start + 4, true );\n\t\t\tvar normalZ = reader.getFloat32( start + 8, true );\n\n\t\t\tif ( hasColors ) {\n\n\t\t\t\tvar packedColor = reader.getUint16( start + 48, true );\n\n\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\n\n\t\t\t\t\t// facet has its own unique color\n\n\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\n\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\n\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr = defaultR;\n\t\t\t\t\tg = defaultG;\n\t\t\t\t\tb = defaultB;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 1; i <= 3; i ++ ) {\n\n\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart, true ) );\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 4, true ) );\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 8, true ) );\n\n\t\t\t\tnormals.push( normalX, normalY, normalZ );\n\n\t\t\t\tif ( hasColors ) {\n\n\t\t\t\t\tcolors.push( r, g, b );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\n\n\t\tif ( hasColors ) {\n\n\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( colors ), 3 ) );\n\t\t\tgeometry.hasColors = true;\n\t\t\tgeometry.alpha = alpha;\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tparseASCII: function ( data ) {\n\n\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\n\t\tgeometry = new THREE.BufferGeometry();\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\n\t\tvar normal = new THREE.Vector3();\n\n\t\twhile ( ( result = patternFace.exec( data ) ) !== null ) {\n\n\t\t\ttext = result[ 0 ];\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\n\n\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\n\t\t\t\tnormal.y = parseFloat( result[ 3 ] );\n\t\t\t\tnormal.z = parseFloat( result[ 5 ] );\n\n\t\t\t}\n\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\n\n\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) );\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\n\n\t\treturn geometry;\n\n\t},\n\n\tensureString: function ( buf ) {\n\n\t\tif ( typeof buf !== \"string\" ) {\n\n\t\t\tvar array_buffer = new Uint8Array( buf );\n\t\t\tvar strArray = [];\n\t\t\tfor ( var i = 0; i < buf.byteLength; i ++ ) {\n\n\t\t\t\tstrArray.push(String.fromCharCode( array_buffer[ i ] )); // implicitly assumes little-endian\n\n\t\t\t}\n\t\t\treturn strArray.join('');\n\n\t\t} else {\n\n\t\t\treturn buf;\n\n\t\t}\n\n\t},\n\n\tensureBinary: function ( buf ) {\n\n\t\tif ( typeof buf === \"string\" ) {\n\n\t\t\tvar array_buffer = new Uint8Array( buf.length );\n\t\t\tfor ( var i = 0; i < buf.length; i ++ ) {\n\n\t\t\t\tarray_buffer[ i ] = buf.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\n\n\t\t\t}\n\t\t\treturn array_buffer.buffer || array_buffer;\n\n\t\t} else {\n\n\t\t\treturn buf;\n\n\t\t}\n\n\t}\n\n};\n\nexport { STLLoader };\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/STLLoader.js"],"sourceRoot":""}